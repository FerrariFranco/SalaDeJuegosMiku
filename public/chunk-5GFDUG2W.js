import{A as Ta,B as Lc,C as qt,D as vt,a as H,b as De,c as Jf,d as N,e as i_,f as kc,g as o_,h as s_,i as a_,j as u_,k as Xf,l as c_,m as _a,n as ep,o as Oc,p as l_,q as d_,r as tp,s as ke,t as hi,u as yn,v as Fc,w as Da,x as np,y as h_,z as f_}from"./chunk-GSQKSQXR.js";function p_(t,e){return Object.is(t,e)}var Ze=null,Vc=!1,jc=1,jn=Symbol("SIGNAL");function ye(t){let e=Ze;return Ze=t,e}function g_(){return Ze}var Ca={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function op(t){if(Vc)throw new Error("");if(Ze===null)return;Ze.consumerOnSignalRead(t);let e=Ze.nextProducerIndex++;if(qc(Ze),e<Ze.producerNode.length&&Ze.producerNode[e]!==t&&ba(Ze)){let n=Ze.producerNode[e];$c(n,Ze.producerIndexOfThis[e])}Ze.producerNode[e]!==t&&(Ze.producerNode[e]=t,Ze.producerIndexOfThis[e]=ba(Ze)?w_(t,Ze,e):0),Ze.producerLastReadVersion[e]=t.version}function CM(){jc++}function m_(t){if(!(ba(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===jc)){if(!t.producerMustRecompute(t)&&!ap(t)){t.dirty=!1,t.lastCleanEpoch=jc;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=jc}}function y_(t){if(t.liveConsumerNode===void 0)return;let e=Vc;Vc=!0;try{for(let n of t.liveConsumerNode)n.dirty||SM(n)}finally{Vc=e}}function v_(){return Ze?.consumerAllowSignalWrites!==!1}function SM(t){t.dirty=!0,y_(t),t.consumerMarkedDirty?.(t)}function Bc(t){return t&&(t.nextProducerIndex=0),ye(t)}function sp(t,e){if(ye(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(ba(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)$c(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function ap(t){qc(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(m_(n),r!==n.version))return!0}return!1}function up(t){if(qc(t),ba(t))for(let e=0;e<t.producerNode.length;e++)$c(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function w_(t,e,n){if(I_(t),t.liveConsumerNode.length===0&&E_(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=w_(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function $c(t,e){if(I_(t),t.liveConsumerNode.length===1&&E_(t))for(let r=0;r<t.producerNode.length;r++)$c(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];qc(i),i.producerIndexOfThis[r]=e}}function ba(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function qc(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function I_(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function E_(t){return t.producerNode!==void 0}function __(t){let e=Object.create(AM);e.computation=t;let n=()=>{if(m_(e),op(e),e.value===Uc)throw e.error;return e.value};return n[jn]=e,n}var rp=Symbol("UNSET"),ip=Symbol("COMPUTING"),Uc=Symbol("ERRORED"),AM=De(H({},Ca),{value:rp,dirty:!0,error:null,equal:p_,producerMustRecompute(t){return t.value===rp||t.value===ip},producerRecomputeValue(t){if(t.value===ip)throw new Error("Detected cycle in computations.");let e=t.value;t.value=ip;let n=Bc(t),r;try{r=t.computation()}catch(i){r=Uc,t.error=i}finally{sp(t,n)}if(e!==rp&&e!==Uc&&r!==Uc&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function RM(){throw new Error}var D_=RM;function T_(){D_()}function b_(t){D_=t}var xM=null;function C_(t){let e=Object.create(A_);e.value=t;let n=()=>(op(e),e.value);return n[jn]=e,n}function cp(t,e){v_()||T_(),t.equal(t.value,e)||(t.value=e,MM(t))}function S_(t,e){v_()||T_(),cp(t,e(t.value))}var A_=De(H({},Ca),{equal:p_,value:void 0});function MM(t){t.version++,CM(),y_(t),xM?.()}function ne(t){return typeof t=="function"}function yo(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var zc=yo(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function fi(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Le=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ne(r))try{r()}catch(o){e=o instanceof zc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{R_(o)}catch(s){e=e??[],s instanceof zc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new zc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)R_(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&fi(n,e)}remove(e){let{_finalizers:n}=this;n&&fi(n,e),e instanceof t&&e._removeParent(this)}};Le.EMPTY=(()=>{let t=new Le;return t.closed=!0,t})();var lp=Le.EMPTY;function Hc(t){return t instanceof Le||t&&"closed"in t&&ne(t.remove)&&ne(t.add)&&ne(t.unsubscribe)}function R_(t){ne(t)?t():t.unsubscribe()}var on={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var vo={setTimeout(t,e,...n){let{delegate:r}=vo;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=vo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Gc(t){vo.setTimeout(()=>{let{onUnhandledError:e}=on;if(e)e(t);else throw t})}function Sa(){}var x_=dp("C",void 0,void 0);function M_(t){return dp("E",void 0,t)}function N_(t){return dp("N",t,void 0)}function dp(t,e,n){return{kind:t,value:e,error:n}}var pi=null;function wo(t){if(on.useDeprecatedSynchronousErrorHandling){let e=!pi;if(e&&(pi={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=pi;if(pi=null,n)throw r}}else t()}function P_(t){on.useDeprecatedSynchronousErrorHandling&&pi&&(pi.errorThrown=!0,pi.error=t)}var gi=class extends Le{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Hc(e)&&e.add(this)):this.destination=kM}static create(e,n,r){return new Un(e,n,r)}next(e){this.isStopped?fp(N_(e),this):this._next(e)}error(e){this.isStopped?fp(M_(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?fp(x_,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},NM=Function.prototype.bind;function hp(t,e){return NM.call(t,e)}var pp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Wc(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Wc(r)}else Wc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Wc(n)}}},Un=class extends gi{constructor(e,n,r){super();let i;if(ne(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&on.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&hp(e.next,o),error:e.error&&hp(e.error,o),complete:e.complete&&hp(e.complete,o)}):i=e}this.destination=new pp(i)}};function Wc(t){on.useDeprecatedSynchronousErrorHandling?P_(t):Gc(t)}function PM(t){throw t}function fp(t,e){let{onStoppedNotification:n}=on;n&&vo.setTimeout(()=>n(t,e))}var kM={closed:!0,next:Sa,error:PM,complete:Sa};var Io=typeof Symbol=="function"&&Symbol.observable||"@@observable";function wt(t){return t}function gp(...t){return mp(t)}function mp(t){return t.length===0?wt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var re=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=FM(n)?n:new Un(n,r,i);return wo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=k_(r),new r((i,o)=>{let s=new Un({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Io](){return this}pipe(...n){return mp(n)(this)}toPromise(n){return n=k_(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function k_(t){var e;return(e=t??on.Promise)!==null&&e!==void 0?e:Promise}function OM(t){return t&&ne(t.next)&&ne(t.error)&&ne(t.complete)}function FM(t){return t&&t instanceof gi||OM(t)&&Hc(t)}function yp(t){return ne(t?.lift)}function ae(t){return e=>{if(yp(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(t,e,n,r,i){return new vp(t,e,n,r,i)}var vp=class extends gi{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Eo(){return ae((t,e)=>{let n=null;t._refCount++;let r=ue(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var _o=class extends re{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,yp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Le;let n=this.getSubject();e.add(this.source.subscribe(ue(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Le.EMPTY)}return e}refCount(){return Eo()(this)}};var O_=yo(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var je=(()=>{class t extends re{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Kc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new O_}next(n){wo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){wo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){wo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?lp:(this.currentObservers=null,o.push(n),new Le(()=>{this.currentObservers=null,fi(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new re;return n.source=this,n}}return t.create=(e,n)=>new Kc(e,n),t})(),Kc=class extends je{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:lp}};var ot=class extends je{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Aa={now(){return(Aa.delegate||Date).now()},delegate:void 0};var Qc=class extends je{constructor(e=1/0,n=1/0,r=Aa){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var Yc=class extends Le{constructor(e,n){super()}schedule(e,n=0){return this}};var Ra={setInterval(t,e,...n){let{delegate:r}=Ra;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Ra;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Do=class extends Yc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Ra.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Ra.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,fi(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var To=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};To.now=Aa.now;var bo=class extends To{constructor(e,n=To.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var wr=new bo(Do),wp=wr;var Zc=class extends Do{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Jc=class extends bo{};var Ip=new Jc(Zc);var It=new re(t=>t.complete());function Xc(t){return t&&ne(t.schedule)}function Ep(t){return t[t.length-1]}function el(t){return ne(Ep(t))?t.pop():void 0}function vn(t){return Xc(Ep(t))?t.pop():void 0}function F_(t,e){return typeof Ep(t)=="number"?t.pop():e}var tl=t=>t&&typeof t.length=="number"&&typeof t!="function";function nl(t){return ne(t?.then)}function rl(t){return ne(t[Io])}function il(t){return Symbol.asyncIterator&&ne(t?.[Symbol.asyncIterator])}function ol(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function LM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var sl=LM();function al(t){return ne(t?.[sl])}function ul(t){return o_(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield kc(n.read());if(i)return yield kc(void 0);yield yield kc(r)}}finally{n.releaseLock()}})}function cl(t){return ne(t?.getReader)}function Re(t){if(t instanceof re)return t;if(t!=null){if(rl(t))return VM(t);if(tl(t))return jM(t);if(nl(t))return UM(t);if(il(t))return L_(t);if(al(t))return BM(t);if(cl(t))return $M(t)}throw ol(t)}function VM(t){return new re(e=>{let n=t[Io]();if(ne(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function jM(t){return new re(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function UM(t){return new re(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Gc)})}function BM(t){return new re(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function L_(t){return new re(e=>{qM(t,e).catch(n=>e.error(n))})}function $M(t){return L_(ul(t))}function qM(t,e){var n,r,i,o;return i_(this,void 0,void 0,function*(){try{for(n=s_(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Mt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Lt(t,e=0){return ae((n,r)=>{n.subscribe(ue(r,i=>Mt(r,t,()=>r.next(i),e),()=>Mt(r,t,()=>r.complete(),e),i=>Mt(r,t,()=>r.error(i),e)))})}function zt(t,e=0){return ae((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function V_(t,e){return Re(t).pipe(zt(e),Lt(e))}function j_(t,e){return Re(t).pipe(zt(e),Lt(e))}function U_(t,e){return new re(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function B_(t,e){return new re(n=>{let r;return Mt(n,e,()=>{r=t[sl](),Mt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>ne(r?.return)&&r.return()})}function ll(t,e){if(!t)throw new Error("Iterable cannot be null");return new re(n=>{Mt(n,e,()=>{let r=t[Symbol.asyncIterator]();Mt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function $_(t,e){return ll(ul(t),e)}function q_(t,e){if(t!=null){if(rl(t))return V_(t,e);if(tl(t))return U_(t,e);if(nl(t))return j_(t,e);if(il(t))return ll(t,e);if(al(t))return B_(t,e);if(cl(t))return $_(t,e)}throw ol(t)}function ve(t,e){return e?q_(t,e):Re(t)}function Y(...t){let e=vn(t);return ve(t,e)}function Co(t,e){let n=ne(t)?t:()=>t,r=i=>i.error(n());return new re(e?i=>e.schedule(r,0,i):r)}function _p(t){return!!t&&(t instanceof re||ne(t.lift)&&ne(t.subscribe))}var Bn=yo(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function z_(t){return t instanceof Date&&!isNaN(t)}function ee(t,e){return ae((n,r)=>{let i=0;n.subscribe(ue(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:zM}=Array;function HM(t,e){return zM(e)?t(...e):t(e)}function dl(t){return ee(e=>HM(t,e))}var{isArray:GM}=Array,{getPrototypeOf:WM,prototype:KM,keys:QM}=Object;function hl(t){if(t.length===1){let e=t[0];if(GM(e))return{args:e,keys:null};if(YM(e)){let n=QM(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function YM(t){return t&&typeof t=="object"&&WM(t)===KM}function fl(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function xa(...t){let e=vn(t),n=el(t),{args:r,keys:i}=hl(t);if(r.length===0)return ve([],e);let o=new re(ZM(r,e,i?s=>fl(i,s):wt));return n?o.pipe(dl(n)):o}function ZM(t,e,n=wt){return r=>{H_(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)H_(e,()=>{let l=ve(t[u],e),d=!1;l.subscribe(ue(r,f=>{o[u]=f,d||(d=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function H_(t,e,n){t?Mt(n,t,e):e()}function G_(t,e,n,r,i,o,s,a){let u=[],l=0,d=0,f=!1,g=()=>{f&&!u.length&&!l&&e.complete()},y=A=>l<r?_(A):u.push(A),_=A=>{o&&e.next(A),l++;let C=!1;Re(n(A,d++)).subscribe(ue(e,P=>{i?.(P),o?y(P):e.next(P)},()=>{C=!0},void 0,()=>{if(C)try{for(l--;u.length&&l<r;){let P=u.shift();s?Mt(e,s,()=>_(P)):_(P)}g()}catch(P){e.error(P)}}))};return t.subscribe(ue(e,y,()=>{f=!0,g()})),()=>{a?.()}}function ze(t,e,n=1/0){return ne(e)?ze((r,i)=>ee((o,s)=>e(r,o,i,s))(Re(t(r,i))),n):(typeof e=="number"&&(n=e),ae((r,i)=>G_(r,i,t,n)))}function Ir(t=1/0){return ze(wt,t)}function W_(){return Ir(1)}function So(...t){return W_()(ve(t,vn(t)))}function pl(t){return new re(e=>{Re(t()).subscribe(e)})}function JM(...t){let e=el(t),{args:n,keys:r}=hl(t),i=new re(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let d=0;d<s;d++){let f=!1;Re(n[d]).subscribe(ue(o,g=>{f||(f=!0,l--),a[d]=g},()=>u--,void 0,()=>{(!u||!f)&&(l||o.next(r?fl(r,a):a),o.complete())}))}});return e?i.pipe(dl(e)):i}function K_(t=0,e,n=wp){let r=-1;return e!=null&&(Xc(e)?n=e:r=e),new re(i=>{let o=z_(t)?+t-n.now():t;o<0&&(o=0);let s=0;return n.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function XM(t=0,e=wr){return t<0&&(t=0),K_(t,t,e)}function Dp(...t){let e=vn(t),n=F_(t,1/0),r=t;return r.length?r.length===1?Re(r[0]):Ir(n)(ve(r,e)):It}function Je(t,e){return ae((n,r)=>{let i=0;n.subscribe(ue(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Er(t){return ae((e,n)=>{let r=null,i=!1,o;r=e.subscribe(ue(n,void 0,void 0,s=>{o=Re(t(s,Er(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Q_(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(ue(s,d=>{let f=l++;u=a?t(u,d,f):(a=!0,d),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function $n(t,e){return ne(e)?ze(t,e,1):ze(t,1)}function _r(t){return ae((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function qn(t){return t<=0?()=>It:ae((e,n)=>{let r=0;e.subscribe(ue(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Tp(t){return ee(()=>t)}function bp(t,e=wt){return t=t??eN,ae((n,r)=>{let i,o=!0;n.subscribe(ue(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function eN(t,e){return t===e}function gl(t=tN){return ae((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function tN(){return new Bn}function Dr(t){return ae((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Ht(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Je((i,o)=>t(i,o,r)):wt,qn(1),n?_r(e):gl(()=>new Bn))}function Ao(t){return t<=0?()=>It:ae((e,n)=>{let r=[];e.subscribe(ue(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Cp(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Je((i,o)=>t(i,o,r)):wt,Ao(1),n?_r(e):gl(()=>new Bn))}function Ma(){return ae((t,e)=>{let n,r=!1;t.subscribe(ue(e,i=>{let o=n;n=i,r&&e.next([o,i]),r=!0}))})}function mi(t,e){return ae(Q_(t,e,arguments.length>=2,!0))}function Y_(t={}){let{connector:e=()=>new je,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,u,l=0,d=!1,f=!1,g=()=>{a?.unsubscribe(),a=void 0},y=()=>{g(),s=u=void 0,d=f=!1},_=()=>{let A=s;y(),A?.unsubscribe()};return ae((A,C)=>{l++,!f&&!d&&g();let P=u=u??e();C.add(()=>{l--,l===0&&!f&&!d&&(a=Sp(_,i))}),P.subscribe(C),!s&&l>0&&(s=new Un({next:j=>P.next(j),error:j=>{f=!0,g(),a=Sp(y,n,j),P.error(j)},complete:()=>{d=!0,g(),a=Sp(y,r),P.complete()}}),Re(A).subscribe(s))})(o)}}function Sp(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new Un({next:()=>{r.unsubscribe(),t()}});return Re(e(...n)).subscribe(r)}function ml(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,Y_({connector:()=>new Qc(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function yi(...t){let e=vn(t);return ae((n,r)=>{(e?So(t,n,e):So(t,n)).subscribe(r)})}function Me(t,e){return ae((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(ue(r,u=>{i?.unsubscribe();let l=0,d=o++;Re(t(u,d)).subscribe(i=ue(r,f=>r.next(e?e(u,f,d,l++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function yl(t,e){return ne(e)?Me(()=>t,e):Me(()=>t)}function Ap(t){return ae((e,n)=>{Re(t).subscribe(ue(n,()=>n.complete(),Sa)),!n.closed&&e.subscribe(n)})}function He(t,e,n){let r=ne(t)||e||n?{next:t,error:e,complete:n}:t;return r?ae((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ue(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):wt}var kD="https://g.co/ng/security#xss",J=class extends Error{constructor(e,n){super(Xl(e,n)),this.code=e}};function Xl(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function $a(t){return{toString:t}.toString()}var vl="__parameters__";function nN(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function OD(t,e,n){return $a(()=>{let r=nN(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,d){let f=u.hasOwnProperty(vl)?u[vl]:Object.defineProperty(u,vl,{value:[]})[vl];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Wn=globalThis;function be(t){for(let e in t)if(t[e]===be)return e;throw Error("Could not find renamed property on target object.")}function rN(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function _t(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(_t).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Z_(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var iN=be({__forward_ref__:be});function FD(t){return t.__forward_ref__=FD,t.toString=function(){return _t(this())},t}function Et(t){return LD(t)?t():t}function LD(t){return typeof t=="function"&&t.hasOwnProperty(iN)&&t.__forward_ref__===FD}function W(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Tt(t){return{providers:t.providers||[],imports:t.imports||[]}}function ed(t){return J_(t,jD)||J_(t,UD)}function VD(t){return ed(t)!==null}function J_(t,e){return t.hasOwnProperty(e)?t[e]:null}function oN(t){let e=t&&(t[jD]||t[UD]);return e||null}function X_(t){return t&&(t.hasOwnProperty(eD)||t.hasOwnProperty(sN))?t[eD]:null}var jD=be({\u0275prov:be}),eD=be({\u0275inj:be}),UD=be({ngInjectableDef:be}),sN=be({ngInjectorDef:be}),z=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=W({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function BD(t){return t&&!!t.\u0275providers}var aN=be({\u0275cmp:be}),uN=be({\u0275dir:be}),cN=be({\u0275pipe:be}),lN=be({\u0275mod:be}),Al=be({\u0275fac:be}),Pa=be({__NG_ELEMENT_ID__:be}),tD=be({__NG_ENV_ID__:be});function Vg(t){return typeof t=="string"?t:t==null?"":String(t)}function dN(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Vg(t)}function hN(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new J(-200,t)}function jg(t,e){throw new J(-201,!1)}var le=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(le||{}),$p;function $D(){return $p}function Gt(t){let e=$p;return $p=t,e}function qD(t,e,n){let r=ed(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&le.Optional)return null;if(e!==void 0)return e;jg(t,"Injector")}var fN={},Oa=fN,qp="__NG_DI_FLAG__",Rl="ngTempTokenPath",pN="ngTokenPath",gN=/\n/gm,mN="\u0275",nD="__source",Po;function yN(){return Po}function Tr(t){let e=Po;return Po=t,e}function vN(t,e=le.Default){if(Po===void 0)throw new J(-203,!1);return Po===null?qD(t,void 0,e):Po.get(t,e&le.Optional?null:void 0,e)}function L(t,e=le.Default){return($D()||vN)(Et(t),e)}function V(t,e=le.Default){return L(t,td(e))}function td(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function zp(t){let e=[];for(let n=0;n<t.length;n++){let r=Et(t[n]);if(Array.isArray(r)){if(r.length===0)throw new J(900,!1);let i,o=le.Default;for(let s=0;s<r.length;s++){let a=r[s],u=wN(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(L(i,o))}else e.push(L(r))}return e}function zD(t,e){return t[qp]=e,t.prototype[qp]=e,t}function wN(t){return t[qp]}function IN(t,e,n,r){let i=t[Rl];throw e[nD]&&i.unshift(e[nD]),t.message=EN(`
`+t.message,i,n,r),t[pN]=i,t[Rl]=null,t}function EN(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==mN?t.slice(2):t;let i=_t(e);if(Array.isArray(e))i=e.map(_t).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):_t(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(gN,`
  `)}`}var Kn=zD(OD("Optional"),8);var Ug=zD(OD("SkipSelf"),4);function Oo(t,e){let n=t.hasOwnProperty(Al);return n?t[Al]:null}function _N(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function DN(t){return t.flat(Number.POSITIVE_INFINITY)}function Bg(t,e){t.forEach(n=>Array.isArray(n)?Bg(n,e):e(n))}function HD(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function xl(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function TN(t,e){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function bN(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function CN(t,e,n){let r=qa(t,e);return r>=0?t[r|1]=n:(r=~r,bN(t,r,e,n)),r}function Rp(t,e){let n=qa(t,e);if(n>=0)return t[n|1]}function qa(t,e){return SN(t,e,1)}function SN(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Fo={},Wt=[],Lo=new z(""),GD=new z("",-1),WD=new z(""),Ml=class{get(e,n=Oa){if(n===Oa){let r=new Error(`NullInjectorError: No provider for ${_t(e)}!`);throw r.name="NullInjectorError",r}return n}},KD=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(KD||{}),En=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(En||{}),Sr=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Sr||{});function AN(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function Hp(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];xN(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function RN(t){return t===3||t===4||t===6}function xN(t){return t.charCodeAt(0)===64}function Fa(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?rD(t,n,i,null,e[++r]):rD(t,n,i,null,null))}}return t}function rD(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var QD="ng-template";function MN(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&AN(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if($g(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function $g(t){return t.type===4&&t.value!==QD}function NN(t,e,n){let r=t.type===4&&!n?QD:t.value;return e===r}function PN(t,e,n){let r=4,i=t.attrs,o=i!==null?FN(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!sn(r)&&!sn(u))return!1;if(s&&sn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!NN(t,u,n)||u===""&&e.length===1){if(sn(r))return!1;s=!0}}else if(r&8){if(i===null||!MN(t,i,u,n)){if(sn(r))return!1;s=!0}}else{let l=e[++a],d=kN(u,i,$g(t),n);if(d===-1){if(sn(r))return!1;s=!0;continue}if(l!==""){let f;if(d>o?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(sn(r))return!1;s=!0}}}}return sn(r)||s}function sn(t){return(t&1)===0}function kN(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return LN(e,t)}function YD(t,e,n=!1){for(let r=0;r<e.length;r++)if(PN(t,e[r],n))return!0;return!1}function ON(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function FN(t){for(let e=0;e<t.length;e++){let n=t[e];if(RN(n))return e}return t.length}function LN(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function VN(t,e){e:for(let n=0;n<e.length;n++){let r=e[n];if(t.length===r.length){for(let i=0;i<t.length;i++)if(t[i]!==r[i])continue e;return!0}}return!1}function iD(t,e){return t?":not("+e.trim()+")":e}function jN(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!sn(s)&&(e+=iD(o,i),i=""),r=s,o=o||!sn(r);n++}return i!==""&&(e+=iD(o,i)),e}function UN(t){return t.map(jN).join(",")}function BN(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!sn(i))break;i=o}r++}return{attrs:e,classes:n}}function ZD(t){return $a(()=>{let e=nT(t),n=De(H({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===KD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||En.Emulated,styles:t.styles||Wt,_:null,schemas:t.schemas||null,tView:null,id:""});rT(n);let r=t.dependencies;return n.directiveDefs=sD(r,!1),n.pipeDefs=sD(r,!0),n.id=zN(n),n})}function $N(t){return Ar(t)||JD(t)}function qN(t){return t!==null}function bt(t){return $a(()=>({type:t.type,bootstrap:t.bootstrap||Wt,declarations:t.declarations||Wt,imports:t.imports||Wt,exports:t.exports||Wt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function oD(t,e){if(t==null)return Fo;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=Sr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==Sr.None?[r,a]:r,e[o]=s):n[o]=r}return n}function Go(t){return $a(()=>{let e=nT(t);return rT(e),e})}function Ar(t){return t[aN]||null}function JD(t){return t[uN]||null}function XD(t){return t[cN]||null}function eT(t){let e=Ar(t)||JD(t)||XD(t);return e!==null?e.standalone:!1}function tT(t,e){let n=t[lN]||null;if(!n&&e===!0)throw new Error(`Type ${_t(t)} does not have '\u0275mod' property.`);return n}function nT(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Fo,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Wt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:oD(t.inputs,e),outputs:oD(t.outputs),debugInfo:null}}function rT(t){t.features?.forEach(e=>e(t))}function sD(t,e){if(!t)return null;let n=e?XD:$N;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(qN)}function zN(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Wo(t){return{\u0275providers:t}}function HN(...t){return{\u0275providers:iT(!0,t),\u0275fromNgModule:!0}}function iT(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Bg(e,s=>{let a=s;Gp(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&oT(i,o),n}function oT(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];qg(i,o=>{e(o,r)})}}function Gp(t,e,n,r){if(t=Et(t),!t)return!1;let i=null,o=X_(t),s=!o&&Ar(t);if(!o&&!s){let u=t.ngModule;if(o=X_(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Gp(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Bg(o.imports,d=>{Gp(d,e,n,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&oT(l,e)}if(!a){let l=Oo(i)||(()=>new i);e({provide:i,useFactory:l,deps:Wt},i),e({provide:WD,useValue:i,multi:!0},i),e({provide:Lo,useValue:()=>L(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;qg(u,d=>{e(d,l)})}}else return!1;return i!==t&&t.providers!==void 0}function qg(t,e){for(let n of t)BD(n)&&(n=n.\u0275providers),Array.isArray(n)?qg(n,e):e(n)}var GN=be({provide:String,useValue:be});function sT(t){return t!==null&&typeof t=="object"&&GN in t}function WN(t){return!!(t&&t.useExisting)}function KN(t){return!!(t&&t.useFactory)}function Vo(t){return typeof t=="function"}function QN(t){return!!t.useClass}var nd=new z(""),Dl={},YN={},xp;function zg(){return xp===void 0&&(xp=new Ml),xp}var Dt=class{},La=class extends Dt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Kp(e,s=>this.processProvider(s)),this.records.set(GD,Ro(void 0,this)),i.has("environment")&&this.records.set(Dt,Ro(void 0,this));let o=this.records.get(nd);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(WD,Wt,le.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ye(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ye(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Tr(this),r=Gt(void 0),i;try{return e()}finally{Tr(n),Gt(r)}}get(e,n=Oa,r=le.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(tD))return e[tD](this);r=td(r);let i,o=Tr(this),s=Gt(void 0);try{if(!(r&le.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=tP(e)&&ed(e);l&&this.injectableDefInScope(l)?u=Ro(Wp(e),Dl):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&le.Self?zg():this.parent;return n=r&le.Optional&&n===Oa?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Rl]=a[Rl]||[]).unshift(_t(e)),o)throw a;return IN(a,e,"R3InjectorError",this.source)}else throw a}finally{Gt(s),Tr(o)}}resolveInjectorInitializers(){let e=ye(null),n=Tr(this),r=Gt(void 0),i;try{let o=this.get(Lo,Wt,le.Self);for(let s of o)s()}finally{Tr(n),Gt(r),ye(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(_t(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new J(205,!1)}processProvider(e){e=Et(e);let n=Vo(e)?e:Et(e&&e.provide),r=JN(e);if(!Vo(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Ro(void 0,Dl,!0),i.factory=()=>zp(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=ye(null);try{return n.value===Dl&&(n.value=YN,n.value=n.factory()),typeof n.value=="object"&&n.value&&eP(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ye(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Et(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Wp(t){let e=ed(t),n=e!==null?e.factory:Oo(t);if(n!==null)return n;if(t instanceof z)throw new J(204,!1);if(t instanceof Function)return ZN(t);throw new J(204,!1)}function ZN(t){if(t.length>0)throw new J(204,!1);let n=oN(t);return n!==null?()=>n.factory(t):()=>new t}function JN(t){if(sT(t))return Ro(void 0,t.useValue);{let e=aT(t);return Ro(e,Dl)}}function aT(t,e,n){let r;if(Vo(t)){let i=Et(t);return Oo(i)||Wp(i)}else if(sT(t))r=()=>Et(t.useValue);else if(KN(t))r=()=>t.useFactory(...zp(t.deps||[]));else if(WN(t))r=()=>L(Et(t.useExisting));else{let i=Et(t&&(t.useClass||t.provide));if(XN(t))r=()=>new i(...zp(t.deps));else return Oo(i)||Wp(i)}return r}function Ro(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function XN(t){return!!t.deps}function eP(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function tP(t){return typeof t=="function"||typeof t=="object"&&t instanceof z}function Kp(t,e){for(let n of t)Array.isArray(n)?Kp(n,e):n&&BD(n)?Kp(n.\u0275providers,e):e(n)}function Yt(t,e){t instanceof La&&t.assertNotDestroyed();let n,r=Tr(t),i=Gt(void 0);try{return e()}finally{Tr(r),Gt(i)}}function uT(){return $D()!==void 0||yN()!=null}function nP(t){if(!uT())throw new J(-203,!1)}function rP(t){let e=Wn.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function iP(t){return typeof t=="function"}var Qn=0,ce=1,te=2,ft=3,an=4,Pt=5,Va=6,Nl=7,un=8,jo=9,_n=10,Xe=11,ja=12,aD=13,Ko=14,Qt=15,Ei=16,xo=17,zn=18,rd=19,cT=20,br=21,Mp=22,Kt=23,cn=25,lT=1;var _i=7,Pl=8,Uo=9,Vt=10,kl=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(kl||{});function Cr(t){return Array.isArray(t)&&typeof t[lT]=="object"}function Yn(t){return Array.isArray(t)&&t[lT]===!0}function dT(t){return(t.flags&4)!==0}function id(t){return t.componentOffset>-1}function Hg(t){return(t.flags&1)===1}function Rr(t){return!!t.template}function Qp(t){return(t[te]&512)!==0}var Yp=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function hT(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function od(){return fT}function fT(t){return t.type.prototype.ngOnChanges&&(t.setInput=sP),oP}od.ngInherit=!0;function oP(){let t=gT(this),e=t?.current;if(e){let n=t.previous;if(n===Fo)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function sP(t,e,n,r,i){let o=this.declaredInputs[r],s=gT(t)||aP(t,{previous:Fo,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Yp(l&&l.currentValue,n,u===Fo),hT(t,e,i,n)}var pT="__ngSimpleChanges__";function gT(t){return t[pT]||null}function aP(t,e){return t[pT]=e}var uD=null;var wn=function(t,e,n){uD?.(t,e,n)},uP="svg",cP="math";function Dn(t){for(;Array.isArray(t);)t=t[Qn];return t}function mT(t,e){return Dn(e[t])}function ln(t,e){return Dn(e[t.index])}function yT(t,e){return t.data[e]}function lP(t,e){return t[e]}function Nr(t,e){let n=e[t];return Cr(n)?n:n[Qn]}function dP(t){return(t[te]&4)===4}function Gg(t){return(t[te]&128)===128}function hP(t){return Yn(t[ft])}function Ol(t,e){return e==null?null:t[e]}function vT(t){t[xo]=0}function wT(t){t[te]&1024||(t[te]|=1024,Gg(t)&&ad(t))}function fP(t,e){for(;t>0;)e=e[Ko],t--;return e}function sd(t){return!!(t[te]&9216||t[Kt]?.dirty)}function Zp(t){t[_n].changeDetectionScheduler?.notify(8),t[te]&64&&(t[te]|=1024),sd(t)&&ad(t)}function ad(t){t[_n].changeDetectionScheduler?.notify(0);let e=Di(t);for(;e!==null&&!(e[te]&8192||(e[te]|=8192,!Gg(e)));)e=Di(e)}function IT(t,e){if((t[te]&256)===256)throw new J(911,!1);t[br]===null&&(t[br]=[]),t[br].push(e)}function pP(t,e){if(t[br]===null)return;let n=t[br].indexOf(e);n!==-1&&t[br].splice(n,1)}function Di(t){let e=t[ft];return Yn(e)?e[ft]:e}var de={lFrame:NT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var ET=!1;function gP(){return de.lFrame.elementDepthCount}function mP(){de.lFrame.elementDepthCount++}function yP(){de.lFrame.elementDepthCount--}function _T(){return de.bindingsEnabled}function DT(){return de.skipHydrationRootTNode!==null}function vP(t){return de.skipHydrationRootTNode===t}function wP(){de.skipHydrationRootTNode=null}function Ie(){return de.lFrame.lView}function Ct(){return de.lFrame.tView}function BG(t){return de.lFrame.contextLView=t,t[un]}function $G(t){return de.lFrame.contextLView=null,t}function kt(){let t=TT();for(;t!==null&&t.type===64;)t=t.parent;return t}function TT(){return de.lFrame.currentTNode}function IP(){let t=de.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function za(t,e){let n=de.lFrame;n.currentTNode=t,n.isParent=e}function bT(){return de.lFrame.isParent}function CT(){de.lFrame.isParent=!1}function EP(){return de.lFrame.contextLView}function ST(){return ET}function cD(t){ET=t}function AT(){let t=de.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function _P(t){return de.lFrame.bindingIndex=t}function Wg(){return de.lFrame.bindingIndex++}function DP(t){let e=de.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function TP(){return de.lFrame.inI18n}function bP(t,e){let n=de.lFrame;n.bindingIndex=n.bindingRootIndex=t,Jp(e)}function CP(){return de.lFrame.currentDirectiveIndex}function Jp(t){de.lFrame.currentDirectiveIndex=t}function SP(t){let e=de.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function RT(){return de.lFrame.currentQueryIndex}function Kg(t){de.lFrame.currentQueryIndex=t}function AP(t){let e=t[ce];return e.type===2?e.declTNode:e.type===1?t[Pt]:null}function xT(t,e,n){if(n&le.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&le.Host);)if(i=AP(o),i===null||(o=o[Ko],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=de.lFrame=MT();return r.currentTNode=e,r.lView=t,!0}function Qg(t){let e=MT(),n=t[ce];de.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function MT(){let t=de.lFrame,e=t===null?null:t.child;return e===null?NT(t):e}function NT(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function PT(){let t=de.lFrame;return de.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var kT=PT;function Yg(){let t=PT();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function RP(t){return(de.lFrame.contextLView=fP(t,de.lFrame.contextLView))[un]}function Qo(){return de.lFrame.selectedIndex}function Ti(t){de.lFrame.selectedIndex=t}function OT(){let t=de.lFrame;return yT(t.tView,t.selectedIndex)}function xP(){return de.lFrame.currentNamespace}var FT=!0;function Zg(){return FT}function Jg(t){FT=t}function MP(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=fT(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Xg(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),d!=null&&(t.destroyHooks??=[]).push(n,d)}}function Tl(t,e,n){LT(t,e,3,n)}function bl(t,e,n,r){(t[te]&3)===n&&LT(t,e,n,r)}function Np(t,e){let n=t[te];(n&3)===e&&(n&=16383,n+=1,t[te]=n)}function LT(t,e,n,r){let i=r!==void 0?t[xo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[xo]+=65536),(a<o||o==-1)&&(NP(t,n,e,u),t[xo]=(t[xo]&4294901760)+u+2),u++}function lD(t,e){wn(4,t,e);let n=ye(null);try{e.call(t)}finally{ye(n),wn(5,t,e)}}function NP(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[te]>>14<t[xo]>>16&&(t[te]&3)===e&&(t[te]+=16384,lD(a,o)):lD(a,o)}var ko=-1,bi=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function PP(t){return t instanceof bi}function kP(t){return(t.flags&8)!==0}function OP(t){return(t.flags&16)!==0}var Pp={},Xp=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=td(r);let i=this.injector.get(e,Pp,r);return i!==Pp||n===Pp?i:this.parentInjector.get(e,n,r)}};function VT(t){return t!==ko}function Fl(t){return t&32767}function FP(t){return t>>16}function Ll(t,e){let n=FP(t),r=e;for(;n>0;)r=r[Ko],n--;return r}var eg=!0;function dD(t){let e=eg;return eg=t,e}var LP=256,jT=LP-1,UT=5,VP=0,In={};function jP(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Pa)&&(r=n[Pa]),r==null&&(r=n[Pa]=VP++);let i=r&jT,o=1<<i;e.data[t+(i>>UT)]|=o}function Vl(t,e){let n=BT(t,e);if(n!==-1)return n;let r=e[ce];r.firstCreatePass&&(t.injectorIndex=e.length,kp(r.data,t),kp(e,null),kp(r.blueprint,null));let i=em(t,e),o=t.injectorIndex;if(VT(i)){let s=Fl(i),a=Ll(i,e),u=a[ce].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function kp(t,e){t.push(0,0,0,0,0,0,0,0,e)}function BT(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function em(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=GT(i),r===null)return ko;if(n++,i=i[Ko],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return ko}function tg(t,e,n){jP(t,e,n)}function $T(t,e,n){if(n&le.Optional||t!==void 0)return t;jg(e,"NodeInjector")}function qT(t,e,n,r){if(n&le.Optional&&r===void 0&&(r=null),!(n&(le.Self|le.Host))){let i=t[jo],o=Gt(void 0);try{return i?i.get(e,r,n&le.Optional):qD(e,r,n&le.Optional)}finally{Gt(o)}}return $T(r,e,n)}function zT(t,e,n,r=le.Default,i){if(t!==null){if(e[te]&2048&&!(r&le.Self)){let s=qP(t,e,n,r,In);if(s!==In)return s}let o=HT(t,e,n,r,In);if(o!==In)return o}return qT(e,n,r,i)}function HT(t,e,n,r,i){let o=BP(n);if(typeof o=="function"){if(!xT(e,t,r))return r&le.Host?$T(i,n,r):qT(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&le.Optional))jg(n);else return s}finally{kT()}}else if(typeof o=="number"){let s=null,a=BT(t,e),u=ko,l=r&le.Host?e[Qt][Pt]:null;for((a===-1||r&le.SkipSelf)&&(u=a===-1?em(t,e):e[a+8],u===ko||!fD(r,!1)?a=-1:(s=e[ce],a=Fl(u),e=Ll(u,e)));a!==-1;){let d=e[ce];if(hD(o,a,d.data)){let f=UP(a,e,n,s,r,l);if(f!==In)return f}u=e[a+8],u!==ko&&fD(r,e[ce].data[a+8]===l)&&hD(o,a,e)?(s=d,a=Fl(u),e=Ll(u,e)):a=-1}}return i}function UP(t,e,n,r,i,o){let s=e[ce],a=s.data[t+8],u=r==null?id(a)&&eg:r!=s&&(a.type&3)!==0,l=i&le.Host&&o===a,d=Cl(a,s,n,u,l);return d!==null?Ci(e,s,d,a):In}function Cl(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,d=o>>20,f=r?a:a+d,g=i?a+d:l;for(let y=f;y<g;y++){let _=s[y];if(y<u&&n===_||y>=u&&_.type===n)return y}if(i){let y=s[u];if(y&&Rr(y)&&y.type===n)return u}return null}function Ci(t,e,n,r){let i=t[n],o=e.data;if(PP(i)){let s=i;s.resolving&&hN(dN(o[n]));let a=dD(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?Gt(s.injectImpl):null,d=xT(t,r,le.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&MP(n,o[n],e)}finally{l!==null&&Gt(l),dD(a),s.resolving=!1,kT()}}return i}function BP(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Pa)?t[Pa]:void 0;return typeof e=="number"?e>=0?e&jT:$P:e}function hD(t,e,n){let r=1<<t;return!!(n[e+(t>>UT)]&r)}function fD(t,e){return!(t&le.Self)&&!(t&le.Host&&e)}var Ii=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return zT(this._tNode,this._lView,e,td(r),n)}};function $P(){return new Ii(kt(),Ie())}function tm(t){return $a(()=>{let e=t.prototype.constructor,n=e[Al]||ng(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Al]||ng(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function ng(t){return LD(t)?()=>{let e=ng(Et(t));return e&&e()}:Oo(t)}function qP(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[te]&2048&&!(s[te]&512);){let a=HT(o,s,n,r|le.Self,In);if(a!==In)return a;let u=o.parent;if(!u){let l=s[cT];if(l){let d=l.get(n,In,r);if(d!==In)return d}u=GT(s),s=s[Ko]}o=u}return i}function GT(t){let e=t[ce],n=e.type;return n===2?e.declTNode:n===1?t[Pt]:null}function pD(t,e=null,n=null,r){let i=WT(t,e,n,r);return i.resolveInjectorInitializers(),i}function WT(t,e=null,n=null,r,i=new Set){let o=[n||Wt,HN(t)];return r=r||(typeof t=="object"?void 0:_t(t)),new La(o,e||zg(),r||null,i)}var vi=class vi{static create(e,n){if(Array.isArray(e))return pD({name:""},n,e,"");{let r=e.name??"";return pD({name:r},e.parent,e.providers,r)}}};vi.THROW_IF_NOT_FOUND=Oa,vi.NULL=new Ml,vi.\u0275prov=W({token:vi,providedIn:"any",factory:()=>L(GD)}),vi.__NG_ELEMENT_ID__=-1;var Nt=vi;var zP=new z("");zP.__NG_ELEMENT_ID__=t=>{let e=kt();if(e===null)throw new J(204,!1);if(e.type&2)return e.value;if(t&le.Optional)return null;throw new J(204,!1)};var HP="ngOriginalError";function Op(t){return t[HP]}var KT=!0,nm=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=GP,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),rg=class extends nm{constructor(e){super(),this._lView=e}onDestroy(e){return IT(this._lView,e),()=>pP(this._lView,e)}};function GP(){return new rg(Ie())}var Zn=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ot(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=W({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();var ig=class extends je{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,uT()&&(this.destroyRef=V(nm,{optional:!0})??void 0,this.pendingTasks=V(Zn,{optional:!0})??void 0)}emit(e){let n=ye(null);try{super.next(e)}finally{ye(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Le&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},ht=ig;function jl(...t){}function QT(t){let e,n;function r(){t=jl;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function gD(t){return queueMicrotask(()=>t()),()=>{t=jl}}var rm="isAngularZone",Ul=rm+"_ID",WP=0,he=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ht(!1),this.onMicrotaskEmpty=new ht(!1),this.onStable=new ht(!1),this.onError=new ht(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=KT}=e;if(typeof Zone>"u")throw new J(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,YP(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(rm)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new J(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new J(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,KP,jl,jl);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},KP={};function im(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function QP(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){QT(()=>{t.callbackScheduled=!1,og(t),t.isCheckStableRunning=!0,im(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),og(t)}function YP(t){let e=()=>{QP(t)},n=WP++;t._inner=t._inner.fork({name:"angular",properties:{[rm]:!0,[Ul]:n,[Ul+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(ZP(u))return r.invokeTask(o,s,a,u);try{return mD(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),yD(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return mD(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!JP(u)&&e(),yD(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,og(t),im(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function og(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function mD(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function yD(t){t._nesting--,im(t)}var Bl=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ht,this.onMicrotaskEmpty=new ht,this.onStable=new ht,this.onError=new ht}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function ZP(t){return YT(t,"__ignore_ng_zone__")}function JP(t){return YT(t,"__scheduler_tick__")}function YT(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}function XP(t="zone.js",e){return t==="noop"?new Bl:t==="zone.js"?new he(e):t}var Hn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Op(e);for(;n&&Op(n);)n=Op(n);return n||null}},ek=new z("",{providedIn:"root",factory:()=>{let t=V(he),e=V(Hn);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function tk(){return Yo(kt(),Ie())}function Yo(t,e){return new Pr(ln(t,e))}var Pr=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=tk;let t=e;return t})();function nk(t){return t instanceof Pr?t.nativeElement:t}function rk(){return this._results[Symbol.iterator]()}var sg=class t{get changes(){return this._changes??=new ht}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=rk)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=DN(e);(this._changesDetected=!_N(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function ZT(t){return(t.flags&128)===128}var JT=new Map,ik=0;function ok(){return ik++}function sk(t){JT.set(t[rd],t)}function ag(t){JT.delete(t[rd])}var vD="__ngContext__";function Si(t,e){Cr(e)?(t[vD]=e[rd],sk(e)):t[vD]=e}function XT(t){return tb(t[ja])}function eb(t){return tb(t[an])}function tb(t){for(;t!==null&&!Yn(t);)t=t[an];return t}var ug;function nb(t){ug=t}function ak(){if(ug!==void 0)return ug;if(typeof document<"u")return document;throw new J(210,!1)}var ud=new z("",{providedIn:"root",factory:()=>uk}),uk="ng",om=new z(""),nt=new z("",{providedIn:"platform",factory:()=>"unknown"});var sm=new z("",{providedIn:"root",factory:()=>ak().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var ck="h",lk="b";var dk=()=>null;function am(t,e,n=!1){return dk(t,e,n)}var rb=!1,hk=new z("",{providedIn:"root",factory:()=>rb});var $l=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${kD})`}};function cd(t){return t instanceof $l?t.changingThisBreaksApplicationSecurity:t}function ib(t,e){let n=fk(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${kD})`)}return n===e}function fk(t){return t instanceof $l&&t.getTypeName()||null}var pk=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function ob(t){return t=String(t),t.match(pk)?t:"unsafe:"+t}var um=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(um||{});function qG(t){let e=gk();return e?e.sanitize(um.URL,t)||"":ib(t,"URL")?cd(t):ob(Vg(t))}function gk(){let t=Ie();return t&&t[_n].sanitizer}function zG(t){return t.ownerDocument}function sb(t){return t instanceof Function?t():t}function mk(t){return(t??V(Nt)).get(nt)==="browser"}var Gn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Gn||{}),yk;function cm(t,e){return yk(t,e)}function Mo(t,e,n,r,i){if(r!=null){let o,s=!1;Yn(r)?o=r:Cr(r)&&(s=!0,r=r[Qn]);let a=Dn(r);t===0&&n!==null?i==null?hb(e,n,a):ql(e,n,a,i||null,!0):t===1&&n!==null?ql(e,n,a,i||null,!0):t===2?xk(e,a,s):t===3&&e.destroyNode(a),o!=null&&Nk(e,t,o,n,i)}}function vk(t,e){return t.createText(e)}function wk(t,e,n){t.setValue(e,n)}function ab(t,e,n){return t.createElement(e,n)}function Ik(t,e){ub(t,e),e[Qn]=null,e[Pt]=null}function Ek(t,e,n,r,i,o){r[Qn]=i,r[Pt]=e,ld(t,r,n,1,i,o)}function ub(t,e){e[_n].changeDetectionScheduler?.notify(9),ld(t,e,e[Xe],2,null,null)}function _k(t){let e=t[ja];if(!e)return Fp(t[ce],t);for(;e;){let n=null;if(Cr(e))n=e[ja];else{let r=e[Vt];r&&(n=r)}if(!n){for(;e&&!e[an]&&e!==t;)Cr(e)&&Fp(e[ce],e),e=e[ft];e===null&&(e=t),Cr(e)&&Fp(e[ce],e),n=e&&e[an]}e=n}}function Dk(t,e,n,r){let i=Vt+r,o=n.length;r>0&&(n[i-1][an]=e),r<o-Vt?(e[an]=n[i],HD(n,Vt+r,e)):(n.push(e),e[an]=null),e[ft]=n;let s=e[Ei];s!==null&&n!==s&&cb(s,e);let a=e[zn];a!==null&&a.insertView(t),Zp(e),e[te]|=128}function cb(t,e){let n=t[Uo],r=e[ft];if(Cr(r))t[te]|=kl.HasTransplantedViews;else{let i=r[ft][Qt];e[Qt]!==i&&(t[te]|=kl.HasTransplantedViews)}n===null?t[Uo]=[e]:n.push(e)}function lm(t,e){let n=t[Uo],r=n.indexOf(e);n.splice(r,1)}function cg(t,e){if(t.length<=Vt)return;let n=Vt+e,r=t[n];if(r){let i=r[Ei];i!==null&&i!==t&&lm(i,r),e>0&&(t[n-1][an]=r[an]);let o=xl(t,Vt+e);Ik(r[ce],r);let s=o[zn];s!==null&&s.detachView(o[ce]),r[ft]=null,r[an]=null,r[te]&=-129}return r}function lb(t,e){if(!(e[te]&256)){let n=e[Xe];n.destroyNode&&ld(t,e,n,3,null,null),_k(e)}}function Fp(t,e){if(e[te]&256)return;let n=ye(null);try{e[te]&=-129,e[te]|=256,e[Kt]&&up(e[Kt]),bk(t,e),Tk(t,e),e[ce].type===1&&e[Xe].destroy();let r=e[Ei];if(r!==null&&Yn(e[ft])){r!==e[ft]&&lm(r,e);let i=e[zn];i!==null&&i.detachView(t)}ag(e)}finally{ye(n)}}function Tk(t,e){let n=t.cleanup,r=e[Nl];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[Nl]=null);let i=e[br];if(i!==null){e[br]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function bk(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof bi)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];wn(4,a,u);try{u.call(a)}finally{wn(5,a,u)}}else{wn(4,i,o);try{o.call(i)}finally{wn(5,i,o)}}}}}function db(t,e,n){return Ck(t,e.parent,n)}function Ck(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Qn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===En.None||o===En.Emulated)return null}return ln(r,n)}}function ql(t,e,n,r,i){t.insertBefore(e,n,r,i)}function hb(t,e,n){t.appendChild(e,n)}function wD(t,e,n,r,i){r!==null?ql(t,e,n,r,i):hb(t,e,n)}function fb(t,e){return t.parentNode(e)}function Sk(t,e){return t.nextSibling(e)}function pb(t,e,n){return Rk(t,e,n)}function Ak(t,e,n){return t.type&40?ln(t,n):null}var Rk=Ak,ID;function dm(t,e,n,r){let i=db(t,r,e),o=e[Xe],s=r.parent||e[Pt],a=pb(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)wD(o,i,n[u],a,!1);else wD(o,i,n,a,!1);ID!==void 0&&ID(o,r,e,n,i)}function Na(t,e){if(e!==null){let n=e.type;if(n&3)return ln(e,t);if(n&4)return lg(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Na(t,r);{let i=t[e.index];return Yn(i)?lg(-1,i):Dn(i)}}else{if(n&128)return Na(t,e.next);if(n&32)return cm(e,t)()||Dn(t[e.index]);{let r=gb(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Di(t[Qt]);return Na(i,r)}else return Na(t,e.next)}}}return null}function gb(t,e){if(e!==null){let r=t[Qt][Pt],i=e.projection;return r.projection[i]}return null}function lg(t,e){let n=Vt+t+1;if(n<e.length){let r=e[n],i=r[ce].firstChild;if(i!==null)return Na(r,i)}return e[_i]}function xk(t,e,n){t.removeChild(null,e,n)}function hm(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(s&&e===0&&(a&&Si(Dn(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)hm(t,e,n.child,r,i,o,!1),Mo(e,t,i,a,o);else if(u&32){let l=cm(n,r),d;for(;d=l();)Mo(e,t,i,d,o);Mo(e,t,i,a,o)}else u&16?mb(t,e,r,n,i,o):Mo(e,t,i,a,o);n=s?n.projectionNext:n.next}}function ld(t,e,n,r,i,o){hm(n,r,t.firstChild,e,i,o,!1)}function Mk(t,e,n){let r=e[Xe],i=db(t,n,e),o=n.parent||e[Pt],s=pb(o,n,e);mb(r,0,e,n,i,s)}function mb(t,e,n,r,i,o){let s=n[Qt],u=s[Pt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let d=u[l];Mo(e,t,i,d,o)}else{let l=u,d=s[ft];ZT(r)&&(l.flags|=128),hm(t,e,l,d,i,o,!0)}}function Nk(t,e,n,r,i){let o=n[_i],s=Dn(n);o!==s&&Mo(e,t,r,o,i);for(let a=Vt;a<n.length;a++){let u=n[a];ld(u[ce],u,t,e,r,o)}}function Pk(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Gn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Gn.Important),t.setStyle(n,r,i,o))}}function kk(t,e,n){t.setAttribute(e,"style",n)}function yb(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function vb(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Hp(t,e,r),i!==null&&yb(t,e,i),o!==null&&kk(t,e,o)}var Ni={};function HG(t=1){wb(Ct(),Ie(),Qo()+t,!1)}function wb(t,e,n,r){if(!r)if((e[te]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Tl(e,o,n)}else{let o=t.preOrderHooks;o!==null&&bl(e,o,0,n)}Ti(n)}function Zt(t,e=le.Default){let n=Ie();if(n===null)return L(t,e);let r=kt();return zT(r,n,Et(t),e)}function Ib(){let t="invalid";throw new Error(t)}function Eb(t,e,n,r,i,o){let s=ye(null);try{let a=null;i&Sr.SignalBased&&(a=e[r][jn]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Sr.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):hT(e,a,r,o)}finally{ye(s)}}function Ok(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Ti(~i);else{let o=i,s=n[++r],a=n[++r];bP(s,o);let u=e[o];a(2,u)}}}finally{Ti(-1)}}function dd(t,e,n,r,i,o,s,a,u,l,d){let f=e.blueprint.slice();return f[Qn]=i,f[te]=r|4|128|8|64,(l!==null||t&&t[te]&2048)&&(f[te]|=2048),vT(f),f[ft]=f[Ko]=t,f[un]=n,f[_n]=s||t&&t[_n],f[Xe]=a||t&&t[Xe],f[jo]=u||t&&t[jo]||null,f[Pt]=o,f[rd]=ok(),f[Va]=d,f[cT]=l,f[Qt]=e.type==2?t[Qt]:f,f}function Ha(t,e,n,r,i){let o=t.data[e];if(o===null)o=Fk(t,e,n,r,i),TP()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=IP();o.injectorIndex=s===null?-1:s.injectorIndex}return za(o,!0),o}function Fk(t,e,n,r,i){let o=TT(),s=bT(),a=s?o:o&&o.parent,u=t.data[e]=$k(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function _b(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Db(t,e,n,r,i){let o=Qo(),s=r&2;try{Ti(-1),s&&e.length>cn&&wb(t,e,cn,!1),wn(s?2:0,i),n(r,i)}finally{Ti(o),wn(s?3:1,i)}}function Tb(t,e,n){if(dT(e)){let r=ye(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{ye(r)}}}function bb(t,e,n){_T()&&(Kk(t,e,n,ln(n,e)),(n.flags&64)===64&&Mb(t,e,n))}function Cb(t,e,n=ln){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function Sb(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=fm(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function fm(t,e,n,r,i,o,s,a,u,l,d){let f=cn+r,g=f+i,y=Lk(f,g),_=typeof l=="function"?l():l;return y[ce]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:_,incompleteFirstPass:!1,ssrId:d}}function Lk(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ni);return n}function Vk(t,e,n,r){let o=r.get(hk,rb)||n===En.ShadowDom,s=t.selectRootElement(e,o);return jk(s),s}function jk(t){Uk(t)}var Uk=()=>null;function Bk(t,e,n,r){let i=kb(e);i.push(n),t.firstCreatePass&&Ob(t).push(r,i.length-1)}function $k(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return DT()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function ED(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=Sr.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}t===0?_D(r,n,l,a,u):_D(r,n,l,a)}return r}function _D(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function qk(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],u=null,l=null;for(let d=r;d<i;d++){let f=o[d],g=n?n.get(f):null,y=g?g.inputs:null,_=g?g.outputs:null;u=ED(0,f.inputs,d,u,y),l=ED(1,f.outputs,d,l,_);let A=u!==null&&s!==null&&!$g(e)?rO(u,d,s):null;a.push(A)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function zk(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Ab(t,e,n,r,i,o,s,a){let u=ln(e,n),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(pm(t,n,d,r,i),id(e)&&Hk(n,e.index)):e.type&3?(r=zk(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function Hk(t,e){let n=Nr(e,t);n[te]&16||(n[te]|=64)}function Rb(t,e,n,r){if(_T()){let i=r===null?null:{"":-1},o=Yk(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&xb(t,e,n,s,i,a),i&&Zk(n,r,i)}n.mergedAttrs=Fa(n.mergedAttrs,n.attrs)}function xb(t,e,n,r,i,o){for(let l=0;l<r.length;l++)tg(Vl(n,e),t,r[l].type);Xk(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,u=_b(t,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];n.mergedAttrs=Fa(n.mergedAttrs,d.hostAttrs),eO(t,n,e,u,d),Jk(u,d,i),d.contentQueries!==null&&(n.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(n.flags|=64);let f=d.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}qk(t,n,o)}function Gk(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;Wk(s)!=a&&s.push(a),s.push(n,r,o)}}function Wk(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function Kk(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;id(n)&&tO(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Vl(n,e),Si(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let u=t.data[a],l=Ci(e,t,a,n);if(Si(l,e),s!==null&&nO(e,a-i,l,u,n,s),Rr(u)){let d=Nr(n.index,e);d[un]=Ci(e,t,a,n)}}}function Mb(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=CP();try{Ti(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];Jp(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&Qk(u,l)}}finally{Ti(-1),Jp(s)}}function Qk(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Yk(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(YD(e,s.selectors,!1))if(r||(r=[]),Rr(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;dg(t,e,u)}else r.unshift(s),dg(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function dg(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Zk(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new J(-301,!1);r.push(e[i],o)}}}function Jk(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Rr(e)&&(n[""]=t)}}function Xk(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function eO(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Oo(i.type,!0)),s=new bi(o,Rr(i),Zt);t.blueprint[r]=s,n[r]=s,Gk(t,e,r,_b(t,n,i.hostVars,Ni),i)}function tO(t,e,n){let r=ln(e,t),i=Sb(n),o=t[_n].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=hd(t,dd(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function nO(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],d=s[a++],f=s[a++];Eb(r,n,u,l,d,f)}}function rO(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function Nb(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Pb(t,e){let n=t.contentQueries;if(n!==null){let r=ye(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Kg(o),a.contentQueries(2,e[s],s)}}}finally{ye(r)}}}function hd(t,e){return t[ja]?t[aD][an]=e:t[ja]=e,t[aD]=e,e}function hg(t,e,n){Kg(0);let r=ye(null);try{e(t,n)}finally{ye(r)}}function kb(t){return t[Nl]??=[]}function Ob(t){return t.cleanup??=[]}function Fb(t,e){let n=t[jo],r=n?n.get(Hn,null):null;r&&r.handleError(e)}function pm(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],u=n[o++],l=e[s],d=t.data[s];Eb(d,l,r,a,u,i)}}function iO(t,e,n){let r=mT(e,t);wk(t[Xe],r,n)}function oO(t,e){let n=Nr(e,t),r=n[ce];sO(r,n);let i=n[Qn];i!==null&&n[Va]===null&&(n[Va]=am(i,n[jo])),gm(r,n,n[un])}function sO(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function gm(t,e,n){Qg(e);try{let r=t.viewQuery;r!==null&&hg(1,r,n);let i=t.template;i!==null&&Db(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[zn]?.finishViewCreation(t),t.staticContentQueries&&Pb(t,e),t.staticViewQueries&&hg(2,t.viewQuery,n);let o=t.components;o!==null&&aO(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[te]&=-5,Yg()}}function aO(t,e){for(let n=0;n<e.length;n++)oO(t,e[n])}function Lb(t,e,n,r){let i=ye(null);try{let o=e.tView,a=t[te]&4096?4096:16,u=dd(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Ei]=l;let d=t[zn];return d!==null&&(u[zn]=d.createEmbeddedView(o)),gm(o,u,n),u}finally{ye(i)}}function fg(t,e){return!e||e.firstChild===null||ZT(t)}function Vb(t,e,n,r=!0){let i=e[ce];if(Dk(i,e,t,n),r){let s=lg(n,t),a=e[Xe],u=fb(a,t[_i]);u!==null&&Ek(i,t[Pt],a,e,u,s)}let o=e[Va];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function zl(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(Dn(o)),Yn(o)&&uO(o,r);let s=n.type;if(s&8)zl(t,e,n.child,r);else if(s&32){let a=cm(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=gb(e,n);if(Array.isArray(a))r.push(...a);else{let u=Di(e[Qt]);zl(u[ce],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function uO(t,e){for(let n=Vt;n<t.length;n++){let r=t[n],i=r[ce].firstChild;i!==null&&zl(r[ce],r,i,e)}t[_i]!==t[Qn]&&e.push(t[_i])}var jb=[];function cO(t){return t[Kt]??lO(t)}function lO(t){let e=jb.pop()??Object.create(hO);return e.lView=t,e}function dO(t){t.lView[Kt]!==t&&(t.lView=null,jb.push(t))}var hO=De(H({},Ca),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{ad(t.lView)},consumerOnSignalRead(){this.lView[Kt]=this}});function fO(t){let e=t[Kt]??Object.create(pO);return e.lView=t,e}var pO=De(H({},Ca),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=Di(t.lView);for(;e&&!Ub(e[ce]);)e=Di(e);e&&wT(e)},consumerOnSignalRead(){this.lView[Kt]=this}});function Ub(t){return t.type!==2}var gO=100;function Bb(t,e=!0,n=0){let r=t[_n],i=r.rendererFactory,o=!1;o||i.begin?.();try{mO(t,n)}catch(s){throw e&&Fb(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function mO(t,e){let n=ST();try{cD(!0),pg(t,e);let r=0;for(;sd(t);){if(r===gO)throw new J(103,!1);r++,pg(t,1)}}finally{cD(n)}}function yO(t,e,n,r){let i=e[te];if((i&256)===256)return;let o=!1,s=!1;!o&&e[_n].inlineEffectRunner?.flush(),Qg(e);let a=!0,u=null,l=null;o||(Ub(t)?(l=cO(e),u=Bc(l)):g_()===null?(a=!1,l=fO(e),u=Bc(l)):e[Kt]&&(up(e[Kt]),e[Kt]=null));try{vT(e),_P(t.bindingStartIndex),n!==null&&Db(t,e,n,2,r);let d=(i&3)===3;if(!o)if(d){let y=t.preOrderCheckHooks;y!==null&&Tl(e,y,null)}else{let y=t.preOrderHooks;y!==null&&bl(e,y,0,null),Np(e,0)}if(s||vO(e),$b(e,0),t.contentQueries!==null&&Pb(t,e),!o)if(d){let y=t.contentCheckHooks;y!==null&&Tl(e,y)}else{let y=t.contentHooks;y!==null&&bl(e,y,1),Np(e,1)}Ok(t,e);let f=t.components;f!==null&&zb(e,f,0);let g=t.viewQuery;if(g!==null&&hg(2,g,r),!o)if(d){let y=t.viewCheckHooks;y!==null&&Tl(e,y)}else{let y=t.viewHooks;y!==null&&bl(e,y,2),Np(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Mp]){for(let y of e[Mp])y();e[Mp]=null}o||(e[te]&=-73)}catch(d){throw o||ad(e),d}finally{l!==null&&(sp(l,u),a&&dO(l)),Yg()}}function $b(t,e){for(let n=XT(t);n!==null;n=eb(n))for(let r=Vt;r<n.length;r++){let i=n[r];qb(i,e)}}function vO(t){for(let e=XT(t);e!==null;e=eb(e)){if(!(e[te]&kl.HasTransplantedViews))continue;let n=e[Uo];for(let r=0;r<n.length;r++){let i=n[r];wT(i)}}}function wO(t,e,n){let r=Nr(e,t);qb(r,n)}function qb(t,e){Gg(t)&&pg(t,e)}function pg(t,e){let r=t[ce],i=t[te],o=t[Kt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&ap(o)),s||=!1,o&&(o.dirty=!1),t[te]&=-9217,s)yO(r,t,r.template,t[un]);else if(i&8192){$b(t,1);let a=r.components;a!==null&&zb(t,a,1)}}function zb(t,e,n){for(let r=0;r<e.length;r++)wO(t,e[r],n)}function mm(t,e){let n=ST()?64:1088;for(t[_n].changeDetectionScheduler?.notify(e);t;){t[te]|=n;let r=Di(t);if(Qp(t)&&!r)return t;t=r}return null}var Ai=class{get rootNodes(){let e=this._lView,n=e[ce];return zl(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[un]}set context(e){this._lView[un]=e}get destroyed(){return(this._lView[te]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ft];if(Yn(e)){let n=e[Pl],r=n?n.indexOf(this):-1;r>-1&&(cg(e,r),xl(n,r))}this._attachedToViewContainer=!1}lb(this._lView[ce],this._lView)}onDestroy(e){IT(this._lView,e)}markForCheck(){mm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[te]&=-129}reattach(){Zp(this._lView),this._lView[te]|=128}detectChanges(){this._lView[te]|=1024,Bb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new J(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Qp(this._lView),n=this._lView[Ei];n!==null&&!e&&lm(n,this._lView),ub(this._lView[ce],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new J(902,!1);this._appRef=e;let n=Qp(this._lView),r=this._lView[Ei];r!==null&&!n&&cb(r,this._lView),Zp(this._lView)}},Ri=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=_O;let t=e;return t})(),IO=Ri,EO=class extends IO{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=Lb(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Ai(i)}};function _O(){return fd(kt(),Ie())}function fd(t,e){return t.type&4?new EO(e,t,Yo(t,e)):null}var WG=new RegExp(`^(\\d+)*(${lk}|${ck})*(.*)`);var DO=()=>null;function gg(t,e){return DO(t,e)}var Bo=class{},Hb=new z("",{providedIn:"root",factory:()=>!1});var Gb=new z(""),Wb=new z(""),mg=class{},Hl=class{};function TO(t){let e=Error(`No component factory found for ${_t(t)}.`);return e[bO]=t,e}var bO="ngComponent";var yg=class{resolveComponentFactory(e){throw TO(e)}},Sm=class Sm{};Sm.NULL=new yg;var $o=Sm,qo=class{},pd=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>CO();let t=e;return t})();function CO(){let t=Ie(),e=kt(),n=Nr(e.index,t);return(Cr(n)?n:t)[Xe]}var SO=(()=>{let e=class e{};e.\u0275prov=W({token:e,providedIn:"root",factory:()=>null});let t=e;return t})();function vg(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Z_(i,a);else if(o==2){let u=a,l=e[++s];r=Z_(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Gl=class extends $o{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Ar(e);return new zo(n,this.ngModule)}};function DD(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Sr.None;e?n.push({propName:s,templateName:r,isSignal:(a&Sr.SignalBased)!==0}):n.push({propName:s,templateName:r})}return n}function AO(t){let e=t.toLowerCase();return e==="svg"?uP:e==="math"?cP:null}var zo=class extends Hl{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=DD(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return DD(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=UN(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=ye(null);try{i=i||this.ngModule;let s=i instanceof Dt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Xp(e,s):e,u=a.get(qo,null);if(u===null)throw new J(407,!1);let l=a.get(SO,null),d=a.get(Bo,null),f={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:d},g=u.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",_=r?Vk(g,r,this.componentDef.encapsulation,a):ab(g,y,AO(y)),A=512;this.componentDef.signals?A|=4096:this.componentDef.onPush||(A|=16);let C=null;_!==null&&(C=am(_,a,!0));let P=fm(0,null,null,1,0,null,null,null,null,null,null),j=dd(null,P,null,A,null,null,f,g,a,null,C);Qg(j);let F,B,Z=null;try{let K=this.componentDef,E,v=null;K.findHostDirectiveDefs?(E=[],v=new Map,K.findHostDirectiveDefs(K,E,v),E.push(K)):E=[K];let I=RO(j,_);Z=xO(I,_,K,E,j,f,g),B=yT(P,cn),_&&PO(g,K,_,r),n!==void 0&&kO(B,this.ngContentSelectors,n),F=NO(Z,K,E,v,j,[OO]),gm(P,j,null)}catch(K){throw Z!==null&&ag(Z),ag(j),K}finally{Yg()}return new wg(this.componentType,F,Yo(B,j),j,B)}finally{ye(o)}}},wg=class extends mg{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Ai(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;pm(o[ce],o,i,e,n),this.previousInputValues.set(e,n);let s=Nr(this._tNode.index,o);mm(s,1)}}get injector(){return new Ii(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function RO(t,e){let n=t[ce],r=cn;return t[r]=e,Ha(n,r,2,"#host",null)}function xO(t,e,n,r,i,o,s){let a=i[ce];MO(r,t,e,s);let u=null;e!==null&&(u=am(e,i[jo]));let l=o.rendererFactory.createRenderer(e,n),d=16;n.signals?d=4096:n.onPush&&(d=64);let f=dd(i,Sb(n),null,d,i[t.index],t,o,l,null,null,u);return a.firstCreatePass&&dg(a,t,r.length-1),hd(i,f),i[t.index]=f}function MO(t,e,n,r){for(let i of t)e.mergedAttrs=Fa(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(vg(e,e.mergedAttrs,!0),n!==null&&vb(r,n,e))}function NO(t,e,n,r,i,o){let s=kt(),a=i[ce],u=ln(s,i);xb(a,i,s,n,null,r);for(let d=0;d<n.length;d++){let f=s.directiveStart+d,g=Ci(i,a,f,s);Si(g,i)}Mb(a,i,s),u&&Si(u,i);let l=Ci(i,a,s.directiveStart+s.componentOffset,s);if(t[un]=i[un]=l,o!==null)for(let d of o)d(l,e);return Tb(a,s,i),l}function PO(t,e,n,r){if(r)Hp(t,n,["ng-version","18.2.4"]);else{let{attrs:i,classes:o}=BN(e.selectors[0]);i&&Hp(t,n,i),o&&o.length>0&&yb(t,n,o.join(" "))}}function kO(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function OO(){let t=kt();Xg(Ie()[ce],t)}var kr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=FO;let t=e;return t})();function FO(){let t=kt();return Qb(t,Ie())}var LO=kr,Kb=class extends LO{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Yo(this._hostTNode,this._hostLView)}get injector(){return new Ii(this._hostTNode,this._hostLView)}get parentInjector(){let e=em(this._hostTNode,this._hostLView);if(VT(e)){let n=Ll(e,this._hostLView),r=Fl(e),i=n[ce].data[r+8];return new Ii(i,n)}else return new Ii(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=TD(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Vt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=gg(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,fg(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!iP(e),a;if(s)a=n;else{let _=n||{};a=_.index,r=_.injector,i=_.projectableNodes,o=_.environmentInjector||_.ngModuleRef}let u=s?e:new zo(Ar(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let A=(s?l:this.parentInjector).get(Dt,null);A&&(o=A)}let d=Ar(u.componentType??{}),f=gg(this._lContainer,d?.id??null),g=f?.firstChild??null,y=u.create(l,i,g,o);return this.insertImpl(y.hostView,a,fg(this._hostTNode,f)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(hP(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[ft],l=new Kb(u,u[Pt],u[ft]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Vb(s,i,o,r),e.attachToViewContainerRef(),HD(Lp(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=TD(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=cg(this._lContainer,n);r&&(xl(Lp(this._lContainer),n),lb(r[ce],r))}detach(e){let n=this._adjustIndex(e,-1),r=cg(this._lContainer,n);return r&&xl(Lp(this._lContainer),n)!=null?new Ai(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function TD(t){return t[Pl]}function Lp(t){return t[Pl]||(t[Pl]=[])}function Qb(t,e){let n,r=e[t.index];return Yn(r)?n=r:(n=Nb(r,e,null,t),e[t.index]=n,hd(e,n)),jO(n,e,t,r),new Kb(n,t,e)}function VO(t,e){let n=t[Xe],r=n.createComment(""),i=ln(e,t),o=fb(n,i);return ql(n,o,r,Sk(n,i),!1),r}var jO=$O,UO=()=>!1;function BO(t,e,n){return UO(t,e,n)}function $O(t,e,n,r){if(t[_i])return;let i;n.type&8?i=Dn(r):i=VO(e,n),t[_i]=i}var Ig=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Eg=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)ym(e,n).matches!==null&&this.queries[n].setDirty()}},_g=class{constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=YO(e):this.predicate=e}},Dg=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Tg=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,qO(n,o)),this.matchTNodeWithReadOption(e,n,Cl(n,e,o,!1,!1))}else r===Ri?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Cl(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Pr||i===kr||i===Ri&&n.type&4)this.addMatch(n.index,-2);else{let o=Cl(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function qO(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function zO(t,e){return t.type&11?Yo(t,e):t.type&4?fd(t,e):null}function HO(t,e,n,r){return n===-1?zO(e,t):n===-2?GO(t,e,r):Ci(t,t[ce],n,e)}function GO(t,e,n){if(n===Pr)return Yo(e,t);if(n===Ri)return fd(e,t);if(n===kr)return Qb(e,t)}function Yb(t,e,n,r){let i=e[zn].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let d=o[l];a.push(HO(e,d,s[u+1],n.metadata.read))}}i.matches=a}return i.matches}function bg(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=Yb(t,e,i,n);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],d=e[-u];for(let f=Vt;f<d.length;f++){let g=d[f];g[Ei]===g[ft]&&bg(g[ce],g,l,r)}if(d[Uo]!==null){let f=d[Uo];for(let g=0;g<f.length;g++){let y=f[g];bg(y[ce],y,l,r)}}}}}return r}function WO(t,e){return t[zn].queries[e].queryList}function KO(t,e,n){let r=new sg((n&4)===4);return Bk(t,e,r,r.destroy),(e[zn]??=new Eg).queries.push(new Ig(r))-1}function QO(t,e,n){let r=Ct();return r.firstCreatePass&&(ZO(r,new _g(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),KO(r,Ie(),e)}function YO(t){return t.split(",").map(e=>e.trim())}function ZO(t,e,n){t.queries===null&&(t.queries=new Dg),t.queries.track(new Tg(e,n))}function ym(t,e){return t.queries.getByIndex(e)}function JO(t,e){let n=t[ce],r=ym(n,e);return r.crossesNgTemplate?bg(n,t,e,[]):Yb(n,t,r,e)}var bD=new Set;function Zo(t){bD.has(t)||(bD.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function XO(t){return typeof t=="function"&&t[jn]!==void 0}function QG(t,e){Zo("NgSignals");let n=C_(t),r=n[jn];return e?.equal&&(r.equal=e.equal),n.set=i=>cp(r,i),n.update=i=>S_(r,i),n.asReadonly=e1.bind(n),n}function e1(){let t=this[jn];if(t.readonlyFn===void 0){let e=()=>this();e[jn]=t,t.readonlyFn=e}return t.readonlyFn}function Zb(t){return XO(t)&&typeof t.set=="function"}function t1(t){let e=[],n=new Map;function r(i){let o=n.get(i);if(!o){let s=t(i);n.set(i,o=s.then(o1))}return o}return Wl.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,d=i.styleUrls;i.styleUrls.forEach((f,g)=>{a.push(""),s.push(r(f).then(y=>{a[l+g]=y,d.splice(d.indexOf(f),1),d.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let u=Promise.all(s).then(()=>s1(o));e.push(u)}),r1(),Promise.all(e).then(()=>{})}var Wl=new Map,n1=new Set;function r1(){let t=Wl;return Wl=new Map,t}function i1(){return Wl.size===0}function o1(t){return typeof t=="string"?t:t.text()}function s1(t){n1.delete(t)}function a1(t){return Object.getPrototypeOf(t.prototype).constructor}function u1(t){let e=a1(t.type),n=!0,r=[t];for(;e;){let i;if(Rr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new J(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=wl(t.inputs),s.inputTransforms=wl(t.inputTransforms),s.declaredInputs=wl(t.declaredInputs),s.outputs=wl(t.outputs);let a=i.hostBindings;a&&f1(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&d1(t,u),l&&h1(t,l),c1(t,i),rN(t.outputs,i.outputs),Rr(i)&&i.data.animation){let d=t.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===u1&&(n=!1)}}e=Object.getPrototypeOf(e)}l1(r)}function c1(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function l1(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Fa(i.hostAttrs,n=Fa(n,i.hostAttrs))}}function wl(t){return t===Fo?{}:t===Wt?[]:t}function d1(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function h1(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function f1(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var xr=class{},Ua=class{};var Kl=class extends xr{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Gl(this);let o=tT(e);this._bootstrapComponents=sb(o.bootstrap),this._r3Injector=WT(e,n,[{provide:xr,useValue:this},{provide:$o,useValue:this.componentFactoryResolver},...r],_t(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Ql=class extends Ua{constructor(e){super(),this.moduleType=e}create(e){return new Kl(this.moduleType,e,[])}};function p1(t,e,n){return new Kl(t,e,n,!1)}var Cg=class extends xr{constructor(e){super(),this.componentFactoryResolver=new Gl(this),this.instance=null;let n=new La([...e.providers,{provide:xr,useValue:this},{provide:$o,useValue:this.componentFactoryResolver}],e.parent||zg(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function gd(t,e,n=null){return new Cg({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function Jb(t){return m1(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function g1(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function m1(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function Xb(t,e,n){return t[e]=n}function xi(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function y1(t,e,n,r){let i=xi(t,e,n);return xi(t,e+1,r)||i}function v1(t){return(t.flags&32)===32}function w1(t,e,n,r,i,o,s,a,u){let l=e.consts,d=Ha(e,t,4,s||null,a||null);Rb(e,n,d,Ol(l,u)),Xg(e,d);let f=d.tView=fm(2,d,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function eC(t,e,n,r,i,o,s,a,u,l){let d=n+cn,f=e.firstCreatePass?w1(d,e,t,r,i,o,s,a,u):e.data[d];za(f,!1);let g=E1(e,t,f,n);Zg()&&dm(e,t,g,f),Si(g,t);let y=Nb(g,t,g,f);return t[d]=y,hd(t,y),BO(y,f,t),Hg(f)&&bb(e,t,f),u!=null&&Cb(t,f,l),f}function I1(t,e,n,r,i,o,s,a){let u=Ie(),l=Ct(),d=Ol(l.consts,o);return eC(u,l,t,e,n,r,i,d,s,a),I1}var E1=_1;function _1(t,e,n,r){return Jg(!0),e[Xe].createComment("")}var No=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(No||{}),tC=(()=>{let e=class e{constructor(){this.impl=null}execute(){this.impl?.execute()}};e.\u0275prov=W({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})(),wi=class wi{constructor(){this.ngZone=V(he),this.scheduler=V(Bo),this.errorHandler=V(Hn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}execute(){this.executing=!0;for(let e of wi.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&this.sequences.delete(e);for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}};wi.PHASES=[No.EarlyRead,No.Write,No.MixedReadWrite,No.Read],wi.\u0275prov=W({token:wi,providedIn:"root",factory:()=>new wi});var Sg=wi,Ag=class{constructor(e,n,r,i){this.impl=e,this.hooks=n,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy()}};function vm(t,e){!e?.injector&&nP(vm);let n=e?.injector??V(Nt);return mk(n)?(Zo("NgAfterNextRender"),T1(t,n,e,!0)):b1}function D1(t,e){if(t instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[e]=t,n}else return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function T1(t,e,n,r){let i=e.get(tC);i.impl??=e.get(Sg);let o=n?.phase??No.MixedReadWrite,s=new Ag(i.impl,D1(t,o),r,e.get(nm));return i.impl.register(s),s}var b1={destroy(){}};function C1(t,e,n,r){return xi(t,Wg(),n)?e+Vg(n)+r:Ni}function Il(t,e){return t<<17|e<<2}function Mi(t){return t>>17&32767}function S1(t){return(t&2)==2}function A1(t,e){return t&131071|e<<17}function Rg(t){return t|2}function Ho(t){return(t&131068)>>2}function Vp(t,e){return t&-131069|e<<2}function R1(t){return(t&1)===1}function xg(t){return t|1}function x1(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Mi(s),u=Ho(s);t[r]=n;let l=!1,d;if(Array.isArray(n)){let f=n;d=f[1],(d===null||qa(f,d)>0)&&(l=!0)}else d=n;if(i)if(u!==0){let g=Mi(t[a+1]);t[r+1]=Il(g,a),g!==0&&(t[g+1]=Vp(t[g+1],r)),t[a+1]=A1(t[a+1],r)}else t[r+1]=Il(a,0),a!==0&&(t[a+1]=Vp(t[a+1],r)),a=r;else t[r+1]=Il(u,0),a===0?a=r:t[u+1]=Vp(t[u+1],r),u=r;l&&(t[r+1]=Rg(t[r+1])),CD(t,d,r,!0),CD(t,d,r,!1),M1(e,d,t,r,o),s=Il(a,u),o?e.classBindings=s:e.styleBindings=s}function M1(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&qa(o,e)>=0&&(n[r+1]=xg(n[r+1]))}function CD(t,e,n,r){let i=t[n+1],o=e===null,s=r?Mi(i):Ho(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];N1(u,e)&&(a=!0,t[s+1]=r?xg(l):Rg(l)),s=r?Mi(l):Ho(l)}a&&(t[n+1]=r?Rg(i):xg(i))}function N1(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?qa(t,e)>=0:!1}function P1(t,e,n){let r=Ie(),i=Wg();if(xi(r,i,e)){let o=Ct(),s=OT();Ab(o,s,r,t,e,r[Xe],n,!1)}return P1}function SD(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";pm(t,n,o[s],s,r)}function nC(t,e,n){return rC(t,e,n,!1),nC}function k1(t,e){return rC(t,e,null,!0),k1}function rC(t,e,n,r){let i=Ie(),o=Ct(),s=DP(2);if(o.firstUpdatePass&&F1(o,t,s,r),e!==Ni&&xi(i,s,e)){let a=o.data[Qo()];B1(o,a,i,i[Xe],t,i[s+1]=$1(e,n),r,s)}}function O1(t,e){return e>=t.expandoStartIndex}function F1(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Qo()],s=O1(t,n);q1(o,r)&&e===null&&!s&&(e=!1),e=L1(i,o,e,r),x1(i,o,e,n,s,r)}}function L1(t,e,n,r){let i=SP(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=jp(null,t,e,n,r),n=Ba(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=jp(i,t,e,n,r),o===null){let u=V1(t,e,r);u!==void 0&&Array.isArray(u)&&(u=jp(null,t,e,u[1],r),u=Ba(u,e.attrs,r),j1(t,e,r,u))}else o=U1(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function V1(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Ho(r)!==0)return t[Mi(r)]}function j1(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Mi(i)]=r}function U1(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Ba(r,s,n)}return Ba(r,e.attrs,n)}function jp(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Ba(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Ba(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),CN(t,s,n?!0:e[++o]))}return t===void 0?null:t}function B1(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],d=R1(l)?AD(u,e,n,i,Ho(l),s):void 0;if(!Yl(d)){Yl(o)||S1(l)&&(o=AD(u,null,n,i,a,s));let f=mT(Qo(),n);Pk(r,s,f,i,o)}}function AD(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),d=l?u[1]:u,f=d===null,g=n[i+1];g===Ni&&(g=f?Wt:void 0);let y=f?Rp(g,r):d===r?g:void 0;if(l&&!Yl(y)&&(y=Rp(u,r)),Yl(y)&&(a=y,s))return a;let _=t[i+1];i=s?Mi(_):Ho(_)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Rp(u,r))}return a}function Yl(t){return t!==void 0}function $1(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=_t(cd(t)))),t}function q1(t,e){return(t.flags&(e?8:16))!==0}function z1(t,e,n,r,i,o){let s=e.consts,a=Ol(s,i),u=Ha(e,t,2,r,a);return Rb(e,n,u,Ol(s,o)),u.attrs!==null&&vg(u,u.attrs,!1),u.mergedAttrs!==null&&vg(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function iC(t,e,n,r){let i=Ie(),o=Ct(),s=cn+t,a=i[Xe],u=o.firstCreatePass?z1(s,o,i,e,n,r):o.data[s],l=H1(o,i,u,a,e,t);i[s]=l;let d=Hg(u);return za(u,!0),vb(a,l,u),!v1(u)&&Zg()&&dm(o,i,l,u),gP()===0&&Si(l,i),mP(),d&&(bb(o,i,u),Tb(o,u,i)),r!==null&&Cb(i,u),iC}function oC(){let t=kt();bT()?CT():(t=t.parent,za(t,!1));let e=t;vP(e)&&wP(),yP();let n=Ct();return n.firstCreatePass&&(Xg(n,t),dT(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&kP(e)&&SD(n,e,Ie(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&OP(e)&&SD(n,e,Ie(),e.stylesWithoutHost,!1),oC}function wm(t,e,n,r){return iC(t,e,n,r),oC(),wm}var H1=(t,e,n,r,i,o)=>(Jg(!0),ab(r,i,xP()));function YG(){return Ie()}var Zl="en-US";var G1=Zl;function W1(t){typeof t=="string"&&(G1=t.toLowerCase().replace(/_/g,"-"))}var K1=(t,e,n)=>{};function sC(t,e,n,r){let i=Ie(),o=Ct(),s=kt();return aC(o,i,i[Xe],s,t,e,r),sC}function Q1(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Nl],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function aC(t,e,n,r,i,o,s){let a=Hg(r),l=t.firstCreatePass&&Ob(t),d=e[un],f=kb(e),g=!0;if(r.type&3||s){let A=ln(r,e),C=s?s(A):A,P=f.length,j=s?B=>s(Dn(B[r.index])):r.index,F=null;if(!s&&a&&(F=Q1(t,e,i,r.index)),F!==null){let B=F.__ngLastListenerFn__||F;B.__ngNextListenerFn__=o,F.__ngLastListenerFn__=o,g=!1}else{o=xD(r,e,d,o),K1(A,i,o);let B=n.listen(C,i,o);f.push(o,B),l&&l.push(i,j,P,P+1)}}else o=xD(r,e,d,o);let y=r.outputs,_;if(g&&y!==null&&(_=y[i])){let A=_.length;if(A)for(let C=0;C<A;C+=2){let P=_[C],j=_[C+1],Z=e[P][j].subscribe(o),K=f.length;f.push(o,Z),l&&l.push(i,r.index,K,-(K+1))}}}function RD(t,e,n,r){let i=ye(null);try{return wn(6,e,n),n(r)!==!1}catch(o){return Fb(t,o),!1}finally{wn(7,e,n),ye(i)}}function xD(t,e,n,r){return function i(o){if(o===Function)return r;let s=t.componentOffset>-1?Nr(t.index,e):e;mm(s,5);let a=RD(e,n,r,o),u=i.__ngNextListenerFn__;for(;u;)a=RD(e,n,u,o)&&a,u=u.__ngNextListenerFn__;return a}}function ZG(t=1){return RP(t)}function Y1(t,e){let n=null,r=ON(t);for(let i=0;i<e.length;i++){let o=e[i];if(o==="*"){n=i;continue}if(r===null?YD(t,o,!0):VN(r,o))return i}return n}function JG(t){let e=Ie()[Qt][Pt];if(!e.projection){let n=t?t.length:1,r=e.projection=TN(n,null),i=r.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=t?Y1(o,t):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function XG(t,e=0,n,r,i,o){let s=Ie(),a=Ct(),u=r?t+1:null;u!==null&&eC(s,a,u,r,i,o,null,n);let l=Ha(a,cn+t,16,null,n||null);l.projection===null&&(l.projection=e),CT();let f=!s[Va]||DT();s[Qt][Pt].projection[l.projection]===null&&u!==null?Z1(s,a,u):f&&(l.flags&32)!==32&&Mk(a,s,l)}function Z1(t,e,n){let r=cn+n,i=e.data[r],o=t[r],s=gg(o,i.tView.ssrId),a=Lb(t,i,void 0,{dehydratedView:s});Vb(o,a,0,fg(i,s))}function e3(t,e,n){QO(t,e,n)}function J1(t){let e=Ie(),n=Ct(),r=RT();Kg(r+1);let i=ym(n,r);if(t.dirty&&dP(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=JO(e,r);t.reset(o,nk),t.notifyOnChanges()}return!0}return!1}function X1(){return WO(Ie(),RT())}function t3(t){let e=EP();return lP(e,cn+t)}function n3(t,e=""){let n=Ie(),r=Ct(),i=t+cn,o=r.firstCreatePass?Ha(r,i,1,e,null):r.data[i],s=eF(r,n,o,e,t);n[i]=s,Zg()&&dm(r,n,s,o),za(o,!1)}var eF=(t,e,n,r,i)=>(Jg(!0),vk(e[Xe],r));function tF(t){return uC("",t,""),tF}function uC(t,e,n){let r=Ie(),i=C1(r,t,e,n);return i!==Ni&&iO(r,Qo(),i),uC}function nF(t,e,n){Zb(e)&&(e=e());let r=Ie(),i=Wg();if(xi(r,i,e)){let o=Ct(),s=OT();Ab(o,s,r,t,e,r[Xe],n,!1)}return nF}function r3(t,e){let n=Zb(t);return n&&t.set(e),n}function rF(t,e){let n=Ie(),r=Ct(),i=kt();return aC(r,n,n[Xe],i,t,e),rF}function iF(t,e,n){let r=Ct();if(r.firstCreatePass){let i=Rr(t);Mg(n,r.data,r.blueprint,i,!0),Mg(e,r.data,r.blueprint,i,!1)}}function Mg(t,e,n,r,i){if(t=Et(t),Array.isArray(t))for(let o=0;o<t.length;o++)Mg(t[o],e,n,r,i);else{let o=Ct(),s=Ie(),a=kt(),u=Vo(t)?t:Et(t.provide),l=aT(t),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(Vo(t)||!t.multi){let y=new bi(l,i,Zt),_=Bp(u,e,i?d:d+g,f);_===-1?(tg(Vl(a,s),o,u),Up(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[_]=y,s[_]=y)}else{let y=Bp(u,e,d+g,f),_=Bp(u,e,d,d+g),A=y>=0&&n[y],C=_>=0&&n[_];if(i&&!C||!i&&!A){tg(Vl(a,s),o,u);let P=aF(i?sF:oF,n.length,i,r,l);!i&&C&&(n[_].providerFactory=P),Up(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(P),s.push(P)}else{let P=cC(n[i?_:y],l,!i&&r);Up(o,t,y>-1?y:_,P)}!i&&r&&C&&n[_].componentProviders++}}}function Up(t,e,n,r){let i=Vo(e),o=QN(e);if(i||o){let u=(o?Et(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(n);d===-1?l.push(n,[r,u]):l[d+1].push(r,u)}else l.push(n,u)}}}function cC(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Bp(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function oF(t,e,n,r){return Ng(this.multi,[])}function sF(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Ci(n,n[ce],this.providerFactory.index,r);o=a.slice(0,s),Ng(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],Ng(i,o);return o}function Ng(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function aF(t,e,n,r,i){let o=new bi(t,n,Zt);return o.multi=[],o.index=e,o.componentProviders=0,cC(o,i,r&&!n),o}function i3(t,e=[]){return n=>{n.providersResolver=(r,i)=>iF(r,i?i(t):t,e)}}var uF=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=iT(!1,r.type),o=i.length>0?gd([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=W({token:e,providedIn:"environment",factory:()=>new e(L(Dt))});let t=e;return t})();function lC(t){Zo("NgStandalone"),t.getStandaloneInjector=e=>e.get(uF).getOrCreateStandaloneInjector(t)}function o3(t,e,n,r){return cF(Ie(),AT(),t,e,n,r)}function s3(t,e,n,r,i){return lF(Ie(),AT(),t,e,n,r,i)}function dC(t,e){let n=t[e];return n===Ni?void 0:n}function cF(t,e,n,r,i,o){let s=e+n;return xi(t,s,i)?Xb(t,s+1,o?r.call(o,i):r(i)):dC(t,s+1)}function lF(t,e,n,r,i,o,s){let a=e+n;return y1(t,a,i,o)?Xb(t,a+2,s?r.call(s,i,o):r(i,o)):dC(t,a+2)}function a3(t,e){return fd(t,e)}var El=null;function dF(t){El!==null&&(t.defaultEncapsulation!==El.defaultEncapsulation||t.preserveWhitespaces!==El.preserveWhitespaces)||(El=t)}var Mr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},md=new Mr("18.2.4");var yd=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var Im=new z(""),Ga=new z(""),vd=(()=>{let e=class e{constructor(r,i,o){this._ngZone=r,this.registry=i,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Em||(hF(o),o.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{he.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,o){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),r()},i)),this._callbacks.push({doneCb:r,timeoutId:s,updateCb:o})}whenStable(r,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,o),this._runCallbacksIfReady()}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,o){return[]}};e.\u0275fac=function(i){return new(i||e)(L(he),L(wd),L(Ga))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),wd=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return Em?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function hF(t){Em=t}var Em;function Wa(t){return!!t&&typeof t.then=="function"}function hC(t){return!!t&&typeof t.subscribe=="function"}var Id=new z(""),fC=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=V(Id,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(Wa(s))r.push(s);else if(hC(s)){let a=new Promise((u,l)=>{s.subscribe({complete:u,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ed=new z("");function fF(){b_(()=>{throw new J(600,!1)})}function pF(t){return t.isBoundToModule}var gF=10;function mF(t,e,n){try{let r=n();return Wa(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}function pC(t,e){return Array.isArray(e)?e.reduce(pC,t):H(H({},t),e)}var Jn=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=V(ek),this.afterRenderManager=V(tC),this.zonelessEnabled=V(Hb),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new je,this.afterTick=new je,this.componentTypes=[],this.components=[],this.isStable=V(Zn).hasPendingTasks.pipe(ee(r=>!r)),this._injector=V(Dt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let r;return new Promise(i=>{r=this.isStable.subscribe({next:o=>{o&&i()}})}).finally(()=>{r.unsubscribe()})}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof Hl;if(!this._injector.get(fC).done){let y=!o&&eT(r),_=!1;throw new J(405,_)}let a;o?a=r:a=this._injector.get($o).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let u=pF(a)?void 0:this._injector.get(xr),l=i||a.selector,d=a.create(Nt.NULL,[],l,u),f=d.location.nativeElement,g=d.injector.get(Im,null);return g?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),Sl(this.components,d),g?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new J(101,!1);let r=ye(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,ye(r),this.afterTick.next()}}synchronize(){let r=null;this._injector.destroyed||(r=this._injector.get(qo,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<gF;)this.synchronizeOnce(r)}synchronizeOnce(r){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:o,notifyErrorHandler:s}of this._views)yF(o,s,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else r?.begin?.(),r?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:r})=>sd(r))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Sl(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Ed,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Sl(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new J(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Sl(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function yF(t,e,n,r){if(!n&&!sd(t))return;Bb(t,e,n&&!r?0:1)}var Pg=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},_d=(()=>{let e=class e{compileModuleSync(r){return new Ql(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=tT(r),s=sb(o.declarations).reduce((a,u)=>{let l=Ar(u);return l&&a.push(new zo(l)),a},[]);return new Pg(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),vF=new z("");function wF(t,e,n){let r=new Ql(n);return Promise.resolve(r)}function MD(t){for(let e=t.length-1;e>=0;e--)if(t[e]!==void 0)return t[e]}var IF=(()=>{let e=class e{constructor(){this.zone=V(he),this.changeDetectionScheduler=V(Bo),this.applicationRef=V(Jn)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function EF({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new he(De(H({},gC()),{scheduleInRootZone:n})),[{provide:he,useFactory:t},{provide:Lo,multi:!0,useFactory:()=>{let r=V(IF,{optional:!0});return()=>r.initialize()}},{provide:Lo,multi:!0,useFactory:()=>{let r=V(_F);return()=>{r.initialize()}}},e===!0?{provide:Gb,useValue:!0}:[],{provide:Wb,useValue:n??KT}]}function gC(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var _F=(()=>{let e=class e{constructor(){this.subscription=new Le,this.initialized=!1,this.zone=V(he),this.pendingTasks=V(Zn)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{he.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{he.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var DF=(()=>{let e=class e{constructor(){this.appRef=V(Jn),this.taskService=V(Zn),this.ngZone=V(he),this.zonelessEnabled=V(Hb),this.disableScheduling=V(Gb,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Le,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ul):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(V(Wb,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Bl||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?gD:QT;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ul+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let r=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(r),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,gD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(r)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function TF(){return typeof $localize<"u"&&$localize.locale||Zl}var _m=new z("",{providedIn:"root",factory:()=>V(_m,le.Optional|le.SkipSelf)||TF()});var Dm=new z("");function _l(t){return!!t.platformInjector}function bF(t){let e=_l(t)?t.r3Injector:t.moduleRef.injector,n=e.get(he);return n.run(()=>{_l(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Hn,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),_l(t)){let o=()=>e.destroy(),s=t.platformInjector.get(Dm);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else t.moduleRef.onDestroy(()=>{Sl(t.allPlatformModules,t.moduleRef),i.unsubscribe()});return mF(r,n,()=>{let o=e.get(fC);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(_m,Zl);if(W1(s||Zl),_l(t)){let a=e.get(Jn);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return CF(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function CF(t,e){let n=t.injector.get(Jn);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new J(-403,!1);e.push(t)}var mC=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let o=i?.scheduleInRootZone,s=()=>XP(i?.ngZone,De(H({},gC({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing})),{scheduleInRootZone:o})),a=i?.ignoreChangesOutsideZone,u=[EF({ngZoneFactory:s,ignoreChangesOutsideZone:a}),{provide:Bo,useExisting:DF}],l=p1(r.moduleType,this.injector,u);return bF({moduleRef:l,allPlatformModules:this._modules})}bootstrapModule(r,i=[]){let o=pC({},i);return wF(this.injector,o,r).then(s=>this.bootstrapModuleFactory(s,o))}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new J(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(Dm,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(i){return new(i||e)(L(Nt))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),ka=null,yC=new z("");function SF(t){if(ka&&!ka.get(yC,!1))throw new J(400,!1);fF(),ka=t;let e=t.get(mC);return xF(t),e}function Tm(t,e,n=[]){let r=`Platform: ${e}`,i=new z(r);return(o=[])=>{let s=vC();if(!s||s.injector.get(yC,!1)){let a=[...n,...o,{provide:i,useValue:!0}];t?t(a):SF(AF(a,r))}return RF(i)}}function AF(t=[],e){return Nt.create({name:e,providers:[{provide:nd,useValue:"platform"},{provide:Dm,useValue:new Set([()=>ka=null])},...t]})}function RF(t){let e=vC();if(!e)throw new J(401,!1);return e}function vC(){return ka?.get(mC)??null}function xF(t){t.get(om,null)?.forEach(n=>n())}function bm(){return!1}var Ka=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=MF;let t=e;return t})();function MF(t){return NF(kt(),Ie(),(t&16)===16)}function NF(t,e,n){if(id(t)&&!n){let r=Nr(t.index,e);return new Ai(r,r)}else if(t.type&175){let r=e[Qt];return new Ai(r,e)}return null}var kg=class{constructor(){}supports(e){return Jb(e)}create(e){return new Og(e)}},PF=(t,e)=>e,Og=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||PF}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<ND(r,i,o)?n:r,a=ND(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,d=u-i;if(l!=d){for(let g=0;g<l;g++){let y=g<o.length?o[g]:o[g]=0,_=y+g;d<=_&&_<l&&(o[g]=y+1)}let f=s.previousIndex;o[f]=d-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!Jb(e))throw new J(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,g1(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new Fg(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Jl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Jl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Fg=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Lg=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Jl=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Lg,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function ND(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function PD(){return new Cm([new kg])}var Cm=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||PD()),deps:[[e,new Ug,new Kn]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new J(901,!1)}};e.\u0275prov=W({token:e,providedIn:"root",factory:PD});let t=e;return t})();var wC=Tm(null,"core",[]),IC=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(L(Jn))},e.\u0275mod=bt({type:e}),e.\u0275inj=Tt({});let t=e;return t})();var EC=new z("");function _C(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function u3(t,e){Zo("NgSignals");let n=__(t);return e?.equal&&(n[jn].equal=e.equal),n}function kF(t){let e=ye(null);try{return t()}finally{ye(e)}}function DC(t){let e=Ar(t);if(!e)return null;let n=new zo(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var RC=null;function Pi(){return RC}function xC(t){RC??=t}var Dd=class{};var st=new z(""),Pm=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>V(VF),providedIn:"platform"});let t=e;return t})(),MC=new z(""),VF=(()=>{let e=class e extends Pm{constructor(){super(),this._doc=V(st),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Pi().getBaseHref(this._doc)}onPopState(r){let i=Pi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Pi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function km(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function TC(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function er(t){return t&&t[0]!=="?"?"?"+t:t}var ki=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>V(Om),providedIn:"root"});let t=e;return t})(),NC=new z(""),Om=(()=>{let e=class e extends ki{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??V(st).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return km(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+er(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+er(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+er(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(L(Pm),L(NC,8))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),PC=(()=>{let e=class e extends ki{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=km(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+er(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+er(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(L(Pm),L(NC,8))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),Xo=(()=>{let e=class e{constructor(r){this._subject=new ht,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=BF(TC(bC(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+er(i))}normalize(r){return e.stripTrailingSlash(UF(this._basePath,bC(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+er(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+er(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=er,e.joinWithSlash=km,e.stripTrailingSlash=TC,e.\u0275fac=function(i){return new(i||e)(L(ki))},e.\u0275prov=W({token:e,factory:()=>jF(),providedIn:"root"});let t=e;return t})();function jF(){return new Xo(L(ki))}function UF(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function bC(t){return t.replace(/\/index.html$/,"")}function BF(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Td(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Am=/\s+/,CC=[],P3=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=CC,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(Am):CC}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(Am):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let o=this.stateMap.get(r);o!==void 0?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],o=r[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(Am).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};e.\u0275fac=function(i){return new(i||e)(Zt(Pr),Zt(pd))},e.\u0275dir=Go({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var Rm=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},k3=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,s,a)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new Rm(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(s===null?void 0:s);else if(s!==null){let u=i.get(s);i.move(u,a),SC(u,o)}});for(let o=0,s=i.length;o<s;o++){let u=i.get(o).context;u.index=o,u.count=s,u.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let s=i.get(o.currentIndex);SC(s,o)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(Zt(kr),Zt(Ri),Zt(Cm))},e.\u0275dir=Go({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function SC(t,e){t.context.$implicit=e.item}var O3=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new xm,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){AC("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){AC("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(Zt(kr),Zt(Ri))},e.\u0275dir=Go({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),xm=class{constructor(){this.$implicit=null,this.ngIf=null}};function AC(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${_t(e)}'.`)}var kC=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=bt({type:e}),e.\u0275inj=Tt({});let t=e;return t})(),Fm="browser",$F="server";function qF(t){return t===Fm}function Or(t){return t===$F}var OC=(()=>{let e=class e{};e.\u0275prov=W({token:e,providedIn:"root",factory:()=>qF(V(nt))?new Mm(V(st),window):new Nm});let t=e;return t})(),Mm=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=zF(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function zF(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Nm=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Jo=class{};var Ya=class{},Cd=class{},tr=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var Vm=class{encodeKey(e){return FC(e)}encodeValue(e){return FC(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function GF(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],u=n.get(s)||[];u.push(a),n.set(s,u)}),n}var WF=/%(\d[a-f0-9])/gi,KF={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function FC(t){return encodeURIComponent(t).replace(WF,(e,n)=>KF[n]??e)}function bd(t){return`${t}`}var Lr=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Vm,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=GF(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(bd):[bd(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(bd(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(bd(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var jm=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function QF(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function LC(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function VC(t){return typeof Blob<"u"&&t instanceof Blob}function jC(t){return typeof FormData<"u"&&t instanceof FormData}function YF(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Qa=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(QF(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new tr,this.context??=new jm,!this.params)this.params=new Lr,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),u=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+u+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||LC(this.body)||VC(this.body)||jC(this.body)||YF(this.body)?this.body:this.body instanceof Lr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||jC(this.body)?null:VC(this.body)?this.body.type||null:LC(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Lr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,l=e.headers||this.headers,d=e.params||this.params,f=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((g,y)=>g.set(y,e.setHeaders[y]),l)),e.setParams&&(d=Object.keys(e.setParams).reduce((g,y)=>g.set(y,e.setParams[y]),d)),new t(n,r,s,{params:d,headers:l,context:f,reportProgress:u,responseType:i,withCredentials:a,transferCache:o})}},Vr=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Vr||{}),Za=class{constructor(e,n=200,r="OK"){this.headers=e.headers||new tr,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Sd=class t extends Za{constructor(e={}){super(e),this.type=Vr.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Ja=class t extends Za{constructor(e={}){super(e),this.type=Vr.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Fr=class extends Za{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},zC=200,ZF=204;function Lm(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var JF=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,o={}){let s;if(r instanceof Qa)s=r;else{let l;o.headers instanceof tr?l=o.headers:l=new tr(o.headers);let d;o.params&&(o.params instanceof Lr?d=o.params:d=new Lr({fromObject:o.params})),s=new Qa(r,i,o.body!==void 0?o.body:null,{headers:l,context:o.context,params:d,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let a=Y(s).pipe($n(l=>this.handler.handle(l)));if(r instanceof Qa||o.observe==="events")return a;let u=a.pipe(Je(l=>l instanceof Ja));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return u.pipe(ee(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return u.pipe(ee(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return u.pipe(ee(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return u.pipe(ee(l=>l.body))}case"response":return u;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new Lr().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,o={}){return this.request("PATCH",r,Lm(o,i))}post(r,i,o={}){return this.request("POST",r,Lm(o,i))}put(r,i,o={}){return this.request("PUT",r,Lm(o,i))}};e.\u0275fac=function(i){return new(i||e)(L(Ya))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),XF=/^\)\]\}',?\n/,eL="X-Request-URL";function UC(t){if(t.url)return t.url;let e=eL.toLocaleLowerCase();return t.headers.get(e)}var tL=(()=>{let e=class e{constructor(){this.fetchImpl=V(Um,{optional:!0})?.fetch??((...r)=>globalThis.fetch(...r)),this.ngZone=V(he)}handle(r){return new re(i=>{let o=new AbortController;return this.doRequest(r,o.signal,i).then(Bm,s=>i.error(new Fr({error:s}))),()=>o.abort()})}doRequest(r,i,o){return N(this,null,function*(){let s=this.createRequestInit(r),a;try{let _=this.ngZone.runOutsideAngular(()=>this.fetchImpl(r.urlWithParams,H({signal:i},s)));nL(_),o.next({type:Vr.Sent}),a=yield _}catch(_){o.error(new Fr({error:_,status:_.status??0,statusText:_.statusText,url:r.urlWithParams,headers:_.headers}));return}let u=new tr(a.headers),l=a.statusText,d=UC(a)??r.urlWithParams,f=a.status,g=null;if(r.reportProgress&&o.next(new Sd({headers:u,status:f,statusText:l,url:d})),a.body){let _=a.headers.get("content-length"),A=[],C=a.body.getReader(),P=0,j,F,B=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>N(this,null,function*(){for(;;){let{done:K,value:E}=yield C.read();if(K)break;if(A.push(E),P+=E.length,r.reportProgress){F=r.responseType==="text"?(F??"")+(j??=new TextDecoder).decode(E,{stream:!0}):void 0;let v=()=>o.next({type:Vr.DownloadProgress,total:_?+_:void 0,loaded:P,partialText:F});B?B.run(v):v()}}}));let Z=this.concatChunks(A,P);try{let K=a.headers.get("Content-Type")??"";g=this.parseBody(r,Z,K)}catch(K){o.error(new Fr({error:K,headers:new tr(a.headers),status:a.status,statusText:a.statusText,url:UC(a)??r.urlWithParams}));return}}f===0&&(f=g?zC:0),f>=200&&f<300?(o.next(new Ja({body:g,headers:u,status:f,statusText:l,url:d})),o.complete()):o.error(new Fr({error:g,headers:u,status:f,statusText:l,url:d}))})}parseBody(r,i,o){switch(r.responseType){case"json":let s=new TextDecoder().decode(i).replace(XF,"");return s===""?null:JSON.parse(s);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:o});case"arraybuffer":return i.buffer}}createRequestInit(r){let i={},o=r.withCredentials?"include":void 0;if(r.headers.forEach((s,a)=>i[s]=a.join(",")),r.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!r.headers.has("Content-Type")){let s=r.detectContentTypeHeader();s!==null&&(i["Content-Type"]=s)}return{body:r.serializeBody(),method:r.method,headers:i,credentials:o}}concatChunks(r,i){let o=new Uint8Array(i),s=0;for(let a of r)o.set(a,s),s+=a.length;return o}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),Um=class{};function Bm(){}function nL(t){t.then(Bm,Bm)}function HC(t,e){return e(t)}function rL(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}function iL(t,e,n){return(r,i)=>Yt(n,()=>e(r,o=>t(o,i)))}var oL=new z(""),$m=new z(""),sL=new z(""),GC=new z("",{providedIn:"root",factory:()=>!0});function aL(){let t=null;return(e,n)=>{t===null&&(t=(V(oL,{optional:!0})??[]).reduceRight(rL,HC));let r=V(Zn);if(V(GC)){let o=r.add();return t(e,n).pipe(Dr(()=>r.remove(o)))}else return t(e,n)}}var BC=(()=>{let e=class e extends Ya{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=V(Zn),this.contributeToStability=V(GC)}handle(r){if(this.chain===null){let i=Array.from(new Set([...this.injector.get($m),...this.injector.get(sL,[])]));this.chain=i.reduceRight((o,s)=>iL(o,s,this.injector),HC)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(r,o=>this.backend.handle(o)).pipe(Dr(()=>this.pendingTasks.remove(i)))}else return this.chain(r,i=>this.backend.handle(i))}};e.\u0275fac=function(i){return new(i||e)(L(Cd),L(Dt))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})();var uL=/^\)\]\}',?\n/;function cL(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var $C=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new J(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?ve(i.\u0275loadImpl()):Y(null)).pipe(Me(()=>new re(s=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((C,P)=>a.setRequestHeader(C,P.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let C=r.detectContentTypeHeader();C!==null&&a.setRequestHeader("Content-Type",C)}if(r.responseType){let C=r.responseType.toLowerCase();a.responseType=C!=="json"?C:"text"}let u=r.serializeBody(),l=null,d=()=>{if(l!==null)return l;let C=a.statusText||"OK",P=new tr(a.getAllResponseHeaders()),j=cL(a)||r.url;return l=new Sd({headers:P,status:a.status,statusText:C,url:j}),l},f=()=>{let{headers:C,status:P,statusText:j,url:F}=d(),B=null;P!==ZF&&(B=typeof a.response>"u"?a.responseText:a.response),P===0&&(P=B?zC:0);let Z=P>=200&&P<300;if(r.responseType==="json"&&typeof B=="string"){let K=B;B=B.replace(uL,"");try{B=B!==""?JSON.parse(B):null}catch(E){B=K,Z&&(Z=!1,B={error:E,text:B})}}Z?(s.next(new Ja({body:B,headers:C,status:P,statusText:j,url:F||void 0})),s.complete()):s.error(new Fr({error:B,headers:C,status:P,statusText:j,url:F||void 0}))},g=C=>{let{url:P}=d(),j=new Fr({error:C,status:a.status||0,statusText:a.statusText||"Unknown Error",url:P||void 0});s.error(j)},y=!1,_=C=>{y||(s.next(d()),y=!0);let P={type:Vr.DownloadProgress,loaded:C.loaded};C.lengthComputable&&(P.total=C.total),r.responseType==="text"&&a.responseText&&(P.partialText=a.responseText),s.next(P)},A=C=>{let P={type:Vr.UploadProgress,loaded:C.loaded};C.lengthComputable&&(P.total=C.total),s.next(P)};return a.addEventListener("load",f),a.addEventListener("error",g),a.addEventListener("timeout",g),a.addEventListener("abort",g),r.reportProgress&&(a.addEventListener("progress",_),u!==null&&a.upload&&a.upload.addEventListener("progress",A)),a.send(u),s.next({type:Vr.Sent}),()=>{a.removeEventListener("error",g),a.removeEventListener("abort",g),a.removeEventListener("load",f),a.removeEventListener("timeout",g),r.reportProgress&&(a.removeEventListener("progress",_),u!==null&&a.upload&&a.upload.removeEventListener("progress",A)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(L(Jo))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),WC=new z(""),lL="XSRF-TOKEN",dL=new z("",{providedIn:"root",factory:()=>lL}),hL="X-XSRF-TOKEN",fL=new z("",{providedIn:"root",factory:()=>hL}),Ad=class{},pL=(()=>{let e=class e{constructor(r,i,o){this.doc=r,this.platform=i,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=Td(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(L(st),L(nt),L(dL))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})();function gL(t,e){let n=t.url.toLowerCase();if(!V(WC)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=V(Ad).getToken(),i=V(fL);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var KC=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(KC||{});function mL(t,e){return{\u0275kind:t,\u0275providers:e}}function yL(...t){let e=[JF,$C,BC,{provide:Ya,useExisting:BC},{provide:Cd,useFactory:()=>V(tL,{optional:!0})??V($C)},{provide:$m,useValue:gL,multi:!0},{provide:WC,useValue:!0},{provide:Ad,useClass:pL}];for(let n of t)e.push(...n.\u0275providers);return Wo(e)}var qC=new z("");function vL(){return mL(KC.LegacyInterceptors,[{provide:qC,useFactory:aL},{provide:$m,useExisting:qC,multi:!0}])}var Q3=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=bt({type:e}),e.\u0275inj=Tt({providers:[yL(vL())]});let t=e;return t})();var Hm=class extends Dd{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Gm=class t extends Hm{static makeCurrent(){xC(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=wL();return n==null?null:IL(n)}resetBaseElement(){Xa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Td(document.cookie,e)}},Xa=null;function wL(){return Xa=Xa||document.querySelector("base"),Xa?Xa.getAttribute("href"):null}function IL(t){return new URL(t,document.baseURI).pathname}var Wm=class{addToWindow(e){Wn.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new J(5103,!1);return o},Wn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Wn.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let i=Wn.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};Wn.frameworkStabilizers||(Wn.frameworkStabilizers=[]),Wn.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let i=e.getTestability(n);return i??(r?Pi().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},EL=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),Rd=new z(""),JC=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new J(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(L(Rd),L(he))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),eu=class{constructor(e){this._doc=e}},qm="ng-app-id",XC=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Or(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${qm}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(qm),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(qm,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(L(st),L(ud),L(sm,8),L(nt))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),zm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Qm=/%COMP%/g,e0="%COMP%",_L=`_nghost-${e0}`,DL=`_ngcontent-${e0}`,TL=!0,bL=new z("",{providedIn:"root",factory:()=>TL});function CL(t){return DL.replace(Qm,t)}function SL(t){return _L.replace(Qm,t)}function t0(t,e){return e.map(n=>n.replace(Qm,t))}var QC=(()=>{let e=class e{constructor(r,i,o,s,a,u,l,d=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=u,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Or(u),this.defaultRenderer=new tu(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===En.ShadowDom&&(i=De(H({},i),{encapsulation:En.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof xd?o.applyToHost(r):o instanceof nu&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,u=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(i.encapsulation){case En.Emulated:s=new xd(l,d,i,this.appId,f,a,u,g);break;case En.ShadowDom:return new Km(l,d,r,i,a,u,this.nonce,g);default:s=new nu(l,d,i,f,a,u,g);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(L(JC),L(XC),L(ud),L(bL),L(st),L(nt),L(he),L(sm))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),tu=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(zm[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(YC(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(YC(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new J(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=zm[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=zm[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Gn.DashCase|Gn.Important)?e.style.setProperty(n,r,i&Gn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Gn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Pi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function YC(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Km=class extends tu{constructor(e,n,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=t0(i.id,i.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},nu=class extends tu{constructor(e,n,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?t0(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},xd=class extends nu{constructor(e,n,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,n,r,o,s,a,u,l),this.contentAttr=CL(l),this.hostAttr=SL(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},AL=(()=>{let e=class e extends eu{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(L(st))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),RL=(()=>{let e=class e extends eu{constructor(r){super(r),this.delegate=V(EC,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,i,o){return this.delegate.addEventListener(r,i,o)}removeEventListener(r,i,o){return this.delegate.removeEventListener(r,i,o)}};e.\u0275fac=function(i){return new(i||e)(L(st))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),ZC=["alt","control","meta","shift"],xL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ML={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},NL=(()=>{let e=class e extends eu{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Pi().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),a="code."),ZC.forEach(d=>{let f=i.indexOf(d);f>-1&&(i.splice(f,1),a+=d+".")}),a+=s,i.length!=0||s.length===0)return null;let l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let o=xL[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),ZC.forEach(a=>{if(a!==o){let u=ML[a];u(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(L(st))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})();function PL(){Gm.makeCurrent()}function kL(){return new Hn}function OL(){return nb(document),document}var FL=[{provide:nt,useValue:Fm},{provide:om,useValue:PL,multi:!0},{provide:st,useFactory:OL,deps:[]}],m8=Tm(wC,"browser",FL),LL=new z(""),VL=[{provide:Ga,useClass:Wm,deps:[]},{provide:Im,useClass:vd,deps:[he,wd,Ga]},{provide:vd,useClass:vd,deps:[he,wd,Ga]}],jL=[{provide:nd,useValue:"root"},{provide:Hn,useFactory:kL,deps:[]},{provide:Rd,useClass:AL,multi:!0,deps:[st,he,nt]},{provide:Rd,useClass:NL,multi:!0,deps:[st]},{provide:Rd,useClass:RL,multi:!0},QC,XC,JC,{provide:qo,useExisting:QC},{provide:Jo,useClass:EL,deps:[]},[]],y8=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:ud,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(L(LL,12))},e.\u0275mod=bt({type:e}),e.\u0275inj=Tt({providers:[...jL,...VL],imports:[kC,IC]});let t=e;return t})();var n0=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(L(st))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var BL="firebase",$L="10.13.1";qt(BL,$L,"app");var Tn=new Mr("ANGULARFIRE2_VERSION");function S8(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var qL=(t,e)=>{let n=e?[e]:Lc(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Fi=class{constructor(){return qL(zL)}},zL="app-check";function es(){}var Md=class{zone;delegate;constructor(e,n=Ip){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},Ym=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",es,{},es,es)),n.pipe(He({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},ts=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Md(Zone.current)),this.insideAngular=n.run(()=>new Md(Zone.current,wr)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(L(he))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Nd(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function HL(t){return Nd().ngZone.runOutsideAngular(()=>t())}function Oi(t){return Nd().ngZone.run(()=>t())}function St(t){return GL(Nd())(t)}function GL(t){return function(n){return n=n.lift(new Ym(t.ngZone)),n.pipe(zt(t.outsideAngular),Lt(t.insideAngular))}}var WL=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Oi(()=>t.apply(void 0,r))},r0=(t,e)=>function(){let n,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(n||=Oi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",es,{},es,es))),r[o]=WL(r[o],n));let i=HL(()=>t.apply(this,r));if(!e)if(i instanceof re){let o=Nd();return i.pipe(zt(o.outsideAngular),Lt(o.insideAngular))}else return Oi(()=>i);return i instanceof re?i.pipe(St):i instanceof Promise?Oi(()=>new Promise((o,s)=>i.then(a=>Oi(()=>o(a)),a=>Oi(()=>s(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Oi(()=>i)};var ru=class{constructor(e){return e}},Zm=class{constructor(){return Lc()}};function KL(t){return t&&t.length===1?t[0]:new ru(Ta())}var Jm=new z("angularfire2._apps"),QL={provide:ru,useFactory:KL,deps:[[new Kn,Jm]]},YL={provide:Zm,deps:[[new Kn,Jm]]};function ZL(t){return(e,n)=>{let r=n.get(nt);qt("angularfire",Tn.full,"core"),qt("angularfire",Tn.full,"app"),qt("angular",md.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new ru(i)}}function L8(t,...e){return Wo([QL,YL,{provide:Jm,useFactory:ZL(t),multi:!0,deps:[he,Nt,ts,...e]}])}var V8=r0(f_,!0);var JL=new Map,XL={activated:!1,tokenObservers:[]},eV={initialized:!1,enabled:!1};function dn(t){return JL.get(t)||Object.assign({},XL)}function c0(){return eV}var tV="https://content-firebaseappcheck.googleapis.com/v1";var nV="exchangeDebugToken",o0={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Q8=24*60*60*1e3;var ey=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return N(this,null,function*(){this.stop();try{this.pending=new Xf,this.pending.promise.catch(n=>{}),yield rV(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Xf,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function rV(t){return new Promise(e=>{setTimeout(e,t)})}var iV={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},jr=new d_("appCheck","AppCheck",iV);function l0(t){if(!dn(t).activated)throw jr.create("use-before-activation",{appName:t.name})}function d0(r,i){return N(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,a)}catch(y){throw jr.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw jr.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw jr.create("fetch-parse-error",{originalErrorMessage:y?.message})}let d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw jr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let f=Number(d[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+f,issuedAtTimeMillis:g}})}function h0(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${tV}/projects/${n}/apps/${r}:${nV}?key=${i}`,body:{debug_token:e}}}var oV="firebase-app-check-database",sV=1,ty="firebase-app-check-store";var Pd=null;function aV(){return Pd||(Pd=new Promise((t,e)=>{try{let n=indexedDB.open(oV,sV);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(jr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(ty,{keyPath:"compositeKey"})}}}catch(n){e(jr.create("storage-open",{originalErrorMessage:n?.message}))}}),Pd)}function uV(t,e){return cV(lV(t),e)}function cV(t,e){return N(this,null,function*(){let r=(yield aV()).transaction(ty,"readwrite"),o=r.objectStore(ty).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(jr.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function lV(t){return`${t.options.appId}-${t.name}`}var ny=new Fc("@firebase/app-check");function Xm(t,e){return Oc()?uV(t,e).catch(n=>{ny.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function f0(){return c0().enabled}function p0(){return N(this,null,function*(){let t=c0();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var dV={error:"UNKNOWN_ERROR"};function hV(t){return a_.encodeString(JSON.stringify(t),!1)}function ry(t,e=!1){return N(this,null,function*(){let n=t.app;l0(n);let r=dn(n),i=r.token,o;if(i&&!iu(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(iu(u)?i=u:yield Xm(n,void 0))}if(!e&&i&&iu(i))return{token:i.token};let s=!1;if(f0()){r.exchangeTokenPromise||(r.exchangeTokenPromise=d0(h0(n,yield p0()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield Xm(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield dn(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?ny.warn(u.message):ny.error(u),o=u}let a;return i?o?iu(i)?a={token:i.token,internalError:o}:a=a0(o):(a={token:i.token},r.token=i,yield Xm(n,i)):a=a0(o),s&&mV(n,a),a})}function fV(t){return N(this,null,function*(){let e=t.app;l0(e);let{provider:n}=dn(e);if(f0()){let r=yield p0(),{token:i}=yield d0(h0(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function pV(t,e,n,r){let{app:i}=t,o=dn(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&iu(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),s0(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>s0(t))}function g0(t,e){let n=dn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function s0(t){let{app:e}=t,n=dn(e),r=n.tokenRefresher;r||(r=gV(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function gV(t){let{app:e}=t;return new ey(()=>N(this,null,function*(){let n=dn(e),r;if(n.token?r=yield ry(t,!0):r=yield ry(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=dn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},o0.RETRIAL_MIN_WAIT,o0.RETRIAL_MAX_WAIT)}function mV(t,e){let n=dn(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function iu(t){return t.expireTimeMillis-Date.now()>0}function a0(t){return{token:hV(dV),error:t}}var iy=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=dn(this.app);for(let n of e)g0(this.app,n.next);return Promise.resolve()}};function yV(t,e){return new iy(t,e)}function vV(t){return{getToken:e=>ry(t,e),getLimitedUseToken:()=>fV(t),addTokenListener:e=>pV(t,"INTERNAL",e),removeTokenListener:e=>g0(t.app,e)}}var wV="@firebase/app-check",IV="0.8.7";var EV="app-check",u0="app-check-internal";function _V(){Da(new hi(EV,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return yV(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(u0).initialize()})),Da(new hi(u0,t=>{let e=t.getProvider("app-check").getImmediate();return vV(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),qt(wV,IV)}_V();var DV=["localhost","0.0.0.0","127.0.0.1"],a6=typeof window<"u"&&DV.includes(window.location.hostname);var TV="firebase",bV="10.13.1";vt.registerVersion(TV,bV,"app-compat");var CV=["ngOnDestroy"],v0=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{if(t[o])return r?.spy?.get&&r.spy.get(o,t[o]),t[o];if(CV.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(l=>n.run(()=>l)):n.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(d=>{let f=d?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,f),f})})})});var kd=class{constructor(e){return e}},ns=new z("angularfire2.app.options"),rs=new z("angularfire2.app.name");function ou(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let s=vt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>vt.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;SV("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new kd(s)}var SV=(t,...e)=>{bm()&&typeof console<"u"&&console[t](...e)},AV={provide:kd,useFactory:ou,deps:[ns,he,[new Kn,rs]]},v6=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:ns,useValue:n},{provide:rs,useValue:r}]}}constructor(n){vt.registerVersion("angularfire",Tn.full,"core"),vt.registerVersion("angularfire",Tn.full,"app-compat"),vt.registerVersion("angular",md.full,n.toString())}static \u0275fac=function(r){return new(r||t)(L(nt))};static \u0275mod=bt({type:t});static \u0275inj=Tt({providers:[AV]})}return t})();function Od(t,e,n,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return RV(i,s)||(y0("error",`${e} was already initialized on the ${n} Firebase App with different settings.${xV?" You may need to reload as Firebase is not HMR aware.":""}`),y0("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function RV(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var xV=typeof module<"u"&&!!module.hot,y0=(t,...e)=>{bm()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var oy=new z("angularfire2.auth.use-emulator"),sy=new z("angularfire2.auth.settings"),ay=new z("angularfire2.auth.tenant-id"),uy=new z("angularfire2.auth.langugage-code"),cy=new z("angularfire2.auth.use-device-language"),ly=new z("angularfire.auth.persistence"),dy=(t,e,n,r,i,o,s,a)=>Od(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[l,d]of Object.entries(s))u.settings[l]=d;return a&&u.setPersistence(a),u},[n,r,i,o,s,a]),su=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,u,l,d,f,g,y){let _=new je,A=Y(void 0).pipe(Lt(s.outsideAngular),Me(()=>o.runOutsideAngular(()=>import("./chunk-ORPU7VCZ.js"))),ee(()=>ou(n,o,r)),ee(C=>dy(C,o,a,l,d,f,u,g)),ml({bufferSize:1,refCount:!1}));if(Or(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Y(null);else{A.pipe(Ht()).subscribe();let C=A.pipe(Me(F=>F.getRedirectResult().then(B=>B,()=>null)),St,ml({bufferSize:1,refCount:!1})),P=A.pipe(Me(F=>new re(B=>({unsubscribe:o.runOutsideAngular(()=>F.onAuthStateChanged(Z=>B.next(Z),Z=>B.error(Z),()=>B.complete()))})))),j=A.pipe(Me(F=>new re(B=>({unsubscribe:o.runOutsideAngular(()=>F.onIdTokenChanged(Z=>B.next(Z),Z=>B.error(Z),()=>B.complete()))}))));this.authState=C.pipe(yl(P),zt(s.outsideAngular),Lt(s.insideAngular)),this.user=C.pipe(yl(j),zt(s.outsideAngular),Lt(s.insideAngular)),this.idToken=this.user.pipe(Me(F=>F?ve(F.getIdToken()):Y(null))),this.idTokenResult=this.user.pipe(Me(F=>F?ve(F.getIdTokenResult()):Y(null))),this.credential=Dp(C,_,this.authState.pipe(Je(F=>!F))).pipe(ee(F=>F?.user?F:null),zt(s.outsideAngular),Lt(s.insideAngular))}return v0(this,A,o,{spy:{apply:(C,P,j)=>{(C.startsWith("signIn")||C.startsWith("createUser"))&&j.then(F=>_.next(F))}}})}static \u0275fac=function(r){return new(r||t)(L(ns),L(rs,8),L(nt),L(he),L(ts),L(oy,8),L(sy,8),L(ay,8),L(uy,8),L(cy,8),L(ly,8),L(Fi,8))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),P6=(()=>{class t{constructor(){vt.registerVersion("angularfire",Tn.full,"auth-compat")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=bt({type:t});static \u0275inj=Tt({providers:[su]})}return t})();var I0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},E0={};var Ur,hy;(function(){var t;function e(E,v){function I(){}I.prototype=v.prototype,E.D=v.prototype,E.prototype=new I,E.prototype.constructor=E,E.C=function(D,T,S){for(var w=Array(arguments.length-2),Fn=2;Fn<arguments.length;Fn++)w[Fn-2]=arguments[Fn];return v.prototype[T].apply(D,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,v,I){I||(I=0);var D=Array(16);if(typeof v=="string")for(var T=0;16>T;++T)D[T]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(T=0;16>T;++T)D[T]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=E.g[0],I=E.g[1],T=E.g[2];var S=E.g[3],w=v+(S^I&(T^S))+D[0]+3614090360&4294967295;v=I+(w<<7&4294967295|w>>>25),w=S+(T^v&(I^T))+D[1]+3905402710&4294967295,S=v+(w<<12&4294967295|w>>>20),w=T+(I^S&(v^I))+D[2]+606105819&4294967295,T=S+(w<<17&4294967295|w>>>15),w=I+(v^T&(S^v))+D[3]+3250441966&4294967295,I=T+(w<<22&4294967295|w>>>10),w=v+(S^I&(T^S))+D[4]+4118548399&4294967295,v=I+(w<<7&4294967295|w>>>25),w=S+(T^v&(I^T))+D[5]+1200080426&4294967295,S=v+(w<<12&4294967295|w>>>20),w=T+(I^S&(v^I))+D[6]+2821735955&4294967295,T=S+(w<<17&4294967295|w>>>15),w=I+(v^T&(S^v))+D[7]+4249261313&4294967295,I=T+(w<<22&4294967295|w>>>10),w=v+(S^I&(T^S))+D[8]+1770035416&4294967295,v=I+(w<<7&4294967295|w>>>25),w=S+(T^v&(I^T))+D[9]+2336552879&4294967295,S=v+(w<<12&4294967295|w>>>20),w=T+(I^S&(v^I))+D[10]+4294925233&4294967295,T=S+(w<<17&4294967295|w>>>15),w=I+(v^T&(S^v))+D[11]+2304563134&4294967295,I=T+(w<<22&4294967295|w>>>10),w=v+(S^I&(T^S))+D[12]+1804603682&4294967295,v=I+(w<<7&4294967295|w>>>25),w=S+(T^v&(I^T))+D[13]+4254626195&4294967295,S=v+(w<<12&4294967295|w>>>20),w=T+(I^S&(v^I))+D[14]+2792965006&4294967295,T=S+(w<<17&4294967295|w>>>15),w=I+(v^T&(S^v))+D[15]+1236535329&4294967295,I=T+(w<<22&4294967295|w>>>10),w=v+(T^S&(I^T))+D[1]+4129170786&4294967295,v=I+(w<<5&4294967295|w>>>27),w=S+(I^T&(v^I))+D[6]+3225465664&4294967295,S=v+(w<<9&4294967295|w>>>23),w=T+(v^I&(S^v))+D[11]+643717713&4294967295,T=S+(w<<14&4294967295|w>>>18),w=I+(S^v&(T^S))+D[0]+3921069994&4294967295,I=T+(w<<20&4294967295|w>>>12),w=v+(T^S&(I^T))+D[5]+3593408605&4294967295,v=I+(w<<5&4294967295|w>>>27),w=S+(I^T&(v^I))+D[10]+38016083&4294967295,S=v+(w<<9&4294967295|w>>>23),w=T+(v^I&(S^v))+D[15]+3634488961&4294967295,T=S+(w<<14&4294967295|w>>>18),w=I+(S^v&(T^S))+D[4]+3889429448&4294967295,I=T+(w<<20&4294967295|w>>>12),w=v+(T^S&(I^T))+D[9]+568446438&4294967295,v=I+(w<<5&4294967295|w>>>27),w=S+(I^T&(v^I))+D[14]+3275163606&4294967295,S=v+(w<<9&4294967295|w>>>23),w=T+(v^I&(S^v))+D[3]+4107603335&4294967295,T=S+(w<<14&4294967295|w>>>18),w=I+(S^v&(T^S))+D[8]+1163531501&4294967295,I=T+(w<<20&4294967295|w>>>12),w=v+(T^S&(I^T))+D[13]+2850285829&4294967295,v=I+(w<<5&4294967295|w>>>27),w=S+(I^T&(v^I))+D[2]+4243563512&4294967295,S=v+(w<<9&4294967295|w>>>23),w=T+(v^I&(S^v))+D[7]+1735328473&4294967295,T=S+(w<<14&4294967295|w>>>18),w=I+(S^v&(T^S))+D[12]+2368359562&4294967295,I=T+(w<<20&4294967295|w>>>12),w=v+(I^T^S)+D[5]+4294588738&4294967295,v=I+(w<<4&4294967295|w>>>28),w=S+(v^I^T)+D[8]+2272392833&4294967295,S=v+(w<<11&4294967295|w>>>21),w=T+(S^v^I)+D[11]+1839030562&4294967295,T=S+(w<<16&4294967295|w>>>16),w=I+(T^S^v)+D[14]+4259657740&4294967295,I=T+(w<<23&4294967295|w>>>9),w=v+(I^T^S)+D[1]+2763975236&4294967295,v=I+(w<<4&4294967295|w>>>28),w=S+(v^I^T)+D[4]+1272893353&4294967295,S=v+(w<<11&4294967295|w>>>21),w=T+(S^v^I)+D[7]+4139469664&4294967295,T=S+(w<<16&4294967295|w>>>16),w=I+(T^S^v)+D[10]+3200236656&4294967295,I=T+(w<<23&4294967295|w>>>9),w=v+(I^T^S)+D[13]+681279174&4294967295,v=I+(w<<4&4294967295|w>>>28),w=S+(v^I^T)+D[0]+3936430074&4294967295,S=v+(w<<11&4294967295|w>>>21),w=T+(S^v^I)+D[3]+3572445317&4294967295,T=S+(w<<16&4294967295|w>>>16),w=I+(T^S^v)+D[6]+76029189&4294967295,I=T+(w<<23&4294967295|w>>>9),w=v+(I^T^S)+D[9]+3654602809&4294967295,v=I+(w<<4&4294967295|w>>>28),w=S+(v^I^T)+D[12]+3873151461&4294967295,S=v+(w<<11&4294967295|w>>>21),w=T+(S^v^I)+D[15]+530742520&4294967295,T=S+(w<<16&4294967295|w>>>16),w=I+(T^S^v)+D[2]+3299628645&4294967295,I=T+(w<<23&4294967295|w>>>9),w=v+(T^(I|~S))+D[0]+4096336452&4294967295,v=I+(w<<6&4294967295|w>>>26),w=S+(I^(v|~T))+D[7]+1126891415&4294967295,S=v+(w<<10&4294967295|w>>>22),w=T+(v^(S|~I))+D[14]+2878612391&4294967295,T=S+(w<<15&4294967295|w>>>17),w=I+(S^(T|~v))+D[5]+4237533241&4294967295,I=T+(w<<21&4294967295|w>>>11),w=v+(T^(I|~S))+D[12]+1700485571&4294967295,v=I+(w<<6&4294967295|w>>>26),w=S+(I^(v|~T))+D[3]+2399980690&4294967295,S=v+(w<<10&4294967295|w>>>22),w=T+(v^(S|~I))+D[10]+4293915773&4294967295,T=S+(w<<15&4294967295|w>>>17),w=I+(S^(T|~v))+D[1]+2240044497&4294967295,I=T+(w<<21&4294967295|w>>>11),w=v+(T^(I|~S))+D[8]+1873313359&4294967295,v=I+(w<<6&4294967295|w>>>26),w=S+(I^(v|~T))+D[15]+4264355552&4294967295,S=v+(w<<10&4294967295|w>>>22),w=T+(v^(S|~I))+D[6]+2734768916&4294967295,T=S+(w<<15&4294967295|w>>>17),w=I+(S^(T|~v))+D[13]+1309151649&4294967295,I=T+(w<<21&4294967295|w>>>11),w=v+(T^(I|~S))+D[4]+4149444226&4294967295,v=I+(w<<6&4294967295|w>>>26),w=S+(I^(v|~T))+D[11]+3174756917&4294967295,S=v+(w<<10&4294967295|w>>>22),w=T+(v^(S|~I))+D[2]+718787259&4294967295,T=S+(w<<15&4294967295|w>>>17),w=I+(S^(T|~v))+D[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(T+(w<<21&4294967295|w>>>11))&4294967295,E.g[2]=E.g[2]+T&4294967295,E.g[3]=E.g[3]+S&4294967295}r.prototype.u=function(E,v){v===void 0&&(v=E.length);for(var I=v-this.blockSize,D=this.B,T=this.h,S=0;S<v;){if(T==0)for(;S<=I;)i(this,E,S),S+=this.blockSize;if(typeof E=="string"){for(;S<v;)if(D[T++]=E.charCodeAt(S++),T==this.blockSize){i(this,D),T=0;break}}else for(;S<v;)if(D[T++]=E[S++],T==this.blockSize){i(this,D),T=0;break}}this.h=T,this.o+=v},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;var I=8*this.o;for(v=E.length-8;v<E.length;++v)E[v]=I&255,I/=256;for(this.u(E),E=Array(16),v=I=0;4>v;++v)for(var D=0;32>D;D+=8)E[I++]=this.g[v]>>>D&255;return E};function o(E,v){var I=a;return Object.prototype.hasOwnProperty.call(I,E)?I[E]:I[E]=v(E)}function s(E,v){this.h=v;for(var I=[],D=!0,T=E.length-1;0<=T;T--){var S=E[T]|0;D&&S==v||(I[T]=S,D=!1)}this.g=I}var a={};function u(E){return-128<=E&&128>E?o(E,function(v){return new s([v|0],0>v?-1:0)}):new s([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return f;if(0>E)return C(l(-E));for(var v=[],I=1,D=0;E>=I;D++)v[D]=E/I|0,I*=4294967296;return new s(v,0)}function d(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return C(d(E.substring(1),v));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),D=f,T=0;T<E.length;T+=8){var S=Math.min(8,E.length-T),w=parseInt(E.substring(T,T+S),v);8>S?(S=l(Math.pow(v,S)),D=D.j(S).add(l(w))):(D=D.j(I),D=D.add(l(w)))}return D}var f=u(0),g=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(A(this))return-C(this).m();for(var E=0,v=1,I=0;I<this.g.length;I++){var D=this.i(I);E+=(0<=D?D:4294967296+D)*v,v*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(_(this))return"0";if(A(this))return"-"+C(this).toString(E);for(var v=l(Math.pow(E,6)),I=this,D="";;){var T=B(I,v).g;I=P(I,T.j(v));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(E);if(I=T,_(I))return S+D;for(;6>S.length;)S="0"+S;D=S+D}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function _(E){if(E.h!=0)return!1;for(var v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function A(E){return E.h==-1}t.l=function(E){return E=P(this,E),A(E)?-1:_(E)?0:1};function C(E){for(var v=E.g.length,I=[],D=0;D<v;D++)I[D]=~E.g[D];return new s(I,~E.h).add(g)}t.abs=function(){return A(this)?C(this):this},t.add=function(E){for(var v=Math.max(this.g.length,E.g.length),I=[],D=0,T=0;T<=v;T++){var S=D+(this.i(T)&65535)+(E.i(T)&65535),w=(S>>>16)+(this.i(T)>>>16)+(E.i(T)>>>16);D=w>>>16,S&=65535,w&=65535,I[T]=w<<16|S}return new s(I,I[I.length-1]&-2147483648?-1:0)};function P(E,v){return E.add(C(v))}t.j=function(E){if(_(this)||_(E))return f;if(A(this))return A(E)?C(this).j(C(E)):C(C(this).j(E));if(A(E))return C(this.j(C(E)));if(0>this.l(y)&&0>E.l(y))return l(this.m()*E.m());for(var v=this.g.length+E.g.length,I=[],D=0;D<2*v;D++)I[D]=0;for(D=0;D<this.g.length;D++)for(var T=0;T<E.g.length;T++){var S=this.i(D)>>>16,w=this.i(D)&65535,Fn=E.i(T)>>>16,ra=E.i(T)&65535;I[2*D+2*T]+=w*ra,j(I,2*D+2*T),I[2*D+2*T+1]+=S*ra,j(I,2*D+2*T+1),I[2*D+2*T+1]+=w*Fn,j(I,2*D+2*T+1),I[2*D+2*T+2]+=S*Fn,j(I,2*D+2*T+2)}for(D=0;D<v;D++)I[D]=I[2*D+1]<<16|I[2*D];for(D=v;D<2*v;D++)I[D]=0;return new s(I,0)};function j(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function F(E,v){this.g=E,this.h=v}function B(E,v){if(_(v))throw Error("division by zero");if(_(E))return new F(f,f);if(A(E))return v=B(C(E),v),new F(C(v.g),C(v.h));if(A(v))return v=B(E,C(v)),new F(C(v.g),v.h);if(30<E.g.length){if(A(E)||A(v))throw Error("slowDivide_ only works with positive integers.");for(var I=g,D=v;0>=D.l(E);)I=Z(I),D=Z(D);var T=K(I,1),S=K(D,1);for(D=K(D,2),I=K(I,2);!_(D);){var w=S.add(D);0>=w.l(E)&&(T=T.add(I),S=w),D=K(D,1),I=K(I,1)}return v=P(E,T.j(v)),new F(T,v)}for(T=f;0<=E.l(v);){for(I=Math.max(1,Math.floor(E.m()/v.m())),D=Math.ceil(Math.log(I)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),S=l(I),w=S.j(v);A(w)||0<w.l(E);)I-=D,S=l(I),w=S.j(v);_(S)&&(S=g),T=T.add(S),E=P(E,w)}return new F(T,E)}t.A=function(E){return B(this,E).h},t.and=function(E){for(var v=Math.max(this.g.length,E.g.length),I=[],D=0;D<v;D++)I[D]=this.i(D)&E.i(D);return new s(I,this.h&E.h)},t.or=function(E){for(var v=Math.max(this.g.length,E.g.length),I=[],D=0;D<v;D++)I[D]=this.i(D)|E.i(D);return new s(I,this.h|E.h)},t.xor=function(E){for(var v=Math.max(this.g.length,E.g.length),I=[],D=0;D<v;D++)I[D]=this.i(D)^E.i(D);return new s(I,this.h^E.h)};function Z(E){for(var v=E.g.length+1,I=[],D=0;D<v;D++)I[D]=E.i(D)<<1|E.i(D-1)>>>31;return new s(I,E.h)}function K(E,v){var I=v>>5;v%=32;for(var D=E.g.length-I,T=[],S=0;S<D;S++)T[S]=0<v?E.i(S+I)>>>v|E.i(S+I+1)<<32-v:E.i(S+I);return new s(T,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,hy=E0.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=d,Ur=E0.Integer=s}).apply(typeof I0<"u"?I0:typeof self<"u"?self:typeof window<"u"?window:{});var Fd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},nr={};var fy,py,is,gy,au,Ld,my,yy,vy;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,h,p){return c==Array.prototype||c==Object.prototype||(c[h]=p.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fd=="object"&&Fd];for(var h=0;h<c.length;++h){var p=c[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(c,h){if(h)e:{var p=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var b=c[m];if(!(b in p))break e;p=p[b]}c=c[c.length-1],m=p[c],h=h(m),h!=m&&h!=null&&e(p,c,{configurable:!0,writable:!0,value:h})}}function o(c,h){c instanceof String&&(c+="");var p=0,m=!1,b={next:function(){if(!m&&p<c.length){var M=p++;return{value:h(M,c[M]),done:!1}}return m=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return o(this,function(h,p){return p})}});var s=s||{},a=this||self;function u(c){var h=typeof c;return h=h!="object"?h:c?Array.isArray(c)?"array":h:"null",h=="array"||h=="object"&&typeof c.length=="number"}function l(c){var h=typeof c;return h=="object"&&c!=null||h=="function"}function d(c,h,p){return c.call.apply(c.bind,arguments)}function f(c,h,p){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,m),c.apply(h,b)}}return function(){return c.apply(h,arguments)}}function g(c,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function y(c,h){var p=Array.prototype.slice.call(arguments,1);return function(){var m=p.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function _(c,h){function p(){}p.prototype=h.prototype,c.aa=h.prototype,c.prototype=new p,c.prototype.constructor=c,c.Qb=function(m,b,M){for(var U=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)U[Te-2]=arguments[Te];return h.prototype[b].apply(m,U)}}function A(c){let h=c.length;if(0<h){let p=Array(h);for(let m=0;m<h;m++)p[m]=c[m];return p}return[]}function C(c,h){for(let p=1;p<arguments.length;p++){let m=arguments[p];if(u(m)){let b=c.length||0,M=m.length||0;c.length=b+M;for(let U=0;U<M;U++)c[b+U]=m[U]}else c.push(m)}}class P{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function j(c){return/^[\s\xa0]*$/.test(c)}function F(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function B(c){return B[" "](c),c}B[" "]=function(){};var Z=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function K(c,h,p){for(let m in c)h.call(p,c[m],m,c)}function E(c,h){for(let p in c)h.call(void 0,c[p],p,c)}function v(c){let h={};for(let p in c)h[p]=c[p];return h}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(c,h){let p,m;for(let b=1;b<arguments.length;b++){m=arguments[b];for(p in m)c[p]=m[p];for(let M=0;M<I.length;M++)p=I[M],Object.prototype.hasOwnProperty.call(m,p)&&(c[p]=m[p])}}function T(c){var h=1;c=c.split(":");let p=[];for(;0<h&&c.length;)p.push(c.shift()),h--;return c.length&&p.push(c.join(":")),p}function S(c){a.setTimeout(()=>{throw c},0)}function w(){var c=Sf;let h=null;return c.g&&(h=c.g,c.g=c.g.next,c.g||(c.h=null),h.next=null),h}class Fn{constructor(){this.h=this.g=null}add(h,p){let m=ra.get();m.set(h,p),this.h?this.h.next=m:this.g=m,this.h=m}}var ra=new P(()=>new Gx,c=>c.reset());class Gx{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let ia,oa=!1,Sf=new Fn,rE=()=>{let c=a.Promise.resolve(void 0);ia=()=>{c.then(Wx)}};var Wx=()=>{for(var c;c=w();){try{c.h.call(c.g)}catch(p){S(p)}var h=ra;h.j(c),100>h.h&&(h.h++,c.next=h.g,h.g=c)}oa=!1};function gr(){this.s=this.s,this.C=this.C}gr.prototype.s=!1,gr.prototype.ma=function(){this.s||(this.s=!0,this.N())},gr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ut(c,h){this.type=c,this.g=this.target=h,this.defaultPrevented=!1}ut.prototype.h=function(){this.defaultPrevented=!0};var Kx=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,h=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return c}();function sa(c,h){if(ut.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var p=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=h,h=c.relatedTarget){if(Z){e:{try{B(h.nodeName);var b=!0;break e}catch{}b=!1}b||(h=null)}}else p=="mouseover"?h=c.fromElement:p=="mouseout"&&(h=c.toElement);this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Qx[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&sa.aa.h.call(this)}}_(sa,ut);var Qx={2:"touch",3:"pen",4:"mouse"};sa.prototype.h=function(){sa.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var aa="closure_listenable_"+(1e6*Math.random()|0),Yx=0;function Zx(c,h,p,m,b){this.listener=c,this.proxy=null,this.src=h,this.type=p,this.capture=!!m,this.ha=b,this.key=++Yx,this.da=this.fa=!1}function yc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function vc(c){this.src=c,this.g={},this.h=0}vc.prototype.add=function(c,h,p,m,b){var M=c.toString();c=this.g[M],c||(c=this.g[M]=[],this.h++);var U=Rf(c,h,m,b);return-1<U?(h=c[U],p||(h.fa=!1)):(h=new Zx(h,this.src,M,!!m,b),h.fa=p,c.push(h)),h};function Af(c,h){var p=h.type;if(p in c.g){var m=c.g[p],b=Array.prototype.indexOf.call(m,h,void 0),M;(M=0<=b)&&Array.prototype.splice.call(m,b,1),M&&(yc(h),c.g[p].length==0&&(delete c.g[p],c.h--))}}function Rf(c,h,p,m){for(var b=0;b<c.length;++b){var M=c[b];if(!M.da&&M.listener==h&&M.capture==!!p&&M.ha==m)return b}return-1}var xf="closure_lm_"+(1e6*Math.random()|0),Mf={};function iE(c,h,p,m,b){if(m&&m.once)return sE(c,h,p,m,b);if(Array.isArray(h)){for(var M=0;M<h.length;M++)iE(c,h[M],p,m,b);return null}return p=Of(p),c&&c[aa]?c.K(h,p,l(m)?!!m.capture:!!m,b):oE(c,h,p,!1,m,b)}function oE(c,h,p,m,b,M){if(!h)throw Error("Invalid event type");var U=l(b)?!!b.capture:!!b,Te=Pf(c);if(Te||(c[xf]=Te=new vc(c)),p=Te.add(h,p,m,U,M),p.proxy)return p;if(m=Jx(),p.proxy=m,m.src=c,m.listener=p,c.addEventListener)Kx||(b=U),b===void 0&&(b=!1),c.addEventListener(h.toString(),m,b);else if(c.attachEvent)c.attachEvent(uE(h.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Jx(){function c(p){return h.call(c.src,c.listener,p)}let h=Xx;return c}function sE(c,h,p,m,b){if(Array.isArray(h)){for(var M=0;M<h.length;M++)sE(c,h[M],p,m,b);return null}return p=Of(p),c&&c[aa]?c.L(h,p,l(m)?!!m.capture:!!m,b):oE(c,h,p,!0,m,b)}function aE(c,h,p,m,b){if(Array.isArray(h))for(var M=0;M<h.length;M++)aE(c,h[M],p,m,b);else m=l(m)?!!m.capture:!!m,p=Of(p),c&&c[aa]?(c=c.i,h=String(h).toString(),h in c.g&&(M=c.g[h],p=Rf(M,p,m,b),-1<p&&(yc(M[p]),Array.prototype.splice.call(M,p,1),M.length==0&&(delete c.g[h],c.h--)))):c&&(c=Pf(c))&&(h=c.g[h.toString()],c=-1,h&&(c=Rf(h,p,m,b)),(p=-1<c?h[c]:null)&&Nf(p))}function Nf(c){if(typeof c!="number"&&c&&!c.da){var h=c.src;if(h&&h[aa])Af(h.i,c);else{var p=c.type,m=c.proxy;h.removeEventListener?h.removeEventListener(p,m,c.capture):h.detachEvent?h.detachEvent(uE(p),m):h.addListener&&h.removeListener&&h.removeListener(m),(p=Pf(h))?(Af(p,c),p.h==0&&(p.src=null,h[xf]=null)):yc(c)}}}function uE(c){return c in Mf?Mf[c]:Mf[c]="on"+c}function Xx(c,h){if(c.da)c=!0;else{h=new sa(h,this);var p=c.listener,m=c.ha||c.src;c.fa&&Nf(c),c=p.call(m,h)}return c}function Pf(c){return c=c[xf],c instanceof vc?c:null}var kf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Of(c){return typeof c=="function"?c:(c[kf]||(c[kf]=function(h){return c.handleEvent(h)}),c[kf])}function ct(){gr.call(this),this.i=new vc(this),this.M=this,this.F=null}_(ct,gr),ct.prototype[aa]=!0,ct.prototype.removeEventListener=function(c,h,p,m){aE(this,c,h,p,m)};function mt(c,h){var p,m=c.F;if(m)for(p=[];m;m=m.F)p.push(m);if(c=c.M,m=h.type||h,typeof h=="string")h=new ut(h,c);else if(h instanceof ut)h.target=h.target||c;else{var b=h;h=new ut(m,c),D(h,b)}if(b=!0,p)for(var M=p.length-1;0<=M;M--){var U=h.g=p[M];b=wc(U,m,!0,h)&&b}if(U=h.g=c,b=wc(U,m,!0,h)&&b,b=wc(U,m,!1,h)&&b,p)for(M=0;M<p.length;M++)U=h.g=p[M],b=wc(U,m,!1,h)&&b}ct.prototype.N=function(){if(ct.aa.N.call(this),this.i){var c=this.i,h;for(h in c.g){for(var p=c.g[h],m=0;m<p.length;m++)yc(p[m]);delete c.g[h],c.h--}}this.F=null},ct.prototype.K=function(c,h,p,m){return this.i.add(String(c),h,!1,p,m)},ct.prototype.L=function(c,h,p,m){return this.i.add(String(c),h,!0,p,m)};function wc(c,h,p,m){if(h=c.i.g[String(h)],!h)return!0;h=h.concat();for(var b=!0,M=0;M<h.length;++M){var U=h[M];if(U&&!U.da&&U.capture==p){var Te=U.listener,it=U.ha||U.src;U.fa&&Af(c.i,U),b=Te.call(it,m)!==!1&&b}}return b&&!m.defaultPrevented}function cE(c,h,p){if(typeof c=="function")p&&(c=g(c,p));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(c,h||0)}function lE(c){c.g=cE(()=>{c.g=null,c.i&&(c.i=!1,lE(c))},c.l);let h=c.h;c.h=null,c.m.apply(null,h)}class eM extends gr{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:lE(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ua(c){gr.call(this),this.h=c,this.g={}}_(ua,gr);var dE=[];function hE(c){K(c.g,function(h,p){this.g.hasOwnProperty(p)&&Nf(h)},c),c.g={}}ua.prototype.N=function(){ua.aa.N.call(this),hE(this)},ua.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ff=a.JSON.stringify,tM=a.JSON.parse,nM=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Lf(){}Lf.prototype.h=null;function fE(c){return c.h||(c.h=c.i())}function pE(){}var ca={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Vf(){ut.call(this,"d")}_(Vf,ut);function jf(){ut.call(this,"c")}_(jf,ut);var ui={},gE=null;function Ic(){return gE=gE||new ct}ui.La="serverreachability";function mE(c){ut.call(this,ui.La,c)}_(mE,ut);function la(c){let h=Ic();mt(h,new mE(h))}ui.STAT_EVENT="statevent";function yE(c,h){ut.call(this,ui.STAT_EVENT,c),this.stat=h}_(yE,ut);function yt(c){let h=Ic();mt(h,new yE(h,c))}ui.Ma="timingevent";function vE(c,h){ut.call(this,ui.Ma,c),this.size=h}_(vE,ut);function da(c,h){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},h)}function ha(){this.g=!0}ha.prototype.xa=function(){this.g=!1};function rM(c,h,p,m,b,M){c.info(function(){if(c.g)if(M)for(var U="",Te=M.split("&"),it=0;it<Te.length;it++){var we=Te[it].split("=");if(1<we.length){var lt=we[0];we=we[1];var dt=lt.split("_");U=2<=dt.length&&dt[1]=="type"?U+(lt+"="+we+"&"):U+(lt+"=redacted&")}}else U=null;else U=M;return"XMLHTTP REQ ("+m+") [attempt "+b+"]: "+h+`
`+p+`
`+U})}function iM(c,h,p,m,b,M,U){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+b+"]: "+h+`
`+p+`
`+M+" "+U})}function fo(c,h,p,m){c.info(function(){return"XMLHTTP TEXT ("+h+"): "+sM(c,p)+(m?" "+m:"")})}function oM(c,h){c.info(function(){return"TIMEOUT: "+h})}ha.prototype.info=function(){};function sM(c,h){if(!c.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(c=0;c<p.length;c++)if(Array.isArray(p[c])){var m=p[c];if(!(2>m.length)){var b=m[1];if(Array.isArray(b)&&!(1>b.length)){var M=b[0];if(M!="noop"&&M!="stop"&&M!="close")for(var U=1;U<b.length;U++)b[U]=""}}}}return Ff(p)}catch{return h}}var Ec={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},wE={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Uf;function _c(){}_(_c,Lf),_c.prototype.g=function(){return new XMLHttpRequest},_c.prototype.i=function(){return{}},Uf=new _c;function mr(c,h,p,m){this.j=c,this.i=h,this.l=p,this.R=m||1,this.U=new ua(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new IE}function IE(){this.i=null,this.g="",this.h=!1}var EE={},Bf={};function $f(c,h,p){c.L=1,c.v=Cc(Ln(h)),c.m=p,c.P=!0,_E(c,null)}function _E(c,h){c.F=Date.now(),Dc(c),c.A=Ln(c.v);var p=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),FE(p.i,"t",m),c.C=0,p=c.j.J,c.h=new IE,c.g=e_(c.j,p?h:null,!c.m),0<c.O&&(c.M=new eM(g(c.Y,c,c.g),c.O)),h=c.U,p=c.g,m=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(dE[0]=b.toString()),b=dE);for(var M=0;M<b.length;M++){var U=iE(p,b[M],m||h.handleEvent,!1,h.h||h);if(!U)break;h.g[U.key]=U}h=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,h)):(c.u="GET",c.g.ea(c.A,c.u,null,h)),la(),rM(c.i,c.u,c.A,c.l,c.R,c.m)}mr.prototype.ca=function(c){c=c.target;let h=this.M;h&&Vn(c)==3?h.j():this.Y(c)},mr.prototype.Y=function(c){try{if(c==this.g)e:{let dt=Vn(this.g);var h=this.g.Ba();let mo=this.g.Z();if(!(3>dt)&&(dt!=3||this.g&&(this.h.h||this.g.oa()||qE(this.g)))){this.J||dt!=4||h==7||(h==8||0>=mo?la(3):la(2)),qf(this);var p=this.g.Z();this.X=p;t:if(DE(this)){var m=qE(this.g);c="";var b=m.length,M=Vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ci(this),fa(this);var U="";break t}this.h.i=new a.TextDecoder}for(h=0;h<b;h++)this.h.h=!0,c+=this.h.i.decode(m[h],{stream:!(M&&h==b-1)});m.length=0,this.h.g+=c,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=p==200,iM(this.i,this.u,this.A,this.l,this.R,dt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Te,it=this.g;if((Te=it.g?it.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(Te)){var we=Te;break t}}we=null}if(p=we)fo(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zf(this,p);else{this.o=!1,this.s=3,yt(12),ci(this),fa(this);break e}}if(this.P){p=!0;let rn;for(;!this.J&&this.C<U.length;)if(rn=aM(this,U),rn==Bf){dt==4&&(this.s=4,yt(14),p=!1),fo(this.i,this.l,null,"[Incomplete Response]");break}else if(rn==EE){this.s=4,yt(15),fo(this.i,this.l,U,"[Invalid Chunk]"),p=!1;break}else fo(this.i,this.l,rn,null),zf(this,rn);if(DE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dt!=4||U.length!=0||this.h.h||(this.s=1,yt(16),p=!1),this.o=this.o&&p,!p)fo(this.i,this.l,U,"[Invalid Chunked Response]"),ci(this),fa(this);else if(0<U.length&&!this.W){this.W=!0;var lt=this.j;lt.g==this&&lt.ba&&!lt.M&&(lt.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),Yf(lt),lt.M=!0,yt(11))}}else fo(this.i,this.l,U,null),zf(this,U);dt==4&&ci(this),this.o&&!this.J&&(dt==4?YE(this.j,this):(this.o=!1,Dc(this)))}else TM(this.g),p==400&&0<U.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),ci(this),fa(this)}}}catch{}finally{}};function DE(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function aM(c,h){var p=c.C,m=h.indexOf(`
`,p);return m==-1?Bf:(p=Number(h.substring(p,m)),isNaN(p)?EE:(m+=1,m+p>h.length?Bf:(h=h.slice(m,m+p),c.C=m+p,h)))}mr.prototype.cancel=function(){this.J=!0,ci(this)};function Dc(c){c.S=Date.now()+c.I,TE(c,c.I)}function TE(c,h){if(c.B!=null)throw Error("WatchDog timer not null");c.B=da(g(c.ba,c),h)}function qf(c){c.B&&(a.clearTimeout(c.B),c.B=null)}mr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(oM(this.i,this.A),this.L!=2&&(la(),yt(17)),ci(this),this.s=2,fa(this)):TE(this,this.S-c)};function fa(c){c.j.G==0||c.J||YE(c.j,c)}function ci(c){qf(c);var h=c.M;h&&typeof h.ma=="function"&&h.ma(),c.M=null,hE(c.U),c.g&&(h=c.g,c.g=null,h.abort(),h.ma())}function zf(c,h){try{var p=c.j;if(p.G!=0&&(p.g==c||Hf(p.h,c))){if(!c.K&&Hf(p.h,c)&&p.G==3){try{var m=p.Da.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var b=m;if(b[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<c.F)Mc(p),Rc(p);else break e;Qf(p),yt(18)}}else p.za=b[1],0<p.za-p.T&&37500>b[2]&&p.F&&p.v==0&&!p.C&&(p.C=da(g(p.Za,p),6e3));if(1>=SE(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else di(p,11)}else if((c.K||p.g==c)&&Mc(p),!j(h))for(b=p.Da.g.parse(h),h=0;h<b.length;h++){let we=b[h];if(p.T=we[0],we=we[1],p.G==2)if(we[0]=="c"){p.K=we[1],p.ia=we[2];let lt=we[3];lt!=null&&(p.la=lt,p.j.info("VER="+p.la));let dt=we[4];dt!=null&&(p.Aa=dt,p.j.info("SVER="+p.Aa));let mo=we[5];mo!=null&&typeof mo=="number"&&0<mo&&(m=1.5*mo,p.L=m,p.j.info("backChannelRequestTimeoutMs_="+m)),m=p;let rn=c.g;if(rn){let Pc=rn.g?rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pc){var M=m.h;M.g||Pc.indexOf("spdy")==-1&&Pc.indexOf("quic")==-1&&Pc.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Gf(M,M.h),M.h=null))}if(m.D){let Zf=rn.g?rn.g.getResponseHeader("X-HTTP-Session-Id"):null;Zf&&(m.ya=Zf,Ae(m.I,m.D,Zf))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-c.F,p.j.info("Handshake RTT: "+p.R+"ms")),m=p;var U=c;if(m.qa=XE(m,m.J?m.ia:null,m.W),U.K){AE(m.h,U);var Te=U,it=m.L;it&&(Te.I=it),Te.B&&(qf(Te),Dc(Te)),m.g=U}else KE(m);0<p.i.length&&xc(p)}else we[0]!="stop"&&we[0]!="close"||di(p,7);else p.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?di(p,7):Kf(p):we[0]!="noop"&&p.l&&p.l.ta(we),p.v=0)}}la(4)}catch{}}var uM=class{constructor(c,h){this.g=c,this.map=h}};function bE(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function CE(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function SE(c){return c.h?1:c.g?c.g.size:0}function Hf(c,h){return c.h?c.h==h:c.g?c.g.has(h):!1}function Gf(c,h){c.g?c.g.add(h):c.h=h}function AE(c,h){c.h&&c.h==h?c.h=null:c.g&&c.g.has(h)&&c.g.delete(h)}bE.prototype.cancel=function(){if(this.i=RE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function RE(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let h=c.i;for(let p of c.g.values())h=h.concat(p.D);return h}return A(c.i)}function cM(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var h=[],p=c.length,m=0;m<p;m++)h.push(c[m]);return h}h=[],p=0;for(m in c)h[p++]=c[m];return h}function lM(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var h=[];c=c.length;for(var p=0;p<c;p++)h.push(p);return h}h=[],p=0;for(let m in c)h[p++]=m;return h}}}function xE(c,h){if(c.forEach&&typeof c.forEach=="function")c.forEach(h,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,h,void 0);else for(var p=lM(c),m=cM(c),b=m.length,M=0;M<b;M++)h.call(void 0,m[M],p&&p[M],c)}var ME=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dM(c,h){if(c){c=c.split("&");for(var p=0;p<c.length;p++){var m=c[p].indexOf("="),b=null;if(0<=m){var M=c[p].substring(0,m);b=c[p].substring(m+1)}else M=c[p];h(M,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function li(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof li){this.h=c.h,Tc(this,c.j),this.o=c.o,this.g=c.g,bc(this,c.s),this.l=c.l;var h=c.i,p=new ma;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),NE(this,p),this.m=c.m}else c&&(h=String(c).match(ME))?(this.h=!1,Tc(this,h[1]||"",!0),this.o=pa(h[2]||""),this.g=pa(h[3]||"",!0),bc(this,h[4]),this.l=pa(h[5]||"",!0),NE(this,h[6]||"",!0),this.m=pa(h[7]||"")):(this.h=!1,this.i=new ma(null,this.h))}li.prototype.toString=function(){var c=[],h=this.j;h&&c.push(ga(h,PE,!0),":");var p=this.g;return(p||h=="file")&&(c.push("//"),(h=this.o)&&c.push(ga(h,PE,!0),"@"),c.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&c.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&c.push("/"),c.push(ga(p,p.charAt(0)=="/"?pM:fM,!0))),(p=this.i.toString())&&c.push("?",p),(p=this.m)&&c.push("#",ga(p,mM)),c.join("")};function Ln(c){return new li(c)}function Tc(c,h,p){c.j=p?pa(h,!0):h,c.j&&(c.j=c.j.replace(/:$/,""))}function bc(c,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);c.s=h}else c.s=null}function NE(c,h,p){h instanceof ma?(c.i=h,yM(c.i,c.h)):(p||(h=ga(h,gM)),c.i=new ma(h,c.h))}function Ae(c,h,p){c.i.set(h,p)}function Cc(c){return Ae(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function pa(c,h){return c?h?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ga(c,h,p){return typeof c=="string"?(c=encodeURI(c).replace(h,hM),p&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function hM(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var PE=/[#\/\?@]/g,fM=/[#\?:]/g,pM=/[#\?]/g,gM=/[#\?@]/g,mM=/#/g;function ma(c,h){this.h=this.g=null,this.i=c||null,this.j=!!h}function yr(c){c.g||(c.g=new Map,c.h=0,c.i&&dM(c.i,function(h,p){c.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=ma.prototype,t.add=function(c,h){yr(this),this.i=null,c=po(this,c);var p=this.g.get(c);return p||this.g.set(c,p=[]),p.push(h),this.h+=1,this};function kE(c,h){yr(c),h=po(c,h),c.g.has(h)&&(c.i=null,c.h-=c.g.get(h).length,c.g.delete(h))}function OE(c,h){return yr(c),h=po(c,h),c.g.has(h)}t.forEach=function(c,h){yr(this),this.g.forEach(function(p,m){p.forEach(function(b){c.call(h,b,m,this)},this)},this)},t.na=function(){yr(this);let c=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let m=0;m<h.length;m++){let b=c[m];for(let M=0;M<b.length;M++)p.push(h[m])}return p},t.V=function(c){yr(this);let h=[];if(typeof c=="string")OE(this,c)&&(h=h.concat(this.g.get(po(this,c))));else{c=Array.from(this.g.values());for(let p=0;p<c.length;p++)h=h.concat(c[p])}return h},t.set=function(c,h){return yr(this),this.i=null,c=po(this,c),OE(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[h]),this.h+=1,this},t.get=function(c,h){return c?(c=this.V(c),0<c.length?String(c[0]):h):h};function FE(c,h,p){kE(c,h),0<p.length&&(c.i=null,c.g.set(po(c,h),A(p)),c.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var m=h[p];let M=encodeURIComponent(String(m)),U=this.V(m);for(m=0;m<U.length;m++){var b=M;U[m]!==""&&(b+="="+encodeURIComponent(String(U[m]))),c.push(b)}}return this.i=c.join("&")};function po(c,h){return h=String(h),c.j&&(h=h.toLowerCase()),h}function yM(c,h){h&&!c.j&&(yr(c),c.i=null,c.g.forEach(function(p,m){var b=m.toLowerCase();m!=b&&(kE(this,m),FE(this,b,p))},c)),c.j=h}function vM(c,h){let p=new ha;if(a.Image){let m=new Image;m.onload=y(vr,p,"TestLoadImage: loaded",!0,h,m),m.onerror=y(vr,p,"TestLoadImage: error",!1,h,m),m.onabort=y(vr,p,"TestLoadImage: abort",!1,h,m),m.ontimeout=y(vr,p,"TestLoadImage: timeout",!1,h,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else h(!1)}function wM(c,h){let p=new ha,m=new AbortController,b=setTimeout(()=>{m.abort(),vr(p,"TestPingServer: timeout",!1,h)},1e4);fetch(c,{signal:m.signal}).then(M=>{clearTimeout(b),M.ok?vr(p,"TestPingServer: ok",!0,h):vr(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(b),vr(p,"TestPingServer: error",!1,h)})}function vr(c,h,p,m,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),m(p)}catch{}}function IM(){this.g=new nM}function EM(c,h,p){let m=p||"";try{xE(c,function(b,M){let U=b;l(b)&&(U=Ff(b)),h.push(m+M+"="+encodeURIComponent(U))})}catch(b){throw h.push(m+"type="+encodeURIComponent("_badmap")),b}}function ya(c){this.l=c.Ub||null,this.j=c.eb||!1}_(ya,Lf),ya.prototype.g=function(){return new Sc(this.l,this.j)},ya.prototype.i=function(c){return function(){return c}}({});function Sc(c,h){ct.call(this),this.D=c,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Sc,ct),t=Sc.prototype,t.open=function(c,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=h,this.readyState=1,wa(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(h.body=c),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,va(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,wa(this)),this.g&&(this.readyState=3,wa(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;LE(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function LE(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var h=c.value?c.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!c.done}))&&(this.response=this.responseText+=h)}c.done?va(this):wa(this),this.readyState==3&&LE(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,va(this))},t.Qa=function(c){this.g&&(this.response=c,va(this))},t.ga=function(){this.g&&va(this)};function va(c){c.readyState=4,c.l=null,c.j=null,c.v=null,wa(c)}t.setRequestHeader=function(c,h){this.u.append(c,h)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,c.push(p[0]+": "+p[1]),p=h.next();return c.join(`\r
`)};function wa(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Sc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function VE(c){let h="";return K(c,function(p,m){h+=m,h+=":",h+=p,h+=`\r
`}),h}function Wf(c,h,p){e:{for(m in p){var m=!1;break e}m=!0}m||(p=VE(p),typeof c=="string"?p!=null&&encodeURIComponent(String(p)):Ae(c,h,p))}function Fe(c){ct.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Fe,ct);var _M=/^https?$/i,DM=["POST","PUT"];t=Fe.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,h,p,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);h=h?h.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Uf.g(),this.v=this.o?fE(this.o):fE(Uf),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(c),!0),this.B=!1}catch(M){jE(this,M);return}if(c=p||"",p=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var b in m)p.set(b,m[b]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let M of m.keys())p.set(M,m.get(M));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(p.keys()).find(M=>M.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(DM,h,void 0))||m||b||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[M,U]of p)this.g.setRequestHeader(M,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$E(this),this.u=!0,this.g.send(c),this.u=!1}catch(M){jE(this,M)}};function jE(c,h){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=h,c.m=5,UE(c),Ac(c)}function UE(c){c.A||(c.A=!0,mt(c,"complete"),mt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,mt(this,"complete"),mt(this,"abort"),Ac(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ac(this,!0)),Fe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?BE(this):this.bb())},t.bb=function(){BE(this)};function BE(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Vn(c)!=4||c.Z()!=2)){if(c.u&&Vn(c)==4)cE(c.Ea,0,c);else if(mt(c,"readystatechange"),Vn(c)==4){c.h=!1;try{let U=c.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var m;if(m=U===0){var b=String(c.D).match(ME)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),m=!_M.test(b?b.toLowerCase():"")}p=m}if(p)mt(c,"complete"),mt(c,"success");else{c.m=6;try{var M=2<Vn(c)?c.g.statusText:""}catch{M=""}c.l=M+" ["+c.Z()+"]",UE(c)}}finally{Ac(c)}}}}function Ac(c,h){if(c.g){$E(c);let p=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,h||mt(c,"ready");try{p.onreadystatechange=m}catch{}}}function $E(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Vn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Vn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var h=this.g.responseText;return c&&h.indexOf(c)==0&&(h=h.substring(c.length)),tM(h)}};function qE(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function TM(c){let h={};c=(c.g&&2<=Vn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(j(c[m]))continue;var p=T(c[m]);let b=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let M=h[b]||[];h[b]=M,M.push(p)}E(h,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ia(c,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[c]||h}function zE(c){this.Aa=0,this.i=[],this.j=new ha,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ia("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ia("baseRetryDelayMs",5e3,c),this.cb=Ia("retryDelaySeedMs",1e4,c),this.Wa=Ia("forwardChannelMaxRetries",2,c),this.wa=Ia("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new bE(c&&c.concurrentRequestLimit),this.Da=new IM,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=zE.prototype,t.la=8,t.G=1,t.connect=function(c,h,p,m){yt(0),this.W=c,this.H=h||{},p&&m!==void 0&&(this.H.OSID=p,this.H.OAID=m),this.F=this.X,this.I=XE(this,null,this.W),xc(this)};function Kf(c){if(HE(c),c.G==3){var h=c.U++,p=Ln(c.I);if(Ae(p,"SID",c.K),Ae(p,"RID",h),Ae(p,"TYPE","terminate"),Ea(c,p),h=new mr(c,c.j,h),h.L=2,h.v=Cc(Ln(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=e_(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Dc(h)}JE(c)}function Rc(c){c.g&&(Yf(c),c.g.cancel(),c.g=null)}function HE(c){Rc(c),c.u&&(a.clearTimeout(c.u),c.u=null),Mc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function xc(c){if(!CE(c.h)&&!c.s){c.s=!0;var h=c.Ga;ia||rE(),oa||(ia(),oa=!0),Sf.add(h,c),c.B=0}}function bM(c,h){return SE(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=h.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=da(g(c.Ga,c,h),ZE(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new mr(this,this.j,c),M=this.o;if(this.S&&(M?(M=v(M),D(M,this.S)):M=this.S),this.m!==null||this.O||(b.H=M,M=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var m=this.i[p];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=WE(this,b,h),p=Ln(this.I),Ae(p,"RID",c),Ae(p,"CVER",22),this.D&&Ae(p,"X-HTTP-Session-Id",this.D),Ea(this,p),M&&(this.O?h="headers="+encodeURIComponent(String(VE(M)))+"&"+h:this.m&&Wf(p,this.m,M)),Gf(this.h,b),this.Ua&&Ae(p,"TYPE","init"),this.P?(Ae(p,"$req",h),Ae(p,"SID","null"),b.T=!0,$f(b,p,null)):$f(b,p,h),this.G=2}}else this.G==3&&(c?GE(this,c):this.i.length==0||CE(this.h)||GE(this))};function GE(c,h){var p;h?p=h.l:p=c.U++;let m=Ln(c.I);Ae(m,"SID",c.K),Ae(m,"RID",p),Ae(m,"AID",c.T),Ea(c,m),c.m&&c.o&&Wf(m,c.m,c.o),p=new mr(c,c.j,p,c.B+1),c.m===null&&(p.H=c.o),h&&(c.i=h.D.concat(c.i)),h=WE(c,p,1e3),p.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Gf(c.h,p),$f(p,m,h)}function Ea(c,h){c.H&&K(c.H,function(p,m){Ae(h,m,p)}),c.l&&xE({},function(p,m){Ae(h,m,p)})}function WE(c,h,p){p=Math.min(c.i.length,p);var m=c.l?g(c.l.Na,c.l,c):null;e:{var b=c.i;let M=-1;for(;;){let U=["count="+p];M==-1?0<p?(M=b[0].g,U.push("ofs="+M)):M=0:U.push("ofs="+M);let Te=!0;for(let it=0;it<p;it++){let we=b[it].g,lt=b[it].map;if(we-=M,0>we)M=Math.max(0,b[it].g-100),Te=!1;else try{EM(lt,U,"req"+we+"_")}catch{m&&m(lt)}}if(Te){m=U.join("&");break e}}}return c=c.i.splice(0,p),h.D=c,m}function KE(c){if(!c.g&&!c.u){c.Y=1;var h=c.Fa;ia||rE(),oa||(ia(),oa=!0),Sf.add(h,c),c.v=0}}function Qf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=da(g(c.Fa,c),ZE(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,QE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=da(g(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),Rc(this),QE(this))};function Yf(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function QE(c){c.g=new mr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var h=Ln(c.qa);Ae(h,"RID","rpc"),Ae(h,"SID",c.K),Ae(h,"AID",c.T),Ae(h,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ae(h,"TO",c.ja),Ae(h,"TYPE","xmlhttp"),Ea(c,h),c.m&&c.o&&Wf(h,c.m,c.o),c.L&&(c.g.I=c.L);var p=c.g;c=c.ia,p.L=1,p.v=Cc(Ln(h)),p.m=null,p.P=!0,_E(p,c)}t.Za=function(){this.C!=null&&(this.C=null,Rc(this),Qf(this),yt(19))};function Mc(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function YE(c,h){var p=null;if(c.g==h){Mc(c),Yf(c),c.g=null;var m=2}else if(Hf(c.h,h))p=h.D,AE(c.h,h),m=1;else return;if(c.G!=0){if(h.o)if(m==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var b=c.B;m=Ic(),mt(m,new vE(m,p)),xc(c)}else KE(c);else if(b=h.s,b==3||b==0&&0<h.X||!(m==1&&bM(c,h)||m==2&&Qf(c)))switch(p&&0<p.length&&(h=c.h,h.i=h.i.concat(p)),b){case 1:di(c,5);break;case 4:di(c,10);break;case 3:di(c,6);break;default:di(c,2)}}}function ZE(c,h){let p=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(p*=2),p*h}function di(c,h){if(c.j.info("Error code "+h),h==2){var p=g(c.fb,c),m=c.Xa;let b=!m;m=new li(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Tc(m,"https"),Cc(m),b?vM(m.toString(),p):wM(m.toString(),p)}else yt(2);c.G=0,c.l&&c.l.sa(h),JE(c),HE(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function JE(c){if(c.G=0,c.ka=[],c.l){let h=RE(c.h);(h.length!=0||c.i.length!=0)&&(C(c.ka,h),C(c.ka,c.i),c.h.i.length=0,A(c.i),c.i.length=0),c.l.ra()}}function XE(c,h,p){var m=p instanceof li?Ln(p):new li(p);if(m.g!="")h&&(m.g=h+"."+m.g),bc(m,m.s);else{var b=a.location;m=b.protocol,h=h?h+"."+b.hostname:b.hostname,b=+b.port;var M=new li(null);m&&Tc(M,m),h&&(M.g=h),b&&bc(M,b),p&&(M.l=p),m=M}return p=c.D,h=c.ya,p&&h&&Ae(m,p,h),Ae(m,"VER",c.la),Ea(c,m),m}function e_(c,h,p){if(h&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=c.Ca&&!c.pa?new Fe(new ya({eb:p})):new Fe(c.pa),h.Ha(c.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function t_(){}t=t_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Nc(){}Nc.prototype.g=function(c,h){return new Ft(c,h)};function Ft(c,h){ct.call(this),this.g=new zE(h),this.l=c,this.h=h&&h.messageUrlParams||null,c=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(c?c["X-WebChannel-Content-Type"]=h.messageContentType:c={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(c?c["X-WebChannel-Client-Profile"]=h.va:c={"X-WebChannel-Client-Profile":h.va}),this.g.S=c,(c=h&&h.Sb)&&!j(c)&&(this.g.m=c),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!j(h)&&(this.g.D=h,c=this.h,c!==null&&h in c&&(c=this.h,h in c&&delete c[h])),this.j=new go(this)}_(Ft,ct),Ft.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){Kf(this.g)},Ft.prototype.o=function(c){var h=this.g;if(typeof c=="string"){var p={};p.__data__=c,c=p}else this.u&&(p={},p.__data__=Ff(c),c=p);h.i.push(new uM(h.Ya++,c)),h.G==3&&xc(h)},Ft.prototype.N=function(){this.g.l=null,delete this.j,Kf(this.g),delete this.g,Ft.aa.N.call(this)};function n_(c){Vf.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var h=c.__sm__;if(h){e:{for(let p in h){c=p;break e}c=void 0}(this.i=c)&&(c=this.i,h=h!==null&&c in h?h[c]:void 0),this.data=h}else this.data=c}_(n_,Vf);function r_(){jf.call(this),this.status=1}_(r_,jf);function go(c){this.g=c}_(go,t_),go.prototype.ua=function(){mt(this.g,"a")},go.prototype.ta=function(c){mt(this.g,new n_(c))},go.prototype.sa=function(c){mt(this.g,new r_)},go.prototype.ra=function(){mt(this.g,"b")},Nc.prototype.createWebChannel=Nc.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,vy=nr.createWebChannelTransport=function(){return new Nc},yy=nr.getStatEventTarget=function(){return Ic()},my=nr.Event=ui,Ld=nr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ec.NO_ERROR=0,Ec.TIMEOUT=8,Ec.HTTP_ERROR=6,au=nr.ErrorCode=Ec,wE.COMPLETE="complete",gy=nr.EventType=wE,pE.EventType=ca,ca.OPEN="a",ca.CLOSE="b",ca.ERROR="c",ca.MESSAGE="d",ct.prototype.listen=ct.prototype.K,is=nr.WebChannel=pE,py=nr.FetchXmlHttpFactory=ya,Fe.prototype.listenOnce=Fe.prototype.L,Fe.prototype.getLastError=Fe.prototype.Ka,Fe.prototype.getLastErrorCode=Fe.prototype.Ba,Fe.prototype.getStatus=Fe.prototype.Z,Fe.prototype.getResponseJson=Fe.prototype.Oa,Fe.prototype.getResponseText=Fe.prototype.oa,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Ha,fy=nr.XhrIo=Fe}).apply(typeof Fd<"u"?Fd:typeof self<"u"?self:typeof window<"u"?window:{});var _0="@firebase/firestore";var Ke=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ke.UNAUTHENTICATED=new Ke(null),Ke.GOOGLE_CREDENTIALS=new Ke("google-credentials-uid"),Ke.FIRST_PARTY=new Ke("first-party-uid"),Ke.MOCK_USER=new Ke("mock-user");var Os="10.13.1";var Wr=new Fc("@firebase/firestore");function cs(){return Wr.logLevel}function TS(t){Wr.setLogLevel(t)}function O(t,...e){if(Wr.logLevel<=yn.DEBUG){let n=e.map(Dw);Wr.debug(`Firestore (${Os}): ${t}`,...n)}}function Ue(t,...e){if(Wr.logLevel<=yn.ERROR){let n=e.map(Dw);Wr.error(`Firestore (${Os}): ${t}`,...n)}}function Xt(t,...e){if(Wr.logLevel<=yn.WARN){let n=e.map(Dw);Wr.warn(`Firestore (${Os}): ${t}`,...n)}}function Dw(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function G(t="Unexpected state"){let e=`FIRESTORE (${Os}) INTERNAL ASSERTION FAILED: `+t;throw Ue(e),new Error(e)}function Q(t,e){t||G()}function bS(t,e){t||G()}function $(t,e){return t}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},k=class extends l_{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Qe=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Kd=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Dy=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ke.UNAUTHENTICATED))}shutdown(){}},Ty=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},by=class{constructor(e){this.t=e,this.currentUser=Ke.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new Qe;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Qe,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>N(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Qe)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Q(typeof r.accessToken=="string"),new Kd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return Q(e===null||typeof e=="string"),new Ke(e)}},Cy=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ke.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Sy=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Cy(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ke.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Ay=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Ry=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=o=>{o.error!=null&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,O("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Q(typeof n.token=="string"),this.R=n.token,new Ay(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function MV(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Qd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=MV(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function ie(t,e){return t<e?-1:t>e?1:0}function vs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function CS(t){return t+"\0"}var Oe=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new k(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new k(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new k(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new k(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var X=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Oe(0,0))}static max(){return new t(new Oe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Yd=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&G(),r===void 0?r=e.length-n:r>e.length-n&&G(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},ge=class t extends Yd{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new k(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},NV=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Be=class t extends Yd{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return NV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new k(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new k(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new k(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new k(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var q=class t{constructor(e){this.path=e}static fromPath(e){return new t(ge.fromString(e))}static fromName(e){return new t(ge.fromString(e).popFirst(5))}static empty(){return new t(ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ge.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new ge(e.slice()))}};var ws=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function xy(t){return t.fields.find(e=>e.kind===2)}function Vi(t){return t.fields.filter(e=>e.kind!==2)}ws.UNKNOWN_ID=-1;var gs=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var wu=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,en.min())}};function SS(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=X.fromTimestamp(r===1e9?new Oe(n+1,0):new Oe(n,r));return new en(i,q.empty(),e)}function AS(t){return new en(t.readTime,t.key,-1)}var en=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(X.min(),q.empty(),-1)}static max(){return new t(X.max(),q.empty(),-1)}};function Tw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:ie(t.largestBatchId,e.largestBatchId))}var RS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Zd=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ri(t){return N(this,null,function*(){if(t.code!==x.FAILED_PRECONDITION||t.message!==RS)throw t;O("LocalStore","Unexpectedly lost primary lease")})}var R=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&G(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(d=>{s[l]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};var Jd=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Qe,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new zi(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=bw(r.target.error);this.V.reject(new zi(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new zi(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(O("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new Ny(n)}},Kr=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(_a())===12.2&&Ue("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return O("SimpleDb","Removing database:",e),ji(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Oc())return!1;if(t.v())return!0;let e=_a(),n=t.S(e),r=0<n&&n<10,i=xS(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return N(this,null,function*(){return this.db||(O("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;n(s)},i.onblocked=()=>{r(new zi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new k(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new k(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new zi(e,s))},i.onupgradeneeded=o=>{O("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{O("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return N(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=Jd.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),R.reject(l))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(O("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function xS(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}var My=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ji(this.B.delete())}},zi=class extends k{constructor(e,n){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function ii(t){return t.name==="IndexedDbTransactionError"}var Ny=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(O("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(O("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ji(r)}add(e){return O("SimpleDb","ADD",this.store.name,e,e),ji(this.store.add(e))}get(e){return ji(this.store.get(e)).next(n=>(n===void 0&&(n=null),O("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return O("SimpleDb","DELETE",this.store.name,e),ji(this.store.delete(e))}count(){return O("SimpleDb","COUNT",this.store.name),ji(this.store.count())}U(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new R((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,u)=>{s.push(u)}).next(()=>s)}}G(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new R((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,n){O("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.W(i,n)}Y(e){let n=this.cursor({});return new R((r,i)=>{n.onerror=o=>{let s=bw(o.target.error);i(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,n){let r=[];return new R((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new My(a),l=n(a.primaryKey,a.value,u);if(l instanceof R){let d=l.catch(f=>(u.done(),R.reject(f)));r.push(d)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>R.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function ji(t){return new R((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=bw(r.target.error);n(i)}})}var D0=!1;function bw(t){let e=Kr.S(_a());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new k("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return D0||(D0=!0,setTimeout(()=>{throw r},0)),r}}return t}var Py=class{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){O("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>N(this,null,function*(){this.task=null;try{O("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(n){ii(n)?O("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield ri(n)}yield this.X(6e4)}))}},ky=class{constructor(e,n){this.localStore=e,this.persistence=n}ee(e=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))})}te(e,n){let r=new Set,i=n,o=!0;return R.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return O("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(O("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}re(e,n){let r=e;return n.changes.forEach((i,o)=>{let s=AS(o);Tw(s,r)>0&&(r=s)}),new en(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var jt=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function $u(t){return t==null}function Iu(t){return t===0&&1/t==-1/0}function MS(t){return typeof t=="number"&&Number.isInteger(t)&&!Iu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function At(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=T0(e)),e=PV(t.get(n),e);return T0(e)}function PV(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function T0(t){return t+""}function bn(t){let e=t.length;if(Q(e>=2),e===2)return Q(t.charAt(0)===""&&t.charAt(1)===""),ge.emptyPath();let n=e-2,r=[],i="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>n)&&G(),t.charAt(s+1)){case"":let a=t.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:G()}o=s+2}return new ge(r)}var b0=["userId","batchId"];function $d(t,e){return[t,At(e)]}function NS(t,e,n){return[t,At(e),n]}var kV={},OV=["prefixPath","collectionGroup","readTime","documentId"],FV=["prefixPath","collectionGroup","documentId"],LV=["collectionGroup","readTime","prefixPath","documentId"],VV=["canonicalId","targetId"],jV=["targetId","path"],UV=["path","targetId"],BV=["collectionId","parent"],$V=["indexId","uid"],qV=["uid","sequenceNumber"],zV=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],HV=["indexId","uid","orderedDocumentKey"],GV=["userId","collectionPath","documentId"],WV=["userId","collectionPath","largestBatchId"],KV=["userId","collectionGroup","largestBatchId"],PS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],QV=[...PS,"documentOverlays"],kS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],OS=kS,Cw=[...OS,"indexConfiguration","indexState","indexEntries"],YV=Cw,ZV=[...Cw,"globals"];var Eu=class extends Zd{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}};function et(t,e){let n=$(t);return Kr.F(n._e,e)}function C0(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function no(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function FS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var xe=class t{constructor(e,n){this.comparator=e,this.root=n||Sn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Sn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ps(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ps(this.root,e,this.comparator,!1)}getReverseIterator(){return new ps(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ps(this.root,e,this.comparator,!0)}},ps=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Sn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw G();let e=this.left.check();if(e!==this.right.check())throw G();return e+(this.isRed()?0:1)}};Sn.EMPTY=null,Sn.RED=!0,Sn.BLACK=!1;Sn.EMPTY=new class{constructor(){this.size=0}get key(){throw G()}get value(){throw G()}get color(){throw G()}get left(){throw G()}get right(){throw G()}copy(e,n,r,i,o){return this}insert(e,n,r){return new Sn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ce=class t{constructor(e){this.comparator=e,this.data=new xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Xd(this.data.getIterator())}getIteratorFrom(e){return new Xd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Xd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function os(t){return t.hasNext()?t.getNext():void 0}var Ut=class t{constructor(e){this.fields=e,e.sort(Be.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ce(Be.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return vs(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var eh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function LS(){return typeof atob<"u"}var qe=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new eh("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};qe.EMPTY_BYTE_STRING=new qe("");var JV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function or(t){if(Q(!!t),typeof t=="string"){let e=0,n=JV.exec(t);if(Q(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ne(t.seconds),nanos:Ne(t.nanos)}}function Ne(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Qr(t){return typeof t=="string"?qe.fromBase64String(t):qe.fromUint8Array(t)}function zh(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Sw(t){let e=t.mapValue.fields.__previous_value__;return zh(e)?Sw(e):e}function _u(t){let e=or(t.mapValue.fields.__local_write_time__.timestampValue);return new Oe(e.seconds,e.nanos)}var Oy=class{constructor(e,n,r,i,o,s,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},Yr=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Hr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},qd={nullValue:"NULL_VALUE"};function Hi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?zh(t)?4:VS(t)?9007199254740991:Hh(t)?10:11:G()}function xn(t,e){if(t===e)return!0;let n=Hi(t);if(n!==Hi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return _u(t).isEqual(_u(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=or(i.timestampValue),a=or(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Qr(i.bytesValue).isEqual(Qr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Ne(i.geoPointValue.latitude)===Ne(o.geoPointValue.latitude)&&Ne(i.geoPointValue.longitude)===Ne(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ne(i.integerValue)===Ne(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ne(i.doubleValue),a=Ne(o.doubleValue);return s===a?Iu(s)===Iu(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return vs(t.arrayValue.values||[],e.arrayValue.values||[],xn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(C0(s)!==C0(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!xn(s[u],a[u])))return!1;return!0}(t,e);default:return G()}}function Du(t,e){return(t.values||[]).find(n=>xn(n,e))!==void 0}function Zr(t,e){if(t===e)return 0;let n=Hi(t),r=Hi(e);if(n!==r)return ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ie(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ne(o.integerValue||o.doubleValue),u=Ne(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return S0(t.timestampValue,e.timestampValue);case 4:return S0(_u(t),_u(e));case 5:return ie(t.stringValue,e.stringValue);case 6:return function(o,s){let a=Qr(o),u=Qr(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let d=ie(a[l],u[l]);if(d!==0)return d}return ie(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ie(Ne(o.latitude),Ne(s.latitude));return a!==0?a:ie(Ne(o.longitude),Ne(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return A0(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,d;let f=o.fields||{},g=s.fields||{},y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,_=(u=g.value)===null||u===void 0?void 0:u.arrayValue,A=ie(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((d=_?.values)===null||d===void 0?void 0:d.length)||0);return A!==0?A:A0(y,_)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===Hr.mapValue&&s===Hr.mapValue)return 0;if(o===Hr.mapValue)return 1;if(s===Hr.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},d=Object.keys(l);u.sort(),d.sort();for(let f=0;f<u.length&&f<d.length;++f){let g=ie(u[f],d[f]);if(g!==0)return g;let y=Zr(a[u[f]],l[d[f]]);if(y!==0)return y}return ie(u.length,d.length)}(t.mapValue,e.mapValue);default:throw G()}}function S0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ie(t,e);let n=or(t),r=or(e),i=ie(n.seconds,r.seconds);return i!==0?i:ie(n.nanos,r.nanos)}function A0(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=Zr(n[i],r[i]);if(o)return o}return ie(n.length,r.length)}function Is(t){return Fy(t)}function Fy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=or(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Qr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=Fy(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Fy(n.fields[s])}`;return i+"}"}(t.mapValue):G()}function Gi(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ly(t){return!!t&&"integerValue"in t}function Tu(t){return!!t&&"arrayValue"in t}function R0(t){return!!t&&"nullValue"in t}function x0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zd(t){return!!t&&"mapValue"in t}function Hh(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function pu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return no(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=pu(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=pu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function VS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var jS={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function XV(t){return"nullValue"in t?qd:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Gi(Yr.empty(),q.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Hh(t)?jS:{mapValue:{}}:G()}function ej(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Gi(Yr.empty(),q.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?jS:"mapValue"in t?Hh(t)?{mapValue:{}}:Hr:G()}function M0(t,e){let n=Zr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function N0(t,e){let n=Zr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var gt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!zd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=pu(n)}setAll(e){let n=Be.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=pu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());zd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return xn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];zd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){no(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(pu(this.value))}};function US(t){let e=[];return no(t.fields,(n,r)=>{let i=new Be([n]);if(zd(r)){let o=US(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Ut(e)}var Ye=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,X.min(),X.min(),X.min(),gt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,X.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,X.min(),X.min(),gt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,X.min(),X.min(),gt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Mn=class{constructor(e,n){this.position=e,this.inclusive=n}};function P0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=q.comparator(q.fromName(s.referenceValue),n.key):r=Zr(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function k0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!xn(t.position[n],e.position[n]))return!1;return!0}var Wi=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function tj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var th=class{},fe=class t extends th{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Uy(e,n,r):n==="array-contains"?new qy(e,r):n==="in"?new nh(e,r):n==="not-in"?new zy(e,r):n==="array-contains-any"?new Hy(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new By(e,r):new $y(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Zr(n,this.value)):n!==null&&Hi(this.value)===Hi(n)&&this.matchesComparison(Zr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},_e=class t extends th{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return Es(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Es(t){return t.op==="and"}function Vy(t){return t.op==="or"}function Aw(t){return BS(t)&&Es(t)}function BS(t){for(let e of t.filters)if(e instanceof _e)return!1;return!0}function jy(t){if(t instanceof fe)return t.field.canonicalString()+t.op.toString()+Is(t.value);if(Aw(t))return t.filters.map(e=>jy(e)).join(",");{let e=t.filters.map(n=>jy(n)).join(",");return`${t.op}(${e})`}}function $S(t,e){return t instanceof fe?function(r,i){return i instanceof fe&&r.op===i.op&&r.field.isEqual(i.field)&&xn(r.value,i.value)}(t,e):t instanceof _e?function(r,i){return i instanceof _e&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&$S(s,i.filters[a]),!0):!1}(t,e):void G()}function qS(t,e){let n=t.filters.concat(e);return _e.create(n,t.op)}function zS(t){return t instanceof fe?function(n){return`${n.field.canonicalString()} ${n.op} ${Is(n.value)}`}(t):t instanceof _e?function(n){return n.op.toString()+" {"+n.getFilters().map(zS).join(" ,")+"}"}(t):"Filter"}var Uy=class extends fe{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){let n=q.comparator(e.key,this.key);return this.matchesComparison(n)}},By=class extends fe{constructor(e,n){super(e,"in",n),this.keys=HS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},$y=class extends fe{constructor(e,n){super(e,"not-in",n),this.keys=HS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function HS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}var qy=class extends fe{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Tu(n)&&Du(n.arrayValue,this.value)}},nh=class extends fe{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Du(this.value.arrayValue,n)}},zy=class extends fe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Du(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Du(this.value.arrayValue,n)}},Hy=class extends fe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Tu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Du(this.value.arrayValue,r))}};var Gy=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function Wy(t,e=null,n=[],r=[],i=null,o=null,s=null){return new Gy(t,e,n,r,i,o,s)}function Ki(t){let e=$(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>jy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),$u(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Is(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Is(r)).join(",")),e.ue=n}return e.ue}function qu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!tj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!$S(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!k0(t.startAt,e.startAt)&&k0(t.endAt,e.endAt)}function rh(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function ih(t,e){return t.filters.filter(n=>n instanceof fe&&n.field.isEqual(e))}function O0(t,e,n){let r=qd,i=!0;for(let o of ih(t,e)){let s=qd,a=!0;switch(o.op){case"<":case"<=":s=XV(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=qd}M0({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];M0({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function F0(t,e,n){let r=Hr,i=!0;for(let o of ih(t,e)){let s=Hr,a=!0;switch(o.op){case">=":case">":s=ej(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Hr}N0({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];N0({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}var hn=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function GS(t,e,n,r,i,o,s,a){return new hn(t,e,n,r,i,o,s,a)}function Fs(t){return new hn(t)}function L0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Rw(t){return t.collectionGroup!==null}function ms(t){let e=$(t);if(e.ce===null){e.ce=[];let n=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ce(Be.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Wi(o,r))}),n.has(Be.keyField().canonicalString())||e.ce.push(new Wi(Be.keyField(),r))}return e.ce}function Rt(t){let e=$(t);return e.le||(e.le=nj(e,ms(t))),e.le}function nj(t,e){if(t.limitType==="F")return Wy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Wi(i.field,o)});let n=t.endAt?new Mn(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Mn(t.startAt.position,t.startAt.inclusive):null;return Wy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ky(t,e){let n=t.filters.concat([e]);return new hn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function oh(t,e,n){return new hn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zu(t,e){return qu(Rt(t),Rt(e))&&t.limitType===e.limitType}function WS(t){return`${Ki(Rt(t))}|lt:${t.limitType}`}function ls(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>zS(i)).join(", ")}]`),$u(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Is(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Is(i)).join(",")),`Target(${r})`}(Rt(t))}; limitType=${t.limitType})`}function Hu(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of ms(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=P0(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,ms(r),i)||r.endAt&&!function(s,a,u){let l=P0(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,ms(r),i))}(t,e)}function KS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function QS(t){return(e,n)=>{let r=!1;for(let i of ms(t)){let o=rj(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function rj(t,e,n){let r=t.field.isKeyField()?q.comparator(e.key,n.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Zr(u,l):G()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return G()}}var Nn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){no(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return FS(this.inner)}size(){return this.innerSize}};var ij=new xe(q.comparator);function Ot(){return ij}var YS=new xe(q.comparator);function hu(...t){let e=YS;for(let n of t)e=e.insert(n.key,n);return e}function ZS(t){let e=YS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Cn(){return gu()}function JS(){return gu()}function gu(){return new Nn(t=>t.toString(),(t,e)=>t.isEqual(e))}var oj=new xe(q.comparator),sj=new Ce(q.comparator);function oe(...t){let e=sj;for(let n of t)e=e.add(n);return e}var aj=new Ce(ie);function xw(){return aj}function Mw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Iu(e)?"-0":e}}function XS(t){return{integerValue:""+t}}function eA(t,e){return MS(e)?XS(e):Mw(t,e)}var _s=class{constructor(){this._=void 0}};function uj(t,e,n){return t instanceof Jr?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&zh(o)&&(o=Sw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof sr?nA(t,e):t instanceof ar?rA(t,e):function(i,o){let s=tA(i,o),a=V0(s)+V0(i.Pe);return Ly(s)&&Ly(i.Pe)?XS(a):Mw(i.serializer,a)}(t,e)}function cj(t,e,n){return t instanceof sr?nA(t,e):t instanceof ar?rA(t,e):n}function tA(t,e){return t instanceof Xr?function(r){return Ly(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Jr=class extends _s{},sr=class extends _s{constructor(e){super(),this.elements=e}};function nA(t,e){let n=iA(e);for(let r of t.elements)n.some(i=>xn(i,r))||n.push(r);return{arrayValue:{values:n}}}var ar=class extends _s{constructor(e){super(),this.elements=e}};function rA(t,e){let n=iA(e);for(let r of t.elements)n=n.filter(i=>!xn(i,r));return{arrayValue:{values:n}}}var Xr=class extends _s{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function V0(t){return Ne(t.integerValue||t.doubleValue)}function iA(t){return Tu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Qi=class{constructor(e,n){this.field=e,this.transform=n}};function lj(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof sr&&i instanceof sr||r instanceof ar&&i instanceof ar?vs(r.elements,i.elements,xn):r instanceof Xr&&i instanceof Xr?xn(r.Pe,i.Pe):r instanceof Jr&&i instanceof Jr}(t.transform,e.transform)}var Qy=class{constructor(e,n){this.version=e,this.transformResults=n}},Ve=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Hd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Ds=class{};function oA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ti(t.key,Ve.none()):new ei(t.key,t.data,Ve.none());{let n=t.data,r=gt.empty(),i=new Ce(Be.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new fn(t.key,r,new Ut(i.toArray()),Ve.none())}}function dj(t,e,n){t instanceof ei?function(i,o,s){let a=i.value.clone(),u=U0(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof fn?function(i,o,s){if(!Hd(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=U0(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(sA(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function mu(t,e,n,r){return t instanceof ei?function(o,s,a,u){if(!Hd(o.precondition,s))return a;let l=o.value.clone(),d=B0(o.fieldTransforms,u,s);return l.setAll(d),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof fn?function(o,s,a,u){if(!Hd(o.precondition,s))return a;let l=B0(o.fieldTransforms,u,s),d=s.data;return d.setAll(sA(o)),d.setAll(l),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(o,s,a){return Hd(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function hj(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=tA(r.transform,i||null);o!=null&&(n===null&&(n=gt.empty()),n.set(r.field,o))}return n||null}function j0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&vs(r,i,(o,s)=>lj(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var ei=class extends Ds{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},fn=class extends Ds{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function sA(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function U0(t,e,n){let r=new Map;Q(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,cj(s,a,n[i]))}return r}function B0(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,uj(o,s,e))}return r}var ti=class extends Ds{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},bu=class extends Ds{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Cu=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&dj(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=mu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=mu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=JS();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=oA(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),oe())}isEqual(e){return this.batchId===e.batchId&&vs(this.mutations,e.mutations,(n,r)=>j0(n,r))&&vs(this.baseMutations,e.baseMutations,(n,r)=>j0(n,r))}},Yy=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Q(e.mutations.length===r.length);let i=function(){return oj}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var Su=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Zy=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Ge,pe;function aA(t){switch(t){default:return G();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function uA(t){if(t===void 0)return Ue("GRPC error has no .code"),x.UNKNOWN;switch(t){case Ge.OK:return x.OK;case Ge.CANCELLED:return x.CANCELLED;case Ge.UNKNOWN:return x.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return x.INTERNAL;case Ge.UNAVAILABLE:return x.UNAVAILABLE;case Ge.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Ge.NOT_FOUND:return x.NOT_FOUND;case Ge.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Ge.ABORTED:return x.ABORTED;case Ge.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Ge.DATA_LOSS:return x.DATA_LOSS;default:return G()}}(pe=Ge||(Ge={}))[pe.OK=0]="OK",pe[pe.CANCELLED=1]="CANCELLED",pe[pe.UNKNOWN=2]="UNKNOWN",pe[pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pe[pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pe[pe.NOT_FOUND=5]="NOT_FOUND",pe[pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",pe[pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",pe[pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",pe[pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pe[pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pe[pe.ABORTED=10]="ABORTED",pe[pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",pe[pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",pe[pe.INTERNAL=13]="INTERNAL",pe[pe.UNAVAILABLE=14]="UNAVAILABLE",pe[pe.DATA_LOSS=15]="DATA_LOSS";var $0=null;function cA(){return new TextEncoder}var fj=new Ur([4294967295,4294967295],0);function q0(t){let e=cA().encode(t),n=new hy;return n.update(e),new Uint8Array(n.digest())}function z0(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ur([n,r],0),new Ur([i,o],0)]}var Jy=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new qi(`Invalid padding: ${n}`);if(r<0)throw new qi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new qi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new qi(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ur.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Ur.fromNumber(r)));return i.compare(fj)===1&&(i=new Ur([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=q0(e),[r,i]=z0(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let n=q0(e),[r,i]=z0(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},qi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Au=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Ru.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(X.min(),i,new xe(ie),Ot(),oe())}},Ru=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,oe(),oe(),oe())}};var ys=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},sh=class{constructor(e,n){this.targetId=e,this.me=n}},ah=class{constructor(e,n,r=qe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},uh=class{constructor(){this.fe=0,this.ge=G0(),this.pe=qe.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=oe(),n=oe(),r=oe();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:G()}}),new Ru(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=G0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Q(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Xy=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ot(),this.qe=H0(),this.Qe=new xe(ie)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:G()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let o=i.target;if(rh(o))if(r===0){let s=new q(o.path);this.Ue(n,s,Ye.newNoDocument(s,X.min()))}else Q(r===1);else{let s=this.Ye(n);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}$0?.et(function(d,f,g,y,_){var A,C,P,j,F,B;let Z={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},K=f.unchangedNames;return K&&(Z.bloomFilter={applied:_===0,hashCount:(A=K?.hashCount)!==null&&A!==void 0?A:0,bitmapLength:(j=(P=(C=K?.bits)===null||C===void 0?void 0:C.bitmap)===null||P===void 0?void 0:P.length)!==null&&j!==void 0?j:0,padding:(B=(F=K?.bits)===null||F===void 0?void 0:F.padding)!==null&&B!==void 0?B:0,mightContain:E=>{var v;return(v=y?.mightContain(E))!==null&&v!==void 0&&v}}),Z}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=Qr(r).toUint8Array()}catch(u){if(u instanceof eh)return Xt("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Jy(s,i,o)}catch(u){return Xt(u instanceof qi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&rh(a.target)){let u=new q(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,Ye.newNoDocument(u,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=oe();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Au(e,n,this.Qe,this.ke,r);return this.ke=Ot(),this.qe=H0(),this.Qe=new xe(ie),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new uh,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ce(ie),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||O("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new uh),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function H0(){return new xe(q.comparator)}function G0(){return new xe(q.comparator)}var pj={asc:"ASCENDING",desc:"DESCENDING"},gj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mj={and:"AND",or:"OR"},ev=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function tv(t,e){return t.useProto3Json||$u(e)?e:{value:e}}function Ts(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function yj(t,e){return Ts(t,e.toTimestamp())}function $e(t){return Q(!!t),X.fromTimestamp(function(n){let r=or(n);return new Oe(r.seconds,r.nanos)}(t))}function Nw(t,e){return nv(t,e).canonicalString()}function nv(t,e){let n=function(i){return new ge(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function dA(t){let e=ge.fromString(t);return Q(EA(e)),e}function xu(t,e){return Nw(t.databaseId,e.path)}function An(t,e){let n=dA(e);if(n.get(1)!==t.databaseId.projectId)throw new k(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new k(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(pA(n))}function hA(t,e){return Nw(t.databaseId,e)}function fA(t){let e=dA(t);return e.length===4?ge.emptyPath():pA(e)}function rv(t){return new ge(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function pA(t){return Q(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function W0(t,e,n){return{name:xu(t,e),fields:n.value.mapValue.fields}}function gA(t,e,n){let r=An(t,e.name),i=$e(e.updateTime),o=e.createTime?$e(e.createTime):X.min(),s=new gt({mapValue:{fields:e.fields}}),a=Ye.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function vj(t,e){return"found"in e?function(r,i){Q(!!i.found),i.found.name,i.found.updateTime;let o=An(r,i.found.name),s=$e(i.found.updateTime),a=i.found.createTime?$e(i.found.createTime):X.min(),u=new gt({mapValue:{fields:i.found.fields}});return Ye.newFoundDocument(o,s,a,u)}(t,e):"missing"in e?function(r,i){Q(!!i.missing),Q(!!i.readTime);let o=An(r,i.missing),s=$e(i.readTime);return Ye.newNoDocument(o,s)}(t,e):G()}function wj(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:G()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,d){return l.useProto3Json?(Q(d===void 0||typeof d=="string"),qe.fromBase64String(d||"")):(Q(d===void 0||d instanceof Buffer||d instanceof Uint8Array),qe.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let d=l.code===void 0?x.UNKNOWN:uA(l.code);return new k(d,l.message||"")}(s);n=new ah(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=An(t,r.document.name),o=$e(r.document.updateTime),s=r.document.createTime?$e(r.document.createTime):X.min(),a=new gt({mapValue:{fields:r.document.fields}}),u=Ye.newFoundDocument(i,o,s,a),l=r.targetIds||[],d=r.removedTargetIds||[];n=new ys(l,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=An(t,r.document),o=r.readTime?$e(r.readTime):X.min(),s=Ye.newNoDocument(i,o),a=r.removedTargetIds||[];n=new ys([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=An(t,r.document),o=r.removedTargetIds||[];n=new ys([],o,i,null)}else{if(!("filter"in e))return G();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Zy(i,o),a=r.targetId;n=new sh(a,s)}}return n}function Mu(t,e){let n;if(e instanceof ei)n={update:W0(t,e.key,e.value)};else if(e instanceof ti)n={delete:xu(t,e.key)};else if(e instanceof fn)n={update:W0(t,e.key,e.data),updateMask:bj(e.fieldMask)};else{if(!(e instanceof bu))return G();n={verify:xu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Jr)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof sr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ar)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Xr)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw G()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:yj(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:G()}(t,e.precondition)),n}function iv(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?Ve.updateTime($e(o.updateTime)):o.exists!==void 0?Ve.exists(o.exists):Ve.none()}(e.currentDocument):Ve.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)Q(a.setToServerValue==="REQUEST_TIME"),u=new Jr;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];u=new sr(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];u=new ar(d)}else"increment"in a?u=new Xr(s,a.increment):G();let l=Be.fromServerFormat(a.fieldPath);return new Qi(l,u)}(t,i)):[];if(e.update){e.update.name;let i=An(t,e.update.name),o=new gt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new Ut(l.map(d=>Be.fromServerFormat(d)))}(e.updateMask);return new fn(i,o,s,n,r)}return new ei(i,o,n,r)}if(e.delete){let i=An(t,e.delete);return new ti(i,n)}if(e.verify){let i=An(t,e.verify);return new bu(i,n)}return G()}function Ij(t,e){return t&&t.length>0?(Q(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?$e(i.updateTime):$e(o);return s.isEqual(X.min())&&(s=$e(o)),new Qy(s,i.transformResults||[])}(n,e))):[]}function mA(t,e){return{documents:[hA(t,e.path)]}}function yA(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=hA(t,i);let o=function(l){if(l.length!==0)return IA(_e.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(d=>function(g){return{field:ds(g.field),direction:_j(g.dir)}}(d))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=tv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function vA(t){let e=fA(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Q(r===1);let d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];n.where&&(o=function(f){let g=wA(f);return g instanceof _e&&Aw(g)?g.getFilters():[g]}(n.where));let s=[];n.orderBy&&(s=function(f){return f.map(g=>function(_){return new Wi(hs(_.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,$u(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(f){let g=!!f.before,y=f.values||[];return new Mn(y,g)}(n.startAt));let l=null;return n.endAt&&(l=function(f){let g=!f.before,y=f.values||[];return new Mn(y,g)}(n.endAt)),GS(e,i,s,o,a,"F",u,l)}function Ej(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function wA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=hs(n.unaryFilter.field);return fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=hs(n.unaryFilter.field);return fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=hs(n.unaryFilter.field);return fe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=hs(n.unaryFilter.field);return fe.create(s,"!=",{nullValue:"NULL_VALUE"});default:return G()}}(t):t.fieldFilter!==void 0?function(n){return fe.create(hs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return G()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return _e.create(n.compositeFilter.filters.map(r=>wA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return G()}}(n.compositeFilter.op))}(t):G()}function _j(t){return pj[t]}function Dj(t){return gj[t]}function Tj(t){return mj[t]}function ds(t){return{fieldPath:t.canonicalString()}}function hs(t){return Be.fromServerFormat(t.fieldPath)}function IA(t){return t instanceof fe?function(n){if(n.op==="=="){if(x0(n.value))return{unaryFilter:{field:ds(n.field),op:"IS_NAN"}};if(R0(n.value))return{unaryFilter:{field:ds(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(x0(n.value))return{unaryFilter:{field:ds(n.field),op:"IS_NOT_NAN"}};if(R0(n.value))return{unaryFilter:{field:ds(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ds(n.field),op:Dj(n.op),value:n.value}}}(t):t instanceof _e?function(n){let r=n.getFilters().map(i=>IA(i));return r.length===1?r[0]:{compositeFilter:{op:Tj(n.op),filters:r}}}(t):G()}function bj(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function EA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var bs=class t{constructor(e,n,r,i,o=X.min(),s=X.min(),a=qe.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var ch=class{constructor(e){this.ct=e}};function Cj(t,e){let n;if(e.document)n=gA(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=q.fromSegments(e.noDocument.path),i=Zi(e.noDocument.readTime);n=Ye.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return G();{let r=q.fromSegments(e.unknownDocument.path),i=Zi(e.unknownDocument.version);n=Ye.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let o=new Oe(i[0],i[1]);return X.fromTimestamp(o)}(e.readTime)),n}function K0(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:lh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:xu(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Ts(o,s.version.toTimestamp()),createTime:Ts(o,s.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Yi(e.version)};else{if(!e.isUnknownDocument())return G();r.unknownDocument={path:n.path.toArray(),version:Yi(e.version)}}return r}function lh(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Yi(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Zi(t){let e=new Oe(t.seconds,t.nanoseconds);return X.fromTimestamp(e)}function Ui(t,e){let n=(e.baseMutations||[]).map(o=>iv(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>iv(t.ct,o)),i=Oe.fromMillis(e.localWriteTimeMs);return new Cu(e.batchId,i,n,r)}function fu(t){let e=Zi(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Zi(t.lastLimboFreeSnapshotVersion):X.min(),r;return r=function(o){return o.documents!==void 0}(t.query)?function(o){return Q(o.documents.length===1),Rt(Fs(fA(o.documents[0])))}(t.query):function(o){return Rt(vA(o))}(t.query),new bs(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,qe.fromBase64String(t.resumeToken))}function _A(t,e){let n=Yi(e.snapshotVersion),r=Yi(e.lastLimboFreeSnapshotVersion),i;i=rh(e.target)?mA(t.ct,e.target):yA(t.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ki(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Pw(t){let e=vA({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?oh(e,e.limit,"L"):e}function wy(t,e){return new Su(e.largestBatchId,iv(t.ct,e.overlayMutation))}function Q0(t,e){let n=e.path.lastSegment();return[t,At(e.path.popLast()),n]}function Y0(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Yi(r.readTime),documentKey:At(r.documentKey.path),largestBatchId:r.largestBatchId}}var ov=class{getBundleMetadata(e,n){return Z0(e).get(n).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Zi(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,n){return Z0(e).put(function(i){return{bundleId:i.id,createTime:Yi($e(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return J0(e).get(n).next(r=>{if(r)return function(o){return{name:o.name,query:Pw(o.bundledQuery),readTime:Zi(o.readTime)}}(r)})}saveNamedQuery(e,n){return J0(e).put(function(i){return{name:i.name,readTime:Yi($e(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function Z0(t){return et(t,"bundles")}function J0(t){return et(t,"namedQueries")}var dh=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return uu(e).get(Q0(this.userId,n)).next(r=>r?wy(this.serializer,r):null)}getOverlays(e,n){let r=Cn();return R.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((o,s)=>{let a=new Su(n,s);i.push(this.ht(e,a))}),R.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(s=>i.add(At(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(uu(e).j("collectionPathOverlayIndex",a))}),R.waitFor(o)}getOverlaysForCollection(e,n,r){let i=Cn(),o=At(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return uu(e).U("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let l=wy(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let o=Cn(),s,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return uu(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,d)=>{let f=wy(this.serializer,l);o.size()<i||f.largestBatchId===s?(o.set(f.getKey(),f),s=f.largestBatchId):d.done()}).next(()=>o)}ht(e,n){return uu(e).put(function(i,o,s){let[a,u,l]=Q0(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Mu(i.ct,s.mutation)}}(this.serializer,this.userId,n))}};function uu(t){return et(t,"documentOverlays")}var sv=class{Pt(e){return et(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{let r=n?.value;return r?qe.fromUint8Array(r):qe.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}};var rr=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Ne(e.integerValue));else if("doubleValue"in e){let r=Ne(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Iu(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=or(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Qr(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?VS(e)?this.dt(n,Number.MAX_SAFE_INTEGER):Hh(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):G()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let o=e.fields||{};this.dt(n,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Ne(a)),this.Vt(s,n),this.Tt(o[s],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),q.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};rr.vt=new rr;function Sj(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function X0(t){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=Sj(255&r[o]);if(i+=s,s!==8)break}return i}(t);return Math.ceil(e/8)}var av=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=n.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let n=this.qt(e),r=X0(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Kt(e){let n=this.qt(e),r=X0(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ft(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){let n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},uv=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},cv=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},Bi=class{constructor(){this.jt=new av,this.Ht=new uv(this.jt),this.Jt=new cv(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var $i=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function Br(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=eS(t.arrayValue,e.arrayValue),n!==0?n:(n=eS(t.directionalValue,e.directionalValue),n!==0?n:q.comparator(t.documentKey,e.documentKey)))}function eS(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var hh=class{constructor(e){this.Xt=new Ce((n,r)=>Be.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let n of e.filters){let r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Q(e.collectionGroup===this.collectionId),this.nn)return!1;let n=xy(e);if(n!==void 0&&!this.sn(n))return!1;let r=Vi(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.on(a,u)||!this._n(this.en[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ce(Be.comparator),n=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new gs(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new gs(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new gs(r.field,r.dir==="asc"?0:1)));return new ws(ws.UNKNOWN_ID,this.collectionId,n,wu.empty())}sn(e){for(let n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function DA(t){var e,n;if(Q(t instanceof fe||t instanceof _e),t instanceof fe){if(t instanceof nh){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>fe.create(t.field,"==",o)))||[];return _e.create(i,"or")}return t}let r=t.filters.map(i=>DA(i));return _e.create(r,t.op)}function Aj(t){if(t.getFilters().length===0)return[];let e=hv(DA(t));return Q(TA(e)),lv(e)||dv(e)?[e]:e.getFilters()}function lv(t){return t instanceof fe}function dv(t){return t instanceof _e&&Aw(t)}function TA(t){return lv(t)||dv(t)||function(n){if(n instanceof _e&&Vy(n)){for(let r of n.getFilters())if(!lv(r)&&!dv(r))return!1;return!0}return!1}(t)}function hv(t){if(Q(t instanceof fe||t instanceof _e),t instanceof fe)return t;if(t.filters.length===1)return hv(t.filters[0]);let e=t.filters.map(r=>hv(r)),n=_e.create(e,t.op);return n=fh(n),TA(n)?n:(Q(n instanceof _e),Q(Es(n)),Q(n.filters.length>1),n.filters.reduce((r,i)=>kw(r,i)))}function kw(t,e){let n;return Q(t instanceof fe||t instanceof _e),Q(e instanceof fe||e instanceof _e),n=t instanceof fe?e instanceof fe?function(i,o){return _e.create([i,o],"and")}(t,e):tS(t,e):e instanceof fe?tS(e,t):function(i,o){if(Q(i.filters.length>0&&o.filters.length>0),Es(i)&&Es(o))return qS(i,o.getFilters());let s=Vy(i)?i:o,a=Vy(i)?o:i,u=s.filters.map(l=>kw(l,a));return _e.create(u,"or")}(t,e),fh(n)}function tS(t,e){if(Es(e))return qS(e,t.getFilters());{let n=e.filters.map(r=>kw(t,r));return _e.create(n,"or")}}function fh(t){if(Q(t instanceof fe||t instanceof _e),t instanceof fe)return t;let e=t.getFilters();if(e.length===1)return fh(e[0]);if(BS(t))return t;let n=e.map(i=>fh(i)),r=[];return n.forEach(i=>{i instanceof fe?r.push(i):i instanceof _e&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:_e.create(r,t.op)}var fv=class{constructor(){this.un=new Nu}addToCollectionParentIndex(e,n){return this.un.add(n),R.resolve()}getCollectionParents(e,n){return R.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return R.resolve()}deleteFieldIndex(e,n){return R.resolve()}deleteAllFieldIndexes(e){return R.resolve()}createTargetIndexes(e,n){return R.resolve()}getDocumentsMatchingTarget(e,n){return R.resolve(null)}getIndexType(e,n){return R.resolve(0)}getFieldIndexes(e,n){return R.resolve([])}getNextCollectionGroupToUpdate(e){return R.resolve(null)}getMinOffset(e,n){return R.resolve(en.min())}getMinOffsetFromCollectionGroup(e,n){return R.resolve(en.min())}updateCollectionGroup(e,n,r){return R.resolve()}updateIndexEntries(e,n){return R.resolve()}},Nu=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ce(ge.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ce(ge.comparator)).toArray()}};var Vd=new Uint8Array(0),pv=class{constructor(e,n){this.databaseId=n,this.cn=new Nu,this.ln=new Nn(r=>Ki(r),(r,i)=>qu(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});let o={collectionId:r,parent:At(i)};return nS(e).put(o)}return R.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[CS(n),""],!1,!0);return nS(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==n)break;r.push(bn(s.parent))}return r})}addFieldIndex(e,n){let r=cu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete i.indexId;let o=r.add(i);if(n.indexState){let s=as(e);return o.next(a=>{s.put(Y0(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let r=cu(e),i=as(e),o=ss(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=cu(e),r=ss(e),i=as(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return R.forEach(this.hn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new hh(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let r=ss(e),i=!0,o=new Map;return R.forEach(this.hn(n),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=oe(),a=[];return R.forEach(o,(u,l)=>{O("IndexedDbIndexManager",`Using index ${function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map(B=>`${B.fieldPath}:${B.kind}`).join(",")}`}(u)} to execute ${Ki(n)}`);let d=function(F,B){let Z=xy(B);if(Z===void 0)return null;for(let K of ih(F,Z.fieldPath))switch(K.op){case"array-contains-any":return K.value.arrayValue.values||[];case"array-contains":return[K.value]}return null}(l,u),f=function(F,B){let Z=new Map;for(let K of Vi(B))for(let E of ih(F,K.fieldPath))switch(E.op){case"==":case"in":Z.set(K.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return Z.set(K.fieldPath.canonicalString(),E.value),Array.from(Z.values())}return null}(l,u),g=function(F,B){let Z=[],K=!0;for(let E of Vi(B)){let v=E.kind===0?O0(F,E.fieldPath,F.startAt):F0(F,E.fieldPath,F.startAt);Z.push(v.value),K&&(K=v.inclusive)}return new Mn(Z,K)}(l,u),y=function(F,B){let Z=[],K=!0;for(let E of Vi(B)){let v=E.kind===0?F0(F,E.fieldPath,F.endAt):O0(F,E.fieldPath,F.endAt);Z.push(v.value),K&&(K=v.inclusive)}return new Mn(Z,K)}(l,u),_=this.In(u,l,g),A=this.In(u,l,y),C=this.Tn(u,l,f),P=this.En(u.indexId,d,_,g.inclusive,A,y.inclusive,C);return R.forEach(P,j=>r.G(j,n.limit).next(F=>{F.forEach(B=>{let Z=q.fromSegments(B.documentKey);s.has(Z)||(s=s.add(Z),a.push(Z))})}))}).next(()=>a)}return R.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=Aj(_e.create(e.filters,"and")).map(r=>Wy(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,i,o,s,a){let u=(n!=null?n.length:1)*Math.max(r.length,o.length),l=u/(n!=null?n.length:1),d=[];for(let f=0;f<u;++f){let g=n?this.dn(n[f/l]):Vd,y=this.An(e,g,r[f%l],i),_=this.Rn(e,g,o[f%l],s),A=a.map(C=>this.An(e,g,C,!0));d.push(...this.createRange(y,_,A))}return d}An(e,n,r,i){let o=new $i(e,q.empty(),n,r);return i?o:o.Zt()}Rn(e,n,r,i){let o=new $i(e,q.empty(),n,r);return i?o.Zt():o}Pn(e,n){let r=new hh(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2,i=this.hn(n);return R.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new Ce(Be.comparator),d=!1;for(let f of u.filters)for(let g of f.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?d=!0:l=l.add(g.field));for(let f of u.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(d?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}Vn(e,n){let r=new Bi;for(let i of Vi(e)){let o=n.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);rr.vt.It(o,s)}return r.zt()}dn(e){let n=new Bi;return rr.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){let r=new Bi;return rr.vt.It(Gi(this.databaseId,n),r.Yt(function(o){let s=Vi(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let i=[];i.push(new Bi);let o=0;for(let s of Vi(e)){let a=r[o++];for(let u of i)if(this.fn(n,s.fieldPath)&&Tu(a))i=this.gn(i,s,a);else{let l=u.Yt(s.kind);rr.vt.It(a,l)}}return this.pn(i)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new Bi;u.seed(a.zt()),rr.vt.It(s,u.Yt(n.kind)),o.push(u)}return o}fn(e,n){return!!e.filters.find(r=>r instanceof fe&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=cu(e),i=as(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(o=>{let s=[];return R.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(d,f){let g=f?new wu(f.sequenceNumber,new en(Zi(f.readTime),new q(bn(f.documentKey)),f.largestBatchId)):wu.empty(),y=d.fields.map(([_,A])=>new gs(Be.fromServerFormat(_),A));return new ws(d.indexId,d.collectionGroup,y,g)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:ie(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=cu(e),o=as(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>R.forEach(a,u=>o.put(Y0(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,n){let r=new Map;return R.forEach(n,(i,o)=>{let s=r.get(i.collectionGroup);return(s?R.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),R.forEach(a,u=>this.wn(e,i,u).next(l=>{let d=this.Sn(o,u);return l.isEqual(d)?R.resolve():this.bn(e,o,u,l,d)}))))})}Dn(e,n,r,i){return ss(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,i){return ss(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){let i=ss(e),o=new Ce(Br);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(s,a)=>{o=o.add(new $i(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,n){let r=new Ce(Br),i=this.Vn(n,e);if(i==null)return r;let o=xy(n);if(o!=null){let s=e.data.field(o.fieldPath);if(Tu(s))for(let a of s.arrayValue.values||[])r=r.add(new $i(n.indexId,e.key,this.dn(a),i))}else r=r.add(new $i(n.indexId,e.key,Vd,i));return r}bn(e,n,r,i,o){O("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(u,l,d,f,g){let y=u.getIterator(),_=l.getIterator(),A=os(y),C=os(_);for(;A||C;){let P=!1,j=!1;if(A&&C){let F=d(A,C);F<0?j=!0:F>0&&(P=!0)}else A!=null?j=!0:P=!0;P?(f(C),C=os(_)):j?(g(A),A=os(y)):(A=os(y),C=os(_))}}(i,o,Br,a=>{s.push(this.Dn(e,n,r,a))},a=>{s.push(this.vn(e,n,r,a))}),R.waitFor(s)}yn(e){let n=1;return as(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>Br(s,a)).filter((s,a,u)=>!a||Br(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Br(s,e),u=Br(s,n);if(a===0)i[0]=e.Zt();else if(a>0&&u<0)i.push(s),i.push(s.Zt());else if(u>0)break}i.push(n);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Vd,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Vd,[]];o.push(IDBKeyRange.bound(a,u))}return o}Cn(e,n){return Br(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(rS)}getMinOffset(e,n){return R.mapArray(this.hn(n),r=>this.Pn(e,r).next(i=>i||G())).next(rS)}};function nS(t){return et(t,"collectionParents")}function ss(t){return et(t,"indexEntries")}function cu(t){return et(t,"indexConfiguration")}function as(t){return et(t,"indexState")}function rS(t){Q(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;Tw(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new en(e.readTime,e.documentKey,n)}var iS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Jt=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function bA(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.J({range:s},(d,f,g)=>(a++,g.delete()));o.push(u.next(()=>{Q(a===1)}));let l=[];for(let d of n.mutations){let f=NS(e,d.key.path,n.batchId);o.push(i.delete(f)),l.push(d.key)}return R.waitFor(o).next(()=>l)}function ph(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw G();e=t.noDocument}return JSON.stringify(e).length}Jt.DEFAULT_COLLECTION_PERCENTILE=10,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jt.DEFAULT=new Jt(41943040,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jt.DISABLED=new Jt(-1,0,0);var gh=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,n,r,i){Q(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $r(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let o=fs(e),s=$r(e);return s.add({}).next(a=>{Q(typeof a=="number");let u=new Cu(a,n,r,i),l=function(y,_,A){let C=A.baseMutations.map(j=>Mu(y.ct,j)),P=A.mutations.map(j=>Mu(y.ct,j));return{userId:_,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:C,mutations:P}}(this.serializer,this.userId,u),d=[],f=new Ce((g,y)=>ie(g.canonicalString(),y.canonicalString()));for(let g of i){let y=NS(this.userId,g.key.path,a);f=f.add(g.key.path.popLast()),d.push(s.put(l)),d.push(o.put(y,kV))}return f.forEach(g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),R.waitFor(d).next(()=>u)})}lookupMutationBatch(e,n){return $r(e).get(n).next(r=>r?(Q(r.userId===this.userId),Ui(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?R.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Fn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return $r(e).J({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(Q(a.batchId>=r),o=Ui(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return $r(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $r(e).U("userMutationsIndex",n).next(r=>r.map(i=>Ui(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=$d(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return fs(e).J({range:i},(s,a,u)=>{let[l,d,f]=s,g=bn(d);if(l===this.userId&&n.path.isEqual(g))return $r(e).get(f).next(y=>{if(!y)throw G();Q(y.userId===this.userId),o.push(Ui(this.serializer,y))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ce(ie),i=[];return n.forEach(o=>{let s=$d(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=fs(e).J({range:a},(l,d,f)=>{let[g,y,_]=l,A=bn(y);g===this.userId&&o.path.isEqual(A)?r=r.add(_):f.done()});i.push(u)}),R.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=$d(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Ce(ie);return fs(e).J({range:s},(u,l,d)=>{let[f,g,y]=u,_=bn(g);f===this.userId&&r.isPrefixOf(_)?_.length===i&&(a=a.add(y)):d.done()}).next(()=>this.xn(e,a))}xn(e,n){let r=[],i=[];return n.forEach(o=>{i.push($r(e).get(o).next(s=>{if(s===null)throw G();Q(s.userId===this.userId),r.push(Ui(this.serializer,s))}))}),R.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return bA(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),R.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return R.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return fs(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=bn(o[1]);i.push(u)}else a.done()}).next(()=>{Q(i.length===0)})})}containsKey(e,n){return CA(e,this.userId,n)}Nn(e){return SA(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function CA(t,e,n){let r=$d(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return fs(t).J({range:o,H:!0},(a,u,l)=>{let[d,f,g]=a;d===e&&f===i&&(s=!0),l.done()}).next(()=>s)}function $r(t){return et(t,"mutations")}function fs(t){return et(t,"documentMutations")}function SA(t){return et(t,"mutationQueues")}var Cs=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var gv=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{let r=new Cs(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>X.fromTimestamp(new Oe(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Qn(e,i)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>us(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(Q(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let i=0,o=[];return us(e).J((s,a)=>{let u=fu(a);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>R.waitFor(o)).next(()=>i)}forEachTarget(e,n){return us(e).J((r,i)=>{let o=fu(i);n(o)})}qn(e){return oS(e).get("targetGlobalKey").next(n=>(Q(n!==null),n))}Qn(e,n){return oS(e).put("targetGlobalKey",n)}Kn(e,n){return us(e).put(_A(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){let r=Ki(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return us(e).J({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let l=fu(a);qu(n,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,n,r){let i=[],o=qr(e);return n.forEach(s=>{let a=At(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),R.waitFor(i)}removeMatchingKeys(e,n,r){let i=qr(e);return R.forEach(n,o=>{let s=At(o.path);return R.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){let r=qr(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=qr(e),o=oe();return i.J({range:r,H:!0},(s,a,u)=>{let l=bn(s[1]),d=new q(l);o=o.add(d)}).next(()=>o)}containsKey(e,n){let r=At(n.path),i=IDBKeyRange.bound([r],[CS(r)],!1,!0),o=0;return qr(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,n){return us(e).get(n).next(r=>r?fu(r):null)}};function us(t){return et(t,"targets")}function oS(t){return et(t,"targetGlobal")}function qr(t){return et(t,"targetDocuments")}function sS([t,e],[n,r]){let i=ie(t,n);return i===0?ie(e,r):i}var mv=class{constructor(e){this.Un=e,this.buffer=new Ce(sS),this.Wn=0}Gn(){return++this.Wn}zn(e){let n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();sS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},yv=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){O("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>N(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){ii(n)?O("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield ri(n)}yield this.Hn(3e5)}))}},vv=class{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return R.resolve(jt.oe);let r=new mv(n);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(O("LruGarbageCollector","Garbage collection skipped; disabled"),R.resolve(iS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(O("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iS):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,i,o,s,a,u,l,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(O("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(o=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),cs()<=yn.DEBUG&&O("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(l-u)+`ms
Total Duration: ${l-d}ms`),R.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function Rj(t,e){return new vv(t,e)}var wv=class{constructor(e,n){this.db=e,this.garbageCollector=Rj(this,n)}Yn(e){let n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,i)=>n(i))}addReference(e,n,r){return jd(e,r)}removeReference(e,n,r){return jd(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return jd(e,n)}nr(e,n){return function(i,o){let s=!1;return SA(i).Y(a=>CA(i,a,o).next(u=>(u&&(s=!0),R.resolve(!u)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=n){let u=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,X.min()),qr(e).delete(function(f){return[0,At(f.path)]}(s))))});i.push(u)}}).next(()=>R.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return jd(e,n)}tr(e,n){let r=qr(e),i,o=jt.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==jt.oe&&n(new q(bn(i)),o),o=l,i=u):o=jt.oe}).next(()=>{o!==jt.oe&&n(new q(bn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function jd(t,e){return qr(t).put(function(r,i){return{targetId:0,path:At(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var mh=class{constructor(){this.changes=new Nn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ye.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?R.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Iv=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Li(e).put(r)}removeEntry(e,n,r){return Li(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],lh(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=Ye.newInvalidDocument(n);return Li(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(lu(n))},(i,o)=>{r=this.ir(n,o)}).next(()=>r)}sr(e,n){let r={size:0,document:Ye.newInvalidDocument(n)};return Li(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(lu(n))},(i,o)=>{r={document:this.ir(n,o),size:ph(o)}}).next(()=>r)}getEntries(e,n){let r=Ot();return this._r(e,n,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,n){let r=Ot(),i=new xe(q.comparator);return this._r(e,n,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,ph(s))}).next(()=>({documents:r,ur:i}))}_r(e,n,r){if(n.isEmpty())return R.resolve();let i=new Ce(cS);n.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(lu(i.first()),lu(i.last())),s=i.getIterator(),a=s.getNext();return Li(e).J({index:"documentKeyIndex",range:o},(u,l,d)=>{let f=q.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&cS(a,f)<0;)r(a,null),a=s.getNext();a&&a.isEqual(f)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?d.$(lu(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),lh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Li(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let d=Ot();for(let f of l){let g=this.ir(q.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(Hu(n,g)||i.has(g.key))&&(d=d.insert(g.key,g))}return d})}getAllFromCollectionGroup(e,n,r,i){let o=Ot(),s=uS(n,r),a=uS(n,en.max());return Li(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,d)=>{let f=this.ir(q.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(f.key,f),o.size===i&&d.done()}).next(()=>o)}newChangeBuffer(e){return new Ev(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return aS(e).get("remoteDocumentGlobalKey").next(n=>(Q(!!n),n))}rr(e,n){return aS(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){let r=Cj(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(X.min())))return r}return Ye.newInvalidDocument(e)}};function AA(t){return new Iv(t)}var Ev=class extends mh{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new Nn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new Ce((o,s)=>ie(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(n.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=K0(this.cr.serializer,s);i=i.add(o.path.popLast());let l=ph(u);r+=l-a.size,n.push(this.cr.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=K0(this.cr.serializer,s.convertToNoDocument(X.min()));n.push(this.cr.addEntry(e,o,u))}}),i.forEach(o=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.cr.updateMetadata(e,r)),R.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function aS(t){return et(t,"remoteDocumentGlobal")}function Li(t){return et(t,"remoteDocumentsV14")}function lu(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function uS(t,e){let n=e.documentKey.path.toArray();return[t,lh(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function cS(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=ie(n[o],r[o]),i)return i;return i=ie(n.length,r.length),i||(i=ie(n[n.length-2],r[r.length-2]),i||ie(n[n.length-1],r[r.length-1]))}var _v=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var yh=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&mu(r.mutation,i,Ut.empty(),Oe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,oe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=oe()){let i=Cn();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=hu();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Cn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,oe()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Ot(),s=gu(),a=function(){return gu()}();return n.forEach((u,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof fn)?o=o.insert(l.key,l):d!==void 0?(s.set(l.key,d.mutation.getFieldMask()),mu(d.mutation,l,d.mutation.getFieldMask(),Oe.now())):s.set(l.key,Ut.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,d)=>s.set(l,d)),n.forEach((l,d)=>{var f;return a.set(l,new _v(d,(f=s.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){let r=gu(),i=new xe((s,a)=>s-a),o=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let d=r.get(u)||Ut.empty();d=a.applyToLocalView(l,d),r.set(u,d);let f=(i.get(a.batchId)||oe()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,d=u.value,f=JS();d.forEach(g=>{if(!o.has(g)){let y=oA(n.get(g),r.get(g));y!==null&&f.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,f))}return R.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return q.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Rw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):R.resolve(Cn()),a=-1,u=o;return s.next(l=>R.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?R.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{u=u.insert(d,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,oe())).next(d=>({batchId:a,changes:ZS(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let i=hu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=hu();return this.indexManager.getCollectionParents(e,o).next(a=>R.forEach(a,u=>{let l=function(f,g){return new hn(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,g)=>{s=s.insert(f,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let d=l.getKey();s.get(d)===null&&(s=s.insert(d,Ye.newInvalidDocument(d)))});let a=hu();return s.forEach((u,l)=>{let d=o.get(u);d!==void 0&&mu(d.mutation,l,Ut.empty(),Oe.now()),Hu(n,l)&&(a=a.insert(u,l))}),a})}};var Dv=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return R.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:$e(i.createTime)}}(n)),R.resolve()}getNamedQuery(e,n){return R.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:Pw(i.bundledQuery),readTime:$e(i.readTime)}}(n)),R.resolve()}};var Tv=class{constructor(){this.overlays=new xe(q.comparator),this.Ir=new Map}getOverlay(e,n){return R.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Cn();return R.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),R.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),R.resolve()}getOverlaysForCollection(e,n,r){let i=Cn(),o=n.length+1,s=new q(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return R.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new xe((l,d)=>l-d),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let d=o.get(l.largestBatchId);d===null&&(d=Cn(),o=o.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=Cn(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return R.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Su(n,r));let o=this.Ir.get(n);o===void 0&&(o=oe(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}};var bv=class{constructor(){this.sessionToken=qe.EMPTY_BYTE_STRING}getSessionToken(e){return R.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,R.resolve()}};var Pu=class{constructor(){this.Tr=new Ce(We.Er),this.dr=new Ce(We.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new We(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new We(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new q(new ge([])),r=new We(n,e),i=new We(n,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new q(new ge([])),r=new We(n,e),i=new We(n,e+1),o=oe();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new We(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},We=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return q.comparator(e.key,n.key)||ie(e.wr,n.wr)}static Ar(e,n){return ie(e.wr,n.wr)||q.comparator(e.key,n.key)}};var Cv=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ce(We.Er)}checkEmpty(e){return R.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Cu(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new We(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return R.resolve(s)}lookupMutationBatch(e,n){return R.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),o=i<0?0:i;return R.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return R.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new We(n,0),i=new We(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),R.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ce(ie);return n.forEach(i=>{let o=new We(i,0),s=new We(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),R.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;q.isDocumentKey(o)||(o=o.child(""));let s=new We(new q(o),0),a=new Ce(ie);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),R.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Q(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return R.forEach(n.mutations,i=>{let o=new We(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new We(n,0),i=this.br.firstAfterOrEqual(r);return R.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,R.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Sv=class{constructor(e){this.Mr=e,this.docs=function(){return new xe(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return R.resolve(r?r.document.mutableCopy():Ye.newInvalidDocument(n))}getEntries(e,n){let r=Ot();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Ye.newInvalidDocument(i))}),R.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Ot(),s=n.path,a=new q(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:d}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Tw(AS(d),r)<=0||(i.has(d.key)||Hu(n,d))&&(o=o.insert(d.key,d.mutableCopy()))}return R.resolve(o)}getAllFromCollectionGroup(e,n,r,i){G()}Or(e,n){return R.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Av(this)}getSize(e){return R.resolve(this.size)}},Av=class extends mh{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),R.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var Rv=class{constructor(e){this.persistence=e,this.Nr=new Nn(n=>Ki(n),qu),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Pu,this.targetCount=0,this.kr=Cs.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),R.resolve()}getLastRemoteSnapshotVersion(e){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return R.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),R.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new Cs(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,R.resolve()}updateTargetData(e,n){return this.Kn(n),R.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,R.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),R.waitFor(o).next(()=>i)}getTargetCount(e){return R.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return R.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),R.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),R.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),R.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return R.resolve(r)}containsKey(e,n){return R.resolve(this.Br.containsKey(n))}};var vh=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new jt(0),this.Kr=!1,this.Kr=!0,this.$r=new bv,this.referenceDelegate=e(this),this.Ur=new Rv(this),this.indexManager=new fv,this.remoteDocumentCache=function(i){return new Sv(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new ch(n),this.Gr=new Dv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Tv,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Cv(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){O("MemoryPersistence","Starting transaction:",e);let i=new xv(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,n){return R.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},xv=class extends Zd{constructor(e){super(),this.currentSequenceNumber=e}},wh=class t{constructor(e){this.persistence=e,this.Jr=new Pu,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw G()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),R.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),R.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),R.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.Xr,r=>{let i=q.fromPath(r);return this.ei(e,i).next(o=>{o||n.removeEntry(i,X.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return R.or([()=>R.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var Mv=class{constructor(e){this.serializer=e}O(e,n,r,i){let o=new Jd("createOrUpgrade",n);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",b0,{unique:!0}),u.createObjectStore("documentMutations")}(e),lS(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=R.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),lS(e)),s=s.next(()=>function(u){let l=u.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:X.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",d)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store("mutations").U().next(d=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",b0,{unique:!0});let f=l.store("mutations"),g=d.map(y=>f.put(y));return R.waitFor(g)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore("documentOverlays",{keyPath:GV});l.createIndex("collectionPathOverlayIndex",WV,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",KV,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore("remoteDocumentsV14",{keyPath:OV});l.createIndex("documentKeyIndex",FV),l.createIndex("collectionGroupIndex",LV)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:$V}).createIndex("sequenceNumberIndex",qV,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:zV}).createIndex("documentKeyIndex",HV,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=ph(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>R.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>R.forEach(a,u=>{Q(u.userId===o.userId);let l=Ui(this.serializer,u);return bA(e,o.userId,l).next(()=>{})}))}))}ii(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let u=new ge(s),l=function(f){return[0,At(f)]}(u);o.push(n.get(l).next(d=>d?R.resolve():(f=>n.put({targetId:0,path:At(f),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>R.waitFor(o))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:BV});let r=n.store("collectionParents"),i=new Nu,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:At(u)})}};return n.store("remoteDocuments").J({H:!0},(s,a)=>{let u=new ge(s);return o(u.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([s,a,u],l)=>{let d=bn(a);return o(d.popLast())}))}oi(e){let n=e.store("targets");return n.J((r,i)=>{let o=fu(i),s=_A(this.serializer,o);return n.put(s)})}_i(e,n){let r=n.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=n.store("remoteDocumentsV14"),u=function(f){return f.document?new q(ge.fromString(f.document.name).popFirst(5)):f.noDocument?q.fromSegments(f.noDocument.path):f.unknownDocument?q.fromSegments(f.unknownDocument.path):G()}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>R.waitFor(i))}ai(e,n){let r=n.store("mutations"),i=AA(this.serializer),o=new vh(wh.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(u=>{var l;let d=(l=a.get(u.userId))!==null&&l!==void 0?l:oe();Ui(this.serializer,u).keys().forEach(f=>d=d.add(f)),a.set(u.userId,d)}),R.forEach(a,(u,l)=>{let d=new Ke(l),f=dh.lt(this.serializer,d),g=o.getIndexManager(d),y=gh.lt(d,this.serializer,g,o.referenceDelegate);return new yh(i,y,f,g).recalculateAndSaveOverlaysForDocumentKeys(new Eu(n,jt.oe),u).next()})})}};function lS(t){t.createObjectStore("targetDocuments",{keyPath:jV}).createIndex("documentTargetsIndex",UV,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",VV,{unique:!0}),t.createObjectStore("targetGlobal")}var Iy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Nv=class t{constructor(e,n,r,i,o,s,a,u,l,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=d,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=g=>Promise.resolve(),!t.D())throw new k(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new wv(this,i),this.Ai=n+"main",this.serializer=new ch(u),this.Ri=new Kr(this.Ai,this.hi,new Mv(this.serializer)),this.$r=new sv,this.Ur=new gv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=AA(this.serializer),this.Gr=new ov,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&Ue("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new k(x.FAILED_PRECONDITION,Iy);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new jt(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=n=>N(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(n=>N(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ud(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(ii(e))return O("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return O("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return du(e).get("owner").next(n=>R.resolve(this.vi(n)))}Ci(e){return Ud(e).delete(this.clientId)}Fi(){return N(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=et(n,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return R.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let n of e)this.Vi.removeItem(this.Oi(n.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?R.resolve(!0):du(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new k(x.FAILED_PRECONDITION,Iy);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ud(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&O("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return N(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new Eu(e,jt.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()})}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Ud(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return gh.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new pv(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return dh.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){O("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",o=function(u){return u===17?ZV:u===16?YV:u===15?Cw:u===14?OS:u===13?kS:u===12?QV:u===11?PS:void G()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new Eu(a,this.Qr?this.Qr.next():jt.oe),n==="readwrite-primary"?this.wi(s).next(u=>!!u||this.Si(s)).next(u=>{if(!u)throw Ue(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new k(x.FAILED_PRECONDITION,RS);return r(s)}).next(u=>this.Di(s).next(()=>u)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return du(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new k(x.FAILED_PRECONDITION,Iy)})}Di(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return du(e).put("owner",n)}static D(){return Kr.D()}bi(e){let n=du(e);return n.get("owner").next(r=>this.vi(r)?(O("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):R.resolve())}Mi(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(Ue(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let n=/(?:Version|Mobile)\/1[456]/;ep()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{let r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return O("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ue("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ue("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function du(t){return et(t,"owner")}function Ud(t){return et(t,"clientMetadata")}function Ow(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Pv=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=oe(),i=oe();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var kv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Ih=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return ep()?8:xS(_a())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.Yi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new kv;return this.Xi(e,n,s).next(a=>{if(o.result=a,this.zi)return this.es(e,n,s,a.size)})}).next(()=>o.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(cs()<=yn.DEBUG&&O("QueryEngine","SDK will not create cache indexes for query:",ls(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),R.resolve()):(cs()<=yn.DEBUG&&O("QueryEngine","Query:",ls(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(cs()<=yn.DEBUG&&O("QueryEngine","The SDK decides to create cache indexes for query:",ls(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rt(n))):R.resolve())}Yi(e,n){if(L0(n))return R.resolve(null);let r=Rt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=oh(n,null,"F"),r=Rt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=oe(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(n,a);return this.ns(n,l,s,u.readTime)?this.Yi(e,oh(n,null,"F")):this.rs(e,l,n,u)}))})))}Zi(e,n,r,i){return L0(n)||i.isEqual(X.min())?R.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(n,o);return this.ns(n,s,r,i)?R.resolve(null):(cs()<=yn.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ls(n)),this.rs(e,s,n,SS(i,-1)).next(a=>a))})}ts(e,n){let r=new Ce(QS(e));return n.forEach((i,o)=>{Hu(e,o)&&(r=r.add(o))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,n,r){return cs()<=yn.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",ls(n)),this.Ji.getDocumentsMatchingQuery(e,n,en.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Ov=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new xe(ie),this._s=new Nn(o=>Ki(o),qu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yh(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function RA(t,e,n,r){return new Ov(t,e,n,r)}function xA(t,e){return N(this,null,function*(){let n=$(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=oe();for(let l of i){s.push(l.batchId);for(let d of l.mutations)u=u.add(d.key)}for(let l of o){a.push(l.batchId);for(let d of l.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function xj(t,e){let n=$(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,d){let f=l.batch,g=f.keys(),y=R.resolve();return g.forEach(_=>{y=y.next(()=>d.getEntry(u,_)).next(A=>{let C=l.docVersions.get(_);Q(C!==null),A.version.compareTo(C)<0&&(f.applyToRemoteDocument(A,l),A.isValidDocument()&&(A.setReadTime(l.commitVersion),d.addEntry(A)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=oe();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function MA(t){let e=$(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Mj(t,e){let n=$(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(n.Ur.removeMatchingKeys(o,d.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(o,d.addedDocuments,f)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(qe.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(f,y),function(A,C,P){return A.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(g,y,d)&&a.push(n.Ur.updateTargetData(o,y))});let u=Ot(),l=oe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(NA(o,s,e.documentUpdates).next(d=>{u=d.Ps,l=d.Is})),!r.isEqual(X.min())){let d=n.Ur.getLastRemoteSnapshotVersion(o).next(f=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return R.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.os=i,o))}function NA(t,e,n){let r=oe(),i=oe();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Ot();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(X.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):O("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function Nj(t,e){let n=$(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ss(t,e){let n=$(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(o=>o?(i=o,R.resolve(i)):n.Ur.allocateTargetId(r).next(s=>(i=new bs(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function As(t,e,n){return N(this,null,function*(){let r=$(t),i=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!ii(s))throw s;O("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function Eh(t,e,n){let r=$(t),i=X.min(),o=oe();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,d){let f=$(u),g=f._s.get(d);return g!==void 0?R.resolve(f.os.get(g)):f.Ur.getTargetData(l,d)}(r,s,Rt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,n?i:X.min(),n?o:oe())).next(a=>(OA(r,KS(e),a),{documents:a,Ts:o})))}function PA(t,e){let n=$(t),r=$(n.Ur),i=n.os.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function kA(t,e){let n=$(t),r=n.us.get(e)||X.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.cs.getAllFromCollectionGroup(i,e,SS(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(OA(n,e,i),i))}function OA(t,e,n){let r=t.us.get(e)||X.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}function Pj(t,e,n,r){return N(this,null,function*(){let i=$(t),o=oe(),s=Ot();for(let l of n){let d=e.Es(l.metadata.name);l.document&&(o=o.add(d));let f=e.ds(l);f.setReadTime(e.As(l.metadata.readTime)),s=s.insert(d,f)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield Ss(i,function(d){return Rt(Fs(ge.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>NA(l,a,s).next(d=>(a.apply(l),d)).next(d=>i.Ur.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Ur.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,d.Ps,d.Is)).next(()=>d.Ps)))})}function kj(r,i){return N(this,arguments,function*(t,e,n=oe()){let o=yield Ss(t,Rt(Pw(e.bundledQuery))),s=$(t);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=$e(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(qe.EMPTY_BYTE_STRING,u);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,n,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function dS(t,e){return`firestore_clients_${t}_${e}`}function hS(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Ey(t,e){return`firestore_targets_${t}_${e}`}var _h=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Rs(e,n,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new k(i.error.code,i.error.message))),s?new t(e,n,i.state,o):(Ue("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},yu=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){let r=JSON.parse(n),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new k(r.error.code,r.error.message))),o?new t(e,r.state,i):(Ue("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Dh=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=xw();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=MS(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Ue("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},Fv=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Ue("SharedClientState",`Failed to parse online state: ${e}`),null)}},ku=class{constructor(){this.activeTargetIds=xw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},vu=class{constructor(e,n,r,i,o){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new xe(ie),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=dS(this.persistenceKey,this.ps),this.vs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new ku),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return N(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(dS(this.persistenceKey,r));if(i){let o=Dh.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let n=this.storage.getItem(this.xs);if(n){let r=this.Ls(n);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(Ey(this.persistenceKey,e));if(r){let i=yu.Rs(e,r);i&&(n=i.state)}}return this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ey(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return O("SharedClientState","READ",e,n),n}setItem(e,n){O("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){O("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let n=e;if(n.storageArea===this.storage){if(O("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void Ue("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){let r=this.Gs(n.key);return this.zs(r,null)}{let r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){let r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){let r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){let r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){let r=function(o){let s=jt.oe;if(o!=null)try{let a=JSON.parse(o);Q(typeof a=="number"),s=a}catch(a){Ue("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);r!==jt.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){let r=this.Xs(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(n)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){let i=new _h(this.currentUser,e,n,r),o=hS(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let n=hS(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){let n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){let i=Ey(this.persistenceKey,e),o=new yu(e,n,r);this.setItem(i,o.Vs())}Ws(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){let n=this.Cs.exec(e);return n?n[1]:null}js(e,n){let r=this.Gs(e);return Dh.Rs(r,n)}Hs(e,n){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return _h.Rs(new Ke(o),i,n)}Ys(e,n){let r=this.Ms.exec(e),i=Number(r[1]);return yu.Rs(i,n)}Ls(e){return Fv.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return N(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);O("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){let r=n?this.Ss.insert(e,n):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=xw();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},Th=class{constructor(){this.so=new ku,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ku,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Lv=class{_o(e){}shutdown(){}};var bh=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){O("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){O("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Bd=null;function _y(){return Bd===null?Bd=function(){return 268435456+Math.round(2147483648*Math.random())}():Bd++,"0x"+Bd.toString(16)}var Oj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Vv=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var pt="WebChannelConnection",jv=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(n,r,i,o,s){let a=_y(),u=this.xo(n,r.toUriEncodedString());O("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(n,u,l,i).then(d=>(O("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Xt("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",u,"request:",i),d})}Lo(n,r,i,o,s,a){return this.Mo(n,r,i,o,s)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Os}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}xo(n,r){let i=Oj[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let o=_y();return new Promise((s,a)=>{let u=new fy;u.setWithCredentials(!0),u.listenOnce(gy.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case au.NO_ERROR:let d=u.getResponseJson();O(pt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case au.TIMEOUT:O(pt,`RPC '${e}' ${o} timed out`),a(new k(x.DEADLINE_EXCEEDED,"Request time out"));break;case au.HTTP_ERROR:let f=u.getStatus();if(O(pt,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);let y=g?.error;if(y&&y.status&&y.message){let _=function(C){let P=C.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(P)>=0?P:x.UNKNOWN}(y.status);a(new k(_,y.message))}else a(new k(x.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new k(x.UNAVAILABLE,"Connection failed."));break;default:G()}}finally{O(pt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);O(pt,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=_y(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=vy(),a=yy(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new py({})),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let d=o.join("");O(pt,`Creating RPC '${e}' stream ${i}: ${d}`,u);let f=s.createWebChannel(d,u),g=!1,y=!1,_=new Vv({Io:C=>{y?O(pt,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(g||(O(pt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),O(pt,`RPC '${e}' stream ${i} sending:`,C),f.send(C))},To:()=>f.close()}),A=(C,P,j)=>{C.listen(P,F=>{try{j(F)}catch(B){setTimeout(()=>{throw B},0)}})};return A(f,is.EventType.OPEN,()=>{y||(O(pt,`RPC '${e}' stream ${i} transport opened.`),_.yo())}),A(f,is.EventType.CLOSE,()=>{y||(y=!0,O(pt,`RPC '${e}' stream ${i} transport closed`),_.So())}),A(f,is.EventType.ERROR,C=>{y||(y=!0,Xt(pt,`RPC '${e}' stream ${i} transport errored:`,C),_.So(new k(x.UNAVAILABLE,"The operation could not be completed")))}),A(f,is.EventType.MESSAGE,C=>{var P;if(!y){let j=C.data[0];Q(!!j);let F=j,B=F.error||((P=F[0])===null||P===void 0?void 0:P.error);if(B){O(pt,`RPC '${e}' stream ${i} received error:`,B);let Z=B.status,K=function(I){let D=Ge[I];if(D!==void 0)return uA(D)}(Z),E=B.message;K===void 0&&(K=x.INTERNAL,E="Unknown error status: "+Z+" with message "+B.message),y=!0,_.So(new k(K,E)),f.close()}else O(pt,`RPC '${e}' stream ${i} received:`,j),_.bo(j)}}),A(a,my.STAT_EVENT,C=>{C.stat===Ld.PROXY?O(pt,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===Ld.NOPROXY&&O(pt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.wo()},0),_}};function FA(){return typeof window<"u"?window:null}function Gd(){return typeof document<"u"?document:null}function Gu(t){return new ev(t,!0)}var Ou=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&O("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Ch=class{constructor(e,n,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Ou(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return N(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return N(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return N(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===x.RESOURCE_EXHAUSTED?(Ue(n.toString()),Ue("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new k(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>N(this,null,function*(){this.state=0,this.start()}))}I_(e){return O("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(O("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Uv=class extends Ch{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=wj(this.serializer,e),r=function(o){if(!("targetChange"in o))return X.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?X.min():s.readTime?$e(s.readTime):X.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=rv(this.serializer),n.addTarget=function(o,s){let a,u=s.target;if(a=rh(u)?{documents:mA(o,u)}:{query:yA(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=lA(o,s.resumeToken);let l=tv(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(X.min())>0){a.readTime=Ts(o,s.snapshotVersion.toTimestamp());let l=tv(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=Ej(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=rv(this.serializer),n.removeTarget=e,this.a_(n)}},Bv=class extends Ch{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Q(!!e.streamToken),this.lastStreamToken=e.streamToken,Q(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Q(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=Ij(e.writeResults,e.commitTime),r=$e(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=rv(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Mu(this.serializer,r))};this.a_(n)}};var $v=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new k(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,nv(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new k(x.UNKNOWN,o.toString())})}Lo(e,n,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,nv(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new k(x.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},qv=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ue(n),this.D_=!1):O("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var zv=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>N(this,null,function*(){oi(this)&&(O("RemoteStore","Restarting streams for network reachability change."),yield function(u){return N(this,null,function*(){let l=$(u);l.L_.add(4),yield Ls(l),l.q_.set("Unknown"),l.L_.delete(4),yield Wu(l)})}(this))}))}),this.q_=new qv(r,i)}};function Wu(t){return N(this,null,function*(){if(oi(t))for(let e of t.B_)yield e(!0)})}function Ls(t){return N(this,null,function*(){for(let e of t.B_)yield e(!1)})}function Gh(t,e){let n=$(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Vw(n)?Lw(n):js(n).r_()&&Fw(n,e))}function Rs(t,e){let n=$(t),r=js(n);n.N_.delete(e),r.r_()&&LA(n,e),n.N_.size===0&&(r.r_()?r.o_():oi(n)&&n.q_.set("Unknown"))}function Fw(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}js(t).A_(e)}function LA(t,e){t.Q_.xe(e),js(t).R_(e)}function Lw(t){t.Q_=new Xy({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),js(t).start(),t.q_.v_()}function Vw(t){return oi(t)&&!js(t).n_()&&t.N_.size>0}function oi(t){return $(t).L_.size===0}function VA(t){t.Q_=void 0}function Fj(t){return N(this,null,function*(){t.q_.set("Online")})}function Lj(t){return N(this,null,function*(){t.N_.forEach((e,n)=>{Fw(t,e)})})}function Vj(t,e){return N(this,null,function*(){VA(t),Vw(t)?(t.q_.M_(e),Lw(t)):t.q_.set("Unknown")})}function jj(t,e,n){return N(this,null,function*(){if(t.q_.set("Online"),e instanceof ah&&e.state===2&&e.cause)try{yield function(i,o){return N(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){O("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Sh(t,r)}else if(e instanceof ys?t.Q_.Ke(e):e instanceof sh?t.Q_.He(e):t.Q_.We(e),!n.isEqual(X.min()))try{let r=yield MA(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let d=o.N_.get(l);d&&o.N_.set(l,d.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let d=o.N_.get(u);if(!d)return;o.N_.set(u,d.withResumeToken(qe.EMPTY_BYTE_STRING,d.snapshotVersion)),LA(o,u);let f=new bs(d.target,u,l,d.sequenceNumber);Fw(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){O("RemoteStore","Failed to raise snapshot:",r),yield Sh(t,r)}})}function Sh(t,e,n){return N(this,null,function*(){if(!ii(e))throw e;t.L_.add(1),yield Ls(t),t.q_.set("Offline"),n||(n=()=>MA(t.localStore)),t.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){O("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield Wu(t)}))})}function jA(t,e){return e().catch(n=>Sh(t,n,e))}function Vs(t){return N(this,null,function*(){let e=$(t),n=ni(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Uj(e);)try{let i=yield Nj(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,Bj(e,i)}catch(i){yield Sh(e,i)}UA(e)&&BA(e)})}function Uj(t){return oi(t)&&t.O_.length<10}function Bj(t,e){t.O_.push(e);let n=ni(t);n.r_()&&n.V_&&n.m_(e.mutations)}function UA(t){return oi(t)&&!ni(t).n_()&&t.O_.length>0}function BA(t){ni(t).start()}function $j(t){return N(this,null,function*(){ni(t).p_()})}function qj(t){return N(this,null,function*(){let e=ni(t);for(let n of t.O_)e.m_(n.mutations)})}function zj(t,e,n){return N(this,null,function*(){let r=t.O_.shift(),i=Yy.from(r,e,n);yield jA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Vs(t)})}function Hj(t,e){return N(this,null,function*(){e&&ni(t).V_&&(yield function(r,i){return N(this,null,function*(){if(function(s){return aA(s)&&s!==x.ABORTED}(i.code)){let o=r.O_.shift();ni(r).s_(),yield jA(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Vs(r)}})}(t,e)),UA(t)&&BA(t)})}function fS(t,e){return N(this,null,function*(){let n=$(t);n.asyncQueue.verifyOperationInProgress(),O("RemoteStore","RemoteStore received new credentials");let r=oi(n);n.L_.add(3),yield Ls(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield Wu(n)})}function Hv(t,e){return N(this,null,function*(){let n=$(t);e?(n.L_.delete(2),yield Wu(n)):e||(n.L_.add(2),yield Ls(n),n.q_.set("Unknown"))})}function js(t){return t.K_||(t.K_=function(n,r,i){let o=$(n);return o.w_(),new Uv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:Fj.bind(null,t),Ro:Lj.bind(null,t),mo:Vj.bind(null,t),d_:jj.bind(null,t)}),t.B_.push(e=>N(this,null,function*(){e?(t.K_.s_(),Vw(t)?Lw(t):t.q_.set("Unknown")):(yield t.K_.stop(),VA(t))}))),t.K_}function ni(t){return t.U_||(t.U_=function(n,r,i){let o=$(n);return o.w_(),new Bv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:$j.bind(null,t),mo:Hj.bind(null,t),f_:qj.bind(null,t),g_:zj.bind(null,t)}),t.B_.push(e=>N(this,null,function*(){e?(t.U_.s_(),yield Vs(t)):(yield t.U_.stop(),t.O_.length>0&&(O("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var Gv=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Qe,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new k(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Us(t,e){if(Ue("AsyncQueue",`${e}: ${t}`),ii(t))return new k(x.UNAVAILABLE,`${e}: ${t}`);throw t}var Ah=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=hu(),this.sortedSet=new xe(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Rh=class{constructor(){this.W_=new xe(q.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):G():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},xs=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Ah.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Wv=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Kv=class{constructor(){this.queries=pS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=$(n),o=i.queries;i.queries=pS(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new k(x.ABORTED,"Firestore shutting down"))}};function pS(){return new Nn(t=>WS(t),zu)}function jw(t,e){return N(this,null,function*(){let n=$(t),r=3,i=e.query,o=n.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new Wv,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield n.onListen(i,!0);break;case 1:o.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=Us(s,`Initialization of query '${ls(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&Bw(n)})}function Uw(t,e){return N(this,null,function*(){let n=$(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function Gj(t,e){let n=$(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&Bw(n)}function Wj(t,e,n){let r=$(t),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(n);r.queries.delete(e)}function Bw(t){t.Y_.forEach(e=>{e.next()})}var Qv,gS;(gS=Qv||(Qv={})).ea="default",gS.Cache="cache";var Fu=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new xs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=xs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Qv.Cache}};var Yv=class{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}};var xh=class{constructor(e){this.serializer=e}Es(e){return An(this.serializer,e)}ds(e){return e.metadata.exists?gA(this.serializer,e.document,!1):Ye.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return $e(e)}},Zv=class{constructor(e,n,r){this.ca=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=$A(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;let r=ge.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){let n=new Map,r=new xh(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(n.get(s)||oe()).add(o);n.set(s,a)}}return n}complete(){return N(this,null,function*(){let e=yield Pj(this.localStore,new xh(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(let r of this.queries)yield kj(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function $A(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var Mh=class{constructor(e){this.key=e}},Nh=class{constructor(e){this.key=e}},Ph=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=oe(),this.mutatedKeys=oe(),this.Aa=QS(e),this.Ra=new Ah(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new Rh,i=n?n.Ra:this.Ra,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),y=Hu(this.query,f)?f:null,_=!!g&&this.mutatedKeys.has(g.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),C=!1;g&&y?g.data.isEqual(y.data)?_!==A&&(r.track({type:3,doc:y}),C=!0):this.ga(g,y)||(r.track({type:2,doc:y}),C=!0,(u&&this.Aa(y,u)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),C=!0):g&&!y&&(r.track({type:1,doc:g}),C=!0,(u||l)&&(a=!0)),C&&(y?(s=s.add(y),o=A?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((d,f)=>function(y,_){let A=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G()}};return A(y)-A(_)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;let a=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new xs(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Rh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=oe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Nh(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Mh(r))}),n}ba(e){this.Ta=e.Ts,this.da=oe();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return xs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Jv=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Xv=class{constructor(e){this.key=e,this.va=!1}},ew=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Nn(a=>WS(a),zu),this.Ma=new Map,this.xa=new Set,this.Oa=new xe(q.comparator),this.Na=new Map,this.La=new Pu,this.Ba={},this.ka=new Map,this.qa=Cs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function Kj(t,e,n=!0){return N(this,null,function*(){let r=Wh(t),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield qA(r,e,n,!0),i})}function Qj(t,e){return N(this,null,function*(){let n=Wh(t);yield qA(n,e,!0,!1)})}function qA(t,e,n,r){return N(this,null,function*(){let i=yield Ss(t.localStore,Rt(e)),o=i.targetId,s=n?t.sharedClientState.addLocalQueryTarget(o):"not-current",a;return r&&(a=yield $w(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&Gh(t.remoteStore,i),a})}function $w(t,e,n,r,i){return N(this,null,function*(){t.Ka=(f,g,y)=>function(A,C,P,j){return N(this,null,function*(){let F=C.view.ma(P);F.ns&&(F=yield Eh(A.localStore,C.query,!1).then(({documents:E})=>C.view.ma(E,F)));let B=j&&j.targetChanges.get(C.targetId),Z=j&&j.targetMismatches.get(C.targetId)!=null,K=C.view.applyChanges(F,A.isPrimaryClient,B,Z);return tw(A,C.targetId,K.wa),K.snapshot})}(t,f,g,y);let o=yield Eh(t.localStore,e,!0),s=new Ph(e,o.Ts),a=s.ma(o.documents),u=Ru.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);tw(t,n,l.wa);let d=new Jv(e,n,s);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function Yj(t,e,n){return N(this,null,function*(){let r=$(t),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!zu(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield As(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Rs(r.remoteStore,i.targetId),Ms(r,i.targetId)}).catch(ri))):(Ms(r,i.targetId),yield As(r.localStore,i.targetId,!0))})}function Zj(t,e){return N(this,null,function*(){let n=$(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Rs(n.remoteStore,r.targetId))})}function Jj(t,e,n){return N(this,null,function*(){let r=Gw(t);try{let i=yield function(s,a){let u=$(s),l=Oe.now(),d=a.reduce((y,_)=>y.add(_.key),oe()),f,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let _=Ot(),A=oe();return u.cs.getEntries(y,d).next(C=>{_=C,_.forEach((P,j)=>{j.isValidDocument()||(A=A.add(P))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,_)).next(C=>{f=C;let P=[];for(let j of a){let F=hj(j,f.get(j.key).overlayedDocument);F!=null&&P.push(new fn(j.key,F,US(F.value.mapValue),Ve.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,P,a)}).next(C=>{g=C;let P=C.applyToLocalDocumentSet(f,A);return u.documentOverlayCache.saveOverlays(y,C.batchId,P)})}).then(()=>({batchId:g.batchId,changes:ZS(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new xe(ie)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,n),yield lr(r,i.changes),yield Vs(r.remoteStore)}catch(i){let o=Us(i,"Failed to persist write");n.reject(o)}})}function zA(t,e){return N(this,null,function*(){let n=$(t);try{let r=yield Mj(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Na.get(o);s&&(Q(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Q(s.va):i.removedDocuments.size>0&&(Q(s.va),s.va=!1))}),yield lr(n,r,e)}catch(r){yield ri(r)}})}function mS(t,e,n){let r=$(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=$(s);u.onlineState=a;let l=!1;u.queries.forEach((d,f)=>{for(let g of f.j_)g.Z_(a)&&(l=!0)}),l&&Bw(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Xj(t,e,n){return N(this,null,function*(){let r=$(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new xe(q.comparator);s=s.insert(o,Ye.newNoDocument(o,X.min()));let a=oe().add(o),u=new Au(X.min(),new Map,new xe(ie),s,a);yield zA(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),Hw(r)}else yield As(r.localStore,e,!1).then(()=>Ms(r,e,n)).catch(ri)})}function e2(t,e){return N(this,null,function*(){let n=$(t),r=e.batch.batchId;try{let i=yield xj(n.localStore,e);zw(n,r,null),qw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield lr(n,i)}catch(i){yield ri(i)}})}function t2(t,e,n){return N(this,null,function*(){let r=$(t);try{let i=yield function(s,a){let u=$(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(Q(f!==null),d=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>u.localDocuments.getDocuments(l,d))})}(r.localStore,e);zw(r,e,n),qw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield lr(r,i)}catch(i){yield ri(i)}})}function n2(t,e){return N(this,null,function*(){let n=$(t);oi(n.remoteStore)||O("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=$(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(r===-1)return void e.resolve();let i=n.ka.get(r)||[];i.push(e),n.ka.set(r,i)}catch(r){let i=Us(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function qw(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function zw(t,e,n){let r=$(t),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Ms(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||HA(t,r)})}function HA(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(Rs(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Hw(t))}function tw(t,e,n){for(let r of n)r instanceof Mh?(t.La.addReference(r.key,e),r2(t,r)):r instanceof Nh?(O("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||HA(t,r.key)):G()}function r2(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(O("SyncEngine","New document in limbo: "+n),t.xa.add(r),Hw(t))}function Hw(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new q(ge.fromString(e)),r=t.qa.next();t.Na.set(r,new Xv(n)),t.Oa=t.Oa.insert(n,r),Gh(t.remoteStore,new bs(Rt(Fs(n.path)),r,"TargetPurposeLimboResolution",jt.oe))}}function lr(t,e,n){return N(this,null,function*(){let r=$(t),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,n).then(l=>{var d;if((l||n)&&r.isPrimaryClient){let f=l?!l.fromCache:(d=n?.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);let f=Pv.Wi(u.targetId,l);o.push(f)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return N(this,null,function*(){let d=$(u);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>R.forEach(l,g=>R.forEach(g.$i,y=>d.persistence.referenceDelegate.addReference(f,g.targetId,y)).next(()=>R.forEach(g.Ui,y=>d.persistence.referenceDelegate.removeReference(f,g.targetId,y)))))}catch(f){if(!ii(f))throw f;O("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let y=d.os.get(g),_=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(_);d.os=d.os.insert(g,A)}}})}(r.localStore,o))})}function i2(t,e){return N(this,null,function*(){let n=$(t);if(!n.currentUser.isEqual(e)){O("SyncEngine","User change. New user:",e.toKey());let r=yield xA(n.localStore,e);n.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new k(x.CANCELLED,s))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield lr(n,r.hs)}})}function o2(t,e){let n=$(t),r=n.Na.get(e);if(r&&r.va)return oe().add(r.key);{let i=oe(),o=n.Ma.get(e);if(!o)return i;for(let s of o){let a=n.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function s2(t,e){return N(this,null,function*(){let n=$(t),r=yield Eh(n.localStore,e.query,!0),i=e.view.ba(r);return n.isPrimaryClient&&tw(n,e.targetId,i.wa),i})}function a2(t,e){return N(this,null,function*(){let n=$(t);return kA(n.localStore,e).then(r=>lr(n,r))})}function u2(t,e,n,r){return N(this,null,function*(){let i=$(t),o=yield function(a,u){let l=$(a),d=$(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.Mn(f,u).next(g=>g?l.localDocuments.getDocuments(f,g):R.resolve(null)))}(i.localStore,e);o!==null?(n==="pending"?yield Vs(i.remoteStore):n==="acknowledged"||n==="rejected"?(zw(i,e,r||null),qw(i,e),function(a,u){$($(a).mutationQueue).On(u)}(i.localStore,e)):G(),yield lr(i,o)):O("SyncEngine","Cannot apply mutation batch with id: "+e)})}function c2(t,e){return N(this,null,function*(){let n=$(t);if(Wh(n),Gw(n),e===!0&&n.Qa!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield yS(n,r.toArray());n.Qa=!0,yield Hv(n.remoteStore,!0);for(let o of i)Gh(n.remoteStore,o)}else if(e===!1&&n.Qa!==!1){let r=[],i=Promise.resolve();n.Ma.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Ms(n,s),As(n.localStore,s,!0))),Rs(n.remoteStore,s)}),yield i,yield yS(n,r),function(s){let a=$(s);a.Na.forEach((u,l)=>{Rs(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new xe(q.comparator)}(n),n.Qa=!1,yield Hv(n.remoteStore,!1)}})}function yS(t,e,n){return N(this,null,function*(){let r=$(t),i=[],o=[];for(let s of e){let a,u=r.Ma.get(s);if(u&&u.length!==0){a=yield Ss(r.localStore,Rt(u[0]));for(let l of u){let d=r.Fa.get(l),f=yield s2(r,d);f.snapshot&&o.push(f.snapshot)}}else{let l=yield PA(r.localStore,s);a=yield Ss(r.localStore,l),yield $w(r,GA(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function GA(t){return GS(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function l2(t){return function(n){return $($(n).persistence).Qi()}($(t).localStore)}function d2(t,e,n,r){return N(this,null,function*(){let i=$(t);if(i.Qa)return void O("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield kA(i.localStore,KS(o[0])),a=Au.createSynthesizedRemoteEventForCurrentChange(e,n==="current",qe.EMPTY_BYTE_STRING);yield lr(i,s,a);break}case"rejected":yield As(i.localStore,e,!0),Ms(i,e,r);break;default:G()}})}function h2(t,e,n){return N(this,null,function*(){let r=Wh(t);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){O("SyncEngine","Adding an already active target "+i);continue}let o=yield PA(r.localStore,i),s=yield Ss(r.localStore,o);yield $w(r,GA(o),s.targetId,!1,s.resumeToken),Gh(r.remoteStore,s)}for(let i of n)r.Ma.has(i)&&(yield As(r.localStore,i,!1).then(()=>{Rs(r.remoteStore,i),Ms(r,i)}).catch(ri))}})}function Wh(t){let e=$(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=zA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=o2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Xj.bind(null,e),e.Ca.d_=Gj.bind(null,e.eventManager),e.Ca.$a=Wj.bind(null,e.eventManager),e}function Gw(t){let e=$(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=e2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=t2.bind(null,e),e}function f2(t,e,n){let r=$(t);(function(o,s,a){return N(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(y,_){let A=$(y),C=$e(_.createTime);return A.persistence.runTransaction("hasNewerBundle","readonly",P=>A.Gr.getBundleMetadata(P,_.id)).then(P=>!!P&&P.createTime.compareTo(C)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress($A(u));let l=new Zv(u,o.localStore,s.serializer),d=yield s.Ua();for(;d;){let g=yield l.la(d);g&&a._updateProgress(g),d=yield s.Ua()}let f=yield l.complete();return yield lr(o,f.Ia,void 0),yield function(y,_){let A=$(y);return A.persistence.runTransaction("Save bundle","readwrite",C=>A.Gr.saveBundleMetadata(C,_))}(o.localStore,u),a._completeWith(f.progress),Promise.resolve(f.Pa)}catch(u){return Xt("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Lu=class{constructor(){this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){this.serializer=Gu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return RA(this.persistence,new Ih,e.initialUser,this.serializer)}createPersistence(e){return new vh(wh.Zr,this.serializer)}createSharedClientState(e){return new Th}terminate(){return N(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var kh=class t extends Lu{constructor(e,n,r){super(),this.Wa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){yield Jf(t.prototype,this,"initialize").call(this,e),yield this.Wa.initialize(this,e),yield Gw(this.Wa.syncEngine),yield Vs(this.Wa.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return RA(this.persistence,new Ih,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new yv(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new ky(n,this.persistence);return new Py(e.asyncQueue,r)}createPersistence(e){let n=Ow(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new Nv(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,FA(),Gd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Th}},nw=class t extends kh{constructor(e,n){super(e,n,!1),this.Wa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return N(this,null,function*(){yield Jf(t.prototype,this,"initialize").call(this,e);let n=this.Wa.syncEngine;this.sharedClientState instanceof vu&&(this.sharedClientState.syncEngine={no:u2.bind(null,n),ro:d2.bind(null,n),io:h2.bind(null,n),Qi:l2.bind(null,n),eo:a2.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>N(this,null,function*(){yield c2(this.Wa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=FA();if(!vu.D(n))throw new k(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=Ow(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new vu(n,e.asyncQueue,r,e.clientId,e.initialUser)}},Vu=class{initialize(e,n){return N(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>mS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=i2.bind(null,this.syncEngine),yield Hv(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Kv}()}createDatastore(e){let n=Gu(e.databaseInfo.databaseId),r=function(o){return new jv(o)}(e.databaseInfo);return function(o,s,a,u){return new $v(o,s,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new zv(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>mS(this.syncEngine,n,0),function(){return bh.D()?new bh:new Lv}())}createSyncEngine(e,n){return function(i,o,s,a,u,l,d){let f=new ew(i,o,s,a,u,l);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return N(this,null,function*(){var e,n;yield function(i){return N(this,null,function*(){let o=$(i);O("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Ls(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()})}};function vS(t,e=10240){let n=0;return{read(){return N(this,null,function*(){if(n<t.byteLength){let i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Ns=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):Ue("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var rw=class{constructor(e,n){this.ja=e,this.serializer=n,this.metadata=new Qe,this.buffer=new Uint8Array,this.Ha=function(){return new TextDecoder("utf-8")}(),this.Ja().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.ja.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}Ua(){return N(this,null,function*(){return yield this.getMetadata(),this.Ja()})}Ja(){return N(this,null,function*(){let e=yield this.Ya();if(e===null)return null;let n=this.Ha.decode(e),r=Number(n);isNaN(r)&&this.Za(`length string (${n}) is not valid number`);let i=yield this.Xa(r);return new Yv(JSON.parse(i),e.length+r)})}eu(){return this.buffer.findIndex(e=>e===123)}Ya(){return N(this,null,function*(){for(;this.eu()<0&&!(yield this.tu()););if(this.buffer.length===0)return null;let e=this.eu();e<0&&this.Za("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Xa(e){return N(this,null,function*(){for(;this.buffer.length<e;)(yield this.tu())&&this.Za("Reached the end of bundle when more is expected.");let n=this.Ha.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}Za(e){throw this.ja.cancel(),new Error(`Invalid bundle format: ${e}`)}tu(){return N(this,null,function*(){let e=yield this.ja.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var iw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new k(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(i,o){return N(this,null,function*(){let s=$(i),a={documents:o.map(f=>xu(s.serializer,f))},u=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,ge.emptyPath(),a,o.length),l=new Map;u.forEach(f=>{let g=vj(s.serializer,f);l.set(g.key.toString(),g)});let d=[];return o.forEach(f=>{let g=l.get(f.toString());Q(!!g),d.push(g)}),d})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ti(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=q.fromPath(r);this.mutations.push(new bu(i,this.precondition(i)))}),yield function(r,i){return N(this,null,function*(){let o=$(r),s={writes:i.map(a=>Mu(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,ge.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw G();n=X.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new k(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(X.min())?Ve.exists(!1):Ve.updateTime(n):Ve.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(X.min()))throw new k(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ve.updateTime(n)}return Ve.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var ow=class{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.nu=r.maxAttempts,this.t_=new Ou(this.asyncQueue,"transaction_retry")}ru(){this.nu-=1,this.iu()}iu(){this.t_.Go(()=>N(this,null,function*(){let e=new iw(this.datastore),n=this.su(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.ou(i)}))}).catch(r=>{this.ou(r)})}))}su(e){try{let n=this.updateFunction(e);return!$u(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ou(e){this.nu>0&&this._u(e)?(this.nu-=1,this.asyncQueue.enqueueAndForget(()=>(this.iu(),Promise.resolve()))):this.deferred.reject(e)}_u(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!aA(n)}return!1}};var sw=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ke.UNAUTHENTICATED,this.clientId=Qd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>N(this,null,function*(){O("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(O("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new k(x.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Qe;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Us(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Wd(t,e){return N(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),O("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>N(this,null,function*(){r.isEqual(i)||(yield xA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function aw(t,e){return N(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield Ww(t);O("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>fS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>fS(e.remoteStore,i)),t._onlineComponents=e})}function WA(t){return t.name==="FirebaseError"?t.code===x.FAILED_PRECONDITION||t.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function Ww(t){return N(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){O("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Wd(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!WA(n))throw n;Xt("Error using user provided cache. Falling back to memory cache: "+n),yield Wd(t,new Lu)}}else O("FirestoreClient","Using default OfflineComponentProvider"),yield Wd(t,new Lu);return t._offlineComponents})}function Kh(t){return N(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(O("FirestoreClient","Using user provided OnlineComponentProvider"),yield aw(t,t._uninitializedComponentsProvider._online)):(O("FirestoreClient","Using default OnlineComponentProvider"),yield aw(t,new Vu))),t._onlineComponents})}function KA(t){return Ww(t).then(e=>e.persistence)}function Kw(t){return Ww(t).then(e=>e.localStore)}function QA(t){return Kh(t).then(e=>e.remoteStore)}function Qw(t){return Kh(t).then(e=>e.syncEngine)}function p2(t){return Kh(t).then(e=>e.datastore)}function Ps(t){return N(this,null,function*(){let e=yield Kh(t),n=e.eventManager;return n.onListen=Kj.bind(null,e.syncEngine),n.onUnlisten=Yj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Qj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Zj.bind(null,e.syncEngine),n})}function g2(t){return t.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield KA(t),n=yield QA(t);return e.setNetworkEnabled(!0),function(i){let o=$(i);return o.L_.delete(0),Wu(o)}(n)}))}function m2(t){return t.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield KA(t),n=yield QA(t);return e.setNetworkEnabled(!1),function(i){return N(this,null,function*(){let o=$(i);o.L_.add(0),yield Ls(o),o.q_.set("Offline")})}(n)}))}function y2(t,e){let n=new Qe;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield function(l,d){let f=$(l);return f.persistence.runTransaction("read document","readonly",g=>f.localDocuments.getDocument(g,d))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new k(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=Us(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield Kw(t),e,n)})),n.promise}function YA(t,e,n={}){let r=new Qe;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let d=new Ns({next:g=>{s.enqueueAndForget(()=>Uw(o,f));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new k(x.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?l.reject(new k(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new Fu(Fs(a.path),d,{includeMetadataChanges:!0,_a:!0});return jw(o,f)}(yield Ps(t),t.asyncQueue,e,n,r)})),r.promise}function v2(t,e){let n=new Qe;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield Eh(i,o,!0),u=new Ph(o,a.Ts),l=u.ma(a.documents),d=u.applyChanges(l,!1);s.resolve(d.snapshot)}catch(a){let u=Us(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield Kw(t),e,n)})),n.promise}function ZA(t,e,n={}){let r=new Qe;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let d=new Ns({next:g=>{s.enqueueAndForget(()=>Uw(o,f)),g.fromCache&&u.source==="server"?l.reject(new k(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new Fu(a,d,{includeMetadataChanges:!0,_a:!0});return jw(o,f)}(yield Ps(t),t.asyncQueue,e,n,r)})),r.promise}function w2(t,e){let n=new Ns(e);return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){$(i).Y_.add(o),o.next()}(yield Ps(t),n)})),()=>{n.za(),t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){$(i).Y_.delete(o)}(yield Ps(t),n)}))}}function I2(t,e,n,r){let i=function(s,a){let u;return u=typeof s=="string"?cA().encode(s):s,function(d,f){return new rw(d,f)}(function(d,f){if(d instanceof Uint8Array)return vS(d,f);if(d instanceof ArrayBuffer)return vS(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(n,Gu(e));t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){f2(yield Qw(t),i,r)}))}function E2(t,e){return t.asyncQueue.enqueue(()=>N(this,null,function*(){return function(r,i){let o=$(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield Kw(t),e)}))}function JA(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var wS=new Map;function Yw(t,e,n){if(!n)throw new k(x.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Zw(t,e,n,r){if(e===!0&&r===!0)throw new k(x.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function IS(t){if(!q.isDocumentKey(t))throw new k(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ES(t){if(q.isDocumentKey(t))throw new k(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Qh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":G()}function me(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new k(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Qh(t);throw new k(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function XA(t,e){if(e<=0)throw new k(x.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var Oh=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new k(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new k(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Zw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new k(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new k(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new k(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ji=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Oh({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new k(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new k(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Oh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Dy;switch(r.type){case"firstParty":return new Sy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new k(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=wS.get(n);r&&(O("ComponentProvider","Removing Datastore"),wS.delete(n),r.terminate())}(this),Promise.resolve()}};function Jw(t,e,n,r={}){var i;let o=(t=me(t,Ji))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Xt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Ke.MOCK_USER;else{a=c_(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new k(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ke(l)}t._authCredentials=new Ty(new Kd(a,u))}}var at=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Se=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Rn=class t extends at{constructor(e,n,r){super(e,n,Fs(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Se(this.firestore,null,new q(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function Xw(t,e,...n){if(t=ke(t),Yw("collection","path",e),t instanceof Ji){let r=ge.fromString(e,...n);return ES(r),new Rn(t,null,r)}{if(!(t instanceof Se||t instanceof Rn))throw new k(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ge.fromString(e,...n));return ES(r),new Rn(t.firestore,null,r)}}function eR(t,e){if(t=me(t,Ji),Yw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new k(x.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new at(t,null,function(r){return new hn(ge.emptyPath(),r)}(e))}function Ku(t,e,...n){if(t=ke(t),arguments.length===1&&(e=Qd.newId()),Yw("doc","path",e),t instanceof Ji){let r=ge.fromString(e,...n);return IS(r),new Se(t,null,new q(r))}{if(!(t instanceof Se||t instanceof Rn))throw new k(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ge.fromString(e,...n));return IS(r),new Se(t.firestore,t instanceof Rn?t.converter:null,new q(r))}}function eI(t,e){return t=ke(t),e=ke(e),(t instanceof Se||t instanceof Rn)&&(e instanceof Se||e instanceof Rn)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function tI(t,e){return t=ke(t),e=ke(e),t instanceof at&&e instanceof at&&t.firestore===e.firestore&&zu(t._query,e._query)&&t.converter===e.converter}var uw=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new Ou(this,"async_queue_retry"),this.Eu=()=>{let n=Gd();n&&O("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};let e=Gd();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let n=Gd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let n=new Qe;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return N(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!ii(e))throw e;O("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Ue("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);let i=Gv.createAndSchedule(this,e,n,r,o=>this.Vu(o));return this.lu.push(i),i}du(){this.hu&&G()}verifyOperationInProgress(){}mu(){return N(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let n=this.lu.indexOf(e);this.lu.splice(n,1)}};function cw(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var lw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Qe,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var tR=-1,Pe=class extends Ji{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new uw}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||nR(this),this._firestoreClient.terminate()}};function K6(t,e){let n=typeof t=="object"?t:Ta(),r=typeof t=="string"?t:e||"(default)",i=np(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=u_("firestore");o&&Jw(i,...o)}return i}function tt(t){return t._firestoreClient||nR(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function nR(t){var e,n,r;let i=t._freezeSettings(),o=function(a,u,l,d){return new Oy(a,u,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,JA(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new sw(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function rR(t,e){hR(t=me(t,Pe));let n=tt(t);if(n._uninitializedComponentsProvider)throw new k(x.FAILED_PRECONDITION,"SDK cache is already specified.");Xt("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new Vu;return oR(n,i,new kh(i,r.cacheSizeBytes,e?.forceOwnership))}function iR(t){hR(t=me(t,Pe));let e=tt(t);if(e._uninitializedComponentsProvider)throw new k(x.FAILED_PRECONDITION,"SDK cache is already specified.");Xt("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new Vu;return oR(e,r,new nw(r,n.cacheSizeBytes))}function oR(t,e,n){let r=new Qe;return t.asyncQueue.enqueue(()=>N(this,null,function*(){try{yield Wd(t,n),yield aw(t,e),r.resolve()}catch(i){let o=i;if(!WA(o))throw o;Xt("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function sR(t){if(t._initialized&&!t._terminated)throw new k(x.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Qe;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield function(r){return N(this,null,function*(){if(!Kr.D())return Promise.resolve();let i=r+"main";yield Kr.delete(i)})}(Ow(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function aR(t){return function(n){let r=new Qe;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return n2(yield Qw(n),r)})),r.promise}(tt(t=me(t,Pe)))}function uR(t){return g2(tt(t=me(t,Pe)))}function cR(t){return m2(tt(t=me(t,Pe)))}function lR(t,e){let n=tt(t=me(t,Pe)),r=new lw;return I2(n,t._databaseId,e,r),r}function dR(t,e){return E2(tt(t=me(t,Pe)),e).then(n=>n?new at(t,null,n.query):null)}function hR(t){if(t._initialized||t._terminated)throw new k(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Pn=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(qe.fromBase64String(e))}catch(n){throw new k(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var pn=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new k(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Be(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ur=class{constructor(e){this._methodName=e}};var Xi=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new k(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new k(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}};var ju=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var _2=/^__.*__$/,dw=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new fn(e,this.data,this.fieldMask,n,this.fieldTransforms):new ei(e,this.data,n,this.fieldTransforms)}},Fh=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new fn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function fR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G()}}var Lh=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.yu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Vh(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(fR(this.wu)&&_2.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},hw=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Gu(e)}Nu(e,n,r,i=!1){return new Lh({wu:e,methodName:n,Ou:r,path:Be.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ro(t){let e=t._freezeSettings(),n=Gu(t._databaseId);return new hw(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Yh(t,e,n,r,i,o={}){let s=t.Nu(o.merge||o.mergeFields?2:0,e,n,i);iI("Data must be an object, but it was:",s,r);let a=mR(r,s),u,l;if(o.merge)u=new Ut(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let g=yw(e,f,n);if(!s.contains(g))throw new k(x.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);vR(d,g)||d.push(g)}u=new Ut(d),l=s.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=s.fieldTransforms;return new dw(new gt(a),u,l)}var Uu=class t extends ur{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function pR(t,e,n){return new Lh({wu:3,Ou:e.settings.Ou,methodName:t._methodName,Du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var fw=class t extends ur{_toFieldTransform(e){return new Qi(e.path,new Jr)}isEqual(e){return e instanceof t}},pw=class t extends ur{constructor(e,n){super(e),this.Lu=n}_toFieldTransform(e){let n=pR(this,e,!0),r=this.Lu.map(o=>io(o,n)),i=new sr(r);return new Qi(e.path,i)}isEqual(e){return e instanceof t&&tp(this.Lu,e.Lu)}},gw=class t extends ur{constructor(e,n){super(e),this.Lu=n}_toFieldTransform(e){let n=pR(this,e,!0),r=this.Lu.map(o=>io(o,n)),i=new ar(r);return new Qi(e.path,i)}isEqual(e){return e instanceof t&&tp(this.Lu,e.Lu)}},mw=class t extends ur{constructor(e,n){super(e),this.Bu=n}_toFieldTransform(e){let n=new Xr(e.serializer,eA(e.serializer,this.Bu));return new Qi(e.path,n)}isEqual(e){return e instanceof t&&this.Bu===e.Bu}};function nI(t,e,n,r){let i=t.Nu(1,e,n);iI("Data must be an object, but it was:",i,r);let o=[],s=gt.empty();no(r,(u,l)=>{let d=oI(e,u,n);l=ke(l);let f=i.Cu(d);if(l instanceof Uu)o.push(d);else{let g=io(l,f);g!=null&&(o.push(d),s.set(d,g))}});let a=new Ut(o);return new Fh(s,a,i.fieldTransforms)}function rI(t,e,n,r,i,o){let s=t.Nu(1,e,n),a=[yw(e,r,n)],u=[i];if(o.length%2!=0)throw new k(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(yw(e,o[g])),u.push(o[g+1]);let l=[],d=gt.empty();for(let g=a.length-1;g>=0;--g)if(!vR(l,a[g])){let y=a[g],_=u[g];_=ke(_);let A=s.Cu(y);if(_ instanceof Uu)l.push(y);else{let C=io(_,A);C!=null&&(l.push(y),d.set(y,C))}}let f=new Ut(l);return new Fh(d,f,s.fieldTransforms)}function gR(t,e,n,r=!1){return io(n,t.Nu(r?4:3,e))}function io(t,e){if(yR(t=ke(t)))return iI("Unsupported field value:",e,t),mR(t,e);if(t instanceof ur)return function(r,i){if(!fR(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=io(a,i.Fu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return eA(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Oe.fromDate(r);return{timestampValue:Ts(i.serializer,o)}}if(r instanceof Oe){let o=new Oe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ts(i.serializer,o)}}if(r instanceof Xi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pn)return{bytesValue:lA(i.serializer,r._byteString)};if(r instanceof Se){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Mu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Nw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ju)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Mu("VectorValues must only contain numeric values.");return Mw(a.serializer,u)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${Qh(r)}`)}(t,e)}function mR(t,e){let n={};return FS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):no(t,(r,i)=>{let o=io(i,e.bu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function yR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Oe||t instanceof Xi||t instanceof Pn||t instanceof Se||t instanceof ur||t instanceof ju)}function iI(t,e,n){if(!yR(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Qh(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function yw(t,e,n){if((e=ke(e))instanceof pn)return e._internalPath;if(typeof e=="string")return oI(t,e);throw Vh("Field path arguments must be of type string or ",t,!1,void 0,n)}var D2=new RegExp("[~\\*/\\[\\]]");function oI(t,e,n){if(e.search(D2)>=0)throw Vh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new pn(...e.split("."))._internalPath}catch{throw Vh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Vh(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new k(x.INVALID_ARGUMENT,a+t+u)}function vR(t,e){return t.some(n=>n.isEqual(e))}var eo=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Se(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new vw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Zh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},vw=class extends eo{data(){return super.data()}};function Zh(t,e){return typeof e=="string"?oI(t,e):e instanceof pn?e._internalPath:e._delegate._internalPath}function wR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new k(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Bu=class{},to=class extends Bu{};function dr(t,e,...n){let r=[];e instanceof Bu&&r.push(e),r=r.concat(n),function(o){let s=o.filter(u=>u instanceof ww).length,a=o.filter(u=>u instanceof jh).length;if(s>1||s>0&&a>0)throw new k(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var jh=class t extends to{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return RR(e._query,n),new at(e.firestore,e.converter,Ky(e._query,n))}_parse(e){let n=ro(e.firestore);return function(o,s,a,u,l,d,f){let g;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new k(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){DS(f,d);let y=[];for(let _ of f)y.push(_S(u,o,_));g={arrayValue:{values:y}}}else g=_S(u,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||DS(f,d),g=gR(a,s,f,d==="in"||d==="not-in");return fe.create(l,d,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function IR(t,e,n){let r=e,i=Zh("where",t);return jh._create(i,r,n)}var ww=class t extends Bu{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:_e.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)RR(s,u),s=Ky(s,u)}(e._query,n),new at(e.firestore,e.converter,Ky(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Iw=class t extends to{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,o,s){if(i.startAt!==null)throw new k(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new k(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wi(o,s)}(e._query,this._field,this._direction);return new at(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new hn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function ER(t,e="asc"){let n=e,r=Zh("orderBy",t);return Iw._create(r,n)}var Uh=class t extends to{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new at(e.firestore,e.converter,oh(e._query,this._limit,this._limitType))}};function _R(t){return XA("limit",t),Uh._create("limit",t,"F")}function DR(t){return XA("limitToLast",t),Uh._create("limitToLast",t,"L")}var Bh=class t extends to{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=AR(e,this.type,this._docOrFields,this._inclusive);return new at(e.firestore,e.converter,function(i,o){return new hn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,n))}};function TR(...t){return Bh._create("startAt",t,!0)}function bR(...t){return Bh._create("startAfter",t,!1)}var $h=class t extends to{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=AR(e,this.type,this._docOrFields,this._inclusive);return new at(e.firestore,e.converter,function(i,o){return new hn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,n))}};function CR(...t){return $h._create("endBefore",t,!1)}function SR(...t){return $h._create("endAt",t,!0)}function AR(t,e,n,r){if(n[0]=ke(n[0]),n[0]instanceof eo)return function(o,s,a,u,l){if(!u)throw new k(x.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of ms(o))if(f.field.isKeyField())d.push(Gi(s,u.key));else{let g=u.data.field(f.field);if(zh(g))throw new k(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let y=f.field.canonicalString();throw new k(x.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}d.push(g)}return new Mn(d,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=ro(t.firestore);return function(s,a,u,l,d,f){let g=s.explicitOrderBy;if(d.length>g.length)throw new k(x.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let _=0;_<d.length;_++){let A=d[_];if(g[_].field.isKeyField()){if(typeof A!="string")throw new k(x.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof A}`);if(!Rw(s)&&A.indexOf("/")!==-1)throw new k(x.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${A}' contains a slash.`);let C=s.path.child(ge.fromString(A));if(!q.isDocumentKey(C))throw new k(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${C}' is not because it contains an odd number of segments.`);let P=new q(C);y.push(Gi(a,P))}else{let C=gR(u,l,A);y.push(C)}}return new Mn(y,f)}(t._query,t.firestore._databaseId,i,e,n,r)}}function _S(t,e,n){if(typeof(n=ke(n))=="string"){if(n==="")throw new k(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Rw(e)&&n.indexOf("/")!==-1)throw new k(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(ge.fromString(n));if(!q.isDocumentKey(r))throw new k(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Gi(t,new q(r))}if(n instanceof Se)return Gi(t,n._key);throw new k(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qh(n)}.`)}function DS(t,e){if(!Array.isArray(t)||t.length===0)throw new k(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function RR(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new k(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new k(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var ks=class{convertValue(e,n="none"){switch(Hi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ne(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw G()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return no(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ne(s.doubleValue));return new ju(o)}convertGeoPoint(e){return new Xi(Ne(e.latitude),Ne(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Sw(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(_u(e));default:return null}}convertTimestamp(e){let n=or(e);return new Oe(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=ge.fromString(e);Q(EA(r));let i=new Yr(r.get(1),r.get(3)),o=new q(r.popFirst(5));return i.isEqual(n)||Ue(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function Jh(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Ew=class extends ks{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pn(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Se(this.firestore,null,n)}};var ir=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},tn=class extends eo{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Gr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Zh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Gr=class extends tn{data(e={}){return super.data(e)}},gn=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ir(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Gr(this._firestore,this._userDataWriter,r.key,r,new ir(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new k(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Gr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ir(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Gr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ir(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:T2(a.type),doc:u,oldIndex:l,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function T2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G()}}function sI(t,e){return t instanceof tn&&e instanceof tn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof gn&&e instanceof gn&&t._firestore===e._firestore&&tI(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function xR(t){t=me(t,Se);let e=me(t.firestore,Pe);return YA(tt(e),t._key).then(n=>lI(e,t,n))}var cr=class extends ks{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pn(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Se(this.firestore,null,n)}};function MR(t){t=me(t,Se);let e=me(t.firestore,Pe),n=tt(e),r=new cr(e);return y2(n,t._key).then(i=>new tn(e,r,t._key,i,new ir(i!==null&&i.hasLocalMutations,!0),t.converter))}function NR(t){t=me(t,Se);let e=me(t.firestore,Pe);return YA(tt(e),t._key,{source:"server"}).then(n=>lI(e,t,n))}function PR(t){t=me(t,at);let e=me(t.firestore,Pe),n=tt(e),r=new cr(e);return wR(t._query),ZA(n,t._query).then(i=>new gn(e,r,t,i))}function kR(t){t=me(t,at);let e=me(t.firestore,Pe),n=tt(e),r=new cr(e);return v2(n,t._query).then(i=>new gn(e,r,t,i))}function OR(t){t=me(t,at);let e=me(t.firestore,Pe),n=tt(e),r=new cr(e);return ZA(n,t._query,{source:"server"}).then(i=>new gn(e,r,t,i))}function aI(t,e,n){t=me(t,Se);let r=me(t.firestore,Pe),i=Jh(t.converter,e,n);return Bs(r,[Yh(ro(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ve.none())])}function uI(t,e,n,...r){t=me(t,Se);let i=me(t.firestore,Pe),o=ro(i),s;return s=typeof(e=ke(e))=="string"||e instanceof pn?rI(o,"updateDoc",t._key,e,n,r):nI(o,"updateDoc",t._key,e),Bs(i,[s.toMutation(t._key,Ve.exists(!0))])}function FR(t){return Bs(me(t.firestore,Pe),[new ti(t._key,Ve.none())])}function LR(t,e){let n=me(t.firestore,Pe),r=Ku(t),i=Jh(t.converter,e);return Bs(n,[Yh(ro(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ve.exists(!1))]).then(()=>r)}function cI(t,...e){var n,r,i;t=ke(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||cw(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(cw(e[s])){let f=e[s];e[s]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let u,l,d;if(t instanceof Se)l=me(t.firestore,Pe),d=Fs(t._key.path),u={next:f=>{e[s]&&e[s](lI(l,t,f))},error:e[s+1],complete:e[s+2]};else{let f=me(t,at);l=me(f.firestore,Pe),d=f._query;let g=new cr(l);u={next:y=>{e[s]&&e[s](new gn(l,g,f,y))},error:e[s+1],complete:e[s+2]},wR(t._query)}return function(g,y,_,A){let C=new Ns(A),P=new Fu(y,C,_);return g.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return jw(yield Ps(g),P)})),()=>{C.za(),g.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return Uw(yield Ps(g),P)}))}}(tt(l),d,a,u)}function VR(t,e){return w2(tt(t=me(t,Pe)),cw(e)?e:{next:e})}function Bs(t,e){return function(r,i){let o=new Qe;return r.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return Jj(yield Qw(r),i,o)})),o.promise}(tt(t),e)}function lI(t,e,n){let r=n.docs.get(e._key),i=new cr(t);return new tn(t,i,e._key,r,new ir(n.hasPendingWrites,n.fromCache),e.converter)}var b2={maxAttempts:5};var qh=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ro(e)}set(e,n,r){this._verifyNotCommitted();let i=zr(e,this._firestore),o=Jh(i.converter,n,r),s=Yh(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Ve.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let o=zr(e,this._firestore),s;return s=typeof(n=ke(n))=="string"||n instanceof pn?rI(this._dataReader,"WriteBatch.update",o._key,n,r,i):nI(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,Ve.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=zr(e,this._firestore);return this._mutations=this._mutations.concat(new ti(n._key,Ve.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new k(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function zr(t,e){if((t=ke(t)).firestore!==e)throw new k(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var _w=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=ro(n)}get(n){let r=zr(n,this._firestore),i=new Ew(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return G();let s=o[0];if(s.isFoundDocument())return new eo(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new eo(this._firestore,i,r._key,null,r.converter);throw G()})}set(n,r,i){let o=zr(n,this._firestore),s=Jh(o.converter,r,i),a=Yh(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){let s=zr(n,this._firestore),a;return a=typeof(r=ke(r))=="string"||r instanceof pn?rI(this._dataReader,"Transaction.update",s._key,r,i,o):nI(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){let r=zr(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=zr(e,this._firestore),r=new cr(this._firestore);return super.get(e).then(i=>new tn(this._firestore,r,n._key,i._document,new ir(!1,!1),n.converter))}};function jR(t,e,n){t=me(t,Pe);let r=Object.assign(Object.assign({},b2),n);return function(o){if(o.maxAttempts<1)throw new k(x.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new Qe;return o.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let l=yield p2(o);new ow(o.asyncQueue,l,a,s,u).ru()})),u.promise}(tt(t),i=>e(new _w(t,i)),r)}function UR(){return new Uu("deleteField")}function BR(){return new fw("serverTimestamp")}function $R(...t){return new pw("arrayUnion",t)}function qR(...t){return new gw("arrayRemove",t)}function zR(t){return new mw("increment",t)}(function(e,n=!0){(function(i){Os=i})(h_),Da(new hi("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Pe(new by(r.getProvider("auth-internal")),new Ry(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new k(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yr(l.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),qt(_0,"4.7.1",e),qt(_0,"4.7.1","esm2017")})();var C2="@firebase/firestore-compat",S2="0.3.36";function mI(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new k("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function HR(){if(typeof Uint8Array>"u")throw new k("unimplemented","Uint8Arrays are not available in this environment.")}function GR(){if(!LS())throw new k("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Xh=class t{constructor(e){this._delegate=e}static fromBase64String(e){return GR(),new t(Pn.fromBase64String(e))}static fromUint8Array(e){return HR(),new t(Pn.fromUint8Array(e))}toBase64(){return GR(),this._delegate.toBase64()}toUint8Array(){return HR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function dI(t){return A2(t,["next","error","complete"])}function A2(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var hI=class{enableIndexedDbPersistence(e,n){return rR(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return iR(e._delegate)}clearIndexedDbPersistence(e){return sR(e._delegate)}},ef=class{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Yr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Xt("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){Jw(this._delegate,e,n,r)}enableNetwork(){return uR(this._delegate)}disableNetwork(){return cR(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Zw("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return aR(this._delegate)}onSnapshotsInSync(e){return VR(this._delegate,e)}get app(){if(!this._appCompat)throw new k("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new zs(this,Xw(this._delegate,e))}catch(n){throw xt(n,"collection()","Firestore.collection()")}}doc(e){try{return new kn(this,Ku(this._delegate,e))}catch(n){throw xt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new uo(this,eR(this._delegate,e))}catch(n){throw xt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return jR(this._delegate,n=>e(new tf(this,n)))}batch(){return tt(this._delegate),new nf(new qh(this._delegate,e=>Bs(this._delegate,e)))}loadBundle(e){return lR(this._delegate,e)}namedQuery(e){return dR(this._delegate,e).then(n=>n?new uo(this,n):null)}},$s=class extends ks{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xh(new Pn(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return kn.forKey(n,this.firestore,null)}};function R2(t){TS(t)}var tf=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new $s(e)}get(e){let n=oo(e);return this._delegate.get(n).then(r=>new so(this._firestore,new tn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){let i=oo(e);return r?(mI("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=oo(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=oo(e);return this._delegate.delete(n),this}},nf=class{constructor(e){this._delegate=e}set(e,n,r){let i=oo(e);return r?(mI("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=oo(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=oo(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},qs=class t{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){let r=new Gr(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ao(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let r=t.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new t(e,new $s(e),n),i.set(n,o)),o}};qs.INSTANCES=new WeakMap;var kn=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new $s(e)}static forPath(e,n,r){if(e.length%2!==0)throw new k("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new Se(n._delegate,r,new q(e)))}static forKey(e,n,r){return new t(n,new Se(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new zs(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new zs(this.firestore,Xw(this._delegate,e))}catch(n){throw xt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ke(e),e instanceof Se?eI(this._delegate,e):!1}set(e,n){n=mI("DocumentReference.set",n);try{return n?aI(this._delegate,e,n):aI(this._delegate,e)}catch(r){throw xt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?uI(this._delegate,e):uI(this._delegate,e,n,...r)}catch(i){throw xt(i,"updateDoc()","DocumentReference.update()")}}delete(){return FR(this._delegate)}onSnapshot(...e){let n=WR(e),r=KR(e,i=>new so(this.firestore,new tn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return cI(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=MR(this._delegate):e?.source==="server"?n=NR(this._delegate):n=xR(this._delegate),n.then(r=>new so(this.firestore,new tn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(qs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function xt(t,e,n){return t.message=t.message.replace(e,n),t}function WR(t){for(let e of t)if(typeof e=="object"&&!dI(e))return e;return{}}function KR(t,e){var n,r;let i;return dI(t[0])?i=t[0]:dI(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var so=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new kn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return sI(this._delegate,e._delegate)}},ao=class extends so{data(e){let n=this._delegate.data(e);return this._delegate._converter||bS(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},uo=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new $s(e)}where(e,n,r){try{return new t(this.firestore,dr(this._delegate,IR(e,n,r)))}catch(i){throw xt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,dr(this._delegate,ER(e,n)))}catch(r){throw xt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,dr(this._delegate,_R(e)))}catch(n){throw xt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,dr(this._delegate,DR(e)))}catch(n){throw xt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,dr(this._delegate,TR(...e)))}catch(n){throw xt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,dr(this._delegate,bR(...e)))}catch(n){throw xt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,dr(this._delegate,CR(...e)))}catch(n){throw xt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,dr(this._delegate,SR(...e)))}catch(n){throw xt(n,"endAt()","Query.endAt()")}}isEqual(e){return tI(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=kR(this._delegate):e?.source==="server"?n=OR(this._delegate):n=PR(this._delegate),n.then(r=>new Qu(this.firestore,new gn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let n=WR(e),r=KR(e,i=>new Qu(this.firestore,new gn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return cI(this._delegate,n,r)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(qs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},fI=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new ao(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Qu=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new uo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ao(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new fI(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new ao(this._firestore,r))})}isEqual(e){return sI(this._delegate,e._delegate)}},zs=class t extends uo{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new kn(this.firestore,e):null}doc(e){try{return e===void 0?new kn(this.firestore,Ku(this._delegate)):new kn(this.firestore,Ku(this._delegate,e))}catch(n){throw xt(n,"doc()","CollectionReference.doc()")}}add(e){return LR(this._delegate,e).then(n=>new kn(this.firestore,n))}isEqual(e){return eI(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(qs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function oo(t){return me(t,Se)}var pI=class t{constructor(...e){this._delegate=new pn(...e)}static documentId(){return new t(Be.keyField().canonicalString())}isEqual(e){return e=ke(e),e instanceof pn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var gI=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=BR();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=UR();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=$R(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=qR(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=zR(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var x2={Firestore:ef,GeoPoint:Xi,Timestamp:Oe,Blob:Xh,Transaction:tf,WriteBatch:nf,DocumentReference:kn,DocumentSnapshot:so,Query:uo,QueryDocumentSnapshot:ao,QuerySnapshot:Qu,CollectionReference:zs,FieldPath:pI,FieldValue:gI,setLogLevel:R2,CACHE_SIZE_UNLIMITED:tR};function M2(t,e){t.INTERNAL.registerComponent(new hi("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},x2)))}function N2(t){M2(t,(e,n)=>new ef(e,n,new hI)),t.registerVersion(C2,S2)}N2(vt);function P2(t,e=wr){return new re(n=>{let r;return e!=null?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}function QR(t,e){return P2(t,e)}function k2(t,e){return QR(t,e).pipe(yi(void 0),Ma(),ee(n=>{let[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function wI(t,e){return QR(t,e).pipe(ee(n=>({payload:n,type:"query"})))}var rf=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let r=this.ref.collection(e),{ref:i,query:o}=ex(r,n);return new sf(i,o,this.afs)}snapshotChanges(){return k2(this.ref,this.afs.schedulers.outsideAngular).pipe(St)}valueChanges(e={}){return this.snapshotChanges().pipe(ee(({payload:n})=>e.idField?De(H({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return ve(this.ref.get(e)).pipe(St)}};function of(t,e){return wI(t,e).pipe(yi(void 0),Ma(),ee(n=>{let[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let l=o.find(f=>f.doc.ref.isEqual(a.ref)),d=r?.payload.docs.find(f=>f.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function YR(t,e,n){return of(t,n).pipe(mi((r,i)=>O2(r,i.map(o=>o.payload),e),[]),bp(),ee(r=>r.map(i=>({type:i.type,payload:i}))))}function O2(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=F2(t,r))}),t}function yI(t,e,n,...r){let i=t.slice();return i.splice(e,n,...r),i}function F2(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return yI(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return yI(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return yI(t,e.oldIndex,1);break}return t}function ZR(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var sf=class{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=of(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(ee(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(yi(void 0),Ma(),Je(([r,i])=>i.length>0||!r),ee(([,r])=>r),St)}auditTrail(e){return this.stateChanges(e).pipe(mi((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=ZR(e);return YR(this.query,n,this.afs.schedulers.outsideAngular).pipe(St)}valueChanges(e={}){return wI(this.query,this.afs.schedulers.outsideAngular).pipe(ee(n=>n.payload.docs.map(r=>e.idField?De(H({},r.data()),{[e.idField]:r.id}):r.data())),St)}get(e){return ve(this.query.get(e)).pipe(St)}add(e){return this.ref.add(e)}doc(e){return new rf(this.ref.doc(e),this.afs)}},vI=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?of(this.query,this.afs.schedulers.outsideAngular).pipe(St):of(this.query,this.afs.schedulers.outsideAngular).pipe(ee(n=>n.filter(r=>e.indexOf(r.type)>-1)),Je(n=>n.length>0),St)}auditTrail(e){return this.stateChanges(e).pipe(mi((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=ZR(e);return YR(this.query,n,this.afs.schedulers.outsideAngular).pipe(St)}valueChanges(e={}){return wI(this.query,this.afs.schedulers.outsideAngular).pipe(ee(r=>r.payload.docs.map(i=>e.idField?H({[e.idField]:i.id},i.data()):i.data())),St)}get(e){return ve(this.query.get(e)).pipe(St)}},JR=new z("angularfire2.enableFirestorePersistence"),XR=new z("angularfire2.firestore.persistenceSettings"),L2=new z("angularfire2.firestore.settings"),V2=new z("angularfire2.firestore.use-emulator");function ex(t,e=n=>n){return{query:e(t),ref:t}}var II=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,o,s,a,u,l,d,f,g,y,_,A,C,P,j){this.schedulers=u;let F=ou(n,a,r),B=d;f&&dy(F,a,g,_,A,C,y,P),[this.firestore,this.persistenceEnabled$]=Od(`${F.name}.firestore`,"AngularFirestore",F.name,()=>{let Z=a.runOutsideAngular(()=>F.firestore());if(o&&Z.settings(o),B&&Z.useEmulator(...B),i&&!Or(s)){let K=()=>{try{return ve(Z.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(E){return typeof console<"u"&&console.warn(E),Y(!1)}};return[Z,a.runOutsideAngular(K)]}else return[Z,Y(!1)]},[o,B,i])}collection(n,r){let i;typeof n=="string"?i=this.firestore.collection(n):i=n;let{ref:o,query:s}=ex(i,r),a=this.schedulers.ngZone.run(()=>o);return new sf(a,s,this)}collectionGroup(n,r){let i=r||(s=>s),o=this.firestore.collectionGroup(n);return new vI(i(o),this)}doc(n){let r;typeof n=="string"?r=this.firestore.doc(n):r=n;let i=this.schedulers.ngZone.run(()=>r);return new rf(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(L(ns),L(rs,8),L(JR,8),L(L2,8),L(nt),L(he),L(ts),L(XR,8),L(V2,8),L(su,8),L(oy,8),L(sy,8),L(ay,8),L(uy,8),L(cy,8),L(ly,8),L(Fi,8))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),v5=(()=>{class t{constructor(){vt.registerVersion("angularfire",Tn.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:JR,useValue:!0},{provide:XR,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=bt({type:t});static \u0275inj=Tt({providers:[II]})}return t})();var tx=class t{constructor(e,n){this.afAuth=e;this.firestore=n}accessToken=null;registrarUsuario(e,n){return this.afAuth.createUserWithEmailAndPassword(e,n)}getUsuarioActual(){return this.afAuth.authState}loguearUsuario(e,n){return this.afAuth.signInWithEmailAndPassword(e,n)}registrarIngreso(e){let n=new Date().toISOString();return this.firestore.collection("logs").add({email:e,fechaIngreso:n})}guardarUsuario(e,n){return this.firestore.collection("usuarios").add({email:e,avatar:n})}verificarUsuario(e){return this.firestore.collection("usuarios",n=>n.where("email","==",e)).get()}obtenerDatosUsuario(e){return this.firestore.collection("usuarios",n=>n.where("email","==",e)).valueChanges()}logout(){return this.accessToken=null,this.afAuth.signOut()}static \u0275fac=function(n){return new(n||t)(L(su),L(II))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})};var se="primary",lc=Symbol("RouteTitle"),bI=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Ys(t){return new bI(t)}function U2(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function B2(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!On(t[n],e[n]))return!1;return!0}function On(t,e){let n=t?CI(t):void 0,r=e?CI(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!hx(t[i],e[i]))return!1;return!0}function CI(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function hx(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function fx(t){return t.length>0?t[t.length-1]:null}function ai(t){return _p(t)?t:Wa(t)?ve(Promise.resolve(t)):Y(t)}var $2={exact:gx,subset:mx},px={exact:q2,subset:z2,ignored:()=>!0};function nx(t,e,n){return $2[n.paths](t.root,e.root,n.matrixParams)&&px[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function q2(t,e){return On(t,e)}function gx(t,e,n){if(!lo(t.segments,e.segments)||!cf(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!gx(t.children[r],e.children[r],n))return!1;return!0}function z2(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>hx(t[n],e[n]))}function mx(t,e,n){return yx(t,e,e.segments,n)}function yx(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!lo(i,n)||e.hasChildren()||!cf(i,n,r))}else if(t.segments.length===n.length){if(!lo(t.segments,n)||!cf(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!mx(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!lo(t.segments,i)||!cf(t.segments,i,r)||!t.children[se]?!1:yx(t.children[se],e,o,r)}}function cf(t,e,n){return e.every((r,i)=>px[n](t[i].parameters,r.parameters))}var fr=class{constructor(e=new Ee([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ys(this.queryParams),this._queryParamMap}toString(){return W2.serialize(this)}},Ee=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return lf(this)}},co=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Ys(this.parameters),this._parameterMap}toString(){return wx(this)}};function H2(t,e){return lo(t,e)&&t.every((n,r)=>On(n.parameters,e[r].parameters))}function lo(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function G2(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===se&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==se&&(n=n.concat(e(i,r)))}),n}var dc=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>new Zs,providedIn:"root"});let t=e;return t})(),Zs=class{parse(e){let n=new AI(e);return new fr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Yu(e.root,!0)}`,r=Y2(e.queryParams),i=typeof e.fragment=="string"?`#${K2(e.fragment)}`:"";return`${n}${r}${i}`}},W2=new Zs;function lf(t){return t.segments.map(e=>wx(e)).join("/")}function Yu(t,e){if(!t.hasChildren())return lf(t);if(e){let n=t.children[se]?Yu(t.children[se],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==se&&r.push(`${i}:${Yu(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=G2(t,(r,i)=>i===se?[Yu(t.children[se],!1)]:[`${i}:${Yu(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[se]!=null?`${lf(t)}/${n[0]}`:`${lf(t)}/(${n.join("//")})`}}function vx(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function af(t){return vx(t).replace(/%3B/gi,";")}function K2(t){return encodeURI(t)}function SI(t){return vx(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function df(t){return decodeURIComponent(t)}function rx(t){return df(t.replace(/\+/g,"%20"))}function wx(t){return`${SI(t.path)}${Q2(t.parameters)}`}function Q2(t){return Object.entries(t).map(([e,n])=>`;${SI(e)}=${SI(n)}`).join("")}function Y2(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${af(n)}=${af(i)}`).join("&"):`${af(n)}=${af(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var Z2=/^[^\/()?;#]+/;function EI(t){let e=t.match(Z2);return e?e[0]:""}var J2=/^[^\/()?;=#]+/;function X2(t){let e=t.match(J2);return e?e[0]:""}var eU=/^[^=?&#]+/;function tU(t){let e=t.match(eU);return e?e[0]:""}var nU=/^[^&#]+/;function rU(t){let e=t.match(nU);return e?e[0]:""}var AI=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ee([],{}):new Ee([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[se]=new Ee(e,n)),r}parseSegment(){let e=EI(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new J(4009,!1);return this.capture(e),new co(df(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=X2(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=EI(this.remaining);i&&(r=i,this.capture(r))}e[df(n)]=df(r)}parseQueryParam(e){let n=tU(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=rU(this.remaining);s&&(r=s,this.capture(r))}let i=rx(n),o=rx(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=EI(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new J(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=se);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[se]:new Ee([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new J(4011,!1)}};function Ix(t){return t.segments.length>0?new Ee([],{[se]:t}):t}function Ex(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=Ex(i);if(r===se&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new Ee(t.segments,e);return iU(n)}function iU(t){if(t.numberOfChildren===1&&t.children[se]){let e=t.children[se];return new Ee(t.segments.concat(e.segments),e.children)}return t}function nc(t){return t instanceof fr}function oU(t,e,n=null,r=null){let i=_x(t);return Dx(i,e,n,r)}function _x(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new Ee(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=Ix(r);return e??i}function Dx(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return _I(i,i,i,n,r);let o=sU(e);if(o.toRoot())return _I(i,i,new Ee([],{}),n,r);let s=aU(o,i,t),a=s.processChildren?Xu(s.segmentGroup,s.index,o.commands):bx(s.segmentGroup,s.index,o.commands);return _I(i,s.segmentGroup,a,n,r)}function hf(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function rc(t){return typeof t=="object"&&t!=null&&t.outlets}function _I(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let s;t===e?s=n:s=Tx(t,e,n);let a=Ix(Ex(s));return new fr(a,o,i)}function Tx(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=Tx(o,e,n)}),new Ee(t.segments,r)}var ff=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&hf(r[0]))throw new J(4003,!1);let i=r.find(rc);if(i&&i!==fx(r))throw new J(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function sU(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new ff(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new ff(n,e,r)}var Ws=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function aU(t,e,n){if(t.isAbsolute)return new Ws(e,!0,0);if(!n)return new Ws(e,!1,NaN);if(n.parent===null)return new Ws(n,!0,0);let r=hf(t.commands[0])?0:1,i=n.segments.length-1+r;return uU(n,i,t.numberOfDoubleDots)}function uU(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new J(4005,!1);i=r.segments.length}return new Ws(r,!1,i-o)}function cU(t){return rc(t[0])?t[0].outlets:{[se]:t}}function bx(t,e,n){if(t??=new Ee([],{}),t.segments.length===0&&t.hasChildren())return Xu(t,e,n);let r=lU(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new Ee(t.segments.slice(0,r.pathIndex),{});return o.children[se]=new Ee(t.segments.slice(r.pathIndex),t.children),Xu(o,0,i)}else return r.match&&i.length===0?new Ee(t.segments,{}):r.match&&!t.hasChildren()?RI(t,e,n):r.match?Xu(t,0,i):RI(t,e,n)}function Xu(t,e,n){if(n.length===0)return new Ee(t.segments,{});{let r=cU(n),i={};if(Object.keys(r).some(o=>o!==se)&&t.children[se]&&t.numberOfChildren===1&&t.children[se].segments.length===0){let o=Xu(t.children[se],e,n);return new Ee(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=bx(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ee(t.segments,i)}}function lU(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(rc(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!ox(u,l,s))return o;r+=2}else{if(!ox(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function RI(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(rc(o)){let u=dU(o.outlets);return new Ee(r,u)}if(i===0&&hf(n[0])){let u=t.segments[e];r.push(new co(u.path,ix(n[0]))),i++;continue}let s=rc(o)?o.outlets[se]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&hf(a)?(r.push(new co(s,ix(a))),i+=2):(r.push(new co(s,{})),i++)}return new Ee(r,{})}function dU(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=RI(new Ee([],{}),0,r))}),e}function ix(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function ox(t,e,n){return t==n.path&&On(e,n.parameters)}var ec="imperative",rt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(rt||{}),nn=class{constructor(e,n){this.id=e,this.url=n}},Js=class extends nn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=rt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},pr=class extends nn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=rt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},$t=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}($t||{}),pf=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(pf||{}),hr=class extends nn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=rt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},si=class extends nn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=rt.NavigationSkipped}},ic=class extends nn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=rt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},gf=class extends nn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=rt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xI=class extends nn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=rt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},MI=class extends nn{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=rt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},NI=class extends nn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=rt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},PI=class extends nn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=rt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},kI=class{constructor(e){this.route=e,this.type=rt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},OI=class{constructor(e){this.route=e,this.type=rt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},FI=class{constructor(e){this.snapshot=e,this.type=rt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},LI=class{constructor(e){this.snapshot=e,this.type=rt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},VI=class{constructor(e){this.snapshot=e,this.type=rt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jI=class{constructor(e){this.snapshot=e,this.type=rt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},mf=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=rt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},oc=class{},Xs=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function hU(t,e){return t.providers&&!t._injector&&(t._injector=gd(t.providers,e,`Route: ${t.path}`)),t._injector??e}function mn(t){return t.outlet||se}function fU(t,e){let n=t.filter(r=>mn(r)===e);return n.push(...t.filter(r=>mn(r)!==e)),n}function hc(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var UI=class{get injector(){return hc(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new fc(this.rootInjector),this.attachRef=null}},fc=(()=>{let e=class e{constructor(r){this.rootInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new UI(this.rootInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(L(Dt))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),yf=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=BI(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=BI(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=$I(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return $I(e,this._root).map(n=>n.value)}};function BI(t,e){if(t===e.value)return e;for(let n of e.children){let r=BI(t,n);if(r)return r}return null}function $I(t,e){if(t===e.value)return[e];for(let n of e.children){let r=$I(t,n);if(r.length)return r.unshift(e),r}return[]}var Bt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Gs(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var vf=class extends yf{constructor(e,n){super(e),this.snapshot=n,ZI(this,e)}toString(){return this.snapshot.toString()}};function Cx(t){let e=pU(t),n=new ot([new co("",{})]),r=new ot({}),i=new ot({}),o=new ot({}),s=new ot(""),a=new ea(n,r,o,s,i,se,t,e.root);return a.snapshot=e.root,new vf(new Bt(a,[]),e)}function pU(t){let e={},n={},r={},i="",o=new Ks([],e,r,i,n,se,t,null,{});return new If("",new Bt(o,[]))}var ea=class{constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ee(l=>l[lc]))??Y(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ee(e=>Ys(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ee(e=>Ys(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function wf(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:H(H({},e.params),t.params),data:H(H({},e.data),t.data),resolve:H(H(H(H({},t.data),e.data),i?.data),t._resolvedData)}:r={params:H({},t.params),data:H({},t.data),resolve:H(H({},t.data),t._resolvedData??{})},i&&Ax(i)&&(r.resolve[lc]=i.title),r}var Ks=class{get title(){return this.data?.[lc]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ys(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ys(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},If=class extends yf{constructor(e,n){super(n),this.url=e,ZI(this,n)}toString(){return Sx(this._root)}};function ZI(t,e){e.value._routerState=t,e.children.forEach(n=>ZI(t,n))}function Sx(t){let e=t.children.length>0?` { ${t.children.map(Sx).join(", ")} } `:"";return`${t.value}${e}`}function DI(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,On(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),On(e.params,n.params)||t.paramsSubject.next(n.params),B2(e.url,n.url)||t.urlSubject.next(n.url),On(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function qI(t,e){let n=On(t.params,e.params)&&H2(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||qI(t.parent,e.parent))}function Ax(t){return typeof t.title=="string"||t.title===null}var gU=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=se,this.activateEvents=new ht,this.deactivateEvents=new ht,this.attachEvents=new ht,this.detachEvents=new ht,this.parentContexts=V(fc),this.location=V(kr),this.changeDetector=V(Ka),this.inputBinder=V(bf,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new J(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new J(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new J(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new J(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,l=new zI(r,u,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Go({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[od]});let t=e;return t})(),zI=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===ea?this.route:e===fc?this.childContexts:this.parent.get(e,n)}},bf=new z(""),sx=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,o=xa([i.queryParams,i.params,i.data]).pipe(Me(([s,a,u],l)=>(u=H(H(H({},s),a),u),l===0?Y(u):Promise.resolve(u)))).subscribe(s=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=DC(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:u}of a.inputs)r.activatedComponentRef.setInput(u,s[u])});this.outletDataSubscriptions.set(r,o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})();function mU(t,e,n){let r=sc(t,e._root,n?n._root:void 0);return new vf(r,e)}function sc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=yU(t,e,n);return new Bt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>sc(t,a)),s}}let r=vU(e.value),i=e.children.map(o=>sc(t,o));return new Bt(r,i)}}function yU(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return sc(t,r,i);return sc(t,r)})}function vU(t){return new ea(new ot(t.url),new ot(t.params),new ot(t.queryParams),new ot(t.fragment),new ot(t.data),t.outlet,t.component,t)}var ac=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},Rx="ngNavigationCancelingError";function Ef(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=nc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=xx(!1,$t.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function xx(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[Rx]=!0,n.cancellationCode=e,n}function wU(t){return Mx(t)&&nc(t.url)}function Mx(t){return!!t&&t[Rx]}var IU=(t,e,n,r)=>ee(i=>(new HI(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),HI=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),DI(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Gs(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Gs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Gs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Gs(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new jI(o.value.snapshot))}),e.children.length&&this.forwardEvent(new LI(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(DI(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),DI(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},_f=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Qs=class{constructor(e,n){this.component=e,this.route=n}};function EU(t,e,n){let r=t._root,i=e?e._root:null;return Zu(r,i,n,[r.value])}function _U(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function na(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!VD(t)?t:e.get(t):r}function Zu(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Gs(e);return t.children.forEach(s=>{DU(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>tc(a,n.getContext(s),i)),i}function DU(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=TU(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new _f(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Zu(t,e,a?a.children:null,r,i):Zu(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Qs(a.outlet.component,s))}else s&&tc(e,a,i),i.canActivateChecks.push(new _f(r)),o.component?Zu(t,null,a?a.children:null,r,i):Zu(t,null,n,r,i);return i}function TU(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!lo(t.url,e.url);case"pathParamsOrQueryParamsChange":return!lo(t.url,e.url)||!On(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!qI(t,e)||!On(t.queryParams,e.queryParams);case"paramsChange":default:return!qI(t,e)}}function tc(t,e,n){let r=Gs(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?tc(s,e.children.getContext(o),n):tc(s,null,n):tc(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Qs(e.outlet.component,i)):n.canDeactivateChecks.push(new Qs(null,i)):n.canDeactivateChecks.push(new Qs(null,i))}function pc(t){return typeof t=="function"}function bU(t){return typeof t=="boolean"}function CU(t){return t&&pc(t.canLoad)}function SU(t){return t&&pc(t.canActivate)}function AU(t){return t&&pc(t.canActivateChild)}function RU(t){return t&&pc(t.canDeactivate)}function xU(t){return t&&pc(t.canMatch)}function Nx(t){return t instanceof Bn||t?.name==="EmptyError"}var uf=Symbol("INITIAL_VALUE");function ta(){return Me(t=>xa(t.map(e=>e.pipe(qn(1),yi(uf)))).pipe(ee(e=>{for(let n of e)if(n!==!0){if(n===uf)return uf;if(n===!1||MU(n))return n}return!0}),Je(e=>e!==uf),qn(1)))}function MU(t){return nc(t)||t instanceof ac}function NU(t,e){return ze(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?Y(De(H({},n),{guardsResult:!0})):PU(s,r,i,t).pipe(ze(a=>a&&bU(a)?kU(r,o,t,e):Y(a)),ee(a=>De(H({},n),{guardsResult:a})))})}function PU(t,e,n,r){return ve(t).pipe(ze(i=>jU(i.component,i.route,n,e,r)),Ht(i=>i!==!0,!0))}function kU(t,e,n,r){return ve(e).pipe($n(i=>So(FU(i.route.parent,r),OU(i.route,r),VU(t,i.path,n),LU(t,i.route,n))),Ht(i=>i!==!0,!0))}function OU(t,e){return t!==null&&e&&e(new VI(t)),Y(!0)}function FU(t,e){return t!==null&&e&&e(new FI(t)),Y(!0)}function LU(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Y(!0);let i=r.map(o=>pl(()=>{let s=hc(e)??n,a=na(o,s),u=SU(a)?a.canActivate(e,t):Yt(s,()=>a(e,t));return ai(u).pipe(Ht())}));return Y(i).pipe(ta())}function VU(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>_U(s)).filter(s=>s!==null).map(s=>pl(()=>{let a=s.guards.map(u=>{let l=hc(s.node)??n,d=na(u,l),f=AU(d)?d.canActivateChild(r,t):Yt(l,()=>d(r,t));return ai(f).pipe(Ht())});return Y(a).pipe(ta())}));return Y(o).pipe(ta())}function jU(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Y(!0);let s=o.map(a=>{let u=hc(e)??i,l=na(a,u),d=RU(l)?l.canDeactivate(t,e,n,r):Yt(u,()=>l(t,e,n,r));return ai(d).pipe(Ht())});return Y(s).pipe(ta())}function UU(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return Y(!0);let o=i.map(s=>{let a=na(s,t),u=CU(a)?a.canLoad(e,n):Yt(t,()=>a(e,n));return ai(u)});return Y(o).pipe(ta(),Px(r))}function Px(t){return gp(He(e=>{if(typeof e!="boolean")throw Ef(t,e)}),ee(e=>e===!0))}function BU(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return Y(!0);let o=i.map(s=>{let a=na(s,t),u=xU(a)?a.canMatch(e,n):Yt(t,()=>a(e,n));return ai(u)});return Y(o).pipe(ta(),Px(r))}var uc=class{constructor(e){this.segmentGroup=e||null}},cc=class extends Error{constructor(e){super(),this.urlTree=e}};function Hs(t){return Co(new uc(t))}function $U(t){return Co(new J(4e3,!1))}function qU(t){return Co(xx(!1,$t.GuardRejected))}var GI=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Y(r);if(i.numberOfChildren>1||!i.children[se])return $U(`${e.redirectTo}`);i=i.children[se]}}applyRedirectCommands(e,n,r,i,o){if(typeof n!="string"){let a=n,{queryParams:u,fragment:l,routeConfig:d,url:f,outlet:g,params:y,data:_,title:A}=i,C=Yt(o,()=>a({params:y,data:_,queryParams:u,fragment:l,routeConfig:d,url:f,outlet:g,title:A}));if(C instanceof fr)throw new cc(C);n=C}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new cc(s);return s}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new fr(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Ee(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new J(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},WI={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function zU(t,e,n,r,i){let o=kx(t,e,n);return o.matched?(r=hU(e,r),BU(r,e,n,i).pipe(ee(s=>s===!0?o:H({},WI)))):Y(o)}function kx(t,e,n){if(e.path==="**")return HU(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?H({},WI):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||U2)(n,t,e);if(!i)return H({},WI);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?H(H({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function HU(t){return{matched:!0,parameters:t.length>0?fx(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function ax(t,e,n,r){return n.length>0&&KU(t,n,r)?{segmentGroup:new Ee(e,WU(r,new Ee(n,t.children))),slicedSegments:[]}:n.length===0&&QU(t,n,r)?{segmentGroup:new Ee(t.segments,GU(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ee(t.segments,t.children),slicedSegments:n}}function GU(t,e,n,r){let i={};for(let o of n)if(Cf(t,e,o)&&!r[mn(o)]){let s=new Ee([],{});i[mn(o)]=s}return H(H({},r),i)}function WU(t,e){let n={};n[se]=e;for(let r of t)if(r.path===""&&mn(r)!==se){let i=new Ee([],{});n[mn(r)]=i}return n}function KU(t,e,n){return n.some(r=>Cf(t,e,r)&&mn(r)!==se)}function QU(t,e,n){return n.some(r=>Cf(t,e,r))}function Cf(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function YU(t,e,n){return e.length===0&&!t.children[n]}var KI=class{};function ZU(t,e,n,r,i,o,s="emptyOnly"){return new QI(t,e,n,r,i,s,o).recognize()}var JU=31,QI=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new GI(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new J(4002,`'${e.segmentGroup}'`)}recognize(){let e=ax(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ee(({children:n,rootSnapshot:r})=>{let i=new Bt(r,n),o=new If("",i),s=oU(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Ks([],Object.freeze({}),Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),se,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,se,n).pipe(ee(r=>({children:r,rootSnapshot:n})),Er(r=>{if(r instanceof cc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof uc?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(ee(s=>s instanceof Bt?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return ve(o).pipe($n(s=>{let a=r.children[s],u=fU(n,s);return this.processSegmentGroup(e,u,a,s,i)}),mi((s,a)=>(s.push(...a),s)),_r(null),Cp(),ze(s=>{if(s===null)return Hs(r);let a=Ox(s);return XU(a),Y(a)}))}processSegment(e,n,r,i,o,s,a){return ve(n).pipe($n(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a).pipe(Er(l=>{if(l instanceof uc)return Y(null);throw l}))),Ht(u=>!!u),Er(u=>{if(Nx(u))return YU(r,i,o)?Y(new KI):Hs(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,u){return mn(r)!==s&&(s===se||!Cf(i,o,r))?Hs(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):Hs(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:d,positionalParamSegments:f,remainingSegments:g}=kx(n,i,o);if(!u)return Hs(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>JU&&(this.allowRedirects=!1));let y=new Ks(o,l,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,ux(i),mn(i),i.component??i._loadedComponent??null,i,cx(i)),_=wf(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(_.params),y.data=Object.freeze(_.data);let A=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,y,e);return this.applyRedirects.lineralizeSegments(i,A).pipe(ze(C=>this.processSegment(e,r,n,C.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=zU(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Me(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Me(({routes:l})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:g,remainingSegments:y}=u,_=new Ks(g,f,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,ux(r),mn(r),r.component??r._loadedComponent??null,r,cx(r)),A=wf(_,s,this.paramsInheritanceStrategy);_.params=Object.freeze(A.params),_.data=Object.freeze(A.data);let{segmentGroup:C,slicedSegments:P}=ax(n,g,y,l);if(P.length===0&&C.hasChildren())return this.processChildren(d,l,C,_).pipe(ee(F=>new Bt(_,F)));if(l.length===0&&P.length===0)return Y(new Bt(_,[]));let j=mn(r)===o;return this.processSegment(d,l,C,P,j?se:o,!0,_).pipe(ee(F=>new Bt(_,F instanceof Bt?[F]:[])))}))):Hs(n)))}getChildConfig(e,n,r){return n.children?Y({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?Y({routes:n._loadedRoutes,injector:n._loadedInjector}):UU(e,n,r,this.urlSerializer).pipe(ze(i=>i?this.configLoader.loadChildren(e,n).pipe(He(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):qU(n))):Y({routes:[],injector:e})}};function XU(t){t.sort((e,n)=>e.value.outlet===se?-1:n.value.outlet===se?1:e.value.outlet.localeCompare(n.value.outlet))}function eB(t){let e=t.value.routeConfig;return e&&e.path===""}function Ox(t){let e=[],n=new Set;for(let r of t){if(!eB(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=Ox(r.children);e.push(new Bt(r.value,i))}return e.filter(r=>!n.has(r))}function ux(t){return t.data||{}}function cx(t){return t.resolve||{}}function tB(t,e,n,r,i,o){return ze(s=>ZU(t,e,n,r,s.extractedUrl,i,o).pipe(ee(({state:a,tree:u})=>De(H({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function nB(t,e){return ze(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Y(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of Fx(u))s.add(l);let a=0;return ve(s).pipe($n(u=>o.has(u)?rB(u,r,t,e):(u.data=wf(u,u.parent,t).resolve,Y(void 0))),He(()=>a++),Ao(1),ze(u=>a===s.size?Y(n):It))})}function Fx(t){let e=t.children.map(n=>Fx(n)).flat();return[t,...e]}function rB(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!Ax(i)&&(o[lc]=i.title),iB(o,t,e,r).pipe(ee(s=>(t._resolvedData=s,t.data=wf(t,t.parent,n).resolve,null)))}function iB(t,e,n,r){let i=CI(t);if(i.length===0)return Y({});let o={};return ve(i).pipe(ze(s=>oB(t[s],e,n,r).pipe(Ht(),He(a=>{if(a instanceof ac)throw Ef(new Zs,a);o[s]=a}))),Ao(1),Tp(o),Er(s=>Nx(s)?It:Co(s)))}function oB(t,e,n,r){let i=hc(e)??r,o=na(t,i),s=o.resolve?o.resolve(e,n):Yt(i,()=>o(e,n));return ai(s)}function TI(t){return Me(e=>{let n=t(e);return n?ve(n).pipe(ee(()=>e)):Y(e)})}var Lx=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===se);return i}getResolvedTitleForRoute(r){return r.data[lc]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>V(sB),providedIn:"root"});let t=e;return t})(),sB=(()=>{let e=class e extends Lx{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(L(n0))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),gc=new z("",{providedIn:"root",factory:()=>({})}),aB=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ZD({type:e,selectors:[["ng-component"]],standalone:!0,features:[lC],decls:1,vars:0,template:function(i,o){i&1&&wm(0,"router-outlet")},dependencies:[gU],encapsulation:2});let t=e;return t})();function JI(t){let e=t.children&&t.children.map(JI),n=e?De(H({},t),{children:e}):H({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==se&&(n.component=aB),n}var Df=new z(""),XI=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=V(_d)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Y(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=ai(r.loadComponent()).pipe(ee(Vx),He(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Dr(()=>{this.componentLoaders.delete(r)})),o=new _o(i,()=>new je).pipe(Eo());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Y({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=uB(i,this.compiler,r,this.onLoadEndListener).pipe(Dr(()=>{this.childrenLoaders.delete(i)})),a=new _o(s,()=>new je).pipe(Eo());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function uB(t,e,n,r){return ai(t.loadChildren()).pipe(ee(Vx),ze(i=>i instanceof Ua||Array.isArray(i)?Y(i):ve(e.compileModuleAsync(i))),ee(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Df,[],{optional:!0,self:!0}).flat()),{routes:s.map(JI),injector:o}}))}function cB(t){return t&&typeof t=="object"&&"default"in t}function Vx(t){return cB(t)?t.default:t}var eE=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>V(lB),providedIn:"root"});let t=e;return t})(),lB=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),jx=new z(""),Ux=new z("");function dB(t,e,n){let r=t.get(Ux),i=t.get(st);return t.get(he).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),hB(t))),{onViewTransitionCreated:u}=r;return u&&Yt(t,()=>u({transition:a,from:e,to:n})),s})}function hB(t){return new Promise(e=>{vm({read:()=>setTimeout(e)},{injector:t})})}var fB=new z(""),tE=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new je,this.transitionAbortSubject=new je,this.configLoader=V(XI),this.environmentInjector=V(Dt),this.urlSerializer=V(dc),this.rootContexts=V(fc),this.location=V(Xo),this.inputBindingEnabled=V(bf,{optional:!0})!==null,this.titleStrategy=V(Lx),this.options=V(gc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=V(eE),this.createViewTransition=V(jx,{optional:!0}),this.navigationErrorHandler=V(fB,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Y(void 0),this.rootComponentType=null;let r=o=>this.events.next(new kI(o)),i=o=>this.events.next(new OI(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(De(H(H({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new ot({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:ec,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Je(s=>s.id!==0),ee(s=>De(H({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Me(s=>{let a=!1,u=!1;return Y(s).pipe(Me(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",$t.SupersededByNewNavigation),It;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?De(H({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!d&&f!=="reload"){let g="";return this.events.next(new si(l.id,this.urlSerializer.serialize(l.rawUrl),g,pf.IgnoredSameUrlNavigation)),l.resolve(!1),It}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Y(l).pipe(Me(g=>{let y=this.transitions?.getValue();return this.events.next(new Js(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),y!==this.transitions?.getValue()?It:Promise.resolve(g)}),tB(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),He(g=>{s.targetSnapshot=g.targetSnapshot,s.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=De(H({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let y=new gf(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(y)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:g,extractedUrl:y,source:_,restoredState:A,extras:C}=l,P=new Js(g,this.urlSerializer.serialize(y),_,A);this.events.next(P);let j=Cx(this.rootComponentType).snapshot;return this.currentTransition=s=De(H({},l),{targetSnapshot:j,urlAfterRedirects:y,extras:De(H({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,Y(s)}else{let g="";return this.events.next(new si(l.id,this.urlSerializer.serialize(l.extractedUrl),g,pf.IgnoredByUrlHandlingStrategy)),l.resolve(!1),It}}),He(l=>{let d=new xI(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),ee(l=>(this.currentTransition=s=De(H({},l),{guards:EU(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),NU(this.environmentInjector,l=>this.events.next(l)),He(l=>{if(s.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw Ef(this.urlSerializer,l.guardsResult);let d=new MI(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),Je(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",$t.GuardRejected),!1)),TI(l=>{if(l.guards.canActivateChecks.length)return Y(l).pipe(He(d=>{let f=new NI(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),Me(d=>{let f=!1;return Y(d).pipe(nB(this.paramsInheritanceStrategy,this.environmentInjector),He({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",$t.NoDataFromResolver)}}))}),He(d=>{let f=new PI(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),TI(l=>{let d=f=>{let g=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(f.routeConfig).pipe(He(y=>{f.component=y}),ee(()=>{})));for(let y of f.children)g.push(...d(y));return g};return xa(d(l.targetSnapshot.root)).pipe(_r(null),qn(1))}),TI(()=>this.afterPreactivation()),Me(()=>{let{currentSnapshot:l,targetSnapshot:d}=s,f=this.createViewTransition?.(this.environmentInjector,l.root,d.root);return f?ve(f).pipe(ee(()=>s)):Y(s)}),ee(l=>{let d=mU(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=De(H({},l),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,s}),He(()=>{this.events.next(new oc)}),IU(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),qn(1),He({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new pr(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Ap(this.transitionAbortSubject.pipe(He(l=>{throw l}))),Dr(()=>{!a&&!u&&this.cancelNavigationTransition(s,"",$t.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Er(l=>{if(u=!0,Mx(l))this.events.next(new hr(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),wU(l)?this.events.next(new Xs(l.url,l.navigationBehaviorOptions)):s.resolve(!1);else{let d=new ic(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0);try{let f=Yt(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(f instanceof ac){let{message:g,cancellationCode:y}=Ef(this.urlSerializer,f);this.events.next(new hr(s.id,this.urlSerializer.serialize(s.extractedUrl),g,y)),this.events.next(new Xs(f.redirectTo,f.navigationBehaviorOptions))}else{this.events.next(d);let g=r.errorHandler(l);s.resolve(!!g)}}catch(f){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(f)}}return It}))}))}cancelNavigationTransition(r,i,o){let s=new hr(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function pB(t){return t!==ec}var gB=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>V(mB),providedIn:"root"});let t=e;return t})(),YI=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},mB=(()=>{let e=class e extends YI{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=tm(e)))(o||e)}})(),e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Bx=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>V(yB),providedIn:"root"});let t=e;return t})(),yB=(()=>{let e=class e extends Bx{constructor(){super(...arguments),this.location=V(Xo),this.urlSerializer=V(dc),this.options=V(gc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=V(eE),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new fr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Cx(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Js)this.stateMemento=this.createStateMemento();else if(r instanceof si)this.rawUrlTree=i.initialUrl;else if(r instanceof gf){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??o,i)}}else r instanceof oc?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):r instanceof hr&&(r.code===$t.GuardRejected||r.code===$t.NoDataFromResolver)?this.restoreHistory(i):r instanceof ic?this.restoreHistory(i,!0):r instanceof pr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=r instanceof fr?this.urlSerializer.serialize(r):r;if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=H(H({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=H(H({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=tm(e)))(o||e)}})(),e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ju=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Ju||{});function $x(t,e){t.events.pipe(Je(n=>n instanceof pr||n instanceof hr||n instanceof ic||n instanceof si),ee(n=>n instanceof pr||n instanceof si?Ju.COMPLETE:(n instanceof hr?n.code===$t.Redirect||n.code===$t.SupersededByNewNavigation:!1)?Ju.REDIRECTING:Ju.FAILED),Je(n=>n!==Ju.REDIRECTING),qn(1)).subscribe(()=>{e()})}function vB(t){throw t}var wB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},IB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ho=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=V(yd),this.stateManager=V(Bx),this.options=V(gc,{optional:!0})||{},this.pendingTasks=V(Zn),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=V(tE),this.urlSerializer=V(dc),this.location=V(Xo),this.urlHandlingStrategy=V(eE),this._events=new je,this.errorHandler=this.options.errorHandler||vB,this.navigated=!1,this.routeReuseStrategy=V(gB),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=V(Df,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!V(bf,{optional:!0}),this.eventsSubscription=new Le,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof hr&&i.code!==$t.Redirect&&i.code!==$t.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof pr)this.navigated=!0;else if(i instanceof Xs){let a=i.navigationBehaviorOptions,u=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),l=H({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||pB(o.source)},a);this.scheduleNavigation(u,ec,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}_B(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ec,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let l=H({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(JI),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:u,preserveFragment:l}=i,d=l?this.currentUrlTree.fragment:a,f=null;switch(u??this.options.defaultQueryParamsHandling){case"merge":f=H(H({},this.currentUrlTree.queryParams),s);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}f!==null&&(f=this.removeEmptyProps(f));let g;try{let y=o?o.snapshot:this.routerState.snapshot.root;g=_x(y)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),g=this.currentUrlTree.root}return Dx(g,r,f,d??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=nc(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,ec,null,i)}navigate(r,i={skipLocationChange:!1}){return EB(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=H({},wB):i===!1?o=H({},IB):o=i,nc(r))return nx(this.currentUrlTree,r,o);let s=this.parseUrl(r);return nx(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let u,l,d;a?(u=a.resolve,l=a.reject,d=a.promise):d=new Promise((g,y)=>{u=g,l=y});let f=this.pendingTasks.add();return $x(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:u,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function EB(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new J(4008,!1)}function _B(t){return!(t instanceof oc)&&!(t instanceof Xs)}var Tf=class{};var DB=(()=>{let e=class e{constructor(r,i,o,s,a){this.router=r,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Je(r=>r instanceof pr),$n(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let o=[];for(let s of i){s.providers&&!s._injector&&(s._injector=gd(s.providers,r,`Route: ${s.path}`));let a=s._injector??r,u=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(u,s.children??s._loadedRoutes))}return ve(o).pipe(Ir())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;i.loadChildren&&i.canLoad===void 0?o=this.loader.loadChildren(r,i):o=Y(null);let s=o.pipe(ze(a=>a===null?Y(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return ve([s,a]).pipe(Ir())}else return s})}};e.\u0275fac=function(i){return new(i||e)(L(ho),L(_d),L(Dt),L(Tf),L(XI))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),qx=new z(""),TB=(()=>{let e=class e{constructor(r,i,o,s,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Js?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof pr?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof si&&r.code===pf.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof mf&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new mf(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){Ib()},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})();function bB(t){return t.routerState.root}function mc(t,e){return{\u0275kind:t,\u0275providers:e}}function CB(){let t=V(Nt);return e=>{let n=t.get(Jn);if(e!==n.components[0])return;let r=t.get(ho),i=t.get(zx);t.get(nE)===1&&r.initialNavigation(),t.get(Hx,null,le.Optional)?.setUpPreloading(),t.get(qx,null,le.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var zx=new z("",{factory:()=>new je}),nE=new z("",{providedIn:"root",factory:()=>1});function SB(){return mc(2,[{provide:nE,useValue:0},{provide:Id,multi:!0,deps:[Nt],useFactory:e=>{let n=e.get(MC,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(ho),o=e.get(zx);$x(i,()=>{r(!0)}),e.get(tE).afterPreactivation=()=>(r(!0),o.closed?Y(void 0):o),i.initialNavigation()}))}}])}function AB(){return mc(3,[{provide:Id,multi:!0,useFactory:()=>{let e=V(ho);return()=>{e.setUpLocationChangeListener()}}},{provide:nE,useValue:2}])}var Hx=new z("");function RB(t){return mc(0,[{provide:Hx,useExisting:DB},{provide:Tf,useExisting:t}])}function xB(){return mc(8,[sx,{provide:bf,useExisting:sx}])}function MB(t){let e=[{provide:jx,useValue:dB},{provide:Ux,useValue:H({skipNextTransition:!!t?.skipInitialTransition},t)}];return mc(9,e)}var lx=new z("ROUTER_FORROOT_GUARD"),NB=[Xo,{provide:dc,useClass:Zs},ho,fc,{provide:ea,useFactory:bB,deps:[ho]},XI,[]],U5=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[NB,[],{provide:Df,multi:!0,useValue:r},{provide:lx,useFactory:FB,deps:[[ho,new Kn,new Ug]]},{provide:gc,useValue:i||{}},i?.useHash?kB():OB(),PB(),i?.preloadingStrategy?RB(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?LB(i):[],i?.bindToComponentInputs?xB().\u0275providers:[],i?.enableViewTransitions?MB().\u0275providers:[],VB()]}}static forChild(r){return{ngModule:e,providers:[{provide:Df,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(L(lx,8))},e.\u0275mod=bt({type:e}),e.\u0275inj=Tt({});let t=e;return t})();function PB(){return{provide:qx,useFactory:()=>{let t=V(OC),e=V(he),n=V(gc),r=V(tE),i=V(dc);return n.scrollOffset&&t.setOffset(n.scrollOffset),new TB(i,r,t,e,n)}}}function kB(){return{provide:ki,useClass:PC}}function OB(){return{provide:ki,useClass:Om}}function FB(t){return"guarded"}function LB(t){return[t.initialNavigation==="disabled"?AB().\u0275providers:[],t.initialNavigation==="enabledBlocking"?SB().\u0275providers:[]]}var dx=new z("");function VB(){return[{provide:dx,useFactory:CB},{provide:Ed,multi:!0,useExisting:dx}]}export{re as a,je as b,ot as c,ve as d,ee as e,JM as f,XM as g,Dr as h,J as i,FD as j,W as k,Tt as l,z as m,L as n,V as o,Kn as p,ZD as q,bt as r,Go as s,Wo as t,od as u,BG as v,$G as w,tm as x,Nt as y,ht as z,he as A,Pr as B,qG as C,zG as D,HG as E,Zt as F,pd as G,QG as H,u1 as I,I1 as J,P1 as K,nC as L,k1 as M,iC as N,oC as O,wm as P,YG as Q,sC as R,ZG as S,JG as T,XG as U,e3 as V,J1 as W,X1 as X,t3 as Y,n3 as Z,tF as _,uC as $,nF as aa,r3 as ba,rF as ca,i3 as da,lC as ea,o3 as fa,s3 as ga,a3 as ha,Wa as ia,Ka as ja,_C as ka,u3 as la,kF as ma,Pi as na,P3 as oa,k3 as pa,O3 as qa,kC as ra,JF as sa,oL as ta,Q3 as ua,m8 as va,y8 as wa,Js as xa,pr as ya,hr as za,ic as Aa,gU as Ba,ho as Ca,U5 as Da,Tn as Ea,S8 as Fa,qL as Ga,Fi as Ha,ts as Ia,r0 as Ja,ns as Ka,v6 as La,ru as Ma,Zm as Na,L8 as Oa,V8 as Pa,P6 as Qa,Xw as Ra,K6 as Sa,dr as Ta,ER as Ua,LR as Va,cI as Wa,II as Xa,v5 as Ya,tx as Za};
