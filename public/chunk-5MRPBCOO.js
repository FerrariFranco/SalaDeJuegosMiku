import{A as Da,B as Lc,C as qt,D as vt,a as H,b as De,c as Zf,d as N,e as n_,f as kc,g as r_,h as i_,i as o_,j as s_,k as Jf,l as a_,m as Ea,n as Xf,o as Oc,p as u_,q as c_,r as ep,s as ke,t as di,u as yn,v as Fc,w as _a,x as tp,y as l_,z as d_}from"./chunk-GSQKSQXR.js";function h_(t,e){return Object.is(t,e)}var Ze=null,Vc=!1,jc=1,jn=Symbol("SIGNAL");function ye(t){let e=Ze;return Ze=t,e}function f_(){return Ze}var ba={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ip(t){if(Vc)throw new Error("");if(Ze===null)return;Ze.consumerOnSignalRead(t);let e=Ze.nextProducerIndex++;if(qc(Ze),e<Ze.producerNode.length&&Ze.producerNode[e]!==t&&Ta(Ze)){let n=Ze.producerNode[e];$c(n,Ze.producerIndexOfThis[e])}Ze.producerNode[e]!==t&&(Ze.producerNode[e]=t,Ze.producerIndexOfThis[e]=Ta(Ze)?y_(t,Ze,e):0),Ze.producerLastReadVersion[e]=t.version}function DM(){jc++}function p_(t){if(!(Ta(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===jc)){if(!t.producerMustRecompute(t)&&!sp(t)){t.dirty=!1,t.lastCleanEpoch=jc;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=jc}}function g_(t){if(t.liveConsumerNode===void 0)return;let e=Vc;Vc=!0;try{for(let n of t.liveConsumerNode)n.dirty||TM(n)}finally{Vc=e}}function m_(){return Ze?.consumerAllowSignalWrites!==!1}function TM(t){t.dirty=!0,g_(t),t.consumerMarkedDirty?.(t)}function Bc(t){return t&&(t.nextProducerIndex=0),ye(t)}function op(t,e){if(ye(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Ta(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)$c(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function sp(t){qc(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(p_(n),r!==n.version))return!0}return!1}function ap(t){if(qc(t),Ta(t))for(let e=0;e<t.producerNode.length;e++)$c(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function y_(t,e,n){if(v_(t),t.liveConsumerNode.length===0&&w_(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=y_(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function $c(t,e){if(v_(t),t.liveConsumerNode.length===1&&w_(t))for(let r=0;r<t.producerNode.length;r++)$c(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];qc(i),i.producerIndexOfThis[r]=e}}function Ta(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function qc(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function v_(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function w_(t){return t.producerNode!==void 0}function I_(t){let e=Object.create(bM);e.computation=t;let n=()=>{if(p_(e),ip(e),e.value===Uc)throw e.error;return e.value};return n[jn]=e,n}var np=Symbol("UNSET"),rp=Symbol("COMPUTING"),Uc=Symbol("ERRORED"),bM=De(H({},ba),{value:np,dirty:!0,error:null,equal:h_,producerMustRecompute(t){return t.value===np||t.value===rp},producerRecomputeValue(t){if(t.value===rp)throw new Error("Detected cycle in computations.");let e=t.value;t.value=rp;let n=Bc(t),r;try{r=t.computation()}catch(i){r=Uc,t.error=i}finally{op(t,n)}if(e!==np&&e!==Uc&&r!==Uc&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function CM(){throw new Error}var E_=CM;function __(){E_()}function D_(t){E_=t}var SM=null;function T_(t){let e=Object.create(C_);e.value=t;let n=()=>(ip(e),e.value);return n[jn]=e,n}function up(t,e){m_()||__(),t.equal(t.value,e)||(t.value=e,AM(t))}function b_(t,e){m_()||__(),up(t,e(t.value))}var C_=De(H({},ba),{equal:h_,value:void 0});function AM(t){t.version++,DM(),g_(t),SM?.()}function ne(t){return typeof t=="function"}function mo(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var zc=mo(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function hi(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Le=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ne(r))try{r()}catch(o){e=o instanceof zc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{S_(o)}catch(s){e=e??[],s instanceof zc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new zc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)S_(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&hi(n,e)}remove(e){let{_finalizers:n}=this;n&&hi(n,e),e instanceof t&&e._removeParent(this)}};Le.EMPTY=(()=>{let t=new Le;return t.closed=!0,t})();var cp=Le.EMPTY;function Hc(t){return t instanceof Le||t&&"closed"in t&&ne(t.remove)&&ne(t.add)&&ne(t.unsubscribe)}function S_(t){ne(t)?t():t.unsubscribe()}var on={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var yo={setTimeout(t,e,...n){let{delegate:r}=yo;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=yo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Gc(t){yo.setTimeout(()=>{let{onUnhandledError:e}=on;if(e)e(t);else throw t})}function Ca(){}var A_=lp("C",void 0,void 0);function R_(t){return lp("E",void 0,t)}function x_(t){return lp("N",t,void 0)}function lp(t,e,n){return{kind:t,value:e,error:n}}var fi=null;function vo(t){if(on.useDeprecatedSynchronousErrorHandling){let e=!fi;if(e&&(fi={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=fi;if(fi=null,n)throw r}}else t()}function M_(t){on.useDeprecatedSynchronousErrorHandling&&fi&&(fi.errorThrown=!0,fi.error=t)}var pi=class extends Le{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Hc(e)&&e.add(this)):this.destination=MM}static create(e,n,r){return new Un(e,n,r)}next(e){this.isStopped?hp(x_(e),this):this._next(e)}error(e){this.isStopped?hp(R_(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?hp(A_,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},RM=Function.prototype.bind;function dp(t,e){return RM.call(t,e)}var fp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Wc(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Wc(r)}else Wc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Wc(n)}}},Un=class extends pi{constructor(e,n,r){super();let i;if(ne(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&on.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&dp(e.next,o),error:e.error&&dp(e.error,o),complete:e.complete&&dp(e.complete,o)}):i=e}this.destination=new fp(i)}};function Wc(t){on.useDeprecatedSynchronousErrorHandling?M_(t):Gc(t)}function xM(t){throw t}function hp(t,e){let{onStoppedNotification:n}=on;n&&yo.setTimeout(()=>n(t,e))}var MM={closed:!0,next:Ca,error:xM,complete:Ca};var wo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function wt(t){return t}function pp(...t){return gp(t)}function gp(t){return t.length===0?wt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ie=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=PM(n)?n:new Un(n,r,i);return vo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=N_(r),new r((i,o)=>{let s=new Un({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[wo](){return this}pipe(...n){return gp(n)(this)}toPromise(n){return n=N_(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function N_(t){var e;return(e=t??on.Promise)!==null&&e!==void 0?e:Promise}function NM(t){return t&&ne(t.next)&&ne(t.error)&&ne(t.complete)}function PM(t){return t&&t instanceof pi||NM(t)&&Hc(t)}function mp(t){return ne(t?.lift)}function ae(t){return e=>{if(mp(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(t,e,n,r,i){return new yp(t,e,n,r,i)}var yp=class extends pi{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Io(){return ae((t,e)=>{let n=null;t._refCount++;let r=ue(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Eo=class extends ie{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,mp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Le;let n=this.getSubject();e.add(this.source.subscribe(ue(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Le.EMPTY)}return e}refCount(){return Io()(this)}};var P_=mo(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var je=(()=>{class t extends ie{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Kc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new P_}next(n){vo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){vo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){vo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?cp:(this.currentObservers=null,o.push(n),new Le(()=>{this.currentObservers=null,hi(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new ie;return n.source=this,n}}return t.create=(e,n)=>new Kc(e,n),t})(),Kc=class extends je{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:cp}};var ot=class extends je{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Sa={now(){return(Sa.delegate||Date).now()},delegate:void 0};var Qc=class extends je{constructor(e=1/0,n=1/0,r=Sa){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var Yc=class extends Le{constructor(e,n){super()}schedule(e,n=0){return this}};var Aa={setInterval(t,e,...n){let{delegate:r}=Aa;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Aa;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var _o=class extends Yc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Aa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Aa.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,hi(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Do=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Do.now=Sa.now;var To=class extends Do{constructor(e,n=Do.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Ra=new To(_o);var Zc=class extends _o{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Jc=class extends To{};var vp=new Jc(Zc);var It=new ie(t=>t.complete());function k_(t){return t&&ne(t.schedule)}function wp(t){return t[t.length-1]}function Xc(t){return ne(wp(t))?t.pop():void 0}function vn(t){return k_(wp(t))?t.pop():void 0}function O_(t,e){return typeof wp(t)=="number"?t.pop():e}var el=t=>t&&typeof t.length=="number"&&typeof t!="function";function tl(t){return ne(t?.then)}function nl(t){return ne(t[wo])}function rl(t){return Symbol.asyncIterator&&ne(t?.[Symbol.asyncIterator])}function il(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function kM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ol=kM();function sl(t){return ne(t?.[ol])}function al(t){return r_(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield kc(n.read());if(i)return yield kc(void 0);yield yield kc(r)}}finally{n.releaseLock()}})}function ul(t){return ne(t?.getReader)}function Re(t){if(t instanceof ie)return t;if(t!=null){if(nl(t))return OM(t);if(el(t))return FM(t);if(tl(t))return LM(t);if(rl(t))return F_(t);if(sl(t))return VM(t);if(ul(t))return jM(t)}throw il(t)}function OM(t){return new ie(e=>{let n=t[wo]();if(ne(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function FM(t){return new ie(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function LM(t){return new ie(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Gc)})}function VM(t){return new ie(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function F_(t){return new ie(e=>{UM(t,e).catch(n=>e.error(n))})}function jM(t){return F_(al(t))}function UM(t,e){var n,r,i,o;return n_(this,void 0,void 0,function*(){try{for(n=i_(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Mt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Lt(t,e=0){return ae((n,r)=>{n.subscribe(ue(r,i=>Mt(r,t,()=>r.next(i),e),()=>Mt(r,t,()=>r.complete(),e),i=>Mt(r,t,()=>r.error(i),e)))})}function zt(t,e=0){return ae((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function L_(t,e){return Re(t).pipe(zt(e),Lt(e))}function V_(t,e){return Re(t).pipe(zt(e),Lt(e))}function j_(t,e){return new ie(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function U_(t,e){return new ie(n=>{let r;return Mt(n,e,()=>{r=t[ol](),Mt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>ne(r?.return)&&r.return()})}function cl(t,e){if(!t)throw new Error("Iterable cannot be null");return new ie(n=>{Mt(n,e,()=>{let r=t[Symbol.asyncIterator]();Mt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function B_(t,e){return cl(al(t),e)}function $_(t,e){if(t!=null){if(nl(t))return L_(t,e);if(el(t))return j_(t,e);if(tl(t))return V_(t,e);if(rl(t))return cl(t,e);if(sl(t))return U_(t,e);if(ul(t))return B_(t,e)}throw il(t)}function ve(t,e){return e?$_(t,e):Re(t)}function Y(...t){let e=vn(t);return ve(t,e)}function bo(t,e){let n=ne(t)?t:()=>t,r=i=>i.error(n());return new ie(e?i=>e.schedule(r,0,i):r)}function Ip(t){return!!t&&(t instanceof ie||ne(t.lift)&&ne(t.subscribe))}var Bn=mo(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ee(t,e){return ae((n,r)=>{let i=0;n.subscribe(ue(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:BM}=Array;function $M(t,e){return BM(e)?t(...e):t(e)}function ll(t){return ee(e=>$M(t,e))}var{isArray:qM}=Array,{getPrototypeOf:zM,prototype:HM,keys:GM}=Object;function dl(t){if(t.length===1){let e=t[0];if(qM(e))return{args:e,keys:null};if(WM(e)){let n=GM(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function WM(t){return t&&typeof t=="object"&&zM(t)===HM}function hl(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function xa(...t){let e=vn(t),n=Xc(t),{args:r,keys:i}=dl(t);if(r.length===0)return ve([],e);let o=new ie(KM(r,e,i?s=>hl(i,s):wt));return n?o.pipe(ll(n)):o}function KM(t,e,n=wt){return r=>{q_(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)q_(e,()=>{let l=ve(t[u],e),d=!1;l.subscribe(ue(r,f=>{o[u]=f,d||(d=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function q_(t,e,n){t?Mt(n,t,e):e()}function z_(t,e,n,r,i,o,s,a){let u=[],l=0,d=0,f=!1,g=()=>{f&&!u.length&&!l&&e.complete()},y=A=>l<r?_(A):u.push(A),_=A=>{o&&e.next(A),l++;let C=!1;Re(n(A,d++)).subscribe(ue(e,P=>{i?.(P),o?y(P):e.next(P)},()=>{C=!0},void 0,()=>{if(C)try{for(l--;u.length&&l<r;){let P=u.shift();s?Mt(e,s,()=>_(P)):_(P)}g()}catch(P){e.error(P)}}))};return t.subscribe(ue(e,y,()=>{f=!0,g()})),()=>{a?.()}}function ze(t,e,n=1/0){return ne(e)?ze((r,i)=>ee((o,s)=>e(r,o,i,s))(Re(t(r,i))),n):(typeof e=="number"&&(n=e),ae((r,i)=>z_(r,i,t,n)))}function wr(t=1/0){return ze(wt,t)}function H_(){return wr(1)}function Co(...t){return H_()(ve(t,vn(t)))}function fl(t){return new ie(e=>{Re(t()).subscribe(e)})}function QM(...t){let e=Xc(t),{args:n,keys:r}=dl(t),i=new ie(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let d=0;d<s;d++){let f=!1;Re(n[d]).subscribe(ue(o,g=>{f||(f=!0,l--),a[d]=g},()=>u--,void 0,()=>{(!u||!f)&&(l||o.next(r?hl(r,a):a),o.complete())}))}});return e?i.pipe(ll(e)):i}function Ep(...t){let e=vn(t),n=O_(t,1/0),r=t;return r.length?r.length===1?Re(r[0]):wr(n)(ve(r,e)):It}function Je(t,e){return ae((n,r)=>{let i=0;n.subscribe(ue(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Ir(t){return ae((e,n)=>{let r=null,i=!1,o;r=e.subscribe(ue(n,void 0,void 0,s=>{o=Re(t(s,Ir(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function G_(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(ue(s,d=>{let f=l++;u=a?t(u,d,f):(a=!0,d),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function $n(t,e){return ne(e)?ze(t,e,1):ze(t,1)}function Er(t){return ae((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function qn(t){return t<=0?()=>It:ae((e,n)=>{let r=0;e.subscribe(ue(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function _p(t){return ee(()=>t)}function Dp(t,e=wt){return t=t??YM,ae((n,r)=>{let i,o=!0;n.subscribe(ue(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function YM(t,e){return t===e}function pl(t=ZM){return ae((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function ZM(){return new Bn}function _r(t){return ae((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Ht(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Je((i,o)=>t(i,o,r)):wt,qn(1),n?Er(e):pl(()=>new Bn))}function So(t){return t<=0?()=>It:ae((e,n)=>{let r=[];e.subscribe(ue(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Tp(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Je((i,o)=>t(i,o,r)):wt,So(1),n?Er(e):pl(()=>new Bn))}function Ma(){return ae((t,e)=>{let n,r=!1;t.subscribe(ue(e,i=>{let o=n;n=i,r&&e.next([o,i]),r=!0}))})}function gi(t,e){return ae(G_(t,e,arguments.length>=2,!0))}function W_(t={}){let{connector:e=()=>new je,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,u,l=0,d=!1,f=!1,g=()=>{a?.unsubscribe(),a=void 0},y=()=>{g(),s=u=void 0,d=f=!1},_=()=>{let A=s;y(),A?.unsubscribe()};return ae((A,C)=>{l++,!f&&!d&&g();let P=u=u??e();C.add(()=>{l--,l===0&&!f&&!d&&(a=bp(_,i))}),P.subscribe(C),!s&&l>0&&(s=new Un({next:j=>P.next(j),error:j=>{f=!0,g(),a=bp(y,n,j),P.error(j)},complete:()=>{d=!0,g(),a=bp(y,r),P.complete()}}),Re(A).subscribe(s))})(o)}}function bp(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new Un({next:()=>{r.unsubscribe(),t()}});return Re(e(...n)).subscribe(r)}function gl(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,W_({connector:()=>new Qc(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function mi(...t){let e=vn(t);return ae((n,r)=>{(e?Co(t,n,e):Co(t,n)).subscribe(r)})}function Me(t,e){return ae((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(ue(r,u=>{i?.unsubscribe();let l=0,d=o++;Re(t(u,d)).subscribe(i=ue(r,f=>r.next(e?e(u,f,d,l++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function ml(t,e){return ne(e)?Me(()=>t,e):Me(()=>t)}function Cp(t){return ae((e,n)=>{Re(t).subscribe(ue(n,()=>n.complete(),Ca)),!n.closed&&e.subscribe(n)})}function He(t,e,n){let r=ne(t)||e||n?{next:t,error:e,complete:n}:t;return r?ae((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ue(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):wt}var MD="https://g.co/ng/security#xss",J=class extends Error{constructor(e,n){super(Jl(e,n)),this.code=e}};function Jl(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function $a(t){return{toString:t}.toString()}var yl="__parameters__";function JM(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function ND(t,e,n){return $a(()=>{let r=JM(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,d){let f=u.hasOwnProperty(yl)?u[yl]:Object.defineProperty(u,yl,{value:[]})[yl];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Wn=globalThis;function be(t){for(let e in t)if(t[e]===be)return e;throw Error("Could not find renamed property on target object.")}function XM(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function _t(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(_t).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function K_(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var eN=be({__forward_ref__:be});function PD(t){return t.__forward_ref__=PD,t.toString=function(){return _t(this())},t}function Et(t){return kD(t)?t():t}function kD(t){return typeof t=="function"&&t.hasOwnProperty(eN)&&t.__forward_ref__===PD}function W(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Tt(t){return{providers:t.providers||[],imports:t.imports||[]}}function Xl(t){return Q_(t,FD)||Q_(t,LD)}function OD(t){return Xl(t)!==null}function Q_(t,e){return t.hasOwnProperty(e)?t[e]:null}function tN(t){let e=t&&(t[FD]||t[LD]);return e||null}function Y_(t){return t&&(t.hasOwnProperty(Z_)||t.hasOwnProperty(nN))?t[Z_]:null}var FD=be({\u0275prov:be}),Z_=be({\u0275inj:be}),LD=be({ngInjectableDef:be}),nN=be({ngInjectorDef:be}),z=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=W({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function VD(t){return t&&!!t.\u0275providers}var rN=be({\u0275cmp:be}),iN=be({\u0275dir:be}),oN=be({\u0275pipe:be}),sN=be({\u0275mod:be}),Sl=be({\u0275fac:be}),Pa=be({__NG_ELEMENT_ID__:be}),J_=be({__NG_ENV_ID__:be});function Fg(t){return typeof t=="string"?t:t==null?"":String(t)}function aN(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Fg(t)}function uN(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new J(-200,t)}function Lg(t,e){throw new J(-201,!1)}var le=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(le||{}),Up;function jD(){return Up}function Gt(t){let e=Up;return Up=t,e}function UD(t,e,n){let r=Xl(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&le.Optional)return null;if(e!==void 0)return e;Lg(t,"Injector")}var cN={},Oa=cN,Bp="__NG_DI_FLAG__",Al="ngTempTokenPath",lN="ngTokenPath",dN=/\n/gm,hN="\u0275",X_="__source",No;function fN(){return No}function Dr(t){let e=No;return No=t,e}function pN(t,e=le.Default){if(No===void 0)throw new J(-203,!1);return No===null?UD(t,void 0,e):No.get(t,e&le.Optional?null:void 0,e)}function L(t,e=le.Default){return(jD()||pN)(Et(t),e)}function V(t,e=le.Default){return L(t,ed(e))}function ed(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function $p(t){let e=[];for(let n=0;n<t.length;n++){let r=Et(t[n]);if(Array.isArray(r)){if(r.length===0)throw new J(900,!1);let i,o=le.Default;for(let s=0;s<r.length;s++){let a=r[s],u=gN(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(L(i,o))}else e.push(L(r))}return e}function BD(t,e){return t[Bp]=e,t.prototype[Bp]=e,t}function gN(t){return t[Bp]}function mN(t,e,n,r){let i=t[Al];throw e[X_]&&i.unshift(e[X_]),t.message=yN(`
`+t.message,i,n,r),t[lN]=i,t[Al]=null,t}function yN(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==hN?t.slice(2):t;let i=_t(e);if(Array.isArray(e))i=e.map(_t).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):_t(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(dN,`
  `)}`}var Kn=BD(ND("Optional"),8);var Vg=BD(ND("SkipSelf"),4);function ko(t,e){let n=t.hasOwnProperty(Sl);return n?t[Sl]:null}function vN(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function wN(t){return t.flat(Number.POSITIVE_INFINITY)}function jg(t,e){t.forEach(n=>Array.isArray(n)?jg(n,e):e(n))}function $D(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Rl(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function IN(t,e){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function EN(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function _N(t,e,n){let r=qa(t,e);return r>=0?t[r|1]=n:(r=~r,EN(t,r,e,n)),r}function Sp(t,e){let n=qa(t,e);if(n>=0)return t[n|1]}function qa(t,e){return DN(t,e,1)}function DN(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Oo={},Wt=[],Fo=new z(""),qD=new z("",-1),zD=new z(""),xl=class{get(e,n=Oa){if(n===Oa){let r=new Error(`NullInjectorError: No provider for ${_t(e)}!`);throw r.name="NullInjectorError",r}return n}},HD=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(HD||{}),En=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(En||{}),Cr=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Cr||{});function TN(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function qp(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];CN(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function bN(t){return t===3||t===4||t===6}function CN(t){return t.charCodeAt(0)===64}function Fa(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?eD(t,n,i,null,e[++r]):eD(t,n,i,null,null))}}return t}function eD(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var GD="ng-template";function SN(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&TN(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Ug(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Ug(t){return t.type===4&&t.value!==GD}function AN(t,e,n){let r=t.type===4&&!n?GD:t.value;return e===r}function RN(t,e,n){let r=4,i=t.attrs,o=i!==null?NN(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!sn(r)&&!sn(u))return!1;if(s&&sn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!AN(t,u,n)||u===""&&e.length===1){if(sn(r))return!1;s=!0}}else if(r&8){if(i===null||!SN(t,i,u,n)){if(sn(r))return!1;s=!0}}else{let l=e[++a],d=xN(u,i,Ug(t),n);if(d===-1){if(sn(r))return!1;s=!0;continue}if(l!==""){let f;if(d>o?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(sn(r))return!1;s=!0}}}}return sn(r)||s}function sn(t){return(t&1)===0}function xN(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return PN(e,t)}function WD(t,e,n=!1){for(let r=0;r<e.length;r++)if(RN(t,e[r],n))return!0;return!1}function MN(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function NN(t){for(let e=0;e<t.length;e++){let n=t[e];if(bN(n))return e}return t.length}function PN(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function kN(t,e){e:for(let n=0;n<e.length;n++){let r=e[n];if(t.length===r.length){for(let i=0;i<t.length;i++)if(t[i]!==r[i])continue e;return!0}}return!1}function tD(t,e){return t?":not("+e.trim()+")":e}function ON(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!sn(s)&&(e+=tD(o,i),i=""),r=s,o=o||!sn(r);n++}return i!==""&&(e+=tD(o,i)),e}function FN(t){return t.map(ON).join(",")}function LN(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!sn(i))break;i=o}r++}return{attrs:e,classes:n}}function KD(t){return $a(()=>{let e=XD(t),n=De(H({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===HD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||En.Emulated,styles:t.styles||Wt,_:null,schemas:t.schemas||null,tView:null,id:""});eT(n);let r=t.dependencies;return n.directiveDefs=rD(r,!1),n.pipeDefs=rD(r,!0),n.id=UN(n),n})}function VN(t){return Sr(t)||QD(t)}function jN(t){return t!==null}function bt(t){return $a(()=>({type:t.type,bootstrap:t.bootstrap||Wt,declarations:t.declarations||Wt,imports:t.imports||Wt,exports:t.exports||Wt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function nD(t,e){if(t==null)return Oo;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=Cr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==Cr.None?[r,a]:r,e[o]=s):n[o]=r}return n}function Ho(t){return $a(()=>{let e=XD(t);return eT(e),e})}function Sr(t){return t[rN]||null}function QD(t){return t[iN]||null}function YD(t){return t[oN]||null}function ZD(t){let e=Sr(t)||QD(t)||YD(t);return e!==null?e.standalone:!1}function JD(t,e){let n=t[sN]||null;if(!n&&e===!0)throw new Error(`Type ${_t(t)} does not have '\u0275mod' property.`);return n}function XD(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Oo,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Wt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:nD(t.inputs,e),outputs:nD(t.outputs),debugInfo:null}}function eT(t){t.features?.forEach(e=>e(t))}function rD(t,e){if(!t)return null;let n=e?YD:VN;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(jN)}function UN(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Go(t){return{\u0275providers:t}}function BN(...t){return{\u0275providers:tT(!0,t),\u0275fromNgModule:!0}}function tT(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return jg(e,s=>{let a=s;zp(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&nT(i,o),n}function nT(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Bg(i,o=>{e(o,r)})}}function zp(t,e,n,r){if(t=Et(t),!t)return!1;let i=null,o=Y_(t),s=!o&&Sr(t);if(!o&&!s){let u=t.ngModule;if(o=Y_(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)zp(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{jg(o.imports,d=>{zp(d,e,n,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&nT(l,e)}if(!a){let l=ko(i)||(()=>new i);e({provide:i,useFactory:l,deps:Wt},i),e({provide:zD,useValue:i,multi:!0},i),e({provide:Fo,useValue:()=>L(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;Bg(u,d=>{e(d,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Bg(t,e){for(let n of t)VD(n)&&(n=n.\u0275providers),Array.isArray(n)?Bg(n,e):e(n)}var $N=be({provide:String,useValue:be});function rT(t){return t!==null&&typeof t=="object"&&$N in t}function qN(t){return!!(t&&t.useExisting)}function zN(t){return!!(t&&t.useFactory)}function Lo(t){return typeof t=="function"}function HN(t){return!!t.useClass}var td=new z(""),_l={},GN={},Ap;function $g(){return Ap===void 0&&(Ap=new xl),Ap}var Dt=class{},La=class extends Dt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Gp(e,s=>this.processProvider(s)),this.records.set(qD,Ao(void 0,this)),i.has("environment")&&this.records.set(Dt,Ao(void 0,this));let o=this.records.get(td);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(zD,Wt,le.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ye(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ye(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Dr(this),r=Gt(void 0),i;try{return e()}finally{Dr(n),Gt(r)}}get(e,n=Oa,r=le.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(J_))return e[J_](this);r=ed(r);let i,o=Dr(this),s=Gt(void 0);try{if(!(r&le.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=ZN(e)&&Xl(e);l&&this.injectableDefInScope(l)?u=Ao(Hp(e),_l):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&le.Self?$g():this.parent;return n=r&le.Optional&&n===Oa?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Al]=a[Al]||[]).unshift(_t(e)),o)throw a;return mN(a,e,"R3InjectorError",this.source)}else throw a}finally{Gt(s),Dr(o)}}resolveInjectorInitializers(){let e=ye(null),n=Dr(this),r=Gt(void 0),i;try{let o=this.get(Fo,Wt,le.Self);for(let s of o)s()}finally{Dr(n),Gt(r),ye(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(_t(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new J(205,!1)}processProvider(e){e=Et(e);let n=Lo(e)?e:Et(e&&e.provide),r=KN(e);if(!Lo(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Ao(void 0,_l,!0),i.factory=()=>$p(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=ye(null);try{return n.value===_l&&(n.value=GN,n.value=n.factory()),typeof n.value=="object"&&n.value&&YN(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ye(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Et(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Hp(t){let e=Xl(t),n=e!==null?e.factory:ko(t);if(n!==null)return n;if(t instanceof z)throw new J(204,!1);if(t instanceof Function)return WN(t);throw new J(204,!1)}function WN(t){if(t.length>0)throw new J(204,!1);let n=tN(t);return n!==null?()=>n.factory(t):()=>new t}function KN(t){if(rT(t))return Ao(void 0,t.useValue);{let e=iT(t);return Ao(e,_l)}}function iT(t,e,n){let r;if(Lo(t)){let i=Et(t);return ko(i)||Hp(i)}else if(rT(t))r=()=>Et(t.useValue);else if(zN(t))r=()=>t.useFactory(...$p(t.deps||[]));else if(qN(t))r=()=>L(Et(t.useExisting));else{let i=Et(t&&(t.useClass||t.provide));if(QN(t))r=()=>new i(...$p(t.deps));else return ko(i)||Hp(i)}return r}function Ao(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function QN(t){return!!t.deps}function YN(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function ZN(t){return typeof t=="function"||typeof t=="object"&&t instanceof z}function Gp(t,e){for(let n of t)Array.isArray(n)?Gp(n,e):n&&VD(n)?Gp(n.\u0275providers,e):e(n)}function Yt(t,e){t instanceof La&&t.assertNotDestroyed();let n,r=Dr(t),i=Gt(void 0);try{return e()}finally{Dr(r),Gt(i)}}function oT(){return jD()!==void 0||fN()!=null}function JN(t){if(!oT())throw new J(-203,!1)}function XN(t){let e=Wn.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function eP(t){return typeof t=="function"}var Qn=0,ce=1,te=2,ft=3,an=4,Pt=5,Va=6,Ml=7,un=8,Vo=9,_n=10,Xe=11,ja=12,iD=13,Wo=14,Qt=15,Ii=16,Ro=17,zn=18,nd=19,sT=20,Tr=21,Rp=22,Kt=23,cn=25,aT=1;var Ei=7,Nl=8,jo=9,Vt=10,Pl=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Pl||{});function br(t){return Array.isArray(t)&&typeof t[aT]=="object"}function Yn(t){return Array.isArray(t)&&t[aT]===!0}function uT(t){return(t.flags&4)!==0}function rd(t){return t.componentOffset>-1}function qg(t){return(t.flags&1)===1}function Ar(t){return!!t.template}function Wp(t){return(t[te]&512)!==0}var Kp=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function cT(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function id(){return lT}function lT(t){return t.type.prototype.ngOnChanges&&(t.setInput=nP),tP}id.ngInherit=!0;function tP(){let t=hT(this),e=t?.current;if(e){let n=t.previous;if(n===Oo)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function nP(t,e,n,r,i){let o=this.declaredInputs[r],s=hT(t)||rP(t,{previous:Oo,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Kp(l&&l.currentValue,n,u===Oo),cT(t,e,i,n)}var dT="__ngSimpleChanges__";function hT(t){return t[dT]||null}function rP(t,e){return t[dT]=e}var oD=null;var wn=function(t,e,n){oD?.(t,e,n)},iP="svg",oP="math";function Dn(t){for(;Array.isArray(t);)t=t[Qn];return t}function fT(t,e){return Dn(e[t])}function ln(t,e){return Dn(e[t.index])}function pT(t,e){return t.data[e]}function sP(t,e){return t[e]}function Mr(t,e){let n=e[t];return br(n)?n:n[Qn]}function aP(t){return(t[te]&4)===4}function zg(t){return(t[te]&128)===128}function uP(t){return Yn(t[ft])}function kl(t,e){return e==null?null:t[e]}function gT(t){t[Ro]=0}function mT(t){t[te]&1024||(t[te]|=1024,zg(t)&&sd(t))}function cP(t,e){for(;t>0;)e=e[Wo],t--;return e}function od(t){return!!(t[te]&9216||t[Kt]?.dirty)}function Qp(t){t[_n].changeDetectionScheduler?.notify(8),t[te]&64&&(t[te]|=1024),od(t)&&sd(t)}function sd(t){t[_n].changeDetectionScheduler?.notify(0);let e=_i(t);for(;e!==null&&!(e[te]&8192||(e[te]|=8192,!zg(e)));)e=_i(e)}function yT(t,e){if((t[te]&256)===256)throw new J(911,!1);t[Tr]===null&&(t[Tr]=[]),t[Tr].push(e)}function lP(t,e){if(t[Tr]===null)return;let n=t[Tr].indexOf(e);n!==-1&&t[Tr].splice(n,1)}function _i(t){let e=t[ft];return Yn(e)?e[ft]:e}var de={lFrame:RT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var vT=!1;function dP(){return de.lFrame.elementDepthCount}function hP(){de.lFrame.elementDepthCount++}function fP(){de.lFrame.elementDepthCount--}function wT(){return de.bindingsEnabled}function IT(){return de.skipHydrationRootTNode!==null}function pP(t){return de.skipHydrationRootTNode===t}function gP(){de.skipHydrationRootTNode=null}function Ie(){return de.lFrame.lView}function Ct(){return de.lFrame.tView}function AG(t){return de.lFrame.contextLView=t,t[un]}function RG(t){return de.lFrame.contextLView=null,t}function kt(){let t=ET();for(;t!==null&&t.type===64;)t=t.parent;return t}function ET(){return de.lFrame.currentTNode}function mP(){let t=de.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function za(t,e){let n=de.lFrame;n.currentTNode=t,n.isParent=e}function _T(){return de.lFrame.isParent}function DT(){de.lFrame.isParent=!1}function yP(){return de.lFrame.contextLView}function TT(){return vT}function sD(t){vT=t}function bT(){let t=de.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function vP(t){return de.lFrame.bindingIndex=t}function Hg(){return de.lFrame.bindingIndex++}function wP(t){let e=de.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function IP(){return de.lFrame.inI18n}function EP(t,e){let n=de.lFrame;n.bindingIndex=n.bindingRootIndex=t,Yp(e)}function _P(){return de.lFrame.currentDirectiveIndex}function Yp(t){de.lFrame.currentDirectiveIndex=t}function DP(t){let e=de.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function CT(){return de.lFrame.currentQueryIndex}function Gg(t){de.lFrame.currentQueryIndex=t}function TP(t){let e=t[ce];return e.type===2?e.declTNode:e.type===1?t[Pt]:null}function ST(t,e,n){if(n&le.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&le.Host);)if(i=TP(o),i===null||(o=o[Wo],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=de.lFrame=AT();return r.currentTNode=e,r.lView=t,!0}function Wg(t){let e=AT(),n=t[ce];de.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function AT(){let t=de.lFrame,e=t===null?null:t.child;return e===null?RT(t):e}function RT(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function xT(){let t=de.lFrame;return de.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var MT=xT;function Kg(){let t=xT();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function bP(t){return(de.lFrame.contextLView=cP(t,de.lFrame.contextLView))[un]}function Ko(){return de.lFrame.selectedIndex}function Di(t){de.lFrame.selectedIndex=t}function NT(){let t=de.lFrame;return pT(t.tView,t.selectedIndex)}function CP(){return de.lFrame.currentNamespace}var PT=!0;function Qg(){return PT}function Yg(t){PT=t}function SP(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=lT(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Zg(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),d!=null&&(t.destroyHooks??=[]).push(n,d)}}function Dl(t,e,n){kT(t,e,3,n)}function Tl(t,e,n,r){(t[te]&3)===n&&kT(t,e,n,r)}function xp(t,e){let n=t[te];(n&3)===e&&(n&=16383,n+=1,t[te]=n)}function kT(t,e,n,r){let i=r!==void 0?t[Ro]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Ro]+=65536),(a<o||o==-1)&&(AP(t,n,e,u),t[Ro]=(t[Ro]&4294901760)+u+2),u++}function aD(t,e){wn(4,t,e);let n=ye(null);try{e.call(t)}finally{ye(n),wn(5,t,e)}}function AP(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[te]>>14<t[Ro]>>16&&(t[te]&3)===e&&(t[te]+=16384,aD(a,o)):aD(a,o)}var Po=-1,Ti=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function RP(t){return t instanceof Ti}function xP(t){return(t.flags&8)!==0}function MP(t){return(t.flags&16)!==0}var Mp={},Zp=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=ed(r);let i=this.injector.get(e,Mp,r);return i!==Mp||n===Mp?i:this.parentInjector.get(e,n,r)}};function OT(t){return t!==Po}function Ol(t){return t&32767}function NP(t){return t>>16}function Fl(t,e){let n=NP(t),r=e;for(;n>0;)r=r[Wo],n--;return r}var Jp=!0;function uD(t){let e=Jp;return Jp=t,e}var PP=256,FT=PP-1,LT=5,kP=0,In={};function OP(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Pa)&&(r=n[Pa]),r==null&&(r=n[Pa]=kP++);let i=r&FT,o=1<<i;e.data[t+(i>>LT)]|=o}function Ll(t,e){let n=VT(t,e);if(n!==-1)return n;let r=e[ce];r.firstCreatePass&&(t.injectorIndex=e.length,Np(r.data,t),Np(e,null),Np(r.blueprint,null));let i=Jg(t,e),o=t.injectorIndex;if(OT(i)){let s=Ol(i),a=Fl(i,e),u=a[ce].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Np(t,e){t.push(0,0,0,0,0,0,0,0,e)}function VT(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Jg(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=qT(i),r===null)return Po;if(n++,i=i[Wo],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Po}function Xp(t,e,n){OP(t,e,n)}function jT(t,e,n){if(n&le.Optional||t!==void 0)return t;Lg(e,"NodeInjector")}function UT(t,e,n,r){if(n&le.Optional&&r===void 0&&(r=null),!(n&(le.Self|le.Host))){let i=t[Vo],o=Gt(void 0);try{return i?i.get(e,r,n&le.Optional):UD(e,r,n&le.Optional)}finally{Gt(o)}}return jT(r,e,n)}function BT(t,e,n,r=le.Default,i){if(t!==null){if(e[te]&2048&&!(r&le.Self)){let s=jP(t,e,n,r,In);if(s!==In)return s}let o=$T(t,e,n,r,In);if(o!==In)return o}return UT(e,n,r,i)}function $T(t,e,n,r,i){let o=LP(n);if(typeof o=="function"){if(!ST(e,t,r))return r&le.Host?jT(i,n,r):UT(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&le.Optional))Lg(n);else return s}finally{MT()}}else if(typeof o=="number"){let s=null,a=VT(t,e),u=Po,l=r&le.Host?e[Qt][Pt]:null;for((a===-1||r&le.SkipSelf)&&(u=a===-1?Jg(t,e):e[a+8],u===Po||!lD(r,!1)?a=-1:(s=e[ce],a=Ol(u),e=Fl(u,e)));a!==-1;){let d=e[ce];if(cD(o,a,d.data)){let f=FP(a,e,n,s,r,l);if(f!==In)return f}u=e[a+8],u!==Po&&lD(r,e[ce].data[a+8]===l)&&cD(o,a,e)?(s=d,a=Ol(u),e=Fl(u,e)):a=-1}}return i}function FP(t,e,n,r,i,o){let s=e[ce],a=s.data[t+8],u=r==null?rd(a)&&Jp:r!=s&&(a.type&3)!==0,l=i&le.Host&&o===a,d=bl(a,s,n,u,l);return d!==null?bi(e,s,d,a):In}function bl(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,d=o>>20,f=r?a:a+d,g=i?a+d:l;for(let y=f;y<g;y++){let _=s[y];if(y<u&&n===_||y>=u&&_.type===n)return y}if(i){let y=s[u];if(y&&Ar(y)&&y.type===n)return u}return null}function bi(t,e,n,r){let i=t[n],o=e.data;if(RP(i)){let s=i;s.resolving&&uN(aN(o[n]));let a=uD(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?Gt(s.injectImpl):null,d=ST(t,r,le.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&SP(n,o[n],e)}finally{l!==null&&Gt(l),uD(a),s.resolving=!1,MT()}}return i}function LP(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Pa)?t[Pa]:void 0;return typeof e=="number"?e>=0?e&FT:VP:e}function cD(t,e,n){let r=1<<t;return!!(n[e+(t>>LT)]&r)}function lD(t,e){return!(t&le.Self)&&!(t&le.Host&&e)}var wi=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return BT(this._tNode,this._lView,e,ed(r),n)}};function VP(){return new wi(kt(),Ie())}function Xg(t){return $a(()=>{let e=t.prototype.constructor,n=e[Sl]||eg(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Sl]||eg(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function eg(t){return kD(t)?()=>{let e=eg(Et(t));return e&&e()}:ko(t)}function jP(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[te]&2048&&!(s[te]&512);){let a=$T(o,s,n,r|le.Self,In);if(a!==In)return a;let u=o.parent;if(!u){let l=s[sT];if(l){let d=l.get(n,In,r);if(d!==In)return d}u=qT(s),s=s[Wo]}o=u}return i}function qT(t){let e=t[ce],n=e.type;return n===2?e.declTNode:n===1?t[Pt]:null}function dD(t,e=null,n=null,r){let i=zT(t,e,n,r);return i.resolveInjectorInitializers(),i}function zT(t,e=null,n=null,r,i=new Set){let o=[n||Wt,BN(t)];return r=r||(typeof t=="object"?void 0:_t(t)),new La(o,e||$g(),r||null,i)}var yi=class yi{static create(e,n){if(Array.isArray(e))return dD({name:""},n,e,"");{let r=e.name??"";return dD({name:r},e.parent,e.providers,r)}}};yi.THROW_IF_NOT_FOUND=Oa,yi.NULL=new xl,yi.\u0275prov=W({token:yi,providedIn:"any",factory:()=>L(qD)}),yi.__NG_ELEMENT_ID__=-1;var Nt=yi;var UP=new z("");UP.__NG_ELEMENT_ID__=t=>{let e=kt();if(e===null)throw new J(204,!1);if(e.type&2)return e.value;if(t&le.Optional)return null;throw new J(204,!1)};var BP="ngOriginalError";function Pp(t){return t[BP]}var HT=!0,em=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=$P,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),tg=class extends em{constructor(e){super(),this._lView=e}onDestroy(e){return yT(this._lView,e),()=>lP(this._lView,e)}};function $P(){return new tg(Ie())}var Zn=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ot(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=W({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();var ng=class extends je{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,oT()&&(this.destroyRef=V(em,{optional:!0})??void 0,this.pendingTasks=V(Zn,{optional:!0})??void 0)}emit(e){let n=ye(null);try{super.next(e)}finally{ye(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Le&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},ht=ng;function Vl(...t){}function GT(t){let e,n;function r(){t=Vl;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function hD(t){return queueMicrotask(()=>t()),()=>{t=Vl}}var tm="isAngularZone",jl=tm+"_ID",qP=0,he=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ht(!1),this.onMicrotaskEmpty=new ht(!1),this.onStable=new ht(!1),this.onError=new ht(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=HT}=e;if(typeof Zone>"u")throw new J(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,GP(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(tm)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new J(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new J(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,zP,Vl,Vl);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},zP={};function nm(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function HP(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){GT(()=>{t.callbackScheduled=!1,rg(t),t.isCheckStableRunning=!0,nm(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),rg(t)}function GP(t){let e=()=>{HP(t)},n=qP++;t._inner=t._inner.fork({name:"angular",properties:{[tm]:!0,[jl]:n,[jl+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(WP(u))return r.invokeTask(o,s,a,u);try{return fD(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),pD(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return fD(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!KP(u)&&e(),pD(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,rg(t),nm(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function rg(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function fD(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function pD(t){t._nesting--,nm(t)}var Ul=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ht,this.onMicrotaskEmpty=new ht,this.onStable=new ht,this.onError=new ht}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function WP(t){return WT(t,"__ignore_ng_zone__")}function KP(t){return WT(t,"__scheduler_tick__")}function WT(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}function QP(t="zone.js",e){return t==="noop"?new Ul:t==="zone.js"?new he(e):t}var Hn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Pp(e);for(;n&&Pp(n);)n=Pp(n);return n||null}},YP=new z("",{providedIn:"root",factory:()=>{let t=V(he),e=V(Hn);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function ZP(){return Qo(kt(),Ie())}function Qo(t,e){return new Nr(ln(t,e))}var Nr=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=ZP;let t=e;return t})();function JP(t){return t instanceof Nr?t.nativeElement:t}function XP(){return this._results[Symbol.iterator]()}var ig=class t{get changes(){return this._changes??=new ht}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=XP)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=wN(e);(this._changesDetected=!vN(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function KT(t){return(t.flags&128)===128}var QT=new Map,ek=0;function tk(){return ek++}function nk(t){QT.set(t[nd],t)}function og(t){QT.delete(t[nd])}var gD="__ngContext__";function Ci(t,e){br(e)?(t[gD]=e[nd],nk(e)):t[gD]=e}function YT(t){return JT(t[ja])}function ZT(t){return JT(t[an])}function JT(t){for(;t!==null&&!Yn(t);)t=t[an];return t}var sg;function XT(t){sg=t}function rk(){if(sg!==void 0)return sg;if(typeof document<"u")return document;throw new J(210,!1)}var ad=new z("",{providedIn:"root",factory:()=>ik}),ik="ng",rm=new z(""),nt=new z("",{providedIn:"platform",factory:()=>"unknown"});var im=new z("",{providedIn:"root",factory:()=>rk().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var ok="h",sk="b";var ak=()=>null;function om(t,e,n=!1){return ak(t,e,n)}var eb=!1,uk=new z("",{providedIn:"root",factory:()=>eb});var Bl=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${MD})`}};function ud(t){return t instanceof Bl?t.changingThisBreaksApplicationSecurity:t}function tb(t,e){let n=ck(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${MD})`)}return n===e}function ck(t){return t instanceof Bl&&t.getTypeName()||null}var lk=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function nb(t){return t=String(t),t.match(lk)?t:"unsafe:"+t}var sm=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(sm||{});function xG(t){let e=dk();return e?e.sanitize(sm.URL,t)||"":tb(t,"URL")?ud(t):nb(Fg(t))}function dk(){let t=Ie();return t&&t[_n].sanitizer}function MG(t){return t.ownerDocument}function rb(t){return t instanceof Function?t():t}function hk(t){return(t??V(Nt)).get(nt)==="browser"}var Gn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Gn||{}),fk;function am(t,e){return fk(t,e)}function xo(t,e,n,r,i){if(r!=null){let o,s=!1;Yn(r)?o=r:br(r)&&(s=!0,r=r[Qn]);let a=Dn(r);t===0&&n!==null?i==null?cb(e,n,a):$l(e,n,a,i||null,!0):t===1&&n!==null?$l(e,n,a,i||null,!0):t===2?Ck(e,a,s):t===3&&e.destroyNode(a),o!=null&&Ak(e,t,o,n,i)}}function pk(t,e){return t.createText(e)}function gk(t,e,n){t.setValue(e,n)}function ib(t,e,n){return t.createElement(e,n)}function mk(t,e){ob(t,e),e[Qn]=null,e[Pt]=null}function yk(t,e,n,r,i,o){r[Qn]=i,r[Pt]=e,cd(t,r,n,1,i,o)}function ob(t,e){e[_n].changeDetectionScheduler?.notify(9),cd(t,e,e[Xe],2,null,null)}function vk(t){let e=t[ja];if(!e)return kp(t[ce],t);for(;e;){let n=null;if(br(e))n=e[ja];else{let r=e[Vt];r&&(n=r)}if(!n){for(;e&&!e[an]&&e!==t;)br(e)&&kp(e[ce],e),e=e[ft];e===null&&(e=t),br(e)&&kp(e[ce],e),n=e&&e[an]}e=n}}function wk(t,e,n,r){let i=Vt+r,o=n.length;r>0&&(n[i-1][an]=e),r<o-Vt?(e[an]=n[i],$D(n,Vt+r,e)):(n.push(e),e[an]=null),e[ft]=n;let s=e[Ii];s!==null&&n!==s&&sb(s,e);let a=e[zn];a!==null&&a.insertView(t),Qp(e),e[te]|=128}function sb(t,e){let n=t[jo],r=e[ft];if(br(r))t[te]|=Pl.HasTransplantedViews;else{let i=r[ft][Qt];e[Qt]!==i&&(t[te]|=Pl.HasTransplantedViews)}n===null?t[jo]=[e]:n.push(e)}function um(t,e){let n=t[jo],r=n.indexOf(e);n.splice(r,1)}function ag(t,e){if(t.length<=Vt)return;let n=Vt+e,r=t[n];if(r){let i=r[Ii];i!==null&&i!==t&&um(i,r),e>0&&(t[n-1][an]=r[an]);let o=Rl(t,Vt+e);mk(r[ce],r);let s=o[zn];s!==null&&s.detachView(o[ce]),r[ft]=null,r[an]=null,r[te]&=-129}return r}function ab(t,e){if(!(e[te]&256)){let n=e[Xe];n.destroyNode&&cd(t,e,n,3,null,null),vk(e)}}function kp(t,e){if(e[te]&256)return;let n=ye(null);try{e[te]&=-129,e[te]|=256,e[Kt]&&ap(e[Kt]),Ek(t,e),Ik(t,e),e[ce].type===1&&e[Xe].destroy();let r=e[Ii];if(r!==null&&Yn(e[ft])){r!==e[ft]&&um(r,e);let i=e[zn];i!==null&&i.detachView(t)}og(e)}finally{ye(n)}}function Ik(t,e){let n=t.cleanup,r=e[Ml];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[Ml]=null);let i=e[Tr];if(i!==null){e[Tr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function Ek(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Ti)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];wn(4,a,u);try{u.call(a)}finally{wn(5,a,u)}}else{wn(4,i,o);try{o.call(i)}finally{wn(5,i,o)}}}}}function ub(t,e,n){return _k(t,e.parent,n)}function _k(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Qn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===En.None||o===En.Emulated)return null}return ln(r,n)}}function $l(t,e,n,r,i){t.insertBefore(e,n,r,i)}function cb(t,e,n){t.appendChild(e,n)}function mD(t,e,n,r,i){r!==null?$l(t,e,n,r,i):cb(t,e,n)}function lb(t,e){return t.parentNode(e)}function Dk(t,e){return t.nextSibling(e)}function db(t,e,n){return bk(t,e,n)}function Tk(t,e,n){return t.type&40?ln(t,n):null}var bk=Tk,yD;function cm(t,e,n,r){let i=ub(t,r,e),o=e[Xe],s=r.parent||e[Pt],a=db(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)mD(o,i,n[u],a,!1);else mD(o,i,n,a,!1);yD!==void 0&&yD(o,r,e,n,i)}function Na(t,e){if(e!==null){let n=e.type;if(n&3)return ln(e,t);if(n&4)return ug(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Na(t,r);{let i=t[e.index];return Yn(i)?ug(-1,i):Dn(i)}}else{if(n&128)return Na(t,e.next);if(n&32)return am(e,t)()||Dn(t[e.index]);{let r=hb(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=_i(t[Qt]);return Na(i,r)}else return Na(t,e.next)}}}return null}function hb(t,e){if(e!==null){let r=t[Qt][Pt],i=e.projection;return r.projection[i]}return null}function ug(t,e){let n=Vt+t+1;if(n<e.length){let r=e[n],i=r[ce].firstChild;if(i!==null)return Na(r,i)}return e[Ei]}function Ck(t,e,n){t.removeChild(null,e,n)}function lm(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(s&&e===0&&(a&&Ci(Dn(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)lm(t,e,n.child,r,i,o,!1),xo(e,t,i,a,o);else if(u&32){let l=am(n,r),d;for(;d=l();)xo(e,t,i,d,o);xo(e,t,i,a,o)}else u&16?fb(t,e,r,n,i,o):xo(e,t,i,a,o);n=s?n.projectionNext:n.next}}function cd(t,e,n,r,i,o){lm(n,r,t.firstChild,e,i,o,!1)}function Sk(t,e,n){let r=e[Xe],i=ub(t,n,e),o=n.parent||e[Pt],s=db(o,n,e);fb(r,0,e,n,i,s)}function fb(t,e,n,r,i,o){let s=n[Qt],u=s[Pt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let d=u[l];xo(e,t,i,d,o)}else{let l=u,d=s[ft];KT(r)&&(l.flags|=128),lm(t,e,l,d,i,o,!0)}}function Ak(t,e,n,r,i){let o=n[Ei],s=Dn(n);o!==s&&xo(e,t,r,o,i);for(let a=Vt;a<n.length;a++){let u=n[a];cd(u[ce],u,t,e,r,o)}}function Rk(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Gn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Gn.Important),t.setStyle(n,r,i,o))}}function xk(t,e,n){t.setAttribute(e,"style",n)}function pb(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function gb(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&qp(t,e,r),i!==null&&pb(t,e,i),o!==null&&xk(t,e,o)}var Mi={};function NG(t=1){mb(Ct(),Ie(),Ko()+t,!1)}function mb(t,e,n,r){if(!r)if((e[te]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Dl(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Tl(e,o,0,n)}Di(n)}function Zt(t,e=le.Default){let n=Ie();if(n===null)return L(t,e);let r=kt();return BT(r,n,Et(t),e)}function yb(){let t="invalid";throw new Error(t)}function vb(t,e,n,r,i,o){let s=ye(null);try{let a=null;i&Cr.SignalBased&&(a=e[r][jn]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Cr.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):cT(e,a,r,o)}finally{ye(s)}}function Mk(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Di(~i);else{let o=i,s=n[++r],a=n[++r];EP(s,o);let u=e[o];a(2,u)}}}finally{Di(-1)}}function ld(t,e,n,r,i,o,s,a,u,l,d){let f=e.blueprint.slice();return f[Qn]=i,f[te]=r|4|128|8|64,(l!==null||t&&t[te]&2048)&&(f[te]|=2048),gT(f),f[ft]=f[Wo]=t,f[un]=n,f[_n]=s||t&&t[_n],f[Xe]=a||t&&t[Xe],f[Vo]=u||t&&t[Vo]||null,f[Pt]=o,f[nd]=tk(),f[Va]=d,f[sT]=l,f[Qt]=e.type==2?t[Qt]:f,f}function Ha(t,e,n,r,i){let o=t.data[e];if(o===null)o=Nk(t,e,n,r,i),IP()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=mP();o.injectorIndex=s===null?-1:s.injectorIndex}return za(o,!0),o}function Nk(t,e,n,r,i){let o=ET(),s=_T(),a=s?o:o&&o.parent,u=t.data[e]=Vk(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function wb(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Ib(t,e,n,r,i){let o=Ko(),s=r&2;try{Di(-1),s&&e.length>cn&&mb(t,e,cn,!1),wn(s?2:0,i),n(r,i)}finally{Di(o),wn(s?3:1,i)}}function Eb(t,e,n){if(uT(e)){let r=ye(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{ye(r)}}}function _b(t,e,n){wT()&&(zk(t,e,n,ln(n,e)),(n.flags&64)===64&&Ab(t,e,n))}function Db(t,e,n=ln){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function Tb(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=dm(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function dm(t,e,n,r,i,o,s,a,u,l,d){let f=cn+r,g=f+i,y=Pk(f,g),_=typeof l=="function"?l():l;return y[ce]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:_,incompleteFirstPass:!1,ssrId:d}}function Pk(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Mi);return n}function kk(t,e,n,r){let o=r.get(uk,eb)||n===En.ShadowDom,s=t.selectRootElement(e,o);return Ok(s),s}function Ok(t){Fk(t)}var Fk=()=>null;function Lk(t,e,n,r){let i=Mb(e);i.push(n),t.firstCreatePass&&Nb(t).push(r,i.length-1)}function Vk(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return IT()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function vD(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=Cr.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}t===0?wD(r,n,l,a,u):wD(r,n,l,a)}return r}function wD(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function jk(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],u=null,l=null;for(let d=r;d<i;d++){let f=o[d],g=n?n.get(f):null,y=g?g.inputs:null,_=g?g.outputs:null;u=vD(0,f.inputs,d,u,y),l=vD(1,f.outputs,d,l,_);let A=u!==null&&s!==null&&!Ug(e)?Xk(u,d,s):null;a.push(A)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function Uk(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function bb(t,e,n,r,i,o,s,a){let u=ln(e,n),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(hm(t,n,d,r,i),rd(e)&&Bk(n,e.index)):e.type&3?(r=Uk(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function Bk(t,e){let n=Mr(e,t);n[te]&16||(n[te]|=64)}function Cb(t,e,n,r){if(wT()){let i=r===null?null:{"":-1},o=Gk(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&Sb(t,e,n,s,i,a),i&&Wk(n,r,i)}n.mergedAttrs=Fa(n.mergedAttrs,n.attrs)}function Sb(t,e,n,r,i,o){for(let l=0;l<r.length;l++)Xp(Ll(n,e),t,r[l].type);Qk(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,u=wb(t,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];n.mergedAttrs=Fa(n.mergedAttrs,d.hostAttrs),Yk(t,n,e,u,d),Kk(u,d,i),d.contentQueries!==null&&(n.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(n.flags|=64);let f=d.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}jk(t,n,o)}function $k(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;qk(s)!=a&&s.push(a),s.push(n,r,o)}}function qk(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function zk(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;rd(n)&&Zk(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Ll(n,e),Ci(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let u=t.data[a],l=bi(e,t,a,n);if(Ci(l,e),s!==null&&Jk(e,a-i,l,u,n,s),Ar(u)){let d=Mr(n.index,e);d[un]=bi(e,t,a,n)}}}function Ab(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=_P();try{Di(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];Yp(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&Hk(u,l)}}finally{Di(-1),Yp(s)}}function Hk(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Gk(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(WD(e,s.selectors,!1))if(r||(r=[]),Ar(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;cg(t,e,u)}else r.unshift(s),cg(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function cg(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Wk(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new J(-301,!1);r.push(e[i],o)}}}function Kk(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Ar(e)&&(n[""]=t)}}function Qk(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Yk(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=ko(i.type,!0)),s=new Ti(o,Ar(i),Zt);t.blueprint[r]=s,n[r]=s,$k(t,e,r,wb(t,n,i.hostVars,Mi),i)}function Zk(t,e,n){let r=ln(e,t),i=Tb(n),o=t[_n].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=dd(t,ld(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function Jk(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],d=s[a++],f=s[a++];vb(r,n,u,l,d,f)}}function Xk(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function Rb(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function xb(t,e){let n=t.contentQueries;if(n!==null){let r=ye(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Gg(o),a.contentQueries(2,e[s],s)}}}finally{ye(r)}}}function dd(t,e){return t[ja]?t[iD][an]=e:t[ja]=e,t[iD]=e,e}function lg(t,e,n){Gg(0);let r=ye(null);try{e(t,n)}finally{ye(r)}}function Mb(t){return t[Ml]??=[]}function Nb(t){return t.cleanup??=[]}function Pb(t,e){let n=t[Vo],r=n?n.get(Hn,null):null;r&&r.handleError(e)}function hm(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],u=n[o++],l=e[s],d=t.data[s];vb(d,l,r,a,u,i)}}function eO(t,e,n){let r=fT(e,t);gk(t[Xe],r,n)}function tO(t,e){let n=Mr(e,t),r=n[ce];nO(r,n);let i=n[Qn];i!==null&&n[Va]===null&&(n[Va]=om(i,n[Vo])),fm(r,n,n[un])}function nO(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function fm(t,e,n){Wg(e);try{let r=t.viewQuery;r!==null&&lg(1,r,n);let i=t.template;i!==null&&Ib(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[zn]?.finishViewCreation(t),t.staticContentQueries&&xb(t,e),t.staticViewQueries&&lg(2,t.viewQuery,n);let o=t.components;o!==null&&rO(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[te]&=-5,Kg()}}function rO(t,e){for(let n=0;n<e.length;n++)tO(t,e[n])}function kb(t,e,n,r){let i=ye(null);try{let o=e.tView,a=t[te]&4096?4096:16,u=ld(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Ii]=l;let d=t[zn];return d!==null&&(u[zn]=d.createEmbeddedView(o)),fm(o,u,n),u}finally{ye(i)}}function dg(t,e){return!e||e.firstChild===null||KT(t)}function Ob(t,e,n,r=!0){let i=e[ce];if(wk(i,e,t,n),r){let s=ug(n,t),a=e[Xe],u=lb(a,t[Ei]);u!==null&&yk(i,t[Pt],a,e,u,s)}let o=e[Va];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function ql(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(Dn(o)),Yn(o)&&iO(o,r);let s=n.type;if(s&8)ql(t,e,n.child,r);else if(s&32){let a=am(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=hb(e,n);if(Array.isArray(a))r.push(...a);else{let u=_i(e[Qt]);ql(u[ce],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function iO(t,e){for(let n=Vt;n<t.length;n++){let r=t[n],i=r[ce].firstChild;i!==null&&ql(r[ce],r,i,e)}t[Ei]!==t[Qn]&&e.push(t[Ei])}var Fb=[];function oO(t){return t[Kt]??sO(t)}function sO(t){let e=Fb.pop()??Object.create(uO);return e.lView=t,e}function aO(t){t.lView[Kt]!==t&&(t.lView=null,Fb.push(t))}var uO=De(H({},ba),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{sd(t.lView)},consumerOnSignalRead(){this.lView[Kt]=this}});function cO(t){let e=t[Kt]??Object.create(lO);return e.lView=t,e}var lO=De(H({},ba),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=_i(t.lView);for(;e&&!Lb(e[ce]);)e=_i(e);e&&mT(e)},consumerOnSignalRead(){this.lView[Kt]=this}});function Lb(t){return t.type!==2}var dO=100;function Vb(t,e=!0,n=0){let r=t[_n],i=r.rendererFactory,o=!1;o||i.begin?.();try{hO(t,n)}catch(s){throw e&&Pb(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function hO(t,e){let n=TT();try{sD(!0),hg(t,e);let r=0;for(;od(t);){if(r===dO)throw new J(103,!1);r++,hg(t,1)}}finally{sD(n)}}function fO(t,e,n,r){let i=e[te];if((i&256)===256)return;let o=!1,s=!1;!o&&e[_n].inlineEffectRunner?.flush(),Wg(e);let a=!0,u=null,l=null;o||(Lb(t)?(l=oO(e),u=Bc(l)):f_()===null?(a=!1,l=cO(e),u=Bc(l)):e[Kt]&&(ap(e[Kt]),e[Kt]=null));try{gT(e),vP(t.bindingStartIndex),n!==null&&Ib(t,e,n,2,r);let d=(i&3)===3;if(!o)if(d){let y=t.preOrderCheckHooks;y!==null&&Dl(e,y,null)}else{let y=t.preOrderHooks;y!==null&&Tl(e,y,0,null),xp(e,0)}if(s||pO(e),jb(e,0),t.contentQueries!==null&&xb(t,e),!o)if(d){let y=t.contentCheckHooks;y!==null&&Dl(e,y)}else{let y=t.contentHooks;y!==null&&Tl(e,y,1),xp(e,1)}Mk(t,e);let f=t.components;f!==null&&Bb(e,f,0);let g=t.viewQuery;if(g!==null&&lg(2,g,r),!o)if(d){let y=t.viewCheckHooks;y!==null&&Dl(e,y)}else{let y=t.viewHooks;y!==null&&Tl(e,y,2),xp(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Rp]){for(let y of e[Rp])y();e[Rp]=null}o||(e[te]&=-73)}catch(d){throw o||sd(e),d}finally{l!==null&&(op(l,u),a&&aO(l)),Kg()}}function jb(t,e){for(let n=YT(t);n!==null;n=ZT(n))for(let r=Vt;r<n.length;r++){let i=n[r];Ub(i,e)}}function pO(t){for(let e=YT(t);e!==null;e=ZT(e)){if(!(e[te]&Pl.HasTransplantedViews))continue;let n=e[jo];for(let r=0;r<n.length;r++){let i=n[r];mT(i)}}}function gO(t,e,n){let r=Mr(e,t);Ub(r,n)}function Ub(t,e){zg(t)&&hg(t,e)}function hg(t,e){let r=t[ce],i=t[te],o=t[Kt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&sp(o)),s||=!1,o&&(o.dirty=!1),t[te]&=-9217,s)fO(r,t,r.template,t[un]);else if(i&8192){jb(t,1);let a=r.components;a!==null&&Bb(t,a,1)}}function Bb(t,e,n){for(let r=0;r<e.length;r++)gO(t,e[r],n)}function pm(t,e){let n=TT()?64:1088;for(t[_n].changeDetectionScheduler?.notify(e);t;){t[te]|=n;let r=_i(t);if(Wp(t)&&!r)return t;t=r}return null}var Si=class{get rootNodes(){let e=this._lView,n=e[ce];return ql(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[un]}set context(e){this._lView[un]=e}get destroyed(){return(this._lView[te]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ft];if(Yn(e)){let n=e[Nl],r=n?n.indexOf(this):-1;r>-1&&(ag(e,r),Rl(n,r))}this._attachedToViewContainer=!1}ab(this._lView[ce],this._lView)}onDestroy(e){yT(this._lView,e)}markForCheck(){pm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[te]&=-129}reattach(){Qp(this._lView),this._lView[te]|=128}detectChanges(){this._lView[te]|=1024,Vb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new J(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Wp(this._lView),n=this._lView[Ii];n!==null&&!e&&um(n,this._lView),ob(this._lView[ce],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new J(902,!1);this._appRef=e;let n=Wp(this._lView),r=this._lView[Ii];r!==null&&!n&&sb(r,this._lView),Qp(this._lView)}},Ai=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=vO;let t=e;return t})(),mO=Ai,yO=class extends mO{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=kb(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Si(i)}};function vO(){return hd(kt(),Ie())}function hd(t,e){return t.type&4?new yO(e,t,Qo(t,e)):null}var kG=new RegExp(`^(\\d+)*(${sk}|${ok})*(.*)`);var wO=()=>null;function fg(t,e){return wO(t,e)}var Uo=class{},$b=new z("",{providedIn:"root",factory:()=>!1});var qb=new z(""),zb=new z(""),pg=class{},zl=class{};function IO(t){let e=Error(`No component factory found for ${_t(t)}.`);return e[EO]=t,e}var EO="ngComponent";var gg=class{resolveComponentFactory(e){throw IO(e)}},bm=class bm{};bm.NULL=new gg;var Bo=bm,$o=class{},fd=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>_O();let t=e;return t})();function _O(){let t=Ie(),e=kt(),n=Mr(e.index,t);return(br(n)?n:t)[Xe]}var DO=(()=>{let e=class e{};e.\u0275prov=W({token:e,providedIn:"root",factory:()=>null});let t=e;return t})();function mg(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=K_(i,a);else if(o==2){let u=a,l=e[++s];r=K_(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Hl=class extends Bo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Sr(e);return new qo(n,this.ngModule)}};function ID(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Cr.None;e?n.push({propName:s,templateName:r,isSignal:(a&Cr.SignalBased)!==0}):n.push({propName:s,templateName:r})}return n}function TO(t){let e=t.toLowerCase();return e==="svg"?iP:e==="math"?oP:null}var qo=class extends zl{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=ID(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return ID(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=FN(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=ye(null);try{i=i||this.ngModule;let s=i instanceof Dt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Zp(e,s):e,u=a.get($o,null);if(u===null)throw new J(407,!1);let l=a.get(DO,null),d=a.get(Uo,null),f={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:d},g=u.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",_=r?kk(g,r,this.componentDef.encapsulation,a):ib(g,y,TO(y)),A=512;this.componentDef.signals?A|=4096:this.componentDef.onPush||(A|=16);let C=null;_!==null&&(C=om(_,a,!0));let P=dm(0,null,null,1,0,null,null,null,null,null,null),j=ld(null,P,null,A,null,null,f,g,a,null,C);Wg(j);let F,B,Z=null;try{let K=this.componentDef,E,v=null;K.findHostDirectiveDefs?(E=[],v=new Map,K.findHostDirectiveDefs(K,E,v),E.push(K)):E=[K];let I=bO(j,_);Z=CO(I,_,K,E,j,f,g),B=pT(P,cn),_&&RO(g,K,_,r),n!==void 0&&xO(B,this.ngContentSelectors,n),F=AO(Z,K,E,v,j,[MO]),fm(P,j,null)}catch(K){throw Z!==null&&og(Z),og(j),K}finally{Kg()}return new yg(this.componentType,F,Qo(B,j),j,B)}finally{ye(o)}}},yg=class extends pg{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Si(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;hm(o[ce],o,i,e,n),this.previousInputValues.set(e,n);let s=Mr(this._tNode.index,o);pm(s,1)}}get injector(){return new wi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function bO(t,e){let n=t[ce],r=cn;return t[r]=e,Ha(n,r,2,"#host",null)}function CO(t,e,n,r,i,o,s){let a=i[ce];SO(r,t,e,s);let u=null;e!==null&&(u=om(e,i[Vo]));let l=o.rendererFactory.createRenderer(e,n),d=16;n.signals?d=4096:n.onPush&&(d=64);let f=ld(i,Tb(n),null,d,i[t.index],t,o,l,null,null,u);return a.firstCreatePass&&cg(a,t,r.length-1),dd(i,f),i[t.index]=f}function SO(t,e,n,r){for(let i of t)e.mergedAttrs=Fa(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(mg(e,e.mergedAttrs,!0),n!==null&&gb(r,n,e))}function AO(t,e,n,r,i,o){let s=kt(),a=i[ce],u=ln(s,i);Sb(a,i,s,n,null,r);for(let d=0;d<n.length;d++){let f=s.directiveStart+d,g=bi(i,a,f,s);Ci(g,i)}Ab(a,i,s),u&&Ci(u,i);let l=bi(i,a,s.directiveStart+s.componentOffset,s);if(t[un]=i[un]=l,o!==null)for(let d of o)d(l,e);return Eb(a,s,i),l}function RO(t,e,n,r){if(r)qp(t,n,["ng-version","18.2.4"]);else{let{attrs:i,classes:o}=LN(e.selectors[0]);i&&qp(t,n,i),o&&o.length>0&&pb(t,n,o.join(" "))}}function xO(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function MO(){let t=kt();Zg(Ie()[ce],t)}var Pr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=NO;let t=e;return t})();function NO(){let t=kt();return Gb(t,Ie())}var PO=Pr,Hb=class extends PO{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Qo(this._hostTNode,this._hostLView)}get injector(){return new wi(this._hostTNode,this._hostLView)}get parentInjector(){let e=Jg(this._hostTNode,this._hostLView);if(OT(e)){let n=Fl(e,this._hostLView),r=Ol(e),i=n[ce].data[r+8];return new wi(i,n)}else return new wi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=ED(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Vt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=fg(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,dg(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!eP(e),a;if(s)a=n;else{let _=n||{};a=_.index,r=_.injector,i=_.projectableNodes,o=_.environmentInjector||_.ngModuleRef}let u=s?e:new qo(Sr(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let A=(s?l:this.parentInjector).get(Dt,null);A&&(o=A)}let d=Sr(u.componentType??{}),f=fg(this._lContainer,d?.id??null),g=f?.firstChild??null,y=u.create(l,i,g,o);return this.insertImpl(y.hostView,a,dg(this._hostTNode,f)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(uP(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[ft],l=new Hb(u,u[Pt],u[ft]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Ob(s,i,o,r),e.attachToViewContainerRef(),$D(Op(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=ED(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=ag(this._lContainer,n);r&&(Rl(Op(this._lContainer),n),ab(r[ce],r))}detach(e){let n=this._adjustIndex(e,-1),r=ag(this._lContainer,n);return r&&Rl(Op(this._lContainer),n)!=null?new Si(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function ED(t){return t[Nl]}function Op(t){return t[Nl]||(t[Nl]=[])}function Gb(t,e){let n,r=e[t.index];return Yn(r)?n=r:(n=Rb(r,e,null,t),e[t.index]=n,dd(e,n)),OO(n,e,t,r),new Hb(n,t,e)}function kO(t,e){let n=t[Xe],r=n.createComment(""),i=ln(e,t),o=lb(n,i);return $l(n,o,r,Dk(n,i),!1),r}var OO=VO,FO=()=>!1;function LO(t,e,n){return FO(t,e,n)}function VO(t,e,n,r){if(t[Ei])return;let i;n.type&8?i=Dn(r):i=kO(e,n),t[Ei]=i}var vg=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},wg=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)gm(e,n).matches!==null&&this.queries[n].setDirty()}},Ig=class{constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=GO(e):this.predicate=e}},Eg=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},_g=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,jO(n,o)),this.matchTNodeWithReadOption(e,n,bl(n,e,o,!1,!1))}else r===Ai?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,bl(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Nr||i===Pr||i===Ai&&n.type&4)this.addMatch(n.index,-2);else{let o=bl(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function jO(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function UO(t,e){return t.type&11?Qo(t,e):t.type&4?hd(t,e):null}function BO(t,e,n,r){return n===-1?UO(e,t):n===-2?$O(t,e,r):bi(t,t[ce],n,e)}function $O(t,e,n){if(n===Nr)return Qo(e,t);if(n===Ai)return hd(e,t);if(n===Pr)return Gb(e,t)}function Wb(t,e,n,r){let i=e[zn].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let d=o[l];a.push(BO(e,d,s[u+1],n.metadata.read))}}i.matches=a}return i.matches}function Dg(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=Wb(t,e,i,n);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],d=e[-u];for(let f=Vt;f<d.length;f++){let g=d[f];g[Ii]===g[ft]&&Dg(g[ce],g,l,r)}if(d[jo]!==null){let f=d[jo];for(let g=0;g<f.length;g++){let y=f[g];Dg(y[ce],y,l,r)}}}}}return r}function qO(t,e){return t[zn].queries[e].queryList}function zO(t,e,n){let r=new ig((n&4)===4);return Lk(t,e,r,r.destroy),(e[zn]??=new wg).queries.push(new vg(r))-1}function HO(t,e,n){let r=Ct();return r.firstCreatePass&&(WO(r,new Ig(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),zO(r,Ie(),e)}function GO(t){return t.split(",").map(e=>e.trim())}function WO(t,e,n){t.queries===null&&(t.queries=new Eg),t.queries.track(new _g(e,n))}function gm(t,e){return t.queries.getByIndex(e)}function KO(t,e){let n=t[ce],r=gm(n,e);return r.crossesNgTemplate?Dg(n,t,e,[]):Wb(n,t,r,e)}var _D=new Set;function Yo(t){_D.has(t)||(_D.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function QO(t){return typeof t=="function"&&t[jn]!==void 0}function FG(t,e){Yo("NgSignals");let n=T_(t),r=n[jn];return e?.equal&&(r.equal=e.equal),n.set=i=>up(r,i),n.update=i=>b_(r,i),n.asReadonly=YO.bind(n),n}function YO(){let t=this[jn];if(t.readonlyFn===void 0){let e=()=>this();e[jn]=t,t.readonlyFn=e}return t.readonlyFn}function Kb(t){return QO(t)&&typeof t.set=="function"}function ZO(t){let e=[],n=new Map;function r(i){let o=n.get(i);if(!o){let s=t(i);n.set(i,o=s.then(t1))}return o}return Gl.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,d=i.styleUrls;i.styleUrls.forEach((f,g)=>{a.push(""),s.push(r(f).then(y=>{a[l+g]=y,d.splice(d.indexOf(f),1),d.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let u=Promise.all(s).then(()=>n1(o));e.push(u)}),XO(),Promise.all(e).then(()=>{})}var Gl=new Map,JO=new Set;function XO(){let t=Gl;return Gl=new Map,t}function e1(){return Gl.size===0}function t1(t){return typeof t=="string"?t:t.text()}function n1(t){JO.delete(t)}function r1(t){return Object.getPrototypeOf(t.prototype).constructor}function i1(t){let e=r1(t.type),n=!0,r=[t];for(;e;){let i;if(Ar(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new J(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=vl(t.inputs),s.inputTransforms=vl(t.inputTransforms),s.declaredInputs=vl(t.declaredInputs),s.outputs=vl(t.outputs);let a=i.hostBindings;a&&c1(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&a1(t,u),l&&u1(t,l),o1(t,i),XM(t.outputs,i.outputs),Ar(i)&&i.data.animation){let d=t.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===i1&&(n=!1)}}e=Object.getPrototypeOf(e)}s1(r)}function o1(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function s1(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Fa(i.hostAttrs,n=Fa(n,i.hostAttrs))}}function vl(t){return t===Oo?{}:t===Wt?[]:t}function a1(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function u1(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function c1(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var Rr=class{},Ua=class{};var Wl=class extends Rr{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Hl(this);let o=JD(e);this._bootstrapComponents=rb(o.bootstrap),this._r3Injector=zT(e,n,[{provide:Rr,useValue:this},{provide:Bo,useValue:this.componentFactoryResolver},...r],_t(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Kl=class extends Ua{constructor(e){super(),this.moduleType=e}create(e){return new Wl(this.moduleType,e,[])}};function l1(t,e,n){return new Wl(t,e,n,!1)}var Tg=class extends Rr{constructor(e){super(),this.componentFactoryResolver=new Hl(this),this.instance=null;let n=new La([...e.providers,{provide:Rr,useValue:this},{provide:Bo,useValue:this.componentFactoryResolver}],e.parent||$g(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function pd(t,e,n=null){return new Tg({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function Qb(t){return h1(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function d1(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function h1(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function Yb(t,e,n){return t[e]=n}function Ri(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function f1(t,e,n,r){let i=Ri(t,e,n);return Ri(t,e+1,r)||i}function p1(t){return(t.flags&32)===32}function g1(t,e,n,r,i,o,s,a,u){let l=e.consts,d=Ha(e,t,4,s||null,a||null);Cb(e,n,d,kl(l,u)),Zg(e,d);let f=d.tView=dm(2,d,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function Zb(t,e,n,r,i,o,s,a,u,l){let d=n+cn,f=e.firstCreatePass?g1(d,e,t,r,i,o,s,a,u):e.data[d];za(f,!1);let g=y1(e,t,f,n);Qg()&&cm(e,t,g,f),Ci(g,t);let y=Rb(g,t,g,f);return t[d]=y,dd(t,y),LO(y,f,t),qg(f)&&_b(e,t,f),u!=null&&Db(t,f,l),f}function m1(t,e,n,r,i,o,s,a){let u=Ie(),l=Ct(),d=kl(l.consts,o);return Zb(u,l,t,e,n,r,i,d,s,a),m1}var y1=v1;function v1(t,e,n,r){return Yg(!0),e[Xe].createComment("")}var Mo=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Mo||{}),Jb=(()=>{let e=class e{constructor(){this.impl=null}execute(){this.impl?.execute()}};e.\u0275prov=W({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})(),vi=class vi{constructor(){this.ngZone=V(he),this.scheduler=V(Uo),this.errorHandler=V(Hn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}execute(){this.executing=!0;for(let e of vi.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&this.sequences.delete(e);for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}};vi.PHASES=[Mo.EarlyRead,Mo.Write,Mo.MixedReadWrite,Mo.Read],vi.\u0275prov=W({token:vi,providedIn:"root",factory:()=>new vi});var bg=vi,Cg=class{constructor(e,n,r,i){this.impl=e,this.hooks=n,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy()}};function mm(t,e){!e?.injector&&JN(mm);let n=e?.injector??V(Nt);return hk(n)?(Yo("NgAfterNextRender"),I1(t,n,e,!0)):E1}function w1(t,e){if(t instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[e]=t,n}else return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function I1(t,e,n,r){let i=e.get(Jb);i.impl??=e.get(bg);let o=n?.phase??Mo.MixedReadWrite,s=new Cg(i.impl,w1(t,o),r,e.get(em));return i.impl.register(s),s}var E1={destroy(){}};function _1(t,e,n,r){return Ri(t,Hg(),n)?e+Fg(n)+r:Mi}function wl(t,e){return t<<17|e<<2}function xi(t){return t>>17&32767}function D1(t){return(t&2)==2}function T1(t,e){return t&131071|e<<17}function Sg(t){return t|2}function zo(t){return(t&131068)>>2}function Fp(t,e){return t&-131069|e<<2}function b1(t){return(t&1)===1}function Ag(t){return t|1}function C1(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=xi(s),u=zo(s);t[r]=n;let l=!1,d;if(Array.isArray(n)){let f=n;d=f[1],(d===null||qa(f,d)>0)&&(l=!0)}else d=n;if(i)if(u!==0){let g=xi(t[a+1]);t[r+1]=wl(g,a),g!==0&&(t[g+1]=Fp(t[g+1],r)),t[a+1]=T1(t[a+1],r)}else t[r+1]=wl(a,0),a!==0&&(t[a+1]=Fp(t[a+1],r)),a=r;else t[r+1]=wl(u,0),a===0?a=r:t[u+1]=Fp(t[u+1],r),u=r;l&&(t[r+1]=Sg(t[r+1])),DD(t,d,r,!0),DD(t,d,r,!1),S1(e,d,t,r,o),s=wl(a,u),o?e.classBindings=s:e.styleBindings=s}function S1(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&qa(o,e)>=0&&(n[r+1]=Ag(n[r+1]))}function DD(t,e,n,r){let i=t[n+1],o=e===null,s=r?xi(i):zo(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];A1(u,e)&&(a=!0,t[s+1]=r?Ag(l):Sg(l)),s=r?xi(l):zo(l)}a&&(t[n+1]=r?Sg(i):Ag(i))}function A1(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?qa(t,e)>=0:!1}function R1(t,e,n){let r=Ie(),i=Hg();if(Ri(r,i,e)){let o=Ct(),s=NT();bb(o,s,r,t,e,r[Xe],n,!1)}return R1}function TD(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";hm(t,n,o[s],s,r)}function Xb(t,e,n){return eC(t,e,n,!1),Xb}function x1(t,e){return eC(t,e,null,!0),x1}function eC(t,e,n,r){let i=Ie(),o=Ct(),s=wP(2);if(o.firstUpdatePass&&N1(o,t,s,r),e!==Mi&&Ri(i,s,e)){let a=o.data[Ko()];L1(o,a,i,i[Xe],t,i[s+1]=V1(e,n),r,s)}}function M1(t,e){return e>=t.expandoStartIndex}function N1(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Ko()],s=M1(t,n);j1(o,r)&&e===null&&!s&&(e=!1),e=P1(i,o,e,r),C1(i,o,e,n,s,r)}}function P1(t,e,n,r){let i=DP(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Lp(null,t,e,n,r),n=Ba(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Lp(i,t,e,n,r),o===null){let u=k1(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Lp(null,t,e,u[1],r),u=Ba(u,e.attrs,r),O1(t,e,r,u))}else o=F1(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function k1(t,e,n){let r=n?e.classBindings:e.styleBindings;if(zo(r)!==0)return t[xi(r)]}function O1(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[xi(i)]=r}function F1(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Ba(r,s,n)}return Ba(r,e.attrs,n)}function Lp(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Ba(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Ba(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),_N(t,s,n?!0:e[++o]))}return t===void 0?null:t}function L1(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],d=b1(l)?bD(u,e,n,i,zo(l),s):void 0;if(!Ql(d)){Ql(o)||D1(l)&&(o=bD(u,null,n,i,a,s));let f=fT(Ko(),n);Rk(r,s,f,i,o)}}function bD(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),d=l?u[1]:u,f=d===null,g=n[i+1];g===Mi&&(g=f?Wt:void 0);let y=f?Sp(g,r):d===r?g:void 0;if(l&&!Ql(y)&&(y=Sp(u,r)),Ql(y)&&(a=y,s))return a;let _=t[i+1];i=s?xi(_):zo(_)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Sp(u,r))}return a}function Ql(t){return t!==void 0}function V1(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=_t(ud(t)))),t}function j1(t,e){return(t.flags&(e?8:16))!==0}function U1(t,e,n,r,i,o){let s=e.consts,a=kl(s,i),u=Ha(e,t,2,r,a);return Cb(e,n,u,kl(s,o)),u.attrs!==null&&mg(u,u.attrs,!1),u.mergedAttrs!==null&&mg(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function tC(t,e,n,r){let i=Ie(),o=Ct(),s=cn+t,a=i[Xe],u=o.firstCreatePass?U1(s,o,i,e,n,r):o.data[s],l=B1(o,i,u,a,e,t);i[s]=l;let d=qg(u);return za(u,!0),gb(a,l,u),!p1(u)&&Qg()&&cm(o,i,l,u),dP()===0&&Ci(l,i),hP(),d&&(_b(o,i,u),Eb(o,u,i)),r!==null&&Db(i,u),tC}function nC(){let t=kt();_T()?DT():(t=t.parent,za(t,!1));let e=t;pP(e)&&gP(),fP();let n=Ct();return n.firstCreatePass&&(Zg(n,t),uT(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&xP(e)&&TD(n,e,Ie(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&MP(e)&&TD(n,e,Ie(),e.stylesWithoutHost,!1),nC}function ym(t,e,n,r){return tC(t,e,n,r),nC(),ym}var B1=(t,e,n,r,i,o)=>(Yg(!0),ib(r,i,CP()));function LG(){return Ie()}var Yl="en-US";var $1=Yl;function q1(t){typeof t=="string"&&($1=t.toLowerCase().replace(/_/g,"-"))}var z1=(t,e,n)=>{};function rC(t,e,n,r){let i=Ie(),o=Ct(),s=kt();return iC(o,i,i[Xe],s,t,e,r),rC}function H1(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Ml],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function iC(t,e,n,r,i,o,s){let a=qg(r),l=t.firstCreatePass&&Nb(t),d=e[un],f=Mb(e),g=!0;if(r.type&3||s){let A=ln(r,e),C=s?s(A):A,P=f.length,j=s?B=>s(Dn(B[r.index])):r.index,F=null;if(!s&&a&&(F=H1(t,e,i,r.index)),F!==null){let B=F.__ngLastListenerFn__||F;B.__ngNextListenerFn__=o,F.__ngLastListenerFn__=o,g=!1}else{o=SD(r,e,d,o),z1(A,i,o);let B=n.listen(C,i,o);f.push(o,B),l&&l.push(i,j,P,P+1)}}else o=SD(r,e,d,o);let y=r.outputs,_;if(g&&y!==null&&(_=y[i])){let A=_.length;if(A)for(let C=0;C<A;C+=2){let P=_[C],j=_[C+1],Z=e[P][j].subscribe(o),K=f.length;f.push(o,Z),l&&l.push(i,r.index,K,-(K+1))}}}function CD(t,e,n,r){let i=ye(null);try{return wn(6,e,n),n(r)!==!1}catch(o){return Pb(t,o),!1}finally{wn(7,e,n),ye(i)}}function SD(t,e,n,r){return function i(o){if(o===Function)return r;let s=t.componentOffset>-1?Mr(t.index,e):e;pm(s,5);let a=CD(e,n,r,o),u=i.__ngNextListenerFn__;for(;u;)a=CD(e,n,u,o)&&a,u=u.__ngNextListenerFn__;return a}}function VG(t=1){return bP(t)}function G1(t,e){let n=null,r=MN(t);for(let i=0;i<e.length;i++){let o=e[i];if(o==="*"){n=i;continue}if(r===null?WD(t,o,!0):kN(r,o))return i}return n}function jG(t){let e=Ie()[Qt][Pt];if(!e.projection){let n=t?t.length:1,r=e.projection=IN(n,null),i=r.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=t?G1(o,t):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function UG(t,e=0,n,r,i,o){let s=Ie(),a=Ct(),u=r?t+1:null;u!==null&&Zb(s,a,u,r,i,o,null,n);let l=Ha(a,cn+t,16,null,n||null);l.projection===null&&(l.projection=e),DT();let f=!s[Va]||IT();s[Qt][Pt].projection[l.projection]===null&&u!==null?W1(s,a,u):f&&(l.flags&32)!==32&&Sk(a,s,l)}function W1(t,e,n){let r=cn+n,i=e.data[r],o=t[r],s=fg(o,i.tView.ssrId),a=kb(t,i,void 0,{dehydratedView:s});Ob(o,a,0,dg(i,s))}function BG(t,e,n){HO(t,e,n)}function K1(t){let e=Ie(),n=Ct(),r=CT();Gg(r+1);let i=gm(n,r);if(t.dirty&&aP(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=KO(e,r);t.reset(o,JP),t.notifyOnChanges()}return!0}return!1}function Q1(){return qO(Ie(),CT())}function $G(t){let e=yP();return sP(e,cn+t)}function qG(t,e=""){let n=Ie(),r=Ct(),i=t+cn,o=r.firstCreatePass?Ha(r,i,1,e,null):r.data[i],s=Y1(r,n,o,e,t);n[i]=s,Qg()&&cm(r,n,s,o),za(o,!1)}var Y1=(t,e,n,r,i)=>(Yg(!0),pk(e[Xe],r));function Z1(t){return oC("",t,""),Z1}function oC(t,e,n){let r=Ie(),i=_1(r,t,e,n);return i!==Mi&&eO(r,Ko(),i),oC}function J1(t,e,n){Kb(e)&&(e=e());let r=Ie(),i=Hg();if(Ri(r,i,e)){let o=Ct(),s=NT();bb(o,s,r,t,e,r[Xe],n,!1)}return J1}function zG(t,e){let n=Kb(t);return n&&t.set(e),n}function X1(t,e){let n=Ie(),r=Ct(),i=kt();return iC(r,n,n[Xe],i,t,e),X1}function eF(t,e,n){let r=Ct();if(r.firstCreatePass){let i=Ar(t);Rg(n,r.data,r.blueprint,i,!0),Rg(e,r.data,r.blueprint,i,!1)}}function Rg(t,e,n,r,i){if(t=Et(t),Array.isArray(t))for(let o=0;o<t.length;o++)Rg(t[o],e,n,r,i);else{let o=Ct(),s=Ie(),a=kt(),u=Lo(t)?t:Et(t.provide),l=iT(t),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(Lo(t)||!t.multi){let y=new Ti(l,i,Zt),_=jp(u,e,i?d:d+g,f);_===-1?(Xp(Ll(a,s),o,u),Vp(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[_]=y,s[_]=y)}else{let y=jp(u,e,d+g,f),_=jp(u,e,d,d+g),A=y>=0&&n[y],C=_>=0&&n[_];if(i&&!C||!i&&!A){Xp(Ll(a,s),o,u);let P=rF(i?nF:tF,n.length,i,r,l);!i&&C&&(n[_].providerFactory=P),Vp(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(P),s.push(P)}else{let P=sC(n[i?_:y],l,!i&&r);Vp(o,t,y>-1?y:_,P)}!i&&r&&C&&n[_].componentProviders++}}}function Vp(t,e,n,r){let i=Lo(e),o=HN(e);if(i||o){let u=(o?Et(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(n);d===-1?l.push(n,[r,u]):l[d+1].push(r,u)}else l.push(n,u)}}}function sC(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function jp(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function tF(t,e,n,r){return xg(this.multi,[])}function nF(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=bi(n,n[ce],this.providerFactory.index,r);o=a.slice(0,s),xg(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],xg(i,o);return o}function xg(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function rF(t,e,n,r,i){let o=new Ti(t,n,Zt);return o.multi=[],o.index=e,o.componentProviders=0,sC(o,i,r&&!n),o}function HG(t,e=[]){return n=>{n.providersResolver=(r,i)=>eF(r,i?i(t):t,e)}}var iF=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=tT(!1,r.type),o=i.length>0?pd([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=W({token:e,providedIn:"environment",factory:()=>new e(L(Dt))});let t=e;return t})();function aC(t){Yo("NgStandalone"),t.getStandaloneInjector=e=>e.get(iF).getOrCreateStandaloneInjector(t)}function GG(t,e,n,r){return oF(Ie(),bT(),t,e,n,r)}function WG(t,e,n,r,i){return sF(Ie(),bT(),t,e,n,r,i)}function uC(t,e){let n=t[e];return n===Mi?void 0:n}function oF(t,e,n,r,i,o){let s=e+n;return Ri(t,s,i)?Yb(t,s+1,o?r.call(o,i):r(i)):uC(t,s+1)}function sF(t,e,n,r,i,o,s){let a=e+n;return f1(t,a,i,o)?Yb(t,a+2,s?r.call(s,i,o):r(i,o)):uC(t,a+2)}function KG(t,e){return hd(t,e)}var Il=null;function aF(t){Il!==null&&(t.defaultEncapsulation!==Il.defaultEncapsulation||t.preserveWhitespaces!==Il.preserveWhitespaces)||(Il=t)}var xr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},gd=new xr("18.2.4");var md=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var vm=new z(""),Ga=new z(""),yd=(()=>{let e=class e{constructor(r,i,o){this._ngZone=r,this.registry=i,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,wm||(uF(o),o.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{he.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,o){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),r()},i)),this._callbacks.push({doneCb:r,timeoutId:s,updateCb:o})}whenStable(r,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,o),this._runCallbacksIfReady()}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,o){return[]}};e.\u0275fac=function(i){return new(i||e)(L(he),L(vd),L(Ga))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),vd=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return wm?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function uF(t){wm=t}var wm;function Wa(t){return!!t&&typeof t.then=="function"}function cC(t){return!!t&&typeof t.subscribe=="function"}var wd=new z(""),lC=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=V(wd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(Wa(s))r.push(s);else if(cC(s)){let a=new Promise((u,l)=>{s.subscribe({complete:u,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Id=new z("");function cF(){D_(()=>{throw new J(600,!1)})}function lF(t){return t.isBoundToModule}var dF=10;function hF(t,e,n){try{let r=n();return Wa(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}function dC(t,e){return Array.isArray(e)?e.reduce(dC,t):H(H({},t),e)}var Jn=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=V(YP),this.afterRenderManager=V(Jb),this.zonelessEnabled=V($b),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new je,this.afterTick=new je,this.componentTypes=[],this.components=[],this.isStable=V(Zn).hasPendingTasks.pipe(ee(r=>!r)),this._injector=V(Dt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let r;return new Promise(i=>{r=this.isStable.subscribe({next:o=>{o&&i()}})}).finally(()=>{r.unsubscribe()})}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof zl;if(!this._injector.get(lC).done){let y=!o&&ZD(r),_=!1;throw new J(405,_)}let a;o?a=r:a=this._injector.get(Bo).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let u=lF(a)?void 0:this._injector.get(Rr),l=i||a.selector,d=a.create(Nt.NULL,[],l,u),f=d.location.nativeElement,g=d.injector.get(vm,null);return g?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),Cl(this.components,d),g?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new J(101,!1);let r=ye(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,ye(r),this.afterTick.next()}}synchronize(){let r=null;this._injector.destroyed||(r=this._injector.get($o,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<dF;)this.synchronizeOnce(r)}synchronizeOnce(r){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:o,notifyErrorHandler:s}of this._views)fF(o,s,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else r?.begin?.(),r?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:r})=>od(r))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Cl(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Id,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Cl(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new J(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Cl(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function fF(t,e,n,r){if(!n&&!od(t))return;Vb(t,e,n&&!r?0:1)}var Mg=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Ed=(()=>{let e=class e{compileModuleSync(r){return new Kl(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=JD(r),s=rb(o.declarations).reduce((a,u)=>{let l=Sr(u);return l&&a.push(new qo(l)),a},[]);return new Mg(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),pF=new z("");function gF(t,e,n){let r=new Kl(n);return Promise.resolve(r)}function AD(t){for(let e=t.length-1;e>=0;e--)if(t[e]!==void 0)return t[e]}var mF=(()=>{let e=class e{constructor(){this.zone=V(he),this.changeDetectionScheduler=V(Uo),this.applicationRef=V(Jn)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function yF({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new he(De(H({},hC()),{scheduleInRootZone:n})),[{provide:he,useFactory:t},{provide:Fo,multi:!0,useFactory:()=>{let r=V(mF,{optional:!0});return()=>r.initialize()}},{provide:Fo,multi:!0,useFactory:()=>{let r=V(vF);return()=>{r.initialize()}}},e===!0?{provide:qb,useValue:!0}:[],{provide:zb,useValue:n??HT}]}function hC(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var vF=(()=>{let e=class e{constructor(){this.subscription=new Le,this.initialized=!1,this.zone=V(he),this.pendingTasks=V(Zn)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{he.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{he.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var wF=(()=>{let e=class e{constructor(){this.appRef=V(Jn),this.taskService=V(Zn),this.ngZone=V(he),this.zonelessEnabled=V($b),this.disableScheduling=V(qb,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Le,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(jl):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(V(zb,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ul||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?hD:GT;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(jl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let r=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(r),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,hD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(r)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function IF(){return typeof $localize<"u"&&$localize.locale||Yl}var Im=new z("",{providedIn:"root",factory:()=>V(Im,le.Optional|le.SkipSelf)||IF()});var Em=new z("");function El(t){return!!t.platformInjector}function EF(t){let e=El(t)?t.r3Injector:t.moduleRef.injector,n=e.get(he);return n.run(()=>{El(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Hn,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),El(t)){let o=()=>e.destroy(),s=t.platformInjector.get(Em);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else t.moduleRef.onDestroy(()=>{Cl(t.allPlatformModules,t.moduleRef),i.unsubscribe()});return hF(r,n,()=>{let o=e.get(lC);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Im,Yl);if(q1(s||Yl),El(t)){let a=e.get(Jn);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return _F(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function _F(t,e){let n=t.injector.get(Jn);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new J(-403,!1);e.push(t)}var fC=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let o=i?.scheduleInRootZone,s=()=>QP(i?.ngZone,De(H({},hC({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing})),{scheduleInRootZone:o})),a=i?.ignoreChangesOutsideZone,u=[yF({ngZoneFactory:s,ignoreChangesOutsideZone:a}),{provide:Uo,useExisting:wF}],l=l1(r.moduleType,this.injector,u);return EF({moduleRef:l,allPlatformModules:this._modules})}bootstrapModule(r,i=[]){let o=dC({},i);return gF(this.injector,o,r).then(s=>this.bootstrapModuleFactory(s,o))}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new J(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(Em,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(i){return new(i||e)(L(Nt))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),ka=null,pC=new z("");function DF(t){if(ka&&!ka.get(pC,!1))throw new J(400,!1);cF(),ka=t;let e=t.get(fC);return CF(t),e}function _m(t,e,n=[]){let r=`Platform: ${e}`,i=new z(r);return(o=[])=>{let s=gC();if(!s||s.injector.get(pC,!1)){let a=[...n,...o,{provide:i,useValue:!0}];t?t(a):DF(TF(a,r))}return bF(i)}}function TF(t=[],e){return Nt.create({name:e,providers:[{provide:td,useValue:"platform"},{provide:Em,useValue:new Set([()=>ka=null])},...t]})}function bF(t){let e=gC();if(!e)throw new J(401,!1);return e}function gC(){return ka?.get(fC)??null}function CF(t){t.get(rm,null)?.forEach(n=>n())}function Dm(){return!1}var Ka=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=SF;let t=e;return t})();function SF(t){return AF(kt(),Ie(),(t&16)===16)}function AF(t,e,n){if(rd(t)&&!n){let r=Mr(t.index,e);return new Si(r,r)}else if(t.type&175){let r=e[Qt];return new Si(r,e)}return null}var Ng=class{constructor(){}supports(e){return Qb(e)}create(e){return new Pg(e)}},RF=(t,e)=>e,Pg=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||RF}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<RD(r,i,o)?n:r,a=RD(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,d=u-i;if(l!=d){for(let g=0;g<l;g++){let y=g<o.length?o[g]:o[g]=0,_=y+g;d<=_&&_<l&&(o[g]=y+1)}let f=s.previousIndex;o[f]=d-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!Qb(e))throw new J(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,d1(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new kg(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Zl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Zl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},kg=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Og=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Zl=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Og,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function RD(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function xD(){return new Tm([new Ng])}var Tm=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||xD()),deps:[[e,new Vg,new Kn]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new J(901,!1)}};e.\u0275prov=W({token:e,providedIn:"root",factory:xD});let t=e;return t})();var mC=_m(null,"core",[]),yC=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(L(Jn))},e.\u0275mod=bt({type:e}),e.\u0275inj=Tt({});let t=e;return t})();var vC=new z("");function wC(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function QG(t,e){Yo("NgSignals");let n=I_(t);return e?.equal&&(n[jn].equal=e.equal),n}function xF(t){let e=ye(null);try{return t()}finally{ye(e)}}function IC(t){let e=Sr(t);if(!e)return null;let n=new qo(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var CC=null;function Ni(){return CC}function SC(t){CC??=t}var _d=class{};var st=new z(""),Mm=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>V(kF),providedIn:"platform"});let t=e;return t})(),AC=new z(""),kF=(()=>{let e=class e extends Mm{constructor(){super(),this._doc=V(st),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ni().getBaseHref(this._doc)}onPopState(r){let i=Ni().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Ni().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Nm(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function EC(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function er(t){return t&&t[0]!=="?"?"?"+t:t}var Pi=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>V(Pm),providedIn:"root"});let t=e;return t})(),RC=new z(""),Pm=(()=>{let e=class e extends Pi{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??V(st).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Nm(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+er(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+er(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+er(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(L(Mm),L(RC,8))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),xC=(()=>{let e=class e extends Pi{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=Nm(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+er(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+er(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(L(Mm),L(RC,8))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),Jo=(()=>{let e=class e{constructor(r){this._subject=new ht,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=LF(EC(_C(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+er(i))}normalize(r){return e.stripTrailingSlash(FF(this._basePath,_C(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+er(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+er(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=er,e.joinWithSlash=Nm,e.stripTrailingSlash=EC,e.\u0275fac=function(i){return new(i||e)(L(Pi))},e.\u0275prov=W({token:e,factory:()=>OF(),providedIn:"root"});let t=e;return t})();function OF(){return new Jo(L(Pi))}function FF(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function _C(t){return t.replace(/\/index.html$/,"")}function LF(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Dd(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Cm=/\s+/,DC=[],I3=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=DC,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(Cm):DC}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(Cm):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let o=this.stateMap.get(r);o!==void 0?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],o=r[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(Cm).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};e.\u0275fac=function(i){return new(i||e)(Zt(Nr),Zt(fd))},e.\u0275dir=Ho({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var Sm=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},E3=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,s,a)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new Sm(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(s===null?void 0:s);else if(s!==null){let u=i.get(s);i.move(u,a),TC(u,o)}});for(let o=0,s=i.length;o<s;o++){let u=i.get(o).context;u.index=o,u.count=s,u.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let s=i.get(o.currentIndex);TC(s,o)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(Zt(Pr),Zt(Ai),Zt(Tm))},e.\u0275dir=Ho({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function TC(t,e){t.context.$implicit=e.item}var _3=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Am,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){bC("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){bC("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(Zt(Pr),Zt(Ai))},e.\u0275dir=Ho({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Am=class{constructor(){this.$implicit=null,this.ngIf=null}};function bC(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${_t(e)}'.`)}var MC=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=bt({type:e}),e.\u0275inj=Tt({});let t=e;return t})(),km="browser",VF="server";function jF(t){return t===km}function kr(t){return t===VF}var NC=(()=>{let e=class e{};e.\u0275prov=W({token:e,providedIn:"root",factory:()=>jF(V(nt))?new Rm(V(st),window):new xm});let t=e;return t})(),Rm=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=UF(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function UF(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var xm=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Zo=class{};var Ya=class{},bd=class{},tr=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var Fm=class{encodeKey(e){return PC(e)}encodeValue(e){return PC(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function $F(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],u=n.get(s)||[];u.push(a),n.set(s,u)}),n}var qF=/%(\d[a-f0-9])/gi,zF={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function PC(t){return encodeURIComponent(t).replace(qF,(e,n)=>zF[n]??e)}function Td(t){return`${t}`}var Fr=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Fm,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=$F(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(Td):[Td(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(Td(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Td(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Lm=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function HF(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function kC(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function OC(t){return typeof Blob<"u"&&t instanceof Blob}function FC(t){return typeof FormData<"u"&&t instanceof FormData}function GF(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Qa=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(HF(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new tr,this.context??=new Lm,!this.params)this.params=new Fr,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),u=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+u+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||kC(this.body)||OC(this.body)||FC(this.body)||GF(this.body)?this.body:this.body instanceof Fr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||FC(this.body)?null:OC(this.body)?this.body.type||null:kC(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Fr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,l=e.headers||this.headers,d=e.params||this.params,f=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((g,y)=>g.set(y,e.setHeaders[y]),l)),e.setParams&&(d=Object.keys(e.setParams).reduce((g,y)=>g.set(y,e.setParams[y]),d)),new t(n,r,s,{params:d,headers:l,context:f,reportProgress:u,responseType:i,withCredentials:a,transferCache:o})}},Lr=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Lr||{}),Za=class{constructor(e,n=200,r="OK"){this.headers=e.headers||new tr,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Cd=class t extends Za{constructor(e={}){super(e),this.type=Lr.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Ja=class t extends Za{constructor(e={}){super(e),this.type=Lr.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Or=class extends Za{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},BC=200,WF=204;function Om(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var KF=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,o={}){let s;if(r instanceof Qa)s=r;else{let l;o.headers instanceof tr?l=o.headers:l=new tr(o.headers);let d;o.params&&(o.params instanceof Fr?d=o.params:d=new Fr({fromObject:o.params})),s=new Qa(r,i,o.body!==void 0?o.body:null,{headers:l,context:o.context,params:d,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let a=Y(s).pipe($n(l=>this.handler.handle(l)));if(r instanceof Qa||o.observe==="events")return a;let u=a.pipe(Je(l=>l instanceof Ja));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return u.pipe(ee(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return u.pipe(ee(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return u.pipe(ee(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return u.pipe(ee(l=>l.body))}case"response":return u;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new Fr().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,o={}){return this.request("PATCH",r,Om(o,i))}post(r,i,o={}){return this.request("POST",r,Om(o,i))}put(r,i,o={}){return this.request("PUT",r,Om(o,i))}};e.\u0275fac=function(i){return new(i||e)(L(Ya))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),QF=/^\)\]\}',?\n/,YF="X-Request-URL";function LC(t){if(t.url)return t.url;let e=YF.toLocaleLowerCase();return t.headers.get(e)}var ZF=(()=>{let e=class e{constructor(){this.fetchImpl=V(Vm,{optional:!0})?.fetch??((...r)=>globalThis.fetch(...r)),this.ngZone=V(he)}handle(r){return new ie(i=>{let o=new AbortController;return this.doRequest(r,o.signal,i).then(jm,s=>i.error(new Or({error:s}))),()=>o.abort()})}doRequest(r,i,o){return N(this,null,function*(){let s=this.createRequestInit(r),a;try{let _=this.ngZone.runOutsideAngular(()=>this.fetchImpl(r.urlWithParams,H({signal:i},s)));JF(_),o.next({type:Lr.Sent}),a=yield _}catch(_){o.error(new Or({error:_,status:_.status??0,statusText:_.statusText,url:r.urlWithParams,headers:_.headers}));return}let u=new tr(a.headers),l=a.statusText,d=LC(a)??r.urlWithParams,f=a.status,g=null;if(r.reportProgress&&o.next(new Cd({headers:u,status:f,statusText:l,url:d})),a.body){let _=a.headers.get("content-length"),A=[],C=a.body.getReader(),P=0,j,F,B=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>N(this,null,function*(){for(;;){let{done:K,value:E}=yield C.read();if(K)break;if(A.push(E),P+=E.length,r.reportProgress){F=r.responseType==="text"?(F??"")+(j??=new TextDecoder).decode(E,{stream:!0}):void 0;let v=()=>o.next({type:Lr.DownloadProgress,total:_?+_:void 0,loaded:P,partialText:F});B?B.run(v):v()}}}));let Z=this.concatChunks(A,P);try{let K=a.headers.get("Content-Type")??"";g=this.parseBody(r,Z,K)}catch(K){o.error(new Or({error:K,headers:new tr(a.headers),status:a.status,statusText:a.statusText,url:LC(a)??r.urlWithParams}));return}}f===0&&(f=g?BC:0),f>=200&&f<300?(o.next(new Ja({body:g,headers:u,status:f,statusText:l,url:d})),o.complete()):o.error(new Or({error:g,headers:u,status:f,statusText:l,url:d}))})}parseBody(r,i,o){switch(r.responseType){case"json":let s=new TextDecoder().decode(i).replace(QF,"");return s===""?null:JSON.parse(s);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:o});case"arraybuffer":return i.buffer}}createRequestInit(r){let i={},o=r.withCredentials?"include":void 0;if(r.headers.forEach((s,a)=>i[s]=a.join(",")),r.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!r.headers.has("Content-Type")){let s=r.detectContentTypeHeader();s!==null&&(i["Content-Type"]=s)}return{body:r.serializeBody(),method:r.method,headers:i,credentials:o}}concatChunks(r,i){let o=new Uint8Array(i),s=0;for(let a of r)o.set(a,s),s+=a.length;return o}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),Vm=class{};function jm(){}function JF(t){t.then(jm,jm)}function $C(t,e){return e(t)}function XF(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}function eL(t,e,n){return(r,i)=>Yt(n,()=>e(r,o=>t(o,i)))}var tL=new z(""),Um=new z(""),nL=new z(""),qC=new z("",{providedIn:"root",factory:()=>!0});function rL(){let t=null;return(e,n)=>{t===null&&(t=(V(tL,{optional:!0})??[]).reduceRight(XF,$C));let r=V(Zn);if(V(qC)){let o=r.add();return t(e,n).pipe(_r(()=>r.remove(o)))}else return t(e,n)}}var VC=(()=>{let e=class e extends Ya{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=V(Zn),this.contributeToStability=V(qC)}handle(r){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(Um),...this.injector.get(nL,[])]));this.chain=i.reduceRight((o,s)=>eL(o,s,this.injector),$C)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(r,o=>this.backend.handle(o)).pipe(_r(()=>this.pendingTasks.remove(i)))}else return this.chain(r,i=>this.backend.handle(i))}};e.\u0275fac=function(i){return new(i||e)(L(bd),L(Dt))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})();var iL=/^\)\]\}',?\n/;function oL(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var jC=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new J(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?ve(i.\u0275loadImpl()):Y(null)).pipe(Me(()=>new ie(s=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((C,P)=>a.setRequestHeader(C,P.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let C=r.detectContentTypeHeader();C!==null&&a.setRequestHeader("Content-Type",C)}if(r.responseType){let C=r.responseType.toLowerCase();a.responseType=C!=="json"?C:"text"}let u=r.serializeBody(),l=null,d=()=>{if(l!==null)return l;let C=a.statusText||"OK",P=new tr(a.getAllResponseHeaders()),j=oL(a)||r.url;return l=new Cd({headers:P,status:a.status,statusText:C,url:j}),l},f=()=>{let{headers:C,status:P,statusText:j,url:F}=d(),B=null;P!==WF&&(B=typeof a.response>"u"?a.responseText:a.response),P===0&&(P=B?BC:0);let Z=P>=200&&P<300;if(r.responseType==="json"&&typeof B=="string"){let K=B;B=B.replace(iL,"");try{B=B!==""?JSON.parse(B):null}catch(E){B=K,Z&&(Z=!1,B={error:E,text:B})}}Z?(s.next(new Ja({body:B,headers:C,status:P,statusText:j,url:F||void 0})),s.complete()):s.error(new Or({error:B,headers:C,status:P,statusText:j,url:F||void 0}))},g=C=>{let{url:P}=d(),j=new Or({error:C,status:a.status||0,statusText:a.statusText||"Unknown Error",url:P||void 0});s.error(j)},y=!1,_=C=>{y||(s.next(d()),y=!0);let P={type:Lr.DownloadProgress,loaded:C.loaded};C.lengthComputable&&(P.total=C.total),r.responseType==="text"&&a.responseText&&(P.partialText=a.responseText),s.next(P)},A=C=>{let P={type:Lr.UploadProgress,loaded:C.loaded};C.lengthComputable&&(P.total=C.total),s.next(P)};return a.addEventListener("load",f),a.addEventListener("error",g),a.addEventListener("timeout",g),a.addEventListener("abort",g),r.reportProgress&&(a.addEventListener("progress",_),u!==null&&a.upload&&a.upload.addEventListener("progress",A)),a.send(u),s.next({type:Lr.Sent}),()=>{a.removeEventListener("error",g),a.removeEventListener("abort",g),a.removeEventListener("load",f),a.removeEventListener("timeout",g),r.reportProgress&&(a.removeEventListener("progress",_),u!==null&&a.upload&&a.upload.removeEventListener("progress",A)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(L(Zo))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),zC=new z(""),sL="XSRF-TOKEN",aL=new z("",{providedIn:"root",factory:()=>sL}),uL="X-XSRF-TOKEN",cL=new z("",{providedIn:"root",factory:()=>uL}),Sd=class{},lL=(()=>{let e=class e{constructor(r,i,o){this.doc=r,this.platform=i,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=Dd(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(L(st),L(nt),L(aL))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})();function dL(t,e){let n=t.url.toLowerCase();if(!V(zC)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=V(Sd).getToken(),i=V(cL);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var HC=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(HC||{});function hL(t,e){return{\u0275kind:t,\u0275providers:e}}function fL(...t){let e=[KF,jC,VC,{provide:Ya,useExisting:VC},{provide:bd,useFactory:()=>V(ZF,{optional:!0})??V(jC)},{provide:Um,useValue:dL,multi:!0},{provide:zC,useValue:!0},{provide:Sd,useClass:lL}];for(let n of t)e.push(...n.\u0275providers);return Go(e)}var UC=new z("");function pL(){return hL(HC.LegacyInterceptors,[{provide:UC,useFactory:rL},{provide:Um,useExisting:UC,multi:!0}])}var F3=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=bt({type:e}),e.\u0275inj=Tt({providers:[fL(pL())]});let t=e;return t})();var qm=class extends _d{constructor(){super(...arguments),this.supportsDOMEvents=!0}},zm=class t extends qm{static makeCurrent(){SC(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=gL();return n==null?null:mL(n)}resetBaseElement(){Xa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Dd(document.cookie,e)}},Xa=null;function gL(){return Xa=Xa||document.querySelector("base"),Xa?Xa.getAttribute("href"):null}function mL(t){return new URL(t,document.baseURI).pathname}var Hm=class{addToWindow(e){Wn.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new J(5103,!1);return o},Wn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Wn.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let i=Wn.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};Wn.frameworkStabilizers||(Wn.frameworkStabilizers=[]),Wn.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let i=e.getTestability(n);return i??(r?Ni().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},yL=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),Ad=new z(""),QC=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new J(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(L(Ad),L(he))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),eu=class{constructor(e){this._doc=e}},Bm="ng-app-id",YC=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=kr(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Bm}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(Bm),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Bm,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(L(st),L(ad),L(im,8),L(nt))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),$m={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Wm=/%COMP%/g,ZC="%COMP%",vL=`_nghost-${ZC}`,wL=`_ngcontent-${ZC}`,IL=!0,EL=new z("",{providedIn:"root",factory:()=>IL});function _L(t){return wL.replace(Wm,t)}function DL(t){return vL.replace(Wm,t)}function JC(t,e){return e.map(n=>n.replace(Wm,t))}var GC=(()=>{let e=class e{constructor(r,i,o,s,a,u,l,d=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=u,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=kr(u),this.defaultRenderer=new tu(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===En.ShadowDom&&(i=De(H({},i),{encapsulation:En.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof Rd?o.applyToHost(r):o instanceof nu&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,u=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(i.encapsulation){case En.Emulated:s=new Rd(l,d,i,this.appId,f,a,u,g);break;case En.ShadowDom:return new Gm(l,d,r,i,a,u,this.nonce,g);default:s=new nu(l,d,i,f,a,u,g);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(L(QC),L(YC),L(ad),L(EL),L(st),L(nt),L(he),L(im))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),tu=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS($m[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(WC(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(WC(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new J(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=$m[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=$m[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Gn.DashCase|Gn.Important)?e.style.setProperty(n,r,i&Gn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Gn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Ni().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function WC(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Gm=class extends tu{constructor(e,n,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=JC(i.id,i.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},nu=class extends tu{constructor(e,n,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?JC(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Rd=class extends nu{constructor(e,n,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,n,r,o,s,a,u,l),this.contentAttr=_L(l),this.hostAttr=DL(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},TL=(()=>{let e=class e extends eu{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(L(st))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),bL=(()=>{let e=class e extends eu{constructor(r){super(r),this.delegate=V(vC,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,i,o){return this.delegate.addEventListener(r,i,o)}removeEventListener(r,i,o){return this.delegate.removeEventListener(r,i,o)}};e.\u0275fac=function(i){return new(i||e)(L(st))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),KC=["alt","control","meta","shift"],CL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},SL={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},AL=(()=>{let e=class e extends eu{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ni().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),a="code."),KC.forEach(d=>{let f=i.indexOf(d);f>-1&&(i.splice(f,1),a+=d+".")}),a+=s,i.length!=0||s.length===0)return null;let l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let o=CL[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),KC.forEach(a=>{if(a!==o){let u=SL[a];u(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(L(st))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})();function RL(){zm.makeCurrent()}function xL(){return new Hn}function ML(){return XT(document),document}var NL=[{provide:nt,useValue:km},{provide:rm,useValue:RL,multi:!0},{provide:st,useFactory:ML,deps:[]}],r8=_m(mC,"browser",NL),PL=new z(""),kL=[{provide:Ga,useClass:Hm,deps:[]},{provide:vm,useClass:yd,deps:[he,vd,Ga]},{provide:yd,useClass:yd,deps:[he,vd,Ga]}],OL=[{provide:td,useValue:"root"},{provide:Hn,useFactory:xL,deps:[]},{provide:Ad,useClass:TL,multi:!0,deps:[st,he,nt]},{provide:Ad,useClass:AL,multi:!0,deps:[st]},{provide:Ad,useClass:bL,multi:!0},GC,YC,QC,{provide:$o,useExisting:GC},{provide:Zo,useClass:yL,deps:[]},[]],i8=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:ad,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(L(PL,12))},e.\u0275mod=bt({type:e}),e.\u0275inj=Tt({providers:[...OL,...kL],imports:[MC,yC]});let t=e;return t})();var XC=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(L(st))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var LL="firebase",VL="10.13.1";qt(LL,VL,"app");var Tn=new xr("ANGULARFIRE2_VERSION");function p8(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var jL=(t,e)=>{let n=e?[e]:Lc(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Oi=class{constructor(){return jL(UL)}},UL="app-check";function Xo(){}var xd=class{zone;delegate;constructor(e,n=vp){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},Km=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Xo,{},Xo,Xo)),n.pipe(He({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},es=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new xd(Zone.current)),this.insideAngular=n.run(()=>new xd(Zone.current,Ra)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(L(he))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Md(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function BL(t){return Md().ngZone.runOutsideAngular(()=>t())}function ki(t){return Md().ngZone.run(()=>t())}function St(t){return $L(Md())(t)}function $L(t){return function(n){return n=n.lift(new Km(t.ngZone)),n.pipe(zt(t.outsideAngular),Lt(t.insideAngular))}}var qL=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),ki(()=>t.apply(void 0,r))},e0=(t,e)=>function(){let n,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(n||=ki(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Xo,{},Xo,Xo))),r[o]=qL(r[o],n));let i=BL(()=>t.apply(this,r));if(!e)if(i instanceof ie){let o=Md();return i.pipe(zt(o.outsideAngular),Lt(o.insideAngular))}else return ki(()=>i);return i instanceof ie?i.pipe(St):i instanceof Promise?ki(()=>new Promise((o,s)=>i.then(a=>ki(()=>o(a)),a=>ki(()=>s(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:ki(()=>i)};var ru=class{constructor(e){return e}},Qm=class{constructor(){return Lc()}};function zL(t){return t&&t.length===1?t[0]:new ru(Da())}var Ym=new z("angularfire2._apps"),HL={provide:ru,useFactory:zL,deps:[[new Kn,Ym]]},GL={provide:Qm,deps:[[new Kn,Ym]]};function WL(t){return(e,n)=>{let r=n.get(nt);qt("angularfire",Tn.full,"core"),qt("angularfire",Tn.full,"app"),qt("angular",gd.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new ru(i)}}function T8(t,...e){return Go([HL,GL,{provide:Ym,useFactory:WL(t),multi:!0,deps:[he,Nt,es,...e]}])}var b8=e0(d_,!0);var KL=new Map,QL={activated:!1,tokenObservers:[]},YL={initialized:!1,enabled:!1};function dn(t){return KL.get(t)||Object.assign({},QL)}function s0(){return YL}var ZL="https://content-firebaseappcheck.googleapis.com/v1";var JL="exchangeDebugToken",n0={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},F8=24*60*60*1e3;var Jm=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return N(this,null,function*(){this.stop();try{this.pending=new Jf,this.pending.promise.catch(n=>{}),yield XL(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Jf,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function XL(t){return new Promise(e=>{setTimeout(e,t)})}var eV={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Vr=new c_("appCheck","AppCheck",eV);function a0(t){if(!dn(t).activated)throw Vr.create("use-before-activation",{appName:t.name})}function u0(r,i){return N(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,a)}catch(y){throw Vr.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw Vr.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw Vr.create("fetch-parse-error",{originalErrorMessage:y?.message})}let d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Vr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let f=Number(d[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+f,issuedAtTimeMillis:g}})}function c0(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${ZL}/projects/${n}/apps/${r}:${JL}?key=${i}`,body:{debug_token:e}}}var tV="firebase-app-check-database",nV=1,Xm="firebase-app-check-store";var Nd=null;function rV(){return Nd||(Nd=new Promise((t,e)=>{try{let n=indexedDB.open(tV,nV);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Vr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Xm,{keyPath:"compositeKey"})}}}catch(n){e(Vr.create("storage-open",{originalErrorMessage:n?.message}))}}),Nd)}function iV(t,e){return oV(sV(t),e)}function oV(t,e){return N(this,null,function*(){let r=(yield rV()).transaction(Xm,"readwrite"),o=r.objectStore(Xm).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Vr.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function sV(t){return`${t.options.appId}-${t.name}`}var ey=new Fc("@firebase/app-check");function Zm(t,e){return Oc()?iV(t,e).catch(n=>{ey.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function l0(){return s0().enabled}function d0(){return N(this,null,function*(){let t=s0();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var aV={error:"UNKNOWN_ERROR"};function uV(t){return o_.encodeString(JSON.stringify(t),!1)}function ty(t,e=!1){return N(this,null,function*(){let n=t.app;a0(n);let r=dn(n),i=r.token,o;if(i&&!iu(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(iu(u)?i=u:yield Zm(n,void 0))}if(!e&&i&&iu(i))return{token:i.token};let s=!1;if(l0()){r.exchangeTokenPromise||(r.exchangeTokenPromise=u0(c0(n,yield d0()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield Zm(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield dn(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?ey.warn(u.message):ey.error(u),o=u}let a;return i?o?iu(i)?a={token:i.token,internalError:o}:a=i0(o):(a={token:i.token},r.token=i,yield Zm(n,i)):a=i0(o),s&&hV(n,a),a})}function cV(t){return N(this,null,function*(){let e=t.app;a0(e);let{provider:n}=dn(e);if(l0()){let r=yield d0(),{token:i}=yield u0(c0(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function lV(t,e,n,r){let{app:i}=t,o=dn(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&iu(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),r0(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>r0(t))}function h0(t,e){let n=dn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function r0(t){let{app:e}=t,n=dn(e),r=n.tokenRefresher;r||(r=dV(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function dV(t){let{app:e}=t;return new Jm(()=>N(this,null,function*(){let n=dn(e),r;if(n.token?r=yield ty(t,!0):r=yield ty(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=dn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},n0.RETRIAL_MIN_WAIT,n0.RETRIAL_MAX_WAIT)}function hV(t,e){let n=dn(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function iu(t){return t.expireTimeMillis-Date.now()>0}function i0(t){return{token:uV(aV),error:t}}var ny=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=dn(this.app);for(let n of e)h0(this.app,n.next);return Promise.resolve()}};function fV(t,e){return new ny(t,e)}function pV(t){return{getToken:e=>ty(t,e),getLimitedUseToken:()=>cV(t),addTokenListener:e=>lV(t,"INTERNAL",e),removeTokenListener:e=>h0(t.app,e)}}var gV="@firebase/app-check",mV="0.8.7";var yV="app-check",o0="app-check-internal";function vV(){_a(new di(yV,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return fV(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(o0).initialize()})),_a(new di(o0,t=>{let e=t.getProvider("app-check").getImmediate();return pV(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),qt(gV,mV)}vV();var wV=["localhost","0.0.0.0","127.0.0.1"],K8=typeof window<"u"&&wV.includes(window.location.hostname);var IV="firebase",EV="10.13.1";vt.registerVersion(IV,EV,"app-compat");var _V=["ngOnDestroy"],g0=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{if(t[o])return r?.spy?.get&&r.spy.get(o,t[o]),t[o];if(_V.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(l=>n.run(()=>l)):n.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(d=>{let f=d?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,f),f})})})});var Pd=class{constructor(e){return e}},ts=new z("angularfire2.app.options"),ns=new z("angularfire2.app.name");function ou(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let s=vt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>vt.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;DV("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Pd(s)}var DV=(t,...e)=>{Dm()&&typeof console<"u"&&console[t](...e)},TV={provide:Pd,useFactory:ou,deps:[ts,he,[new Kn,ns]]},o6=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:ts,useValue:n},{provide:ns,useValue:r}]}}constructor(n){vt.registerVersion("angularfire",Tn.full,"core"),vt.registerVersion("angularfire",Tn.full,"app-compat"),vt.registerVersion("angular",gd.full,n.toString())}static \u0275fac=function(r){return new(r||t)(L(nt))};static \u0275mod=bt({type:t});static \u0275inj=Tt({providers:[TV]})}return t})();function kd(t,e,n,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return bV(i,s)||(p0("error",`${e} was already initialized on the ${n} Firebase App with different settings.${CV?" You may need to reload as Firebase is not HMR aware.":""}`),p0("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function bV(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var CV=typeof module<"u"&&!!module.hot,p0=(t,...e)=>{Dm()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var ry=new z("angularfire2.auth.use-emulator"),iy=new z("angularfire2.auth.settings"),oy=new z("angularfire2.auth.tenant-id"),sy=new z("angularfire2.auth.langugage-code"),ay=new z("angularfire2.auth.use-device-language"),uy=new z("angularfire.auth.persistence"),cy=(t,e,n,r,i,o,s,a)=>kd(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[l,d]of Object.entries(s))u.settings[l]=d;return a&&u.setPersistence(a),u},[n,r,i,o,s,a]),su=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,u,l,d,f,g,y){let _=new je,A=Y(void 0).pipe(Lt(s.outsideAngular),Me(()=>o.runOutsideAngular(()=>import("./chunk-ORPU7VCZ.js"))),ee(()=>ou(n,o,r)),ee(C=>cy(C,o,a,l,d,f,u,g)),gl({bufferSize:1,refCount:!1}));if(kr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Y(null);else{A.pipe(Ht()).subscribe();let C=A.pipe(Me(F=>F.getRedirectResult().then(B=>B,()=>null)),St,gl({bufferSize:1,refCount:!1})),P=A.pipe(Me(F=>new ie(B=>({unsubscribe:o.runOutsideAngular(()=>F.onAuthStateChanged(Z=>B.next(Z),Z=>B.error(Z),()=>B.complete()))})))),j=A.pipe(Me(F=>new ie(B=>({unsubscribe:o.runOutsideAngular(()=>F.onIdTokenChanged(Z=>B.next(Z),Z=>B.error(Z),()=>B.complete()))}))));this.authState=C.pipe(ml(P),zt(s.outsideAngular),Lt(s.insideAngular)),this.user=C.pipe(ml(j),zt(s.outsideAngular),Lt(s.insideAngular)),this.idToken=this.user.pipe(Me(F=>F?ve(F.getIdToken()):Y(null))),this.idTokenResult=this.user.pipe(Me(F=>F?ve(F.getIdTokenResult()):Y(null))),this.credential=Ep(C,_,this.authState.pipe(Je(F=>!F))).pipe(ee(F=>F?.user?F:null),zt(s.outsideAngular),Lt(s.insideAngular))}return g0(this,A,o,{spy:{apply:(C,P,j)=>{(C.startsWith("signIn")||C.startsWith("createUser"))&&j.then(F=>_.next(F))}}})}static \u0275fac=function(r){return new(r||t)(L(ts),L(ns,8),L(nt),L(he),L(es),L(ry,8),L(iy,8),L(oy,8),L(sy,8),L(ay,8),L(uy,8),L(Oi,8))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),I6=(()=>{class t{constructor(){vt.registerVersion("angularfire",Tn.full,"auth-compat")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=bt({type:t});static \u0275inj=Tt({providers:[su]})}return t})();var y0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},v0={};var jr,ly;(function(){var t;function e(E,v){function I(){}I.prototype=v.prototype,E.D=v.prototype,E.prototype=new I,E.prototype.constructor=E,E.C=function(D,T,S){for(var w=Array(arguments.length-2),Fn=2;Fn<arguments.length;Fn++)w[Fn-2]=arguments[Fn];return v.prototype[T].apply(D,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,v,I){I||(I=0);var D=Array(16);if(typeof v=="string")for(var T=0;16>T;++T)D[T]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(T=0;16>T;++T)D[T]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=E.g[0],I=E.g[1],T=E.g[2];var S=E.g[3],w=v+(S^I&(T^S))+D[0]+3614090360&4294967295;v=I+(w<<7&4294967295|w>>>25),w=S+(T^v&(I^T))+D[1]+3905402710&4294967295,S=v+(w<<12&4294967295|w>>>20),w=T+(I^S&(v^I))+D[2]+606105819&4294967295,T=S+(w<<17&4294967295|w>>>15),w=I+(v^T&(S^v))+D[3]+3250441966&4294967295,I=T+(w<<22&4294967295|w>>>10),w=v+(S^I&(T^S))+D[4]+4118548399&4294967295,v=I+(w<<7&4294967295|w>>>25),w=S+(T^v&(I^T))+D[5]+1200080426&4294967295,S=v+(w<<12&4294967295|w>>>20),w=T+(I^S&(v^I))+D[6]+2821735955&4294967295,T=S+(w<<17&4294967295|w>>>15),w=I+(v^T&(S^v))+D[7]+4249261313&4294967295,I=T+(w<<22&4294967295|w>>>10),w=v+(S^I&(T^S))+D[8]+1770035416&4294967295,v=I+(w<<7&4294967295|w>>>25),w=S+(T^v&(I^T))+D[9]+2336552879&4294967295,S=v+(w<<12&4294967295|w>>>20),w=T+(I^S&(v^I))+D[10]+4294925233&4294967295,T=S+(w<<17&4294967295|w>>>15),w=I+(v^T&(S^v))+D[11]+2304563134&4294967295,I=T+(w<<22&4294967295|w>>>10),w=v+(S^I&(T^S))+D[12]+1804603682&4294967295,v=I+(w<<7&4294967295|w>>>25),w=S+(T^v&(I^T))+D[13]+4254626195&4294967295,S=v+(w<<12&4294967295|w>>>20),w=T+(I^S&(v^I))+D[14]+2792965006&4294967295,T=S+(w<<17&4294967295|w>>>15),w=I+(v^T&(S^v))+D[15]+1236535329&4294967295,I=T+(w<<22&4294967295|w>>>10),w=v+(T^S&(I^T))+D[1]+4129170786&4294967295,v=I+(w<<5&4294967295|w>>>27),w=S+(I^T&(v^I))+D[6]+3225465664&4294967295,S=v+(w<<9&4294967295|w>>>23),w=T+(v^I&(S^v))+D[11]+643717713&4294967295,T=S+(w<<14&4294967295|w>>>18),w=I+(S^v&(T^S))+D[0]+3921069994&4294967295,I=T+(w<<20&4294967295|w>>>12),w=v+(T^S&(I^T))+D[5]+3593408605&4294967295,v=I+(w<<5&4294967295|w>>>27),w=S+(I^T&(v^I))+D[10]+38016083&4294967295,S=v+(w<<9&4294967295|w>>>23),w=T+(v^I&(S^v))+D[15]+3634488961&4294967295,T=S+(w<<14&4294967295|w>>>18),w=I+(S^v&(T^S))+D[4]+3889429448&4294967295,I=T+(w<<20&4294967295|w>>>12),w=v+(T^S&(I^T))+D[9]+568446438&4294967295,v=I+(w<<5&4294967295|w>>>27),w=S+(I^T&(v^I))+D[14]+3275163606&4294967295,S=v+(w<<9&4294967295|w>>>23),w=T+(v^I&(S^v))+D[3]+4107603335&4294967295,T=S+(w<<14&4294967295|w>>>18),w=I+(S^v&(T^S))+D[8]+1163531501&4294967295,I=T+(w<<20&4294967295|w>>>12),w=v+(T^S&(I^T))+D[13]+2850285829&4294967295,v=I+(w<<5&4294967295|w>>>27),w=S+(I^T&(v^I))+D[2]+4243563512&4294967295,S=v+(w<<9&4294967295|w>>>23),w=T+(v^I&(S^v))+D[7]+1735328473&4294967295,T=S+(w<<14&4294967295|w>>>18),w=I+(S^v&(T^S))+D[12]+2368359562&4294967295,I=T+(w<<20&4294967295|w>>>12),w=v+(I^T^S)+D[5]+4294588738&4294967295,v=I+(w<<4&4294967295|w>>>28),w=S+(v^I^T)+D[8]+2272392833&4294967295,S=v+(w<<11&4294967295|w>>>21),w=T+(S^v^I)+D[11]+1839030562&4294967295,T=S+(w<<16&4294967295|w>>>16),w=I+(T^S^v)+D[14]+4259657740&4294967295,I=T+(w<<23&4294967295|w>>>9),w=v+(I^T^S)+D[1]+2763975236&4294967295,v=I+(w<<4&4294967295|w>>>28),w=S+(v^I^T)+D[4]+1272893353&4294967295,S=v+(w<<11&4294967295|w>>>21),w=T+(S^v^I)+D[7]+4139469664&4294967295,T=S+(w<<16&4294967295|w>>>16),w=I+(T^S^v)+D[10]+3200236656&4294967295,I=T+(w<<23&4294967295|w>>>9),w=v+(I^T^S)+D[13]+681279174&4294967295,v=I+(w<<4&4294967295|w>>>28),w=S+(v^I^T)+D[0]+3936430074&4294967295,S=v+(w<<11&4294967295|w>>>21),w=T+(S^v^I)+D[3]+3572445317&4294967295,T=S+(w<<16&4294967295|w>>>16),w=I+(T^S^v)+D[6]+76029189&4294967295,I=T+(w<<23&4294967295|w>>>9),w=v+(I^T^S)+D[9]+3654602809&4294967295,v=I+(w<<4&4294967295|w>>>28),w=S+(v^I^T)+D[12]+3873151461&4294967295,S=v+(w<<11&4294967295|w>>>21),w=T+(S^v^I)+D[15]+530742520&4294967295,T=S+(w<<16&4294967295|w>>>16),w=I+(T^S^v)+D[2]+3299628645&4294967295,I=T+(w<<23&4294967295|w>>>9),w=v+(T^(I|~S))+D[0]+4096336452&4294967295,v=I+(w<<6&4294967295|w>>>26),w=S+(I^(v|~T))+D[7]+1126891415&4294967295,S=v+(w<<10&4294967295|w>>>22),w=T+(v^(S|~I))+D[14]+2878612391&4294967295,T=S+(w<<15&4294967295|w>>>17),w=I+(S^(T|~v))+D[5]+4237533241&4294967295,I=T+(w<<21&4294967295|w>>>11),w=v+(T^(I|~S))+D[12]+1700485571&4294967295,v=I+(w<<6&4294967295|w>>>26),w=S+(I^(v|~T))+D[3]+2399980690&4294967295,S=v+(w<<10&4294967295|w>>>22),w=T+(v^(S|~I))+D[10]+4293915773&4294967295,T=S+(w<<15&4294967295|w>>>17),w=I+(S^(T|~v))+D[1]+2240044497&4294967295,I=T+(w<<21&4294967295|w>>>11),w=v+(T^(I|~S))+D[8]+1873313359&4294967295,v=I+(w<<6&4294967295|w>>>26),w=S+(I^(v|~T))+D[15]+4264355552&4294967295,S=v+(w<<10&4294967295|w>>>22),w=T+(v^(S|~I))+D[6]+2734768916&4294967295,T=S+(w<<15&4294967295|w>>>17),w=I+(S^(T|~v))+D[13]+1309151649&4294967295,I=T+(w<<21&4294967295|w>>>11),w=v+(T^(I|~S))+D[4]+4149444226&4294967295,v=I+(w<<6&4294967295|w>>>26),w=S+(I^(v|~T))+D[11]+3174756917&4294967295,S=v+(w<<10&4294967295|w>>>22),w=T+(v^(S|~I))+D[2]+718787259&4294967295,T=S+(w<<15&4294967295|w>>>17),w=I+(S^(T|~v))+D[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(T+(w<<21&4294967295|w>>>11))&4294967295,E.g[2]=E.g[2]+T&4294967295,E.g[3]=E.g[3]+S&4294967295}r.prototype.u=function(E,v){v===void 0&&(v=E.length);for(var I=v-this.blockSize,D=this.B,T=this.h,S=0;S<v;){if(T==0)for(;S<=I;)i(this,E,S),S+=this.blockSize;if(typeof E=="string"){for(;S<v;)if(D[T++]=E.charCodeAt(S++),T==this.blockSize){i(this,D),T=0;break}}else for(;S<v;)if(D[T++]=E[S++],T==this.blockSize){i(this,D),T=0;break}}this.h=T,this.o+=v},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;var I=8*this.o;for(v=E.length-8;v<E.length;++v)E[v]=I&255,I/=256;for(this.u(E),E=Array(16),v=I=0;4>v;++v)for(var D=0;32>D;D+=8)E[I++]=this.g[v]>>>D&255;return E};function o(E,v){var I=a;return Object.prototype.hasOwnProperty.call(I,E)?I[E]:I[E]=v(E)}function s(E,v){this.h=v;for(var I=[],D=!0,T=E.length-1;0<=T;T--){var S=E[T]|0;D&&S==v||(I[T]=S,D=!1)}this.g=I}var a={};function u(E){return-128<=E&&128>E?o(E,function(v){return new s([v|0],0>v?-1:0)}):new s([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return f;if(0>E)return C(l(-E));for(var v=[],I=1,D=0;E>=I;D++)v[D]=E/I|0,I*=4294967296;return new s(v,0)}function d(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return C(d(E.substring(1),v));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),D=f,T=0;T<E.length;T+=8){var S=Math.min(8,E.length-T),w=parseInt(E.substring(T,T+S),v);8>S?(S=l(Math.pow(v,S)),D=D.j(S).add(l(w))):(D=D.j(I),D=D.add(l(w)))}return D}var f=u(0),g=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(A(this))return-C(this).m();for(var E=0,v=1,I=0;I<this.g.length;I++){var D=this.i(I);E+=(0<=D?D:4294967296+D)*v,v*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(_(this))return"0";if(A(this))return"-"+C(this).toString(E);for(var v=l(Math.pow(E,6)),I=this,D="";;){var T=B(I,v).g;I=P(I,T.j(v));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(E);if(I=T,_(I))return S+D;for(;6>S.length;)S="0"+S;D=S+D}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function _(E){if(E.h!=0)return!1;for(var v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function A(E){return E.h==-1}t.l=function(E){return E=P(this,E),A(E)?-1:_(E)?0:1};function C(E){for(var v=E.g.length,I=[],D=0;D<v;D++)I[D]=~E.g[D];return new s(I,~E.h).add(g)}t.abs=function(){return A(this)?C(this):this},t.add=function(E){for(var v=Math.max(this.g.length,E.g.length),I=[],D=0,T=0;T<=v;T++){var S=D+(this.i(T)&65535)+(E.i(T)&65535),w=(S>>>16)+(this.i(T)>>>16)+(E.i(T)>>>16);D=w>>>16,S&=65535,w&=65535,I[T]=w<<16|S}return new s(I,I[I.length-1]&-2147483648?-1:0)};function P(E,v){return E.add(C(v))}t.j=function(E){if(_(this)||_(E))return f;if(A(this))return A(E)?C(this).j(C(E)):C(C(this).j(E));if(A(E))return C(this.j(C(E)));if(0>this.l(y)&&0>E.l(y))return l(this.m()*E.m());for(var v=this.g.length+E.g.length,I=[],D=0;D<2*v;D++)I[D]=0;for(D=0;D<this.g.length;D++)for(var T=0;T<E.g.length;T++){var S=this.i(D)>>>16,w=this.i(D)&65535,Fn=E.i(T)>>>16,na=E.i(T)&65535;I[2*D+2*T]+=w*na,j(I,2*D+2*T),I[2*D+2*T+1]+=S*na,j(I,2*D+2*T+1),I[2*D+2*T+1]+=w*Fn,j(I,2*D+2*T+1),I[2*D+2*T+2]+=S*Fn,j(I,2*D+2*T+2)}for(D=0;D<v;D++)I[D]=I[2*D+1]<<16|I[2*D];for(D=v;D<2*v;D++)I[D]=0;return new s(I,0)};function j(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function F(E,v){this.g=E,this.h=v}function B(E,v){if(_(v))throw Error("division by zero");if(_(E))return new F(f,f);if(A(E))return v=B(C(E),v),new F(C(v.g),C(v.h));if(A(v))return v=B(E,C(v)),new F(C(v.g),v.h);if(30<E.g.length){if(A(E)||A(v))throw Error("slowDivide_ only works with positive integers.");for(var I=g,D=v;0>=D.l(E);)I=Z(I),D=Z(D);var T=K(I,1),S=K(D,1);for(D=K(D,2),I=K(I,2);!_(D);){var w=S.add(D);0>=w.l(E)&&(T=T.add(I),S=w),D=K(D,1),I=K(I,1)}return v=P(E,T.j(v)),new F(T,v)}for(T=f;0<=E.l(v);){for(I=Math.max(1,Math.floor(E.m()/v.m())),D=Math.ceil(Math.log(I)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),S=l(I),w=S.j(v);A(w)||0<w.l(E);)I-=D,S=l(I),w=S.j(v);_(S)&&(S=g),T=T.add(S),E=P(E,w)}return new F(T,E)}t.A=function(E){return B(this,E).h},t.and=function(E){for(var v=Math.max(this.g.length,E.g.length),I=[],D=0;D<v;D++)I[D]=this.i(D)&E.i(D);return new s(I,this.h&E.h)},t.or=function(E){for(var v=Math.max(this.g.length,E.g.length),I=[],D=0;D<v;D++)I[D]=this.i(D)|E.i(D);return new s(I,this.h|E.h)},t.xor=function(E){for(var v=Math.max(this.g.length,E.g.length),I=[],D=0;D<v;D++)I[D]=this.i(D)^E.i(D);return new s(I,this.h^E.h)};function Z(E){for(var v=E.g.length+1,I=[],D=0;D<v;D++)I[D]=E.i(D)<<1|E.i(D-1)>>>31;return new s(I,E.h)}function K(E,v){var I=v>>5;v%=32;for(var D=E.g.length-I,T=[],S=0;S<D;S++)T[S]=0<v?E.i(S+I)>>>v|E.i(S+I+1)<<32-v:E.i(S+I);return new s(T,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ly=v0.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=d,jr=v0.Integer=s}).apply(typeof y0<"u"?y0:typeof self<"u"?self:typeof window<"u"?window:{});var Od=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},nr={};var dy,hy,rs,fy,au,Fd,py,gy,my;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,h,p){return c==Array.prototype||c==Object.prototype||(c[h]=p.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Od=="object"&&Od];for(var h=0;h<c.length;++h){var p=c[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(c,h){if(h)e:{var p=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var b=c[m];if(!(b in p))break e;p=p[b]}c=c[c.length-1],m=p[c],h=h(m),h!=m&&h!=null&&e(p,c,{configurable:!0,writable:!0,value:h})}}function o(c,h){c instanceof String&&(c+="");var p=0,m=!1,b={next:function(){if(!m&&p<c.length){var M=p++;return{value:h(M,c[M]),done:!1}}return m=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return o(this,function(h,p){return p})}});var s=s||{},a=this||self;function u(c){var h=typeof c;return h=h!="object"?h:c?Array.isArray(c)?"array":h:"null",h=="array"||h=="object"&&typeof c.length=="number"}function l(c){var h=typeof c;return h=="object"&&c!=null||h=="function"}function d(c,h,p){return c.call.apply(c.bind,arguments)}function f(c,h,p){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,m),c.apply(h,b)}}return function(){return c.apply(h,arguments)}}function g(c,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function y(c,h){var p=Array.prototype.slice.call(arguments,1);return function(){var m=p.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function _(c,h){function p(){}p.prototype=h.prototype,c.aa=h.prototype,c.prototype=new p,c.prototype.constructor=c,c.Qb=function(m,b,M){for(var U=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)U[Te-2]=arguments[Te];return h.prototype[b].apply(m,U)}}function A(c){let h=c.length;if(0<h){let p=Array(h);for(let m=0;m<h;m++)p[m]=c[m];return p}return[]}function C(c,h){for(let p=1;p<arguments.length;p++){let m=arguments[p];if(u(m)){let b=c.length||0,M=m.length||0;c.length=b+M;for(let U=0;U<M;U++)c[b+U]=m[U]}else c.push(m)}}class P{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function j(c){return/^[\s\xa0]*$/.test(c)}function F(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function B(c){return B[" "](c),c}B[" "]=function(){};var Z=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function K(c,h,p){for(let m in c)h.call(p,c[m],m,c)}function E(c,h){for(let p in c)h.call(void 0,c[p],p,c)}function v(c){let h={};for(let p in c)h[p]=c[p];return h}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(c,h){let p,m;for(let b=1;b<arguments.length;b++){m=arguments[b];for(p in m)c[p]=m[p];for(let M=0;M<I.length;M++)p=I[M],Object.prototype.hasOwnProperty.call(m,p)&&(c[p]=m[p])}}function T(c){var h=1;c=c.split(":");let p=[];for(;0<h&&c.length;)p.push(c.shift()),h--;return c.length&&p.push(c.join(":")),p}function S(c){a.setTimeout(()=>{throw c},0)}function w(){var c=Cf;let h=null;return c.g&&(h=c.g,c.g=c.g.next,c.g||(c.h=null),h.next=null),h}class Fn{constructor(){this.h=this.g=null}add(h,p){let m=na.get();m.set(h,p),this.h?this.h.next=m:this.g=m,this.h=m}}var na=new P(()=>new qx,c=>c.reset());class qx{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let ra,ia=!1,Cf=new Fn,tE=()=>{let c=a.Promise.resolve(void 0);ra=()=>{c.then(zx)}};var zx=()=>{for(var c;c=w();){try{c.h.call(c.g)}catch(p){S(p)}var h=na;h.j(c),100>h.h&&(h.h++,c.next=h.g,h.g=c)}ia=!1};function gr(){this.s=this.s,this.C=this.C}gr.prototype.s=!1,gr.prototype.ma=function(){this.s||(this.s=!0,this.N())},gr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ut(c,h){this.type=c,this.g=this.target=h,this.defaultPrevented=!1}ut.prototype.h=function(){this.defaultPrevented=!0};var Hx=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,h=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return c}();function oa(c,h){if(ut.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var p=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=h,h=c.relatedTarget){if(Z){e:{try{B(h.nodeName);var b=!0;break e}catch{}b=!1}b||(h=null)}}else p=="mouseover"?h=c.fromElement:p=="mouseout"&&(h=c.toElement);this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Gx[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&oa.aa.h.call(this)}}_(oa,ut);var Gx={2:"touch",3:"pen",4:"mouse"};oa.prototype.h=function(){oa.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var sa="closure_listenable_"+(1e6*Math.random()|0),Wx=0;function Kx(c,h,p,m,b){this.listener=c,this.proxy=null,this.src=h,this.type=p,this.capture=!!m,this.ha=b,this.key=++Wx,this.da=this.fa=!1}function yc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function vc(c){this.src=c,this.g={},this.h=0}vc.prototype.add=function(c,h,p,m,b){var M=c.toString();c=this.g[M],c||(c=this.g[M]=[],this.h++);var U=Af(c,h,m,b);return-1<U?(h=c[U],p||(h.fa=!1)):(h=new Kx(h,this.src,M,!!m,b),h.fa=p,c.push(h)),h};function Sf(c,h){var p=h.type;if(p in c.g){var m=c.g[p],b=Array.prototype.indexOf.call(m,h,void 0),M;(M=0<=b)&&Array.prototype.splice.call(m,b,1),M&&(yc(h),c.g[p].length==0&&(delete c.g[p],c.h--))}}function Af(c,h,p,m){for(var b=0;b<c.length;++b){var M=c[b];if(!M.da&&M.listener==h&&M.capture==!!p&&M.ha==m)return b}return-1}var Rf="closure_lm_"+(1e6*Math.random()|0),xf={};function nE(c,h,p,m,b){if(m&&m.once)return iE(c,h,p,m,b);if(Array.isArray(h)){for(var M=0;M<h.length;M++)nE(c,h[M],p,m,b);return null}return p=kf(p),c&&c[sa]?c.K(h,p,l(m)?!!m.capture:!!m,b):rE(c,h,p,!1,m,b)}function rE(c,h,p,m,b,M){if(!h)throw Error("Invalid event type");var U=l(b)?!!b.capture:!!b,Te=Nf(c);if(Te||(c[Rf]=Te=new vc(c)),p=Te.add(h,p,m,U,M),p.proxy)return p;if(m=Qx(),p.proxy=m,m.src=c,m.listener=p,c.addEventListener)Hx||(b=U),b===void 0&&(b=!1),c.addEventListener(h.toString(),m,b);else if(c.attachEvent)c.attachEvent(sE(h.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Qx(){function c(p){return h.call(c.src,c.listener,p)}let h=Yx;return c}function iE(c,h,p,m,b){if(Array.isArray(h)){for(var M=0;M<h.length;M++)iE(c,h[M],p,m,b);return null}return p=kf(p),c&&c[sa]?c.L(h,p,l(m)?!!m.capture:!!m,b):rE(c,h,p,!0,m,b)}function oE(c,h,p,m,b){if(Array.isArray(h))for(var M=0;M<h.length;M++)oE(c,h[M],p,m,b);else m=l(m)?!!m.capture:!!m,p=kf(p),c&&c[sa]?(c=c.i,h=String(h).toString(),h in c.g&&(M=c.g[h],p=Af(M,p,m,b),-1<p&&(yc(M[p]),Array.prototype.splice.call(M,p,1),M.length==0&&(delete c.g[h],c.h--)))):c&&(c=Nf(c))&&(h=c.g[h.toString()],c=-1,h&&(c=Af(h,p,m,b)),(p=-1<c?h[c]:null)&&Mf(p))}function Mf(c){if(typeof c!="number"&&c&&!c.da){var h=c.src;if(h&&h[sa])Sf(h.i,c);else{var p=c.type,m=c.proxy;h.removeEventListener?h.removeEventListener(p,m,c.capture):h.detachEvent?h.detachEvent(sE(p),m):h.addListener&&h.removeListener&&h.removeListener(m),(p=Nf(h))?(Sf(p,c),p.h==0&&(p.src=null,h[Rf]=null)):yc(c)}}}function sE(c){return c in xf?xf[c]:xf[c]="on"+c}function Yx(c,h){if(c.da)c=!0;else{h=new oa(h,this);var p=c.listener,m=c.ha||c.src;c.fa&&Mf(c),c=p.call(m,h)}return c}function Nf(c){return c=c[Rf],c instanceof vc?c:null}var Pf="__closure_events_fn_"+(1e9*Math.random()>>>0);function kf(c){return typeof c=="function"?c:(c[Pf]||(c[Pf]=function(h){return c.handleEvent(h)}),c[Pf])}function ct(){gr.call(this),this.i=new vc(this),this.M=this,this.F=null}_(ct,gr),ct.prototype[sa]=!0,ct.prototype.removeEventListener=function(c,h,p,m){oE(this,c,h,p,m)};function mt(c,h){var p,m=c.F;if(m)for(p=[];m;m=m.F)p.push(m);if(c=c.M,m=h.type||h,typeof h=="string")h=new ut(h,c);else if(h instanceof ut)h.target=h.target||c;else{var b=h;h=new ut(m,c),D(h,b)}if(b=!0,p)for(var M=p.length-1;0<=M;M--){var U=h.g=p[M];b=wc(U,m,!0,h)&&b}if(U=h.g=c,b=wc(U,m,!0,h)&&b,b=wc(U,m,!1,h)&&b,p)for(M=0;M<p.length;M++)U=h.g=p[M],b=wc(U,m,!1,h)&&b}ct.prototype.N=function(){if(ct.aa.N.call(this),this.i){var c=this.i,h;for(h in c.g){for(var p=c.g[h],m=0;m<p.length;m++)yc(p[m]);delete c.g[h],c.h--}}this.F=null},ct.prototype.K=function(c,h,p,m){return this.i.add(String(c),h,!1,p,m)},ct.prototype.L=function(c,h,p,m){return this.i.add(String(c),h,!0,p,m)};function wc(c,h,p,m){if(h=c.i.g[String(h)],!h)return!0;h=h.concat();for(var b=!0,M=0;M<h.length;++M){var U=h[M];if(U&&!U.da&&U.capture==p){var Te=U.listener,it=U.ha||U.src;U.fa&&Sf(c.i,U),b=Te.call(it,m)!==!1&&b}}return b&&!m.defaultPrevented}function aE(c,h,p){if(typeof c=="function")p&&(c=g(c,p));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(c,h||0)}function uE(c){c.g=aE(()=>{c.g=null,c.i&&(c.i=!1,uE(c))},c.l);let h=c.h;c.h=null,c.m.apply(null,h)}class Zx extends gr{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:uE(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function aa(c){gr.call(this),this.h=c,this.g={}}_(aa,gr);var cE=[];function lE(c){K(c.g,function(h,p){this.g.hasOwnProperty(p)&&Mf(h)},c),c.g={}}aa.prototype.N=function(){aa.aa.N.call(this),lE(this)},aa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Of=a.JSON.stringify,Jx=a.JSON.parse,Xx=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Ff(){}Ff.prototype.h=null;function dE(c){return c.h||(c.h=c.i())}function hE(){}var ua={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Lf(){ut.call(this,"d")}_(Lf,ut);function Vf(){ut.call(this,"c")}_(Vf,ut);var ai={},fE=null;function Ic(){return fE=fE||new ct}ai.La="serverreachability";function pE(c){ut.call(this,ai.La,c)}_(pE,ut);function ca(c){let h=Ic();mt(h,new pE(h))}ai.STAT_EVENT="statevent";function gE(c,h){ut.call(this,ai.STAT_EVENT,c),this.stat=h}_(gE,ut);function yt(c){let h=Ic();mt(h,new gE(h,c))}ai.Ma="timingevent";function mE(c,h){ut.call(this,ai.Ma,c),this.size=h}_(mE,ut);function la(c,h){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},h)}function da(){this.g=!0}da.prototype.xa=function(){this.g=!1};function eM(c,h,p,m,b,M){c.info(function(){if(c.g)if(M)for(var U="",Te=M.split("&"),it=0;it<Te.length;it++){var we=Te[it].split("=");if(1<we.length){var lt=we[0];we=we[1];var dt=lt.split("_");U=2<=dt.length&&dt[1]=="type"?U+(lt+"="+we+"&"):U+(lt+"=redacted&")}}else U=null;else U=M;return"XMLHTTP REQ ("+m+") [attempt "+b+"]: "+h+`
`+p+`
`+U})}function tM(c,h,p,m,b,M,U){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+b+"]: "+h+`
`+p+`
`+M+" "+U})}function ho(c,h,p,m){c.info(function(){return"XMLHTTP TEXT ("+h+"): "+rM(c,p)+(m?" "+m:"")})}function nM(c,h){c.info(function(){return"TIMEOUT: "+h})}da.prototype.info=function(){};function rM(c,h){if(!c.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(c=0;c<p.length;c++)if(Array.isArray(p[c])){var m=p[c];if(!(2>m.length)){var b=m[1];if(Array.isArray(b)&&!(1>b.length)){var M=b[0];if(M!="noop"&&M!="stop"&&M!="close")for(var U=1;U<b.length;U++)b[U]=""}}}}return Of(p)}catch{return h}}var Ec={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},yE={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},jf;function _c(){}_(_c,Ff),_c.prototype.g=function(){return new XMLHttpRequest},_c.prototype.i=function(){return{}},jf=new _c;function mr(c,h,p,m){this.j=c,this.i=h,this.l=p,this.R=m||1,this.U=new aa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vE}function vE(){this.i=null,this.g="",this.h=!1}var wE={},Uf={};function Bf(c,h,p){c.L=1,c.v=Cc(Ln(h)),c.m=p,c.P=!0,IE(c,null)}function IE(c,h){c.F=Date.now(),Dc(c),c.A=Ln(c.v);var p=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),kE(p.i,"t",m),c.C=0,p=c.j.J,c.h=new vE,c.g=JE(c.j,p?h:null,!c.m),0<c.O&&(c.M=new Zx(g(c.Y,c,c.g),c.O)),h=c.U,p=c.g,m=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(cE[0]=b.toString()),b=cE);for(var M=0;M<b.length;M++){var U=nE(p,b[M],m||h.handleEvent,!1,h.h||h);if(!U)break;h.g[U.key]=U}h=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,h)):(c.u="GET",c.g.ea(c.A,c.u,null,h)),ca(),eM(c.i,c.u,c.A,c.l,c.R,c.m)}mr.prototype.ca=function(c){c=c.target;let h=this.M;h&&Vn(c)==3?h.j():this.Y(c)},mr.prototype.Y=function(c){try{if(c==this.g)e:{let dt=Vn(this.g);var h=this.g.Ba();let go=this.g.Z();if(!(3>dt)&&(dt!=3||this.g&&(this.h.h||this.g.oa()||BE(this.g)))){this.J||dt!=4||h==7||(h==8||0>=go?ca(3):ca(2)),$f(this);var p=this.g.Z();this.X=p;t:if(EE(this)){var m=BE(this.g);c="";var b=m.length,M=Vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ui(this),ha(this);var U="";break t}this.h.i=new a.TextDecoder}for(h=0;h<b;h++)this.h.h=!0,c+=this.h.i.decode(m[h],{stream:!(M&&h==b-1)});m.length=0,this.h.g+=c,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=p==200,tM(this.i,this.u,this.A,this.l,this.R,dt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Te,it=this.g;if((Te=it.g?it.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(Te)){var we=Te;break t}}we=null}if(p=we)ho(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qf(this,p);else{this.o=!1,this.s=3,yt(12),ui(this),ha(this);break e}}if(this.P){p=!0;let rn;for(;!this.J&&this.C<U.length;)if(rn=iM(this,U),rn==Uf){dt==4&&(this.s=4,yt(14),p=!1),ho(this.i,this.l,null,"[Incomplete Response]");break}else if(rn==wE){this.s=4,yt(15),ho(this.i,this.l,U,"[Invalid Chunk]"),p=!1;break}else ho(this.i,this.l,rn,null),qf(this,rn);if(EE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dt!=4||U.length!=0||this.h.h||(this.s=1,yt(16),p=!1),this.o=this.o&&p,!p)ho(this.i,this.l,U,"[Invalid Chunked Response]"),ui(this),ha(this);else if(0<U.length&&!this.W){this.W=!0;var lt=this.j;lt.g==this&&lt.ba&&!lt.M&&(lt.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),Qf(lt),lt.M=!0,yt(11))}}else ho(this.i,this.l,U,null),qf(this,U);dt==4&&ui(this),this.o&&!this.J&&(dt==4?KE(this.j,this):(this.o=!1,Dc(this)))}else EM(this.g),p==400&&0<U.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),ui(this),ha(this)}}}catch{}finally{}};function EE(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function iM(c,h){var p=c.C,m=h.indexOf(`
`,p);return m==-1?Uf:(p=Number(h.substring(p,m)),isNaN(p)?wE:(m+=1,m+p>h.length?Uf:(h=h.slice(m,m+p),c.C=m+p,h)))}mr.prototype.cancel=function(){this.J=!0,ui(this)};function Dc(c){c.S=Date.now()+c.I,_E(c,c.I)}function _E(c,h){if(c.B!=null)throw Error("WatchDog timer not null");c.B=la(g(c.ba,c),h)}function $f(c){c.B&&(a.clearTimeout(c.B),c.B=null)}mr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(nM(this.i,this.A),this.L!=2&&(ca(),yt(17)),ui(this),this.s=2,ha(this)):_E(this,this.S-c)};function ha(c){c.j.G==0||c.J||KE(c.j,c)}function ui(c){$f(c);var h=c.M;h&&typeof h.ma=="function"&&h.ma(),c.M=null,lE(c.U),c.g&&(h=c.g,c.g=null,h.abort(),h.ma())}function qf(c,h){try{var p=c.j;if(p.G!=0&&(p.g==c||zf(p.h,c))){if(!c.K&&zf(p.h,c)&&p.G==3){try{var m=p.Da.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var b=m;if(b[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<c.F)Mc(p),Rc(p);else break e;Kf(p),yt(18)}}else p.za=b[1],0<p.za-p.T&&37500>b[2]&&p.F&&p.v==0&&!p.C&&(p.C=la(g(p.Za,p),6e3));if(1>=bE(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else li(p,11)}else if((c.K||p.g==c)&&Mc(p),!j(h))for(b=p.Da.g.parse(h),h=0;h<b.length;h++){let we=b[h];if(p.T=we[0],we=we[1],p.G==2)if(we[0]=="c"){p.K=we[1],p.ia=we[2];let lt=we[3];lt!=null&&(p.la=lt,p.j.info("VER="+p.la));let dt=we[4];dt!=null&&(p.Aa=dt,p.j.info("SVER="+p.Aa));let go=we[5];go!=null&&typeof go=="number"&&0<go&&(m=1.5*go,p.L=m,p.j.info("backChannelRequestTimeoutMs_="+m)),m=p;let rn=c.g;if(rn){let Pc=rn.g?rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pc){var M=m.h;M.g||Pc.indexOf("spdy")==-1&&Pc.indexOf("quic")==-1&&Pc.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Hf(M,M.h),M.h=null))}if(m.D){let Yf=rn.g?rn.g.getResponseHeader("X-HTTP-Session-Id"):null;Yf&&(m.ya=Yf,Ae(m.I,m.D,Yf))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-c.F,p.j.info("Handshake RTT: "+p.R+"ms")),m=p;var U=c;if(m.qa=ZE(m,m.J?m.ia:null,m.W),U.K){CE(m.h,U);var Te=U,it=m.L;it&&(Te.I=it),Te.B&&($f(Te),Dc(Te)),m.g=U}else GE(m);0<p.i.length&&xc(p)}else we[0]!="stop"&&we[0]!="close"||li(p,7);else p.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?li(p,7):Wf(p):we[0]!="noop"&&p.l&&p.l.ta(we),p.v=0)}}ca(4)}catch{}}var oM=class{constructor(c,h){this.g=c,this.map=h}};function DE(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function TE(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function bE(c){return c.h?1:c.g?c.g.size:0}function zf(c,h){return c.h?c.h==h:c.g?c.g.has(h):!1}function Hf(c,h){c.g?c.g.add(h):c.h=h}function CE(c,h){c.h&&c.h==h?c.h=null:c.g&&c.g.has(h)&&c.g.delete(h)}DE.prototype.cancel=function(){if(this.i=SE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function SE(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let h=c.i;for(let p of c.g.values())h=h.concat(p.D);return h}return A(c.i)}function sM(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var h=[],p=c.length,m=0;m<p;m++)h.push(c[m]);return h}h=[],p=0;for(m in c)h[p++]=c[m];return h}function aM(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var h=[];c=c.length;for(var p=0;p<c;p++)h.push(p);return h}h=[],p=0;for(let m in c)h[p++]=m;return h}}}function AE(c,h){if(c.forEach&&typeof c.forEach=="function")c.forEach(h,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,h,void 0);else for(var p=aM(c),m=sM(c),b=m.length,M=0;M<b;M++)h.call(void 0,m[M],p&&p[M],c)}var RE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uM(c,h){if(c){c=c.split("&");for(var p=0;p<c.length;p++){var m=c[p].indexOf("="),b=null;if(0<=m){var M=c[p].substring(0,m);b=c[p].substring(m+1)}else M=c[p];h(M,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function ci(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ci){this.h=c.h,Tc(this,c.j),this.o=c.o,this.g=c.g,bc(this,c.s),this.l=c.l;var h=c.i,p=new ga;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),xE(this,p),this.m=c.m}else c&&(h=String(c).match(RE))?(this.h=!1,Tc(this,h[1]||"",!0),this.o=fa(h[2]||""),this.g=fa(h[3]||"",!0),bc(this,h[4]),this.l=fa(h[5]||"",!0),xE(this,h[6]||"",!0),this.m=fa(h[7]||"")):(this.h=!1,this.i=new ga(null,this.h))}ci.prototype.toString=function(){var c=[],h=this.j;h&&c.push(pa(h,ME,!0),":");var p=this.g;return(p||h=="file")&&(c.push("//"),(h=this.o)&&c.push(pa(h,ME,!0),"@"),c.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&c.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&c.push("/"),c.push(pa(p,p.charAt(0)=="/"?dM:lM,!0))),(p=this.i.toString())&&c.push("?",p),(p=this.m)&&c.push("#",pa(p,fM)),c.join("")};function Ln(c){return new ci(c)}function Tc(c,h,p){c.j=p?fa(h,!0):h,c.j&&(c.j=c.j.replace(/:$/,""))}function bc(c,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);c.s=h}else c.s=null}function xE(c,h,p){h instanceof ga?(c.i=h,pM(c.i,c.h)):(p||(h=pa(h,hM)),c.i=new ga(h,c.h))}function Ae(c,h,p){c.i.set(h,p)}function Cc(c){return Ae(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function fa(c,h){return c?h?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function pa(c,h,p){return typeof c=="string"?(c=encodeURI(c).replace(h,cM),p&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function cM(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ME=/[#\/\?@]/g,lM=/[#\?:]/g,dM=/[#\?]/g,hM=/[#\?@]/g,fM=/#/g;function ga(c,h){this.h=this.g=null,this.i=c||null,this.j=!!h}function yr(c){c.g||(c.g=new Map,c.h=0,c.i&&uM(c.i,function(h,p){c.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=ga.prototype,t.add=function(c,h){yr(this),this.i=null,c=fo(this,c);var p=this.g.get(c);return p||this.g.set(c,p=[]),p.push(h),this.h+=1,this};function NE(c,h){yr(c),h=fo(c,h),c.g.has(h)&&(c.i=null,c.h-=c.g.get(h).length,c.g.delete(h))}function PE(c,h){return yr(c),h=fo(c,h),c.g.has(h)}t.forEach=function(c,h){yr(this),this.g.forEach(function(p,m){p.forEach(function(b){c.call(h,b,m,this)},this)},this)},t.na=function(){yr(this);let c=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let m=0;m<h.length;m++){let b=c[m];for(let M=0;M<b.length;M++)p.push(h[m])}return p},t.V=function(c){yr(this);let h=[];if(typeof c=="string")PE(this,c)&&(h=h.concat(this.g.get(fo(this,c))));else{c=Array.from(this.g.values());for(let p=0;p<c.length;p++)h=h.concat(c[p])}return h},t.set=function(c,h){return yr(this),this.i=null,c=fo(this,c),PE(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[h]),this.h+=1,this},t.get=function(c,h){return c?(c=this.V(c),0<c.length?String(c[0]):h):h};function kE(c,h,p){NE(c,h),0<p.length&&(c.i=null,c.g.set(fo(c,h),A(p)),c.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var m=h[p];let M=encodeURIComponent(String(m)),U=this.V(m);for(m=0;m<U.length;m++){var b=M;U[m]!==""&&(b+="="+encodeURIComponent(String(U[m]))),c.push(b)}}return this.i=c.join("&")};function fo(c,h){return h=String(h),c.j&&(h=h.toLowerCase()),h}function pM(c,h){h&&!c.j&&(yr(c),c.i=null,c.g.forEach(function(p,m){var b=m.toLowerCase();m!=b&&(NE(this,m),kE(this,b,p))},c)),c.j=h}function gM(c,h){let p=new da;if(a.Image){let m=new Image;m.onload=y(vr,p,"TestLoadImage: loaded",!0,h,m),m.onerror=y(vr,p,"TestLoadImage: error",!1,h,m),m.onabort=y(vr,p,"TestLoadImage: abort",!1,h,m),m.ontimeout=y(vr,p,"TestLoadImage: timeout",!1,h,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else h(!1)}function mM(c,h){let p=new da,m=new AbortController,b=setTimeout(()=>{m.abort(),vr(p,"TestPingServer: timeout",!1,h)},1e4);fetch(c,{signal:m.signal}).then(M=>{clearTimeout(b),M.ok?vr(p,"TestPingServer: ok",!0,h):vr(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(b),vr(p,"TestPingServer: error",!1,h)})}function vr(c,h,p,m,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),m(p)}catch{}}function yM(){this.g=new Xx}function vM(c,h,p){let m=p||"";try{AE(c,function(b,M){let U=b;l(b)&&(U=Of(b)),h.push(m+M+"="+encodeURIComponent(U))})}catch(b){throw h.push(m+"type="+encodeURIComponent("_badmap")),b}}function ma(c){this.l=c.Ub||null,this.j=c.eb||!1}_(ma,Ff),ma.prototype.g=function(){return new Sc(this.l,this.j)},ma.prototype.i=function(c){return function(){return c}}({});function Sc(c,h){ct.call(this),this.D=c,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Sc,ct),t=Sc.prototype,t.open=function(c,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=h,this.readyState=1,va(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(h.body=c),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ya(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,va(this)),this.g&&(this.readyState=3,va(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;OE(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function OE(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var h=c.value?c.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!c.done}))&&(this.response=this.responseText+=h)}c.done?ya(this):va(this),this.readyState==3&&OE(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,ya(this))},t.Qa=function(c){this.g&&(this.response=c,ya(this))},t.ga=function(){this.g&&ya(this)};function ya(c){c.readyState=4,c.l=null,c.j=null,c.v=null,va(c)}t.setRequestHeader=function(c,h){this.u.append(c,h)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,c.push(p[0]+": "+p[1]),p=h.next();return c.join(`\r
`)};function va(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Sc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function FE(c){let h="";return K(c,function(p,m){h+=m,h+=":",h+=p,h+=`\r
`}),h}function Gf(c,h,p){e:{for(m in p){var m=!1;break e}m=!0}m||(p=FE(p),typeof c=="string"?p!=null&&encodeURIComponent(String(p)):Ae(c,h,p))}function Fe(c){ct.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Fe,ct);var wM=/^https?$/i,IM=["POST","PUT"];t=Fe.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,h,p,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);h=h?h.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():jf.g(),this.v=this.o?dE(this.o):dE(jf),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(c),!0),this.B=!1}catch(M){LE(this,M);return}if(c=p||"",p=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var b in m)p.set(b,m[b]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let M of m.keys())p.set(M,m.get(M));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(p.keys()).find(M=>M.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(IM,h,void 0))||m||b||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[M,U]of p)this.g.setRequestHeader(M,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{UE(this),this.u=!0,this.g.send(c),this.u=!1}catch(M){LE(this,M)}};function LE(c,h){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=h,c.m=5,VE(c),Ac(c)}function VE(c){c.A||(c.A=!0,mt(c,"complete"),mt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,mt(this,"complete"),mt(this,"abort"),Ac(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ac(this,!0)),Fe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?jE(this):this.bb())},t.bb=function(){jE(this)};function jE(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Vn(c)!=4||c.Z()!=2)){if(c.u&&Vn(c)==4)aE(c.Ea,0,c);else if(mt(c,"readystatechange"),Vn(c)==4){c.h=!1;try{let U=c.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var m;if(m=U===0){var b=String(c.D).match(RE)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),m=!wM.test(b?b.toLowerCase():"")}p=m}if(p)mt(c,"complete"),mt(c,"success");else{c.m=6;try{var M=2<Vn(c)?c.g.statusText:""}catch{M=""}c.l=M+" ["+c.Z()+"]",VE(c)}}finally{Ac(c)}}}}function Ac(c,h){if(c.g){UE(c);let p=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,h||mt(c,"ready");try{p.onreadystatechange=m}catch{}}}function UE(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Vn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Vn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var h=this.g.responseText;return c&&h.indexOf(c)==0&&(h=h.substring(c.length)),Jx(h)}};function BE(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function EM(c){let h={};c=(c.g&&2<=Vn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(j(c[m]))continue;var p=T(c[m]);let b=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let M=h[b]||[];h[b]=M,M.push(p)}E(h,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function wa(c,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[c]||h}function $E(c){this.Aa=0,this.i=[],this.j=new da,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=wa("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=wa("baseRetryDelayMs",5e3,c),this.cb=wa("retryDelaySeedMs",1e4,c),this.Wa=wa("forwardChannelMaxRetries",2,c),this.wa=wa("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new DE(c&&c.concurrentRequestLimit),this.Da=new yM,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=$E.prototype,t.la=8,t.G=1,t.connect=function(c,h,p,m){yt(0),this.W=c,this.H=h||{},p&&m!==void 0&&(this.H.OSID=p,this.H.OAID=m),this.F=this.X,this.I=ZE(this,null,this.W),xc(this)};function Wf(c){if(qE(c),c.G==3){var h=c.U++,p=Ln(c.I);if(Ae(p,"SID",c.K),Ae(p,"RID",h),Ae(p,"TYPE","terminate"),Ia(c,p),h=new mr(c,c.j,h),h.L=2,h.v=Cc(Ln(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=JE(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Dc(h)}YE(c)}function Rc(c){c.g&&(Qf(c),c.g.cancel(),c.g=null)}function qE(c){Rc(c),c.u&&(a.clearTimeout(c.u),c.u=null),Mc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function xc(c){if(!TE(c.h)&&!c.s){c.s=!0;var h=c.Ga;ra||tE(),ia||(ra(),ia=!0),Cf.add(h,c),c.B=0}}function _M(c,h){return bE(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=h.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=la(g(c.Ga,c,h),QE(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new mr(this,this.j,c),M=this.o;if(this.S&&(M?(M=v(M),D(M,this.S)):M=this.S),this.m!==null||this.O||(b.H=M,M=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var m=this.i[p];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=HE(this,b,h),p=Ln(this.I),Ae(p,"RID",c),Ae(p,"CVER",22),this.D&&Ae(p,"X-HTTP-Session-Id",this.D),Ia(this,p),M&&(this.O?h="headers="+encodeURIComponent(String(FE(M)))+"&"+h:this.m&&Gf(p,this.m,M)),Hf(this.h,b),this.Ua&&Ae(p,"TYPE","init"),this.P?(Ae(p,"$req",h),Ae(p,"SID","null"),b.T=!0,Bf(b,p,null)):Bf(b,p,h),this.G=2}}else this.G==3&&(c?zE(this,c):this.i.length==0||TE(this.h)||zE(this))};function zE(c,h){var p;h?p=h.l:p=c.U++;let m=Ln(c.I);Ae(m,"SID",c.K),Ae(m,"RID",p),Ae(m,"AID",c.T),Ia(c,m),c.m&&c.o&&Gf(m,c.m,c.o),p=new mr(c,c.j,p,c.B+1),c.m===null&&(p.H=c.o),h&&(c.i=h.D.concat(c.i)),h=HE(c,p,1e3),p.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Hf(c.h,p),Bf(p,m,h)}function Ia(c,h){c.H&&K(c.H,function(p,m){Ae(h,m,p)}),c.l&&AE({},function(p,m){Ae(h,m,p)})}function HE(c,h,p){p=Math.min(c.i.length,p);var m=c.l?g(c.l.Na,c.l,c):null;e:{var b=c.i;let M=-1;for(;;){let U=["count="+p];M==-1?0<p?(M=b[0].g,U.push("ofs="+M)):M=0:U.push("ofs="+M);let Te=!0;for(let it=0;it<p;it++){let we=b[it].g,lt=b[it].map;if(we-=M,0>we)M=Math.max(0,b[it].g-100),Te=!1;else try{vM(lt,U,"req"+we+"_")}catch{m&&m(lt)}}if(Te){m=U.join("&");break e}}}return c=c.i.splice(0,p),h.D=c,m}function GE(c){if(!c.g&&!c.u){c.Y=1;var h=c.Fa;ra||tE(),ia||(ra(),ia=!0),Cf.add(h,c),c.v=0}}function Kf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=la(g(c.Fa,c),QE(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,WE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=la(g(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),Rc(this),WE(this))};function Qf(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function WE(c){c.g=new mr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var h=Ln(c.qa);Ae(h,"RID","rpc"),Ae(h,"SID",c.K),Ae(h,"AID",c.T),Ae(h,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ae(h,"TO",c.ja),Ae(h,"TYPE","xmlhttp"),Ia(c,h),c.m&&c.o&&Gf(h,c.m,c.o),c.L&&(c.g.I=c.L);var p=c.g;c=c.ia,p.L=1,p.v=Cc(Ln(h)),p.m=null,p.P=!0,IE(p,c)}t.Za=function(){this.C!=null&&(this.C=null,Rc(this),Kf(this),yt(19))};function Mc(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function KE(c,h){var p=null;if(c.g==h){Mc(c),Qf(c),c.g=null;var m=2}else if(zf(c.h,h))p=h.D,CE(c.h,h),m=1;else return;if(c.G!=0){if(h.o)if(m==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var b=c.B;m=Ic(),mt(m,new mE(m,p)),xc(c)}else GE(c);else if(b=h.s,b==3||b==0&&0<h.X||!(m==1&&_M(c,h)||m==2&&Kf(c)))switch(p&&0<p.length&&(h=c.h,h.i=h.i.concat(p)),b){case 1:li(c,5);break;case 4:li(c,10);break;case 3:li(c,6);break;default:li(c,2)}}}function QE(c,h){let p=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(p*=2),p*h}function li(c,h){if(c.j.info("Error code "+h),h==2){var p=g(c.fb,c),m=c.Xa;let b=!m;m=new ci(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Tc(m,"https"),Cc(m),b?gM(m.toString(),p):mM(m.toString(),p)}else yt(2);c.G=0,c.l&&c.l.sa(h),YE(c),qE(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function YE(c){if(c.G=0,c.ka=[],c.l){let h=SE(c.h);(h.length!=0||c.i.length!=0)&&(C(c.ka,h),C(c.ka,c.i),c.h.i.length=0,A(c.i),c.i.length=0),c.l.ra()}}function ZE(c,h,p){var m=p instanceof ci?Ln(p):new ci(p);if(m.g!="")h&&(m.g=h+"."+m.g),bc(m,m.s);else{var b=a.location;m=b.protocol,h=h?h+"."+b.hostname:b.hostname,b=+b.port;var M=new ci(null);m&&Tc(M,m),h&&(M.g=h),b&&bc(M,b),p&&(M.l=p),m=M}return p=c.D,h=c.ya,p&&h&&Ae(m,p,h),Ae(m,"VER",c.la),Ia(c,m),m}function JE(c,h,p){if(h&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=c.Ca&&!c.pa?new Fe(new ma({eb:p})):new Fe(c.pa),h.Ha(c.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function XE(){}t=XE.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Nc(){}Nc.prototype.g=function(c,h){return new Ft(c,h)};function Ft(c,h){ct.call(this),this.g=new $E(h),this.l=c,this.h=h&&h.messageUrlParams||null,c=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(c?c["X-WebChannel-Content-Type"]=h.messageContentType:c={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(c?c["X-WebChannel-Client-Profile"]=h.va:c={"X-WebChannel-Client-Profile":h.va}),this.g.S=c,(c=h&&h.Sb)&&!j(c)&&(this.g.m=c),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!j(h)&&(this.g.D=h,c=this.h,c!==null&&h in c&&(c=this.h,h in c&&delete c[h])),this.j=new po(this)}_(Ft,ct),Ft.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){Wf(this.g)},Ft.prototype.o=function(c){var h=this.g;if(typeof c=="string"){var p={};p.__data__=c,c=p}else this.u&&(p={},p.__data__=Of(c),c=p);h.i.push(new oM(h.Ya++,c)),h.G==3&&xc(h)},Ft.prototype.N=function(){this.g.l=null,delete this.j,Wf(this.g),delete this.g,Ft.aa.N.call(this)};function e_(c){Lf.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var h=c.__sm__;if(h){e:{for(let p in h){c=p;break e}c=void 0}(this.i=c)&&(c=this.i,h=h!==null&&c in h?h[c]:void 0),this.data=h}else this.data=c}_(e_,Lf);function t_(){Vf.call(this),this.status=1}_(t_,Vf);function po(c){this.g=c}_(po,XE),po.prototype.ua=function(){mt(this.g,"a")},po.prototype.ta=function(c){mt(this.g,new e_(c))},po.prototype.sa=function(c){mt(this.g,new t_)},po.prototype.ra=function(){mt(this.g,"b")},Nc.prototype.createWebChannel=Nc.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,my=nr.createWebChannelTransport=function(){return new Nc},gy=nr.getStatEventTarget=function(){return Ic()},py=nr.Event=ai,Fd=nr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ec.NO_ERROR=0,Ec.TIMEOUT=8,Ec.HTTP_ERROR=6,au=nr.ErrorCode=Ec,yE.COMPLETE="complete",fy=nr.EventType=yE,hE.EventType=ua,ua.OPEN="a",ua.CLOSE="b",ua.ERROR="c",ua.MESSAGE="d",ct.prototype.listen=ct.prototype.K,rs=nr.WebChannel=hE,hy=nr.FetchXmlHttpFactory=ma,Fe.prototype.listenOnce=Fe.prototype.L,Fe.prototype.getLastError=Fe.prototype.Ka,Fe.prototype.getLastErrorCode=Fe.prototype.Ba,Fe.prototype.getStatus=Fe.prototype.Z,Fe.prototype.getResponseJson=Fe.prototype.Oa,Fe.prototype.getResponseText=Fe.prototype.oa,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Ha,dy=nr.XhrIo=Fe}).apply(typeof Od<"u"?Od:typeof self<"u"?self:typeof window<"u"?window:{});var w0="@firebase/firestore";var Ke=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ke.UNAUTHENTICATED=new Ke(null),Ke.GOOGLE_CREDENTIALS=new Ke("google-credentials-uid"),Ke.FIRST_PARTY=new Ke("first-party-uid"),Ke.MOCK_USER=new Ke("mock-user");var ks="10.13.1";var Gr=new Fc("@firebase/firestore");function us(){return Gr.logLevel}function ES(t){Gr.setLogLevel(t)}function O(t,...e){if(Gr.logLevel<=yn.DEBUG){let n=e.map(Ew);Gr.debug(`Firestore (${ks}): ${t}`,...n)}}function Ue(t,...e){if(Gr.logLevel<=yn.ERROR){let n=e.map(Ew);Gr.error(`Firestore (${ks}): ${t}`,...n)}}function Xt(t,...e){if(Gr.logLevel<=yn.WARN){let n=e.map(Ew);Gr.warn(`Firestore (${ks}): ${t}`,...n)}}function Ew(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function G(t="Unexpected state"){let e=`FIRESTORE (${ks}) INTERNAL ASSERTION FAILED: `+t;throw Ue(e),new Error(e)}function Q(t,e){t||G()}function _S(t,e){t||G()}function $(t,e){return t}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},k=class extends u_{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Qe=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Wd=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Ey=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ke.UNAUTHENTICATED))}shutdown(){}},_y=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Dy=class{constructor(e){this.t=e,this.currentUser=Ke.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new Qe;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Qe,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>N(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Qe)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Q(typeof r.accessToken=="string"),new Wd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return Q(e===null||typeof e=="string"),new Ke(e)}},Ty=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ke.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},by=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Ty(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ke.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Cy=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Sy=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=o=>{o.error!=null&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,O("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Q(typeof n.token=="string"),this.R=n.token,new Cy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function SV(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Kd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=SV(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function re(t,e){return t<e?-1:t>e?1:0}function ys(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function DS(t){return t+"\0"}var Oe=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new k(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new k(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new k(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new k(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var X=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Oe(0,0))}static max(){return new t(new Oe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Qd=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&G(),r===void 0?r=e.length-n:r>e.length-n&&G(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},ge=class t extends Qd{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new k(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},AV=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Be=class t extends Qd{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return AV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new k(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new k(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new k(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new k(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var q=class t{constructor(e){this.path=e}static fromPath(e){return new t(ge.fromString(e))}static fromName(e){return new t(ge.fromString(e).popFirst(5))}static empty(){return new t(ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ge.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new ge(e.slice()))}};var vs=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function Ay(t){return t.fields.find(e=>e.kind===2)}function Li(t){return t.fields.filter(e=>e.kind!==2)}vs.UNKNOWN_ID=-1;var ps=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var wu=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,en.min())}};function TS(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=X.fromTimestamp(r===1e9?new Oe(n+1,0):new Oe(n,r));return new en(i,q.empty(),e)}function bS(t){return new en(t.readTime,t.key,-1)}var en=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(X.min(),q.empty(),-1)}static max(){return new t(X.max(),q.empty(),-1)}};function _w(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:re(t.largestBatchId,e.largestBatchId))}var CS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Yd=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ni(t){return N(this,null,function*(){if(t.code!==x.FAILED_PRECONDITION||t.message!==CS)throw t;O("LocalStore","Unexpectedly lost primary lease")})}var R=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&G(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(d=>{s[l]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};var Zd=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Qe,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new qi(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Dw(r.target.error);this.V.reject(new qi(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new qi(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(O("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new xy(n)}},Wr=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(Ea())===12.2&&Ue("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return O("SimpleDb","Removing database:",e),Vi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Oc())return!1;if(t.v())return!0;let e=Ea(),n=t.S(e),r=0<n&&n<10,i=SS(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return N(this,null,function*(){return this.db||(O("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;n(s)},i.onblocked=()=>{r(new qi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new k(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new k(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new qi(e,s))},i.onupgradeneeded=o=>{O("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{O("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return N(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=Zd.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),R.reject(l))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(O("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function SS(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}var Ry=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Vi(this.B.delete())}},qi=class extends k{constructor(e,n){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function ri(t){return t.name==="IndexedDbTransactionError"}var xy=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(O("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(O("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Vi(r)}add(e){return O("SimpleDb","ADD",this.store.name,e,e),Vi(this.store.add(e))}get(e){return Vi(this.store.get(e)).next(n=>(n===void 0&&(n=null),O("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return O("SimpleDb","DELETE",this.store.name,e),Vi(this.store.delete(e))}count(){return O("SimpleDb","COUNT",this.store.name),Vi(this.store.count())}U(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new R((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,u)=>{s.push(u)}).next(()=>s)}}G(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new R((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,n){O("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.W(i,n)}Y(e){let n=this.cursor({});return new R((r,i)=>{n.onerror=o=>{let s=Dw(o.target.error);i(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,n){let r=[];return new R((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new Ry(a),l=n(a.primaryKey,a.value,u);if(l instanceof R){let d=l.catch(f=>(u.done(),R.reject(f)));r.push(d)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>R.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Vi(t){return new R((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=Dw(r.target.error);n(i)}})}var I0=!1;function Dw(t){let e=Wr.S(Ea());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new k("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return I0||(I0=!0,setTimeout(()=>{throw r},0)),r}}return t}var My=class{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){O("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>N(this,null,function*(){this.task=null;try{O("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(n){ri(n)?O("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield ni(n)}yield this.X(6e4)}))}},Ny=class{constructor(e,n){this.localStore=e,this.persistence=n}ee(e=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))})}te(e,n){let r=new Set,i=n,o=!0;return R.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return O("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(O("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}re(e,n){let r=e;return n.changes.forEach((i,o)=>{let s=bS(o);_w(s,r)>0&&(r=s)}),new en(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var jt=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function $u(t){return t==null}function Iu(t){return t===0&&1/t==-1/0}function AS(t){return typeof t=="number"&&Number.isInteger(t)&&!Iu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function At(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=E0(e)),e=RV(t.get(n),e);return E0(e)}function RV(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function E0(t){return t+""}function bn(t){let e=t.length;if(Q(e>=2),e===2)return Q(t.charAt(0)===""&&t.charAt(1)===""),ge.emptyPath();let n=e-2,r=[],i="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>n)&&G(),t.charAt(s+1)){case"":let a=t.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:G()}o=s+2}return new ge(r)}var _0=["userId","batchId"];function Bd(t,e){return[t,At(e)]}function RS(t,e,n){return[t,At(e),n]}var xV={},MV=["prefixPath","collectionGroup","readTime","documentId"],NV=["prefixPath","collectionGroup","documentId"],PV=["collectionGroup","readTime","prefixPath","documentId"],kV=["canonicalId","targetId"],OV=["targetId","path"],FV=["path","targetId"],LV=["collectionId","parent"],VV=["indexId","uid"],jV=["uid","sequenceNumber"],UV=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],BV=["indexId","uid","orderedDocumentKey"],$V=["userId","collectionPath","documentId"],qV=["userId","collectionPath","largestBatchId"],zV=["userId","collectionGroup","largestBatchId"],xS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],HV=[...xS,"documentOverlays"],MS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],NS=MS,Tw=[...NS,"indexConfiguration","indexState","indexEntries"],GV=Tw,WV=[...Tw,"globals"];var Eu=class extends Yd{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}};function et(t,e){let n=$(t);return Wr.F(n._e,e)}function D0(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function to(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function PS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var xe=class t{constructor(e,n){this.comparator=e,this.root=n||Sn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Sn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fs(this.root,e,this.comparator,!1)}getReverseIterator(){return new fs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fs(this.root,e,this.comparator,!0)}},fs=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Sn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw G();let e=this.left.check();if(e!==this.right.check())throw G();return e+(this.isRed()?0:1)}};Sn.EMPTY=null,Sn.RED=!0,Sn.BLACK=!1;Sn.EMPTY=new class{constructor(){this.size=0}get key(){throw G()}get value(){throw G()}get color(){throw G()}get left(){throw G()}get right(){throw G()}copy(e,n,r,i,o){return this}insert(e,n,r){return new Sn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ce=class t{constructor(e){this.comparator=e,this.data=new xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Jd(this.data.getIterator())}getIteratorFrom(e){return new Jd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Jd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function is(t){return t.hasNext()?t.getNext():void 0}var Ut=class t{constructor(e){this.fields=e,e.sort(Be.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ce(Be.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ys(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Xd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function kS(){return typeof atob<"u"}var qe=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Xd("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};qe.EMPTY_BYTE_STRING=new qe("");var KV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function or(t){if(Q(!!t),typeof t=="string"){let e=0,n=KV.exec(t);if(Q(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ne(t.seconds),nanos:Ne(t.nanos)}}function Ne(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Kr(t){return typeof t=="string"?qe.fromBase64String(t):qe.fromUint8Array(t)}function qh(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function bw(t){let e=t.mapValue.fields.__previous_value__;return qh(e)?bw(e):e}function _u(t){let e=or(t.mapValue.fields.__local_write_time__.timestampValue);return new Oe(e.seconds,e.nanos)}var Py=class{constructor(e,n,r,i,o,s,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},Qr=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var zr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},$d={nullValue:"NULL_VALUE"};function zi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?qh(t)?4:OS(t)?9007199254740991:zh(t)?10:11:G()}function xn(t,e){if(t===e)return!0;let n=zi(t);if(n!==zi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return _u(t).isEqual(_u(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=or(i.timestampValue),a=or(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Kr(i.bytesValue).isEqual(Kr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Ne(i.geoPointValue.latitude)===Ne(o.geoPointValue.latitude)&&Ne(i.geoPointValue.longitude)===Ne(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ne(i.integerValue)===Ne(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ne(i.doubleValue),a=Ne(o.doubleValue);return s===a?Iu(s)===Iu(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return ys(t.arrayValue.values||[],e.arrayValue.values||[],xn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(D0(s)!==D0(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!xn(s[u],a[u])))return!1;return!0}(t,e);default:return G()}}function Du(t,e){return(t.values||[]).find(n=>xn(n,e))!==void 0}function Yr(t,e){if(t===e)return 0;let n=zi(t),r=zi(e);if(n!==r)return re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return re(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ne(o.integerValue||o.doubleValue),u=Ne(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return T0(t.timestampValue,e.timestampValue);case 4:return T0(_u(t),_u(e));case 5:return re(t.stringValue,e.stringValue);case 6:return function(o,s){let a=Kr(o),u=Kr(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let d=re(a[l],u[l]);if(d!==0)return d}return re(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=re(Ne(o.latitude),Ne(s.latitude));return a!==0?a:re(Ne(o.longitude),Ne(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return b0(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,d;let f=o.fields||{},g=s.fields||{},y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,_=(u=g.value)===null||u===void 0?void 0:u.arrayValue,A=re(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((d=_?.values)===null||d===void 0?void 0:d.length)||0);return A!==0?A:b0(y,_)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===zr.mapValue&&s===zr.mapValue)return 0;if(o===zr.mapValue)return 1;if(s===zr.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},d=Object.keys(l);u.sort(),d.sort();for(let f=0;f<u.length&&f<d.length;++f){let g=re(u[f],d[f]);if(g!==0)return g;let y=Yr(a[u[f]],l[d[f]]);if(y!==0)return y}return re(u.length,d.length)}(t.mapValue,e.mapValue);default:throw G()}}function T0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return re(t,e);let n=or(t),r=or(e),i=re(n.seconds,r.seconds);return i!==0?i:re(n.nanos,r.nanos)}function b0(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=Yr(n[i],r[i]);if(o)return o}return re(n.length,r.length)}function ws(t){return ky(t)}function ky(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=or(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Kr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=ky(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${ky(n.fields[s])}`;return i+"}"}(t.mapValue):G()}function Hi(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Oy(t){return!!t&&"integerValue"in t}function Tu(t){return!!t&&"arrayValue"in t}function C0(t){return!!t&&"nullValue"in t}function S0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function qd(t){return!!t&&"mapValue"in t}function zh(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function pu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return to(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=pu(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=pu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function OS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var FS={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function QV(t){return"nullValue"in t?$d:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Hi(Qr.empty(),q.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?zh(t)?FS:{mapValue:{}}:G()}function YV(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Hi(Qr.empty(),q.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?FS:"mapValue"in t?zh(t)?{mapValue:{}}:zr:G()}function A0(t,e){let n=Yr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function R0(t,e){let n=Yr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var gt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!qd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=pu(n)}setAll(e){let n=Be.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=pu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());qd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return xn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];qd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){to(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(pu(this.value))}};function LS(t){let e=[];return to(t.fields,(n,r)=>{let i=new Be([n]);if(qd(r)){let o=LS(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Ut(e)}var Ye=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,X.min(),X.min(),X.min(),gt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,X.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,X.min(),X.min(),gt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,X.min(),X.min(),gt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Mn=class{constructor(e,n){this.position=e,this.inclusive=n}};function x0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=q.comparator(q.fromName(s.referenceValue),n.key):r=Yr(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function M0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!xn(t.position[n],e.position[n]))return!1;return!0}var Gi=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function ZV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var eh=class{},fe=class t extends eh{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Vy(e,n,r):n==="array-contains"?new By(e,r):n==="in"?new th(e,r):n==="not-in"?new $y(e,r):n==="array-contains-any"?new qy(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new jy(e,r):new Uy(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Yr(n,this.value)):n!==null&&zi(this.value)===zi(n)&&this.matchesComparison(Yr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},_e=class t extends eh{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return Is(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Is(t){return t.op==="and"}function Fy(t){return t.op==="or"}function Cw(t){return VS(t)&&Is(t)}function VS(t){for(let e of t.filters)if(e instanceof _e)return!1;return!0}function Ly(t){if(t instanceof fe)return t.field.canonicalString()+t.op.toString()+ws(t.value);if(Cw(t))return t.filters.map(e=>Ly(e)).join(",");{let e=t.filters.map(n=>Ly(n)).join(",");return`${t.op}(${e})`}}function jS(t,e){return t instanceof fe?function(r,i){return i instanceof fe&&r.op===i.op&&r.field.isEqual(i.field)&&xn(r.value,i.value)}(t,e):t instanceof _e?function(r,i){return i instanceof _e&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&jS(s,i.filters[a]),!0):!1}(t,e):void G()}function US(t,e){let n=t.filters.concat(e);return _e.create(n,t.op)}function BS(t){return t instanceof fe?function(n){return`${n.field.canonicalString()} ${n.op} ${ws(n.value)}`}(t):t instanceof _e?function(n){return n.op.toString()+" {"+n.getFilters().map(BS).join(" ,")+"}"}(t):"Filter"}var Vy=class extends fe{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){let n=q.comparator(e.key,this.key);return this.matchesComparison(n)}},jy=class extends fe{constructor(e,n){super(e,"in",n),this.keys=$S("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Uy=class extends fe{constructor(e,n){super(e,"not-in",n),this.keys=$S("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function $S(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}var By=class extends fe{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Tu(n)&&Du(n.arrayValue,this.value)}},th=class extends fe{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Du(this.value.arrayValue,n)}},$y=class extends fe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Du(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Du(this.value.arrayValue,n)}},qy=class extends fe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Tu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Du(this.value.arrayValue,r))}};var zy=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function Hy(t,e=null,n=[],r=[],i=null,o=null,s=null){return new zy(t,e,n,r,i,o,s)}function Wi(t){let e=$(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ly(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),$u(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ws(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ws(r)).join(",")),e.ue=n}return e.ue}function qu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ZV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!jS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!M0(t.startAt,e.startAt)&&M0(t.endAt,e.endAt)}function nh(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function rh(t,e){return t.filters.filter(n=>n instanceof fe&&n.field.isEqual(e))}function N0(t,e,n){let r=$d,i=!0;for(let o of rh(t,e)){let s=$d,a=!0;switch(o.op){case"<":case"<=":s=QV(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=$d}A0({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];A0({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function P0(t,e,n){let r=zr,i=!0;for(let o of rh(t,e)){let s=zr,a=!0;switch(o.op){case">=":case">":s=YV(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=zr}R0({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];R0({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}var hn=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function qS(t,e,n,r,i,o,s,a){return new hn(t,e,n,r,i,o,s,a)}function Os(t){return new hn(t)}function k0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Sw(t){return t.collectionGroup!==null}function gs(t){let e=$(t);if(e.ce===null){e.ce=[];let n=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ce(Be.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Gi(o,r))}),n.has(Be.keyField().canonicalString())||e.ce.push(new Gi(Be.keyField(),r))}return e.ce}function Rt(t){let e=$(t);return e.le||(e.le=JV(e,gs(t))),e.le}function JV(t,e){if(t.limitType==="F")return Hy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Gi(i.field,o)});let n=t.endAt?new Mn(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Mn(t.startAt.position,t.startAt.inclusive):null;return Hy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Gy(t,e){let n=t.filters.concat([e]);return new hn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ih(t,e,n){return new hn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zu(t,e){return qu(Rt(t),Rt(e))&&t.limitType===e.limitType}function zS(t){return`${Wi(Rt(t))}|lt:${t.limitType}`}function cs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>BS(i)).join(", ")}]`),$u(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ws(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ws(i)).join(",")),`Target(${r})`}(Rt(t))}; limitType=${t.limitType})`}function Hu(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of gs(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=x0(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,gs(r),i)||r.endAt&&!function(s,a,u){let l=x0(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,gs(r),i))}(t,e)}function HS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function GS(t){return(e,n)=>{let r=!1;for(let i of gs(t)){let o=XV(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function XV(t,e,n){let r=t.field.isKeyField()?q.comparator(e.key,n.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Yr(u,l):G()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return G()}}var Nn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){to(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return PS(this.inner)}size(){return this.innerSize}};var ej=new xe(q.comparator);function Ot(){return ej}var WS=new xe(q.comparator);function hu(...t){let e=WS;for(let n of t)e=e.insert(n.key,n);return e}function KS(t){let e=WS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Cn(){return gu()}function QS(){return gu()}function gu(){return new Nn(t=>t.toString(),(t,e)=>t.isEqual(e))}var tj=new xe(q.comparator),nj=new Ce(q.comparator);function oe(...t){let e=nj;for(let n of t)e=e.add(n);return e}var rj=new Ce(re);function Aw(){return rj}function Rw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Iu(e)?"-0":e}}function YS(t){return{integerValue:""+t}}function ZS(t,e){return AS(e)?YS(e):Rw(t,e)}var Es=class{constructor(){this._=void 0}};function ij(t,e,n){return t instanceof Zr?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&qh(o)&&(o=bw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof sr?XS(t,e):t instanceof ar?eA(t,e):function(i,o){let s=JS(i,o),a=O0(s)+O0(i.Pe);return Oy(s)&&Oy(i.Pe)?YS(a):Rw(i.serializer,a)}(t,e)}function oj(t,e,n){return t instanceof sr?XS(t,e):t instanceof ar?eA(t,e):n}function JS(t,e){return t instanceof Jr?function(r){return Oy(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Zr=class extends Es{},sr=class extends Es{constructor(e){super(),this.elements=e}};function XS(t,e){let n=tA(e);for(let r of t.elements)n.some(i=>xn(i,r))||n.push(r);return{arrayValue:{values:n}}}var ar=class extends Es{constructor(e){super(),this.elements=e}};function eA(t,e){let n=tA(e);for(let r of t.elements)n=n.filter(i=>!xn(i,r));return{arrayValue:{values:n}}}var Jr=class extends Es{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function O0(t){return Ne(t.integerValue||t.doubleValue)}function tA(t){return Tu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Ki=class{constructor(e,n){this.field=e,this.transform=n}};function sj(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof sr&&i instanceof sr||r instanceof ar&&i instanceof ar?ys(r.elements,i.elements,xn):r instanceof Jr&&i instanceof Jr?xn(r.Pe,i.Pe):r instanceof Zr&&i instanceof Zr}(t.transform,e.transform)}var Wy=class{constructor(e,n){this.version=e,this.transformResults=n}},Ve=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function zd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var _s=class{};function nA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ei(t.key,Ve.none()):new Xr(t.key,t.data,Ve.none());{let n=t.data,r=gt.empty(),i=new Ce(Be.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new fn(t.key,r,new Ut(i.toArray()),Ve.none())}}function aj(t,e,n){t instanceof Xr?function(i,o,s){let a=i.value.clone(),u=L0(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof fn?function(i,o,s){if(!zd(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=L0(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(rA(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function mu(t,e,n,r){return t instanceof Xr?function(o,s,a,u){if(!zd(o.precondition,s))return a;let l=o.value.clone(),d=V0(o.fieldTransforms,u,s);return l.setAll(d),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof fn?function(o,s,a,u){if(!zd(o.precondition,s))return a;let l=V0(o.fieldTransforms,u,s),d=s.data;return d.setAll(rA(o)),d.setAll(l),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(o,s,a){return zd(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function uj(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=JS(r.transform,i||null);o!=null&&(n===null&&(n=gt.empty()),n.set(r.field,o))}return n||null}function F0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ys(r,i,(o,s)=>sj(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Xr=class extends _s{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},fn=class extends _s{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function rA(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function L0(t,e,n){let r=new Map;Q(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,oj(s,a,n[i]))}return r}function V0(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,ij(o,s,e))}return r}var ei=class extends _s{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},bu=class extends _s{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Cu=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&aj(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=mu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=mu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=QS();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=nA(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),oe())}isEqual(e){return this.batchId===e.batchId&&ys(this.mutations,e.mutations,(n,r)=>F0(n,r))&&ys(this.baseMutations,e.baseMutations,(n,r)=>F0(n,r))}},Ky=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Q(e.mutations.length===r.length);let i=function(){return tj}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var Su=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Qy=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Ge,pe;function iA(t){switch(t){default:return G();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function oA(t){if(t===void 0)return Ue("GRPC error has no .code"),x.UNKNOWN;switch(t){case Ge.OK:return x.OK;case Ge.CANCELLED:return x.CANCELLED;case Ge.UNKNOWN:return x.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return x.INTERNAL;case Ge.UNAVAILABLE:return x.UNAVAILABLE;case Ge.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Ge.NOT_FOUND:return x.NOT_FOUND;case Ge.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Ge.ABORTED:return x.ABORTED;case Ge.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Ge.DATA_LOSS:return x.DATA_LOSS;default:return G()}}(pe=Ge||(Ge={}))[pe.OK=0]="OK",pe[pe.CANCELLED=1]="CANCELLED",pe[pe.UNKNOWN=2]="UNKNOWN",pe[pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pe[pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pe[pe.NOT_FOUND=5]="NOT_FOUND",pe[pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",pe[pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",pe[pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",pe[pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pe[pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pe[pe.ABORTED=10]="ABORTED",pe[pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",pe[pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",pe[pe.INTERNAL=13]="INTERNAL",pe[pe.UNAVAILABLE=14]="UNAVAILABLE",pe[pe.DATA_LOSS=15]="DATA_LOSS";var j0=null;function sA(){return new TextEncoder}var cj=new jr([4294967295,4294967295],0);function U0(t){let e=sA().encode(t),n=new ly;return n.update(e),new Uint8Array(n.digest())}function B0(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new jr([n,r],0),new jr([i,o],0)]}var Yy=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new $i(`Invalid padding: ${n}`);if(r<0)throw new $i(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $i(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new $i(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=jr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(jr.fromNumber(r)));return i.compare(cj)===1&&(i=new jr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=U0(e),[r,i]=B0(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let n=U0(e),[r,i]=B0(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},$i=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Au=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Ru.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(X.min(),i,new xe(re),Ot(),oe())}},Ru=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,oe(),oe(),oe())}};var ms=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},oh=class{constructor(e,n){this.targetId=e,this.me=n}},sh=class{constructor(e,n,r=qe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},ah=class{constructor(){this.fe=0,this.ge=q0(),this.pe=qe.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=oe(),n=oe(),r=oe();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:G()}}),new Ru(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=q0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Q(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Zy=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ot(),this.qe=$0(),this.Qe=new xe(re)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:G()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let o=i.target;if(nh(o))if(r===0){let s=new q(o.path);this.Ue(n,s,Ye.newNoDocument(s,X.min()))}else Q(r===1);else{let s=this.Ye(n);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}j0?.et(function(d,f,g,y,_){var A,C,P,j,F,B;let Z={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},K=f.unchangedNames;return K&&(Z.bloomFilter={applied:_===0,hashCount:(A=K?.hashCount)!==null&&A!==void 0?A:0,bitmapLength:(j=(P=(C=K?.bits)===null||C===void 0?void 0:C.bitmap)===null||P===void 0?void 0:P.length)!==null&&j!==void 0?j:0,padding:(B=(F=K?.bits)===null||F===void 0?void 0:F.padding)!==null&&B!==void 0?B:0,mightContain:E=>{var v;return(v=y?.mightContain(E))!==null&&v!==void 0&&v}}),Z}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=Kr(r).toUint8Array()}catch(u){if(u instanceof Xd)return Xt("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Yy(s,i,o)}catch(u){return Xt(u instanceof $i?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&nh(a.target)){let u=new q(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,Ye.newNoDocument(u,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=oe();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Au(e,n,this.Qe,this.ke,r);return this.ke=Ot(),this.qe=$0(),this.Qe=new xe(re),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new ah,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ce(re),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||O("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ah),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function $0(){return new xe(q.comparator)}function q0(){return new xe(q.comparator)}var lj={asc:"ASCENDING",desc:"DESCENDING"},dj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hj={and:"AND",or:"OR"},Jy=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Xy(t,e){return t.useProto3Json||$u(e)?e:{value:e}}function Ds(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function fj(t,e){return Ds(t,e.toTimestamp())}function $e(t){return Q(!!t),X.fromTimestamp(function(n){let r=or(n);return new Oe(r.seconds,r.nanos)}(t))}function xw(t,e){return ev(t,e).canonicalString()}function ev(t,e){let n=function(i){return new ge(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function uA(t){let e=ge.fromString(t);return Q(vA(e)),e}function xu(t,e){return xw(t.databaseId,e.path)}function An(t,e){let n=uA(e);if(n.get(1)!==t.databaseId.projectId)throw new k(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new k(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(dA(n))}function cA(t,e){return xw(t.databaseId,e)}function lA(t){let e=uA(t);return e.length===4?ge.emptyPath():dA(e)}function tv(t){return new ge(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function dA(t){return Q(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function z0(t,e,n){return{name:xu(t,e),fields:n.value.mapValue.fields}}function hA(t,e,n){let r=An(t,e.name),i=$e(e.updateTime),o=e.createTime?$e(e.createTime):X.min(),s=new gt({mapValue:{fields:e.fields}}),a=Ye.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function pj(t,e){return"found"in e?function(r,i){Q(!!i.found),i.found.name,i.found.updateTime;let o=An(r,i.found.name),s=$e(i.found.updateTime),a=i.found.createTime?$e(i.found.createTime):X.min(),u=new gt({mapValue:{fields:i.found.fields}});return Ye.newFoundDocument(o,s,a,u)}(t,e):"missing"in e?function(r,i){Q(!!i.missing),Q(!!i.readTime);let o=An(r,i.missing),s=$e(i.readTime);return Ye.newNoDocument(o,s)}(t,e):G()}function gj(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:G()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,d){return l.useProto3Json?(Q(d===void 0||typeof d=="string"),qe.fromBase64String(d||"")):(Q(d===void 0||d instanceof Buffer||d instanceof Uint8Array),qe.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let d=l.code===void 0?x.UNKNOWN:oA(l.code);return new k(d,l.message||"")}(s);n=new sh(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=An(t,r.document.name),o=$e(r.document.updateTime),s=r.document.createTime?$e(r.document.createTime):X.min(),a=new gt({mapValue:{fields:r.document.fields}}),u=Ye.newFoundDocument(i,o,s,a),l=r.targetIds||[],d=r.removedTargetIds||[];n=new ms(l,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=An(t,r.document),o=r.readTime?$e(r.readTime):X.min(),s=Ye.newNoDocument(i,o),a=r.removedTargetIds||[];n=new ms([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=An(t,r.document),o=r.removedTargetIds||[];n=new ms([],o,i,null)}else{if(!("filter"in e))return G();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Qy(i,o),a=r.targetId;n=new oh(a,s)}}return n}function Mu(t,e){let n;if(e instanceof Xr)n={update:z0(t,e.key,e.value)};else if(e instanceof ei)n={delete:xu(t,e.key)};else if(e instanceof fn)n={update:z0(t,e.key,e.data),updateMask:Ej(e.fieldMask)};else{if(!(e instanceof bu))return G();n={verify:xu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Zr)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof sr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ar)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Jr)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw G()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:fj(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:G()}(t,e.precondition)),n}function nv(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?Ve.updateTime($e(o.updateTime)):o.exists!==void 0?Ve.exists(o.exists):Ve.none()}(e.currentDocument):Ve.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)Q(a.setToServerValue==="REQUEST_TIME"),u=new Zr;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];u=new sr(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];u=new ar(d)}else"increment"in a?u=new Jr(s,a.increment):G();let l=Be.fromServerFormat(a.fieldPath);return new Ki(l,u)}(t,i)):[];if(e.update){e.update.name;let i=An(t,e.update.name),o=new gt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new Ut(l.map(d=>Be.fromServerFormat(d)))}(e.updateMask);return new fn(i,o,s,n,r)}return new Xr(i,o,n,r)}if(e.delete){let i=An(t,e.delete);return new ei(i,n)}if(e.verify){let i=An(t,e.verify);return new bu(i,n)}return G()}function mj(t,e){return t&&t.length>0?(Q(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?$e(i.updateTime):$e(o);return s.isEqual(X.min())&&(s=$e(o)),new Wy(s,i.transformResults||[])}(n,e))):[]}function fA(t,e){return{documents:[cA(t,e.path)]}}function pA(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=cA(t,i);let o=function(l){if(l.length!==0)return yA(_e.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(d=>function(g){return{field:ls(g.field),direction:vj(g.dir)}}(d))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=Xy(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function gA(t){let e=lA(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Q(r===1);let d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];n.where&&(o=function(f){let g=mA(f);return g instanceof _e&&Cw(g)?g.getFilters():[g]}(n.where));let s=[];n.orderBy&&(s=function(f){return f.map(g=>function(_){return new Gi(ds(_.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,$u(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(f){let g=!!f.before,y=f.values||[];return new Mn(y,g)}(n.startAt));let l=null;return n.endAt&&(l=function(f){let g=!f.before,y=f.values||[];return new Mn(y,g)}(n.endAt)),qS(e,i,s,o,a,"F",u,l)}function yj(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function mA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=ds(n.unaryFilter.field);return fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ds(n.unaryFilter.field);return fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ds(n.unaryFilter.field);return fe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ds(n.unaryFilter.field);return fe.create(s,"!=",{nullValue:"NULL_VALUE"});default:return G()}}(t):t.fieldFilter!==void 0?function(n){return fe.create(ds(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return G()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return _e.create(n.compositeFilter.filters.map(r=>mA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return G()}}(n.compositeFilter.op))}(t):G()}function vj(t){return lj[t]}function wj(t){return dj[t]}function Ij(t){return hj[t]}function ls(t){return{fieldPath:t.canonicalString()}}function ds(t){return Be.fromServerFormat(t.fieldPath)}function yA(t){return t instanceof fe?function(n){if(n.op==="=="){if(S0(n.value))return{unaryFilter:{field:ls(n.field),op:"IS_NAN"}};if(C0(n.value))return{unaryFilter:{field:ls(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(S0(n.value))return{unaryFilter:{field:ls(n.field),op:"IS_NOT_NAN"}};if(C0(n.value))return{unaryFilter:{field:ls(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ls(n.field),op:wj(n.op),value:n.value}}}(t):t instanceof _e?function(n){let r=n.getFilters().map(i=>yA(i));return r.length===1?r[0]:{compositeFilter:{op:Ij(n.op),filters:r}}}(t):G()}function Ej(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function vA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Ts=class t{constructor(e,n,r,i,o=X.min(),s=X.min(),a=qe.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var uh=class{constructor(e){this.ct=e}};function _j(t,e){let n;if(e.document)n=hA(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=q.fromSegments(e.noDocument.path),i=Yi(e.noDocument.readTime);n=Ye.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return G();{let r=q.fromSegments(e.unknownDocument.path),i=Yi(e.unknownDocument.version);n=Ye.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let o=new Oe(i[0],i[1]);return X.fromTimestamp(o)}(e.readTime)),n}function H0(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:ch(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:xu(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Ds(o,s.version.toTimestamp()),createTime:Ds(o,s.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Qi(e.version)};else{if(!e.isUnknownDocument())return G();r.unknownDocument={path:n.path.toArray(),version:Qi(e.version)}}return r}function ch(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Qi(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Yi(t){let e=new Oe(t.seconds,t.nanoseconds);return X.fromTimestamp(e)}function ji(t,e){let n=(e.baseMutations||[]).map(o=>nv(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>nv(t.ct,o)),i=Oe.fromMillis(e.localWriteTimeMs);return new Cu(e.batchId,i,n,r)}function fu(t){let e=Yi(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Yi(t.lastLimboFreeSnapshotVersion):X.min(),r;return r=function(o){return o.documents!==void 0}(t.query)?function(o){return Q(o.documents.length===1),Rt(Os(lA(o.documents[0])))}(t.query):function(o){return Rt(gA(o))}(t.query),new Ts(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,qe.fromBase64String(t.resumeToken))}function wA(t,e){let n=Qi(e.snapshotVersion),r=Qi(e.lastLimboFreeSnapshotVersion),i;i=nh(e.target)?fA(t.ct,e.target):pA(t.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Wi(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Mw(t){let e=gA({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ih(e,e.limit,"L"):e}function yy(t,e){return new Su(e.largestBatchId,nv(t.ct,e.overlayMutation))}function G0(t,e){let n=e.path.lastSegment();return[t,At(e.path.popLast()),n]}function W0(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Qi(r.readTime),documentKey:At(r.documentKey.path),largestBatchId:r.largestBatchId}}var rv=class{getBundleMetadata(e,n){return K0(e).get(n).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Yi(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,n){return K0(e).put(function(i){return{bundleId:i.id,createTime:Qi($e(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return Q0(e).get(n).next(r=>{if(r)return function(o){return{name:o.name,query:Mw(o.bundledQuery),readTime:Yi(o.readTime)}}(r)})}saveNamedQuery(e,n){return Q0(e).put(function(i){return{name:i.name,readTime:Qi($e(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function K0(t){return et(t,"bundles")}function Q0(t){return et(t,"namedQueries")}var lh=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return uu(e).get(G0(this.userId,n)).next(r=>r?yy(this.serializer,r):null)}getOverlays(e,n){let r=Cn();return R.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((o,s)=>{let a=new Su(n,s);i.push(this.ht(e,a))}),R.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(s=>i.add(At(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(uu(e).j("collectionPathOverlayIndex",a))}),R.waitFor(o)}getOverlaysForCollection(e,n,r){let i=Cn(),o=At(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return uu(e).U("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let l=yy(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let o=Cn(),s,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return uu(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,d)=>{let f=yy(this.serializer,l);o.size()<i||f.largestBatchId===s?(o.set(f.getKey(),f),s=f.largestBatchId):d.done()}).next(()=>o)}ht(e,n){return uu(e).put(function(i,o,s){let[a,u,l]=G0(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Mu(i.ct,s.mutation)}}(this.serializer,this.userId,n))}};function uu(t){return et(t,"documentOverlays")}var iv=class{Pt(e){return et(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{let r=n?.value;return r?qe.fromUint8Array(r):qe.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}};var rr=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Ne(e.integerValue));else if("doubleValue"in e){let r=Ne(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Iu(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=or(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Kr(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?OS(e)?this.dt(n,Number.MAX_SAFE_INTEGER):zh(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):G()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let o=e.fields||{};this.dt(n,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Ne(a)),this.Vt(s,n),this.Tt(o[s],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),q.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};rr.vt=new rr;function Dj(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function Y0(t){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=Dj(255&r[o]);if(i+=s,s!==8)break}return i}(t);return Math.ceil(e/8)}var ov=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=n.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let n=this.qt(e),r=Y0(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Kt(e){let n=this.qt(e),r=Y0(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ft(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){let n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},sv=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},av=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},Ui=class{constructor(){this.jt=new ov,this.Ht=new sv(this.jt),this.Jt=new av(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var Bi=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function Ur(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=Z0(t.arrayValue,e.arrayValue),n!==0?n:(n=Z0(t.directionalValue,e.directionalValue),n!==0?n:q.comparator(t.documentKey,e.documentKey)))}function Z0(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var dh=class{constructor(e){this.Xt=new Ce((n,r)=>Be.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let n of e.filters){let r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Q(e.collectionGroup===this.collectionId),this.nn)return!1;let n=Ay(e);if(n!==void 0&&!this.sn(n))return!1;let r=Li(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.on(a,u)||!this._n(this.en[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ce(Be.comparator),n=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new ps(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new ps(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new ps(r.field,r.dir==="asc"?0:1)));return new vs(vs.UNKNOWN_ID,this.collectionId,n,wu.empty())}sn(e){for(let n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function IA(t){var e,n;if(Q(t instanceof fe||t instanceof _e),t instanceof fe){if(t instanceof th){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>fe.create(t.field,"==",o)))||[];return _e.create(i,"or")}return t}let r=t.filters.map(i=>IA(i));return _e.create(r,t.op)}function Tj(t){if(t.getFilters().length===0)return[];let e=lv(IA(t));return Q(EA(e)),uv(e)||cv(e)?[e]:e.getFilters()}function uv(t){return t instanceof fe}function cv(t){return t instanceof _e&&Cw(t)}function EA(t){return uv(t)||cv(t)||function(n){if(n instanceof _e&&Fy(n)){for(let r of n.getFilters())if(!uv(r)&&!cv(r))return!1;return!0}return!1}(t)}function lv(t){if(Q(t instanceof fe||t instanceof _e),t instanceof fe)return t;if(t.filters.length===1)return lv(t.filters[0]);let e=t.filters.map(r=>lv(r)),n=_e.create(e,t.op);return n=hh(n),EA(n)?n:(Q(n instanceof _e),Q(Is(n)),Q(n.filters.length>1),n.filters.reduce((r,i)=>Nw(r,i)))}function Nw(t,e){let n;return Q(t instanceof fe||t instanceof _e),Q(e instanceof fe||e instanceof _e),n=t instanceof fe?e instanceof fe?function(i,o){return _e.create([i,o],"and")}(t,e):J0(t,e):e instanceof fe?J0(e,t):function(i,o){if(Q(i.filters.length>0&&o.filters.length>0),Is(i)&&Is(o))return US(i,o.getFilters());let s=Fy(i)?i:o,a=Fy(i)?o:i,u=s.filters.map(l=>Nw(l,a));return _e.create(u,"or")}(t,e),hh(n)}function J0(t,e){if(Is(e))return US(e,t.getFilters());{let n=e.filters.map(r=>Nw(t,r));return _e.create(n,"or")}}function hh(t){if(Q(t instanceof fe||t instanceof _e),t instanceof fe)return t;let e=t.getFilters();if(e.length===1)return hh(e[0]);if(VS(t))return t;let n=e.map(i=>hh(i)),r=[];return n.forEach(i=>{i instanceof fe?r.push(i):i instanceof _e&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:_e.create(r,t.op)}var dv=class{constructor(){this.un=new Nu}addToCollectionParentIndex(e,n){return this.un.add(n),R.resolve()}getCollectionParents(e,n){return R.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return R.resolve()}deleteFieldIndex(e,n){return R.resolve()}deleteAllFieldIndexes(e){return R.resolve()}createTargetIndexes(e,n){return R.resolve()}getDocumentsMatchingTarget(e,n){return R.resolve(null)}getIndexType(e,n){return R.resolve(0)}getFieldIndexes(e,n){return R.resolve([])}getNextCollectionGroupToUpdate(e){return R.resolve(null)}getMinOffset(e,n){return R.resolve(en.min())}getMinOffsetFromCollectionGroup(e,n){return R.resolve(en.min())}updateCollectionGroup(e,n,r){return R.resolve()}updateIndexEntries(e,n){return R.resolve()}},Nu=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ce(ge.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ce(ge.comparator)).toArray()}};var Ld=new Uint8Array(0),hv=class{constructor(e,n){this.databaseId=n,this.cn=new Nu,this.ln=new Nn(r=>Wi(r),(r,i)=>qu(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});let o={collectionId:r,parent:At(i)};return X0(e).put(o)}return R.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[DS(n),""],!1,!0);return X0(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==n)break;r.push(bn(s.parent))}return r})}addFieldIndex(e,n){let r=cu(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete i.indexId;let o=r.add(i);if(n.indexState){let s=ss(e);return o.next(a=>{s.put(W0(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let r=cu(e),i=ss(e),o=os(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=cu(e),r=os(e),i=ss(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return R.forEach(this.hn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new dh(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let r=os(e),i=!0,o=new Map;return R.forEach(this.hn(n),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=oe(),a=[];return R.forEach(o,(u,l)=>{O("IndexedDbIndexManager",`Using index ${function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map(B=>`${B.fieldPath}:${B.kind}`).join(",")}`}(u)} to execute ${Wi(n)}`);let d=function(F,B){let Z=Ay(B);if(Z===void 0)return null;for(let K of rh(F,Z.fieldPath))switch(K.op){case"array-contains-any":return K.value.arrayValue.values||[];case"array-contains":return[K.value]}return null}(l,u),f=function(F,B){let Z=new Map;for(let K of Li(B))for(let E of rh(F,K.fieldPath))switch(E.op){case"==":case"in":Z.set(K.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return Z.set(K.fieldPath.canonicalString(),E.value),Array.from(Z.values())}return null}(l,u),g=function(F,B){let Z=[],K=!0;for(let E of Li(B)){let v=E.kind===0?N0(F,E.fieldPath,F.startAt):P0(F,E.fieldPath,F.startAt);Z.push(v.value),K&&(K=v.inclusive)}return new Mn(Z,K)}(l,u),y=function(F,B){let Z=[],K=!0;for(let E of Li(B)){let v=E.kind===0?P0(F,E.fieldPath,F.endAt):N0(F,E.fieldPath,F.endAt);Z.push(v.value),K&&(K=v.inclusive)}return new Mn(Z,K)}(l,u),_=this.In(u,l,g),A=this.In(u,l,y),C=this.Tn(u,l,f),P=this.En(u.indexId,d,_,g.inclusive,A,y.inclusive,C);return R.forEach(P,j=>r.G(j,n.limit).next(F=>{F.forEach(B=>{let Z=q.fromSegments(B.documentKey);s.has(Z)||(s=s.add(Z),a.push(Z))})}))}).next(()=>a)}return R.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(e.filters.length===0?n=[e]:n=Tj(_e.create(e.filters,"and")).map(r=>Hy(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,i,o,s,a){let u=(n!=null?n.length:1)*Math.max(r.length,o.length),l=u/(n!=null?n.length:1),d=[];for(let f=0;f<u;++f){let g=n?this.dn(n[f/l]):Ld,y=this.An(e,g,r[f%l],i),_=this.Rn(e,g,o[f%l],s),A=a.map(C=>this.An(e,g,C,!0));d.push(...this.createRange(y,_,A))}return d}An(e,n,r,i){let o=new Bi(e,q.empty(),n,r);return i?o:o.Zt()}Rn(e,n,r,i){let o=new Bi(e,q.empty(),n,r);return i?o.Zt():o}Pn(e,n){let r=new dh(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2,i=this.hn(n);return R.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new Ce(Be.comparator),d=!1;for(let f of u.filters)for(let g of f.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?d=!0:l=l.add(g.field));for(let f of u.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(d?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}Vn(e,n){let r=new Ui;for(let i of Li(e)){let o=n.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);rr.vt.It(o,s)}return r.zt()}dn(e){let n=new Ui;return rr.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){let r=new Ui;return rr.vt.It(Hi(this.databaseId,n),r.Yt(function(o){let s=Li(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(r===null)return[];let i=[];i.push(new Ui);let o=0;for(let s of Li(e)){let a=r[o++];for(let u of i)if(this.fn(n,s.fieldPath)&&Tu(a))i=this.gn(i,s,a);else{let l=u.Yt(s.kind);rr.vt.It(a,l)}}return this.pn(i)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new Ui;u.seed(a.zt()),rr.vt.It(s,u.Yt(n.kind)),o.push(u)}return o}fn(e,n){return!!e.filters.find(r=>r instanceof fe&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=cu(e),i=ss(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(o=>{let s=[];return R.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(d,f){let g=f?new wu(f.sequenceNumber,new en(Yi(f.readTime),new q(bn(f.documentKey)),f.largestBatchId)):wu.empty(),y=d.fields.map(([_,A])=>new ps(Be.fromServerFormat(_),A));return new vs(d.indexId,d.collectionGroup,y,g)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:re(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=cu(e),o=ss(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>R.forEach(a,u=>o.put(W0(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,n){let r=new Map;return R.forEach(n,(i,o)=>{let s=r.get(i.collectionGroup);return(s?R.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),R.forEach(a,u=>this.wn(e,i,u).next(l=>{let d=this.Sn(o,u);return l.isEqual(d)?R.resolve():this.bn(e,o,u,l,d)}))))})}Dn(e,n,r,i){return os(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,i){return os(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){let i=os(e),o=new Ce(Ur);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(s,a)=>{o=o.add(new Bi(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,n){let r=new Ce(Ur),i=this.Vn(n,e);if(i==null)return r;let o=Ay(n);if(o!=null){let s=e.data.field(o.fieldPath);if(Tu(s))for(let a of s.arrayValue.values||[])r=r.add(new Bi(n.indexId,e.key,this.dn(a),i))}else r=r.add(new Bi(n.indexId,e.key,Ld,i));return r}bn(e,n,r,i,o){O("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(u,l,d,f,g){let y=u.getIterator(),_=l.getIterator(),A=is(y),C=is(_);for(;A||C;){let P=!1,j=!1;if(A&&C){let F=d(A,C);F<0?j=!0:F>0&&(P=!0)}else A!=null?j=!0:P=!0;P?(f(C),C=is(_)):j?(g(A),A=is(y)):(A=is(y),C=is(_))}}(i,o,Ur,a=>{s.push(this.Dn(e,n,r,a))},a=>{s.push(this.vn(e,n,r,a))}),R.waitFor(s)}yn(e){let n=1;return ss(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>Ur(s,a)).filter((s,a,u)=>!a||Ur(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Ur(s,e),u=Ur(s,n);if(a===0)i[0]=e.Zt();else if(a>0&&u<0)i.push(s),i.push(s.Zt());else if(u>0)break}i.push(n);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Ld,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Ld,[]];o.push(IDBKeyRange.bound(a,u))}return o}Cn(e,n){return Ur(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(eS)}getMinOffset(e,n){return R.mapArray(this.hn(n),r=>this.Pn(e,r).next(i=>i||G())).next(eS)}};function X0(t){return et(t,"collectionParents")}function os(t){return et(t,"indexEntries")}function cu(t){return et(t,"indexConfiguration")}function ss(t){return et(t,"indexState")}function eS(t){Q(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;_w(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new en(e.readTime,e.documentKey,n)}var tS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Jt=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function _A(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.J({range:s},(d,f,g)=>(a++,g.delete()));o.push(u.next(()=>{Q(a===1)}));let l=[];for(let d of n.mutations){let f=RS(e,d.key.path,n.batchId);o.push(i.delete(f)),l.push(d.key)}return R.waitFor(o).next(()=>l)}function fh(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw G();e=t.noDocument}return JSON.stringify(e).length}Jt.DEFAULT_COLLECTION_PERCENTILE=10,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jt.DEFAULT=new Jt(41943040,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jt.DISABLED=new Jt(-1,0,0);var ph=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,n,r,i){Q(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Br(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let o=hs(e),s=Br(e);return s.add({}).next(a=>{Q(typeof a=="number");let u=new Cu(a,n,r,i),l=function(y,_,A){let C=A.baseMutations.map(j=>Mu(y.ct,j)),P=A.mutations.map(j=>Mu(y.ct,j));return{userId:_,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:C,mutations:P}}(this.serializer,this.userId,u),d=[],f=new Ce((g,y)=>re(g.canonicalString(),y.canonicalString()));for(let g of i){let y=RS(this.userId,g.key.path,a);f=f.add(g.key.path.popLast()),d.push(s.put(l)),d.push(o.put(y,xV))}return f.forEach(g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),R.waitFor(d).next(()=>u)})}lookupMutationBatch(e,n){return Br(e).get(n).next(r=>r?(Q(r.userId===this.userId),ji(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?R.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Fn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Br(e).J({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(Q(a.batchId>=r),o=ji(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Br(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Br(e).U("userMutationsIndex",n).next(r=>r.map(i=>ji(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=Bd(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return hs(e).J({range:i},(s,a,u)=>{let[l,d,f]=s,g=bn(d);if(l===this.userId&&n.path.isEqual(g))return Br(e).get(f).next(y=>{if(!y)throw G();Q(y.userId===this.userId),o.push(ji(this.serializer,y))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ce(re),i=[];return n.forEach(o=>{let s=Bd(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=hs(e).J({range:a},(l,d,f)=>{let[g,y,_]=l,A=bn(y);g===this.userId&&o.path.isEqual(A)?r=r.add(_):f.done()});i.push(u)}),R.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=Bd(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Ce(re);return hs(e).J({range:s},(u,l,d)=>{let[f,g,y]=u,_=bn(g);f===this.userId&&r.isPrefixOf(_)?_.length===i&&(a=a.add(y)):d.done()}).next(()=>this.xn(e,a))}xn(e,n){let r=[],i=[];return n.forEach(o=>{i.push(Br(e).get(o).next(s=>{if(s===null)throw G();Q(s.userId===this.userId),r.push(ji(this.serializer,s))}))}),R.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return _A(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),R.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return R.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return hs(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=bn(o[1]);i.push(u)}else a.done()}).next(()=>{Q(i.length===0)})})}containsKey(e,n){return DA(e,this.userId,n)}Nn(e){return TA(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function DA(t,e,n){let r=Bd(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return hs(t).J({range:o,H:!0},(a,u,l)=>{let[d,f,g]=a;d===e&&f===i&&(s=!0),l.done()}).next(()=>s)}function Br(t){return et(t,"mutations")}function hs(t){return et(t,"documentMutations")}function TA(t){return et(t,"mutationQueues")}var bs=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var fv=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{let r=new bs(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>X.fromTimestamp(new Oe(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Qn(e,i)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>as(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(Q(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let i=0,o=[];return as(e).J((s,a)=>{let u=fu(a);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>R.waitFor(o)).next(()=>i)}forEachTarget(e,n){return as(e).J((r,i)=>{let o=fu(i);n(o)})}qn(e){return nS(e).get("targetGlobalKey").next(n=>(Q(n!==null),n))}Qn(e,n){return nS(e).put("targetGlobalKey",n)}Kn(e,n){return as(e).put(wA(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){let r=Wi(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return as(e).J({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let l=fu(a);qu(n,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,n,r){let i=[],o=$r(e);return n.forEach(s=>{let a=At(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),R.waitFor(i)}removeMatchingKeys(e,n,r){let i=$r(e);return R.forEach(n,o=>{let s=At(o.path);return R.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){let r=$r(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=$r(e),o=oe();return i.J({range:r,H:!0},(s,a,u)=>{let l=bn(s[1]),d=new q(l);o=o.add(d)}).next(()=>o)}containsKey(e,n){let r=At(n.path),i=IDBKeyRange.bound([r],[DS(r)],!1,!0),o=0;return $r(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,n){return as(e).get(n).next(r=>r?fu(r):null)}};function as(t){return et(t,"targets")}function nS(t){return et(t,"targetGlobal")}function $r(t){return et(t,"targetDocuments")}function rS([t,e],[n,r]){let i=re(t,n);return i===0?re(e,r):i}var pv=class{constructor(e){this.Un=e,this.buffer=new Ce(rS),this.Wn=0}Gn(){return++this.Wn}zn(e){let n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();rS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},gv=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){O("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>N(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){ri(n)?O("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield ni(n)}yield this.Hn(3e5)}))}},mv=class{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return R.resolve(jt.oe);let r=new pv(n);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(O("LruGarbageCollector","Garbage collection skipped; disabled"),R.resolve(tS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(O("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tS):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,i,o,s,a,u,l,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(O("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(o=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),us()<=yn.DEBUG&&O("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(l-u)+`ms
Total Duration: ${l-d}ms`),R.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function bj(t,e){return new mv(t,e)}var yv=class{constructor(e,n){this.db=e,this.garbageCollector=bj(this,n)}Yn(e){let n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,i)=>n(i))}addReference(e,n,r){return Vd(e,r)}removeReference(e,n,r){return Vd(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Vd(e,n)}nr(e,n){return function(i,o){let s=!1;return TA(i).Y(a=>DA(i,a,o).next(u=>(u&&(s=!0),R.resolve(!u)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=n){let u=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,X.min()),$r(e).delete(function(f){return[0,At(f.path)]}(s))))});i.push(u)}}).next(()=>R.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Vd(e,n)}tr(e,n){let r=$r(e),i,o=jt.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==jt.oe&&n(new q(bn(i)),o),o=l,i=u):o=jt.oe}).next(()=>{o!==jt.oe&&n(new q(bn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Vd(t,e){return $r(t).put(function(r,i){return{targetId:0,path:At(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var gh=class{constructor(){this.changes=new Nn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ye.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?R.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var vv=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Fi(e).put(r)}removeEntry(e,n,r){return Fi(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],ch(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=Ye.newInvalidDocument(n);return Fi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(lu(n))},(i,o)=>{r=this.ir(n,o)}).next(()=>r)}sr(e,n){let r={size:0,document:Ye.newInvalidDocument(n)};return Fi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(lu(n))},(i,o)=>{r={document:this.ir(n,o),size:fh(o)}}).next(()=>r)}getEntries(e,n){let r=Ot();return this._r(e,n,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,n){let r=Ot(),i=new xe(q.comparator);return this._r(e,n,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,fh(s))}).next(()=>({documents:r,ur:i}))}_r(e,n,r){if(n.isEmpty())return R.resolve();let i=new Ce(sS);n.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(lu(i.first()),lu(i.last())),s=i.getIterator(),a=s.getNext();return Fi(e).J({index:"documentKeyIndex",range:o},(u,l,d)=>{let f=q.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&sS(a,f)<0;)r(a,null),a=s.getNext();a&&a.isEqual(f)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?d.$(lu(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),ch(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Fi(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let d=Ot();for(let f of l){let g=this.ir(q.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(Hu(n,g)||i.has(g.key))&&(d=d.insert(g.key,g))}return d})}getAllFromCollectionGroup(e,n,r,i){let o=Ot(),s=oS(n,r),a=oS(n,en.max());return Fi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,d)=>{let f=this.ir(q.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(f.key,f),o.size===i&&d.done()}).next(()=>o)}newChangeBuffer(e){return new wv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return iS(e).get("remoteDocumentGlobalKey").next(n=>(Q(!!n),n))}rr(e,n){return iS(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){let r=_j(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(X.min())))return r}return Ye.newInvalidDocument(e)}};function bA(t){return new vv(t)}var wv=class extends gh{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new Nn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new Ce((o,s)=>re(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(n.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=H0(this.cr.serializer,s);i=i.add(o.path.popLast());let l=fh(u);r+=l-a.size,n.push(this.cr.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=H0(this.cr.serializer,s.convertToNoDocument(X.min()));n.push(this.cr.addEntry(e,o,u))}}),i.forEach(o=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.cr.updateMetadata(e,r)),R.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function iS(t){return et(t,"remoteDocumentGlobal")}function Fi(t){return et(t,"remoteDocumentsV14")}function lu(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function oS(t,e){let n=e.documentKey.path.toArray();return[t,ch(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function sS(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=re(n[o],r[o]),i)return i;return i=re(n.length,r.length),i||(i=re(n[n.length-2],r[r.length-2]),i||re(n[n.length-1],r[r.length-1]))}var Iv=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var mh=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&mu(r.mutation,i,Ut.empty(),Oe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,oe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=oe()){let i=Cn();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=hu();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Cn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,oe()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Ot(),s=gu(),a=function(){return gu()}();return n.forEach((u,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof fn)?o=o.insert(l.key,l):d!==void 0?(s.set(l.key,d.mutation.getFieldMask()),mu(d.mutation,l,d.mutation.getFieldMask(),Oe.now())):s.set(l.key,Ut.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,d)=>s.set(l,d)),n.forEach((l,d)=>{var f;return a.set(l,new Iv(d,(f=s.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){let r=gu(),i=new xe((s,a)=>s-a),o=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let d=r.get(u)||Ut.empty();d=a.applyToLocalView(l,d),r.set(u,d);let f=(i.get(a.batchId)||oe()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,d=u.value,f=QS();d.forEach(g=>{if(!o.has(g)){let y=nA(n.get(g),r.get(g));y!==null&&f.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,f))}return R.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return q.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Sw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):R.resolve(Cn()),a=-1,u=o;return s.next(l=>R.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?R.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{u=u.insert(d,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,oe())).next(d=>({batchId:a,changes:KS(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let i=hu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=hu();return this.indexManager.getCollectionParents(e,o).next(a=>R.forEach(a,u=>{let l=function(f,g){return new hn(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,g)=>{s=s.insert(f,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let d=l.getKey();s.get(d)===null&&(s=s.insert(d,Ye.newInvalidDocument(d)))});let a=hu();return s.forEach((u,l)=>{let d=o.get(u);d!==void 0&&mu(d.mutation,l,Ut.empty(),Oe.now()),Hu(n,l)&&(a=a.insert(u,l))}),a})}};var Ev=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return R.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:$e(i.createTime)}}(n)),R.resolve()}getNamedQuery(e,n){return R.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:Mw(i.bundledQuery),readTime:$e(i.readTime)}}(n)),R.resolve()}};var _v=class{constructor(){this.overlays=new xe(q.comparator),this.Ir=new Map}getOverlay(e,n){return R.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Cn();return R.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),R.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),R.resolve()}getOverlaysForCollection(e,n,r){let i=Cn(),o=n.length+1,s=new q(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return R.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new xe((l,d)=>l-d),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let d=o.get(l.largestBatchId);d===null&&(d=Cn(),o=o.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=Cn(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return R.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Su(n,r));let o=this.Ir.get(n);o===void 0&&(o=oe(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}};var Dv=class{constructor(){this.sessionToken=qe.EMPTY_BYTE_STRING}getSessionToken(e){return R.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,R.resolve()}};var Pu=class{constructor(){this.Tr=new Ce(We.Er),this.dr=new Ce(We.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new We(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new We(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new q(new ge([])),r=new We(n,e),i=new We(n,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new q(new ge([])),r=new We(n,e),i=new We(n,e+1),o=oe();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new We(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},We=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return q.comparator(e.key,n.key)||re(e.wr,n.wr)}static Ar(e,n){return re(e.wr,n.wr)||q.comparator(e.key,n.key)}};var Tv=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ce(We.Er)}checkEmpty(e){return R.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Cu(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new We(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return R.resolve(s)}lookupMutationBatch(e,n){return R.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),o=i<0?0:i;return R.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return R.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new We(n,0),i=new We(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),R.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ce(re);return n.forEach(i=>{let o=new We(i,0),s=new We(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),R.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;q.isDocumentKey(o)||(o=o.child(""));let s=new We(new q(o),0),a=new Ce(re);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),R.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Q(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return R.forEach(n.mutations,i=>{let o=new We(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new We(n,0),i=this.br.firstAfterOrEqual(r);return R.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,R.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var bv=class{constructor(e){this.Mr=e,this.docs=function(){return new xe(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return R.resolve(r?r.document.mutableCopy():Ye.newInvalidDocument(n))}getEntries(e,n){let r=Ot();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Ye.newInvalidDocument(i))}),R.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Ot(),s=n.path,a=new q(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:d}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||_w(bS(d),r)<=0||(i.has(d.key)||Hu(n,d))&&(o=o.insert(d.key,d.mutableCopy()))}return R.resolve(o)}getAllFromCollectionGroup(e,n,r,i){G()}Or(e,n){return R.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Cv(this)}getSize(e){return R.resolve(this.size)}},Cv=class extends gh{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),R.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var Sv=class{constructor(e){this.persistence=e,this.Nr=new Nn(n=>Wi(n),qu),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Pu,this.targetCount=0,this.kr=bs.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),R.resolve()}getLastRemoteSnapshotVersion(e){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return R.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),R.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new bs(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,R.resolve()}updateTargetData(e,n){return this.Kn(n),R.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,R.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),R.waitFor(o).next(()=>i)}getTargetCount(e){return R.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return R.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),R.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),R.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),R.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return R.resolve(r)}containsKey(e,n){return R.resolve(this.Br.containsKey(n))}};var yh=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new jt(0),this.Kr=!1,this.Kr=!0,this.$r=new Dv,this.referenceDelegate=e(this),this.Ur=new Sv(this),this.indexManager=new dv,this.remoteDocumentCache=function(i){return new bv(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new uh(n),this.Gr=new Ev(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new _v,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Tv(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){O("MemoryPersistence","Starting transaction:",e);let i=new Av(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,n){return R.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},Av=class extends Yd{constructor(e){super(),this.currentSequenceNumber=e}},vh=class t{constructor(e){this.persistence=e,this.Jr=new Pu,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw G()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),R.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),R.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),R.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.Xr,r=>{let i=q.fromPath(r);return this.ei(e,i).next(o=>{o||n.removeEntry(i,X.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return R.or([()=>R.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var Rv=class{constructor(e){this.serializer=e}O(e,n,r,i){let o=new Zd("createOrUpgrade",n);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_0,{unique:!0}),u.createObjectStore("documentMutations")}(e),aS(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=R.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),aS(e)),s=s.next(()=>function(u){let l=u.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:X.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",d)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store("mutations").U().next(d=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",_0,{unique:!0});let f=l.store("mutations"),g=d.map(y=>f.put(y));return R.waitFor(g)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore("documentOverlays",{keyPath:$V});l.createIndex("collectionPathOverlayIndex",qV,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",zV,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore("remoteDocumentsV14",{keyPath:MV});l.createIndex("documentKeyIndex",NV),l.createIndex("collectionGroupIndex",PV)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:VV}).createIndex("sequenceNumberIndex",jV,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:UV}).createIndex("documentKeyIndex",BV,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=fh(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>R.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>R.forEach(a,u=>{Q(u.userId===o.userId);let l=ji(this.serializer,u);return _A(e,o.userId,l).next(()=>{})}))}))}ii(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let u=new ge(s),l=function(f){return[0,At(f)]}(u);o.push(n.get(l).next(d=>d?R.resolve():(f=>n.put({targetId:0,path:At(f),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>R.waitFor(o))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:LV});let r=n.store("collectionParents"),i=new Nu,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:At(u)})}};return n.store("remoteDocuments").J({H:!0},(s,a)=>{let u=new ge(s);return o(u.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([s,a,u],l)=>{let d=bn(a);return o(d.popLast())}))}oi(e){let n=e.store("targets");return n.J((r,i)=>{let o=fu(i),s=wA(this.serializer,o);return n.put(s)})}_i(e,n){let r=n.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=n.store("remoteDocumentsV14"),u=function(f){return f.document?new q(ge.fromString(f.document.name).popFirst(5)):f.noDocument?q.fromSegments(f.noDocument.path):f.unknownDocument?q.fromSegments(f.unknownDocument.path):G()}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>R.waitFor(i))}ai(e,n){let r=n.store("mutations"),i=bA(this.serializer),o=new yh(vh.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(u=>{var l;let d=(l=a.get(u.userId))!==null&&l!==void 0?l:oe();ji(this.serializer,u).keys().forEach(f=>d=d.add(f)),a.set(u.userId,d)}),R.forEach(a,(u,l)=>{let d=new Ke(l),f=lh.lt(this.serializer,d),g=o.getIndexManager(d),y=ph.lt(d,this.serializer,g,o.referenceDelegate);return new mh(i,y,f,g).recalculateAndSaveOverlaysForDocumentKeys(new Eu(n,jt.oe),u).next()})})}};function aS(t){t.createObjectStore("targetDocuments",{keyPath:OV}).createIndex("documentTargetsIndex",FV,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",kV,{unique:!0}),t.createObjectStore("targetGlobal")}var vy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",xv=class t{constructor(e,n,r,i,o,s,a,u,l,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=d,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=g=>Promise.resolve(),!t.D())throw new k(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new yv(this,i),this.Ai=n+"main",this.serializer=new uh(u),this.Ri=new Wr(this.Ai,this.hi,new Rv(this.serializer)),this.$r=new iv,this.Ur=new fv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=bA(this.serializer),this.Gr=new rv,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&Ue("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new k(x.FAILED_PRECONDITION,vy);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new jt(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=n=>N(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(n=>N(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>jd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(ri(e))return O("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return O("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return du(e).get("owner").next(n=>R.resolve(this.vi(n)))}Ci(e){return jd(e).delete(this.clientId)}Fi(){return N(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=et(n,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return R.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let n of e)this.Vi.removeItem(this.Oi(n.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?R.resolve(!0):du(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new k(x.FAILED_PRECONDITION,vy);return!1}}return!(!this.networkEnabled||!this.inForeground)||jd(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&O("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return N(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new Eu(e,jt.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()})}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>jd(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return ph.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new hv(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return lh.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){O("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",o=function(u){return u===17?WV:u===16?GV:u===15?Tw:u===14?NS:u===13?MS:u===12?HV:u===11?xS:void G()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new Eu(a,this.Qr?this.Qr.next():jt.oe),n==="readwrite-primary"?this.wi(s).next(u=>!!u||this.Si(s)).next(u=>{if(!u)throw Ue(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new k(x.FAILED_PRECONDITION,CS);return r(s)}).next(u=>this.Di(s).next(()=>u)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return du(e).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new k(x.FAILED_PRECONDITION,vy)})}Di(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return du(e).put("owner",n)}static D(){return Wr.D()}bi(e){let n=du(e);return n.get("owner").next(r=>this.vi(r)?(O("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):R.resolve())}Mi(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(Ue(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let n=/(?:Version|Mobile)\/1[456]/;Xf()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{let r=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(e)))!==null;return O("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ue("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ue("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function du(t){return et(t,"owner")}function jd(t){return et(t,"clientMetadata")}function Pw(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Mv=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=oe(),i=oe();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var Nv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var wh=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Xf()?8:SS(Ea())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.Yi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Nv;return this.Xi(e,n,s).next(a=>{if(o.result=a,this.zi)return this.es(e,n,s,a.size)})}).next(()=>o.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(us()<=yn.DEBUG&&O("QueryEngine","SDK will not create cache indexes for query:",cs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),R.resolve()):(us()<=yn.DEBUG&&O("QueryEngine","Query:",cs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(us()<=yn.DEBUG&&O("QueryEngine","The SDK decides to create cache indexes for query:",cs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rt(n))):R.resolve())}Yi(e,n){if(k0(n))return R.resolve(null);let r=Rt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=ih(n,null,"F"),r=Rt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=oe(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(n,a);return this.ns(n,l,s,u.readTime)?this.Yi(e,ih(n,null,"F")):this.rs(e,l,n,u)}))})))}Zi(e,n,r,i){return k0(n)||i.isEqual(X.min())?R.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(n,o);return this.ns(n,s,r,i)?R.resolve(null):(us()<=yn.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),cs(n)),this.rs(e,s,n,TS(i,-1)).next(a=>a))})}ts(e,n){let r=new Ce(GS(e));return n.forEach((i,o)=>{Hu(e,o)&&(r=r.add(o))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,n,r){return us()<=yn.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",cs(n)),this.Ji.getDocumentsMatchingQuery(e,n,en.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Pv=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new xe(re),this._s=new Nn(o=>Wi(o),qu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mh(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function CA(t,e,n,r){return new Pv(t,e,n,r)}function SA(t,e){return N(this,null,function*(){let n=$(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=oe();for(let l of i){s.push(l.batchId);for(let d of l.mutations)u=u.add(d.key)}for(let l of o){a.push(l.batchId);for(let d of l.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function Cj(t,e){let n=$(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,d){let f=l.batch,g=f.keys(),y=R.resolve();return g.forEach(_=>{y=y.next(()=>d.getEntry(u,_)).next(A=>{let C=l.docVersions.get(_);Q(C!==null),A.version.compareTo(C)<0&&(f.applyToRemoteDocument(A,l),A.isValidDocument()&&(A.setReadTime(l.commitVersion),d.addEntry(A)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=oe();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function AA(t){let e=$(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Sj(t,e){let n=$(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(n.Ur.removeMatchingKeys(o,d.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(o,d.addedDocuments,f)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(qe.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(f,y),function(A,C,P){return A.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(g,y,d)&&a.push(n.Ur.updateTargetData(o,y))});let u=Ot(),l=oe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(RA(o,s,e.documentUpdates).next(d=>{u=d.Ps,l=d.Is})),!r.isEqual(X.min())){let d=n.Ur.getLastRemoteSnapshotVersion(o).next(f=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return R.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.os=i,o))}function RA(t,e,n){let r=oe(),i=oe();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Ot();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(X.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):O("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function Aj(t,e){let n=$(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Cs(t,e){let n=$(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(o=>o?(i=o,R.resolve(i)):n.Ur.allocateTargetId(r).next(s=>(i=new Ts(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function Ss(t,e,n){return N(this,null,function*(){let r=$(t),i=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!ri(s))throw s;O("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function Ih(t,e,n){let r=$(t),i=X.min(),o=oe();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,d){let f=$(u),g=f._s.get(d);return g!==void 0?R.resolve(f.os.get(g)):f.Ur.getTargetData(l,d)}(r,s,Rt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,n?i:X.min(),n?o:oe())).next(a=>(NA(r,HS(e),a),{documents:a,Ts:o})))}function xA(t,e){let n=$(t),r=$(n.Ur),i=n.os.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function MA(t,e){let n=$(t),r=n.us.get(e)||X.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.cs.getAllFromCollectionGroup(i,e,TS(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(NA(n,e,i),i))}function NA(t,e,n){let r=t.us.get(e)||X.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}function Rj(t,e,n,r){return N(this,null,function*(){let i=$(t),o=oe(),s=Ot();for(let l of n){let d=e.Es(l.metadata.name);l.document&&(o=o.add(d));let f=e.ds(l);f.setReadTime(e.As(l.metadata.readTime)),s=s.insert(d,f)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield Cs(i,function(d){return Rt(Os(ge.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>RA(l,a,s).next(d=>(a.apply(l),d)).next(d=>i.Ur.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Ur.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,d.Ps,d.Is)).next(()=>d.Ps)))})}function xj(r,i){return N(this,arguments,function*(t,e,n=oe()){let o=yield Cs(t,Rt(Mw(e.bundledQuery))),s=$(t);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=$e(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(qe.EMPTY_BYTE_STRING,u);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,n,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function uS(t,e){return`firestore_clients_${t}_${e}`}function cS(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function wy(t,e){return`firestore_targets_${t}_${e}`}var Eh=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Rs(e,n,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new k(i.error.code,i.error.message))),s?new t(e,n,i.state,o):(Ue("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},yu=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){let r=JSON.parse(n),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new k(r.error.code,r.error.message))),o?new t(e,r.state,i):(Ue("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},_h=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Aw();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=AS(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Ue("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},kv=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Ue("SharedClientState",`Failed to parse online state: ${e}`),null)}},ku=class{constructor(){this.activeTargetIds=Aw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},vu=class{constructor(e,n,r,i,o){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new xe(re),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=uS(this.persistenceKey,this.ps),this.vs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new ku),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return N(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(uS(this.persistenceKey,r));if(i){let o=_h.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let n=this.storage.getItem(this.xs);if(n){let r=this.Ls(n);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(wy(this.persistenceKey,e));if(r){let i=yu.Rs(e,r);i&&(n=i.state)}}return this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(wy(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return O("SharedClientState","READ",e,n),n}setItem(e,n){O("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){O("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let n=e;if(n.storageArea===this.storage){if(O("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void Ue("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){let r=this.Gs(n.key);return this.zs(r,null)}{let r=this.js(n.key,n.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){let r=this.Hs(n.key,n.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){let r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(n.key===this.xs){if(n.newValue!==null){let r=this.Ls(n.newValue);if(r)return this.Bs(r)}}else if(n.key===this.vs){let r=function(o){let s=jt.oe;if(o!=null)try{let a=JSON.parse(o);Q(typeof a=="number"),s=a}catch(a){Ue("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);r!==jt.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Os){let r=this.Xs(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(n)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){let i=new Eh(this.currentUser,e,n,r),o=cS(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let n=cS(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){let n={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(n))}$s(e,n,r){let i=wy(this.persistenceKey,e),o=new yu(e,n,r);this.setItem(i,o.Vs())}Ws(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){let n=this.Cs.exec(e);return n?n[1]:null}js(e,n){let r=this.Gs(e);return _h.Rs(r,n)}Hs(e,n){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Eh.Rs(new Ke(o),i,n)}Ys(e,n){let r=this.Ms.exec(e),i=Number(r[1]);return yu.Rs(i,n)}Ls(e){return kv.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return N(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);O("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){let r=n?this.Ss.insert(e,n):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=Aw();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},Dh=class{constructor(){this.so=new ku,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ku,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Ov=class{_o(e){}shutdown(){}};var Th=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){O("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){O("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Ud=null;function Iy(){return Ud===null?Ud=function(){return 268435456+Math.round(2147483648*Math.random())}():Ud++,"0x"+Ud.toString(16)}var Mj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Fv=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var pt="WebChannelConnection",Lv=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(n,r,i,o,s){let a=Iy(),u=this.xo(n,r.toUriEncodedString());O("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(n,u,l,i).then(d=>(O("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Xt("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",u,"request:",i),d})}Lo(n,r,i,o,s,a){return this.Mo(n,r,i,o,s)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ks}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}xo(n,r){let i=Mj[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let o=Iy();return new Promise((s,a)=>{let u=new dy;u.setWithCredentials(!0),u.listenOnce(fy.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case au.NO_ERROR:let d=u.getResponseJson();O(pt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case au.TIMEOUT:O(pt,`RPC '${e}' ${o} timed out`),a(new k(x.DEADLINE_EXCEEDED,"Request time out"));break;case au.HTTP_ERROR:let f=u.getStatus();if(O(pt,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);let y=g?.error;if(y&&y.status&&y.message){let _=function(C){let P=C.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(P)>=0?P:x.UNKNOWN}(y.status);a(new k(_,y.message))}else a(new k(x.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new k(x.UNAVAILABLE,"Connection failed."));break;default:G()}}finally{O(pt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);O(pt,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=Iy(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=my(),a=gy(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new hy({})),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let d=o.join("");O(pt,`Creating RPC '${e}' stream ${i}: ${d}`,u);let f=s.createWebChannel(d,u),g=!1,y=!1,_=new Fv({Io:C=>{y?O(pt,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(g||(O(pt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),O(pt,`RPC '${e}' stream ${i} sending:`,C),f.send(C))},To:()=>f.close()}),A=(C,P,j)=>{C.listen(P,F=>{try{j(F)}catch(B){setTimeout(()=>{throw B},0)}})};return A(f,rs.EventType.OPEN,()=>{y||(O(pt,`RPC '${e}' stream ${i} transport opened.`),_.yo())}),A(f,rs.EventType.CLOSE,()=>{y||(y=!0,O(pt,`RPC '${e}' stream ${i} transport closed`),_.So())}),A(f,rs.EventType.ERROR,C=>{y||(y=!0,Xt(pt,`RPC '${e}' stream ${i} transport errored:`,C),_.So(new k(x.UNAVAILABLE,"The operation could not be completed")))}),A(f,rs.EventType.MESSAGE,C=>{var P;if(!y){let j=C.data[0];Q(!!j);let F=j,B=F.error||((P=F[0])===null||P===void 0?void 0:P.error);if(B){O(pt,`RPC '${e}' stream ${i} received error:`,B);let Z=B.status,K=function(I){let D=Ge[I];if(D!==void 0)return oA(D)}(Z),E=B.message;K===void 0&&(K=x.INTERNAL,E="Unknown error status: "+Z+" with message "+B.message),y=!0,_.So(new k(K,E)),f.close()}else O(pt,`RPC '${e}' stream ${i} received:`,j),_.bo(j)}}),A(a,py.STAT_EVENT,C=>{C.stat===Fd.PROXY?O(pt,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===Fd.NOPROXY&&O(pt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.wo()},0),_}};function PA(){return typeof window<"u"?window:null}function Hd(){return typeof document<"u"?document:null}function Gu(t){return new Jy(t,!0)}var Ou=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&O("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var bh=class{constructor(e,n,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Ou(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return N(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return N(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return N(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===x.RESOURCE_EXHAUSTED?(Ue(n.toString()),Ue("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new k(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>N(this,null,function*(){this.state=0,this.start()}))}I_(e){return O("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(O("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Vv=class extends bh{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=gj(this.serializer,e),r=function(o){if(!("targetChange"in o))return X.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?X.min():s.readTime?$e(s.readTime):X.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=tv(this.serializer),n.addTarget=function(o,s){let a,u=s.target;if(a=nh(u)?{documents:fA(o,u)}:{query:pA(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=aA(o,s.resumeToken);let l=Xy(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(X.min())>0){a.readTime=Ds(o,s.snapshotVersion.toTimestamp());let l=Xy(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=yj(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=tv(this.serializer),n.removeTarget=e,this.a_(n)}},jv=class extends bh{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Q(!!e.streamToken),this.lastStreamToken=e.streamToken,Q(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Q(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=mj(e.writeResults,e.commitTime),r=$e(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=tv(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Mu(this.serializer,r))};this.a_(n)}};var Uv=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new k(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,ev(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new k(x.UNKNOWN,o.toString())})}Lo(e,n,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,ev(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new k(x.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Bv=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ue(n),this.D_=!1):O("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var $v=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>N(this,null,function*(){ii(this)&&(O("RemoteStore","Restarting streams for network reachability change."),yield function(u){return N(this,null,function*(){let l=$(u);l.L_.add(4),yield Fs(l),l.q_.set("Unknown"),l.L_.delete(4),yield Wu(l)})}(this))}))}),this.q_=new Bv(r,i)}};function Wu(t){return N(this,null,function*(){if(ii(t))for(let e of t.B_)yield e(!0)})}function Fs(t){return N(this,null,function*(){for(let e of t.B_)yield e(!1)})}function Hh(t,e){let n=$(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Fw(n)?Ow(n):Vs(n).r_()&&kw(n,e))}function As(t,e){let n=$(t),r=Vs(n);n.N_.delete(e),r.r_()&&kA(n,e),n.N_.size===0&&(r.r_()?r.o_():ii(n)&&n.q_.set("Unknown"))}function kw(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Vs(t).A_(e)}function kA(t,e){t.Q_.xe(e),Vs(t).R_(e)}function Ow(t){t.Q_=new Zy({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Vs(t).start(),t.q_.v_()}function Fw(t){return ii(t)&&!Vs(t).n_()&&t.N_.size>0}function ii(t){return $(t).L_.size===0}function OA(t){t.Q_=void 0}function Nj(t){return N(this,null,function*(){t.q_.set("Online")})}function Pj(t){return N(this,null,function*(){t.N_.forEach((e,n)=>{kw(t,e)})})}function kj(t,e){return N(this,null,function*(){OA(t),Fw(t)?(t.q_.M_(e),Ow(t)):t.q_.set("Unknown")})}function Oj(t,e,n){return N(this,null,function*(){if(t.q_.set("Online"),e instanceof sh&&e.state===2&&e.cause)try{yield function(i,o){return N(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){O("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ch(t,r)}else if(e instanceof ms?t.Q_.Ke(e):e instanceof oh?t.Q_.He(e):t.Q_.We(e),!n.isEqual(X.min()))try{let r=yield AA(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let d=o.N_.get(l);d&&o.N_.set(l,d.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let d=o.N_.get(u);if(!d)return;o.N_.set(u,d.withResumeToken(qe.EMPTY_BYTE_STRING,d.snapshotVersion)),kA(o,u);let f=new Ts(d.target,u,l,d.sequenceNumber);kw(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){O("RemoteStore","Failed to raise snapshot:",r),yield Ch(t,r)}})}function Ch(t,e,n){return N(this,null,function*(){if(!ri(e))throw e;t.L_.add(1),yield Fs(t),t.q_.set("Offline"),n||(n=()=>AA(t.localStore)),t.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){O("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield Wu(t)}))})}function FA(t,e){return e().catch(n=>Ch(t,n,e))}function Ls(t){return N(this,null,function*(){let e=$(t),n=ti(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Fj(e);)try{let i=yield Aj(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,Lj(e,i)}catch(i){yield Ch(e,i)}LA(e)&&VA(e)})}function Fj(t){return ii(t)&&t.O_.length<10}function Lj(t,e){t.O_.push(e);let n=ti(t);n.r_()&&n.V_&&n.m_(e.mutations)}function LA(t){return ii(t)&&!ti(t).n_()&&t.O_.length>0}function VA(t){ti(t).start()}function Vj(t){return N(this,null,function*(){ti(t).p_()})}function jj(t){return N(this,null,function*(){let e=ti(t);for(let n of t.O_)e.m_(n.mutations)})}function Uj(t,e,n){return N(this,null,function*(){let r=t.O_.shift(),i=Ky.from(r,e,n);yield FA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Ls(t)})}function Bj(t,e){return N(this,null,function*(){e&&ti(t).V_&&(yield function(r,i){return N(this,null,function*(){if(function(s){return iA(s)&&s!==x.ABORTED}(i.code)){let o=r.O_.shift();ti(r).s_(),yield FA(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Ls(r)}})}(t,e)),LA(t)&&VA(t)})}function lS(t,e){return N(this,null,function*(){let n=$(t);n.asyncQueue.verifyOperationInProgress(),O("RemoteStore","RemoteStore received new credentials");let r=ii(n);n.L_.add(3),yield Fs(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield Wu(n)})}function qv(t,e){return N(this,null,function*(){let n=$(t);e?(n.L_.delete(2),yield Wu(n)):e||(n.L_.add(2),yield Fs(n),n.q_.set("Unknown"))})}function Vs(t){return t.K_||(t.K_=function(n,r,i){let o=$(n);return o.w_(),new Vv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:Nj.bind(null,t),Ro:Pj.bind(null,t),mo:kj.bind(null,t),d_:Oj.bind(null,t)}),t.B_.push(e=>N(this,null,function*(){e?(t.K_.s_(),Fw(t)?Ow(t):t.q_.set("Unknown")):(yield t.K_.stop(),OA(t))}))),t.K_}function ti(t){return t.U_||(t.U_=function(n,r,i){let o=$(n);return o.w_(),new jv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Vj.bind(null,t),mo:Bj.bind(null,t),f_:jj.bind(null,t),g_:Uj.bind(null,t)}),t.B_.push(e=>N(this,null,function*(){e?(t.U_.s_(),yield Ls(t)):(yield t.U_.stop(),t.O_.length>0&&(O("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var zv=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Qe,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new k(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function js(t,e){if(Ue("AsyncQueue",`${e}: ${t}`),ri(t))return new k(x.UNAVAILABLE,`${e}: ${t}`);throw t}var Sh=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=hu(),this.sortedSet=new xe(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Ah=class{constructor(){this.W_=new xe(q.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):G():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},Rs=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Sh.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Hv=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Gv=class{constructor(){this.queries=dS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=$(n),o=i.queries;i.queries=dS(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new k(x.ABORTED,"Firestore shutting down"))}};function dS(){return new Nn(t=>zS(t),zu)}function Lw(t,e){return N(this,null,function*(){let n=$(t),r=3,i=e.query,o=n.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new Hv,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield n.onListen(i,!0);break;case 1:o.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=js(s,`Initialization of query '${cs(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&jw(n)})}function Vw(t,e){return N(this,null,function*(){let n=$(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function $j(t,e){let n=$(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&jw(n)}function qj(t,e,n){let r=$(t),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(n);r.queries.delete(e)}function jw(t){t.Y_.forEach(e=>{e.next()})}var Wv,hS;(hS=Wv||(Wv={})).ea="default",hS.Cache="cache";var Fu=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Rs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Rs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Wv.Cache}};var Kv=class{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}};var Rh=class{constructor(e){this.serializer=e}Es(e){return An(this.serializer,e)}ds(e){return e.metadata.exists?hA(this.serializer,e.document,!1):Ye.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return $e(e)}},Qv=class{constructor(e,n,r){this.ca=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=jA(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;let r=ge.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){let n=new Map,r=new Rh(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(n.get(s)||oe()).add(o);n.set(s,a)}}return n}complete(){return N(this,null,function*(){let e=yield Rj(this.localStore,new Rh(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(let r of this.queries)yield xj(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function jA(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var xh=class{constructor(e){this.key=e}},Mh=class{constructor(e){this.key=e}},Nh=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=oe(),this.mutatedKeys=oe(),this.Aa=GS(e),this.Ra=new Sh(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new Ah,i=n?n.Ra:this.Ra,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),y=Hu(this.query,f)?f:null,_=!!g&&this.mutatedKeys.has(g.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),C=!1;g&&y?g.data.isEqual(y.data)?_!==A&&(r.track({type:3,doc:y}),C=!0):this.ga(g,y)||(r.track({type:2,doc:y}),C=!0,(u&&this.Aa(y,u)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),C=!0):g&&!y&&(r.track({type:1,doc:g}),C=!0,(u||l)&&(a=!0)),C&&(y?(s=s.add(y),o=A?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((d,f)=>function(y,_){let A=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G()}};return A(y)-A(_)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;let a=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new Rs(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Ah,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=oe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Mh(r))}),this.da.forEach(r=>{e.has(r)||n.push(new xh(r))}),n}ba(e){this.Ta=e.Ts,this.da=oe();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Rs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Yv=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Zv=class{constructor(e){this.key=e,this.va=!1}},Jv=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Nn(a=>zS(a),zu),this.Ma=new Map,this.xa=new Set,this.Oa=new xe(q.comparator),this.Na=new Map,this.La=new Pu,this.Ba={},this.ka=new Map,this.qa=bs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function zj(t,e,n=!0){return N(this,null,function*(){let r=Gh(t),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield UA(r,e,n,!0),i})}function Hj(t,e){return N(this,null,function*(){let n=Gh(t);yield UA(n,e,!0,!1)})}function UA(t,e,n,r){return N(this,null,function*(){let i=yield Cs(t.localStore,Rt(e)),o=i.targetId,s=n?t.sharedClientState.addLocalQueryTarget(o):"not-current",a;return r&&(a=yield Uw(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&Hh(t.remoteStore,i),a})}function Uw(t,e,n,r,i){return N(this,null,function*(){t.Ka=(f,g,y)=>function(A,C,P,j){return N(this,null,function*(){let F=C.view.ma(P);F.ns&&(F=yield Ih(A.localStore,C.query,!1).then(({documents:E})=>C.view.ma(E,F)));let B=j&&j.targetChanges.get(C.targetId),Z=j&&j.targetMismatches.get(C.targetId)!=null,K=C.view.applyChanges(F,A.isPrimaryClient,B,Z);return Xv(A,C.targetId,K.wa),K.snapshot})}(t,f,g,y);let o=yield Ih(t.localStore,e,!0),s=new Nh(e,o.Ts),a=s.ma(o.documents),u=Ru.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);Xv(t,n,l.wa);let d=new Yv(e,n,s);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function Gj(t,e,n){return N(this,null,function*(){let r=$(t),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!zu(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Ss(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&As(r.remoteStore,i.targetId),xs(r,i.targetId)}).catch(ni))):(xs(r,i.targetId),yield Ss(r.localStore,i.targetId,!0))})}function Wj(t,e){return N(this,null,function*(){let n=$(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),As(n.remoteStore,r.targetId))})}function Kj(t,e,n){return N(this,null,function*(){let r=zw(t);try{let i=yield function(s,a){let u=$(s),l=Oe.now(),d=a.reduce((y,_)=>y.add(_.key),oe()),f,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let _=Ot(),A=oe();return u.cs.getEntries(y,d).next(C=>{_=C,_.forEach((P,j)=>{j.isValidDocument()||(A=A.add(P))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,_)).next(C=>{f=C;let P=[];for(let j of a){let F=uj(j,f.get(j.key).overlayedDocument);F!=null&&P.push(new fn(j.key,F,LS(F.value.mapValue),Ve.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,P,a)}).next(C=>{g=C;let P=C.applyToLocalDocumentSet(f,A);return u.documentOverlayCache.saveOverlays(y,C.batchId,P)})}).then(()=>({batchId:g.batchId,changes:KS(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new xe(re)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,n),yield lr(r,i.changes),yield Ls(r.remoteStore)}catch(i){let o=js(i,"Failed to persist write");n.reject(o)}})}function BA(t,e){return N(this,null,function*(){let n=$(t);try{let r=yield Sj(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Na.get(o);s&&(Q(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Q(s.va):i.removedDocuments.size>0&&(Q(s.va),s.va=!1))}),yield lr(n,r,e)}catch(r){yield ni(r)}})}function fS(t,e,n){let r=$(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=$(s);u.onlineState=a;let l=!1;u.queries.forEach((d,f)=>{for(let g of f.j_)g.Z_(a)&&(l=!0)}),l&&jw(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Qj(t,e,n){return N(this,null,function*(){let r=$(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new xe(q.comparator);s=s.insert(o,Ye.newNoDocument(o,X.min()));let a=oe().add(o),u=new Au(X.min(),new Map,new xe(re),s,a);yield BA(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),qw(r)}else yield Ss(r.localStore,e,!1).then(()=>xs(r,e,n)).catch(ni)})}function Yj(t,e){return N(this,null,function*(){let n=$(t),r=e.batch.batchId;try{let i=yield Cj(n.localStore,e);$w(n,r,null),Bw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield lr(n,i)}catch(i){yield ni(i)}})}function Zj(t,e,n){return N(this,null,function*(){let r=$(t);try{let i=yield function(s,a){let u=$(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(Q(f!==null),d=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>u.localDocuments.getDocuments(l,d))})}(r.localStore,e);$w(r,e,n),Bw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield lr(r,i)}catch(i){yield ni(i)}})}function Jj(t,e){return N(this,null,function*(){let n=$(t);ii(n.remoteStore)||O("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=$(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(r===-1)return void e.resolve();let i=n.ka.get(r)||[];i.push(e),n.ka.set(r,i)}catch(r){let i=js(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function Bw(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function $w(t,e,n){let r=$(t),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function xs(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||$A(t,r)})}function $A(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(As(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),qw(t))}function Xv(t,e,n){for(let r of n)r instanceof xh?(t.La.addReference(r.key,e),Xj(t,r)):r instanceof Mh?(O("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||$A(t,r.key)):G()}function Xj(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(O("SyncEngine","New document in limbo: "+n),t.xa.add(r),qw(t))}function qw(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new q(ge.fromString(e)),r=t.qa.next();t.Na.set(r,new Zv(n)),t.Oa=t.Oa.insert(n,r),Hh(t.remoteStore,new Ts(Rt(Os(n.path)),r,"TargetPurposeLimboResolution",jt.oe))}}function lr(t,e,n){return N(this,null,function*(){let r=$(t),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,n).then(l=>{var d;if((l||n)&&r.isPrimaryClient){let f=l?!l.fromCache:(d=n?.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);let f=Mv.Wi(u.targetId,l);o.push(f)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return N(this,null,function*(){let d=$(u);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>R.forEach(l,g=>R.forEach(g.$i,y=>d.persistence.referenceDelegate.addReference(f,g.targetId,y)).next(()=>R.forEach(g.Ui,y=>d.persistence.referenceDelegate.removeReference(f,g.targetId,y)))))}catch(f){if(!ri(f))throw f;O("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let y=d.os.get(g),_=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(_);d.os=d.os.insert(g,A)}}})}(r.localStore,o))})}function e2(t,e){return N(this,null,function*(){let n=$(t);if(!n.currentUser.isEqual(e)){O("SyncEngine","User change. New user:",e.toKey());let r=yield SA(n.localStore,e);n.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new k(x.CANCELLED,s))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield lr(n,r.hs)}})}function t2(t,e){let n=$(t),r=n.Na.get(e);if(r&&r.va)return oe().add(r.key);{let i=oe(),o=n.Ma.get(e);if(!o)return i;for(let s of o){let a=n.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function n2(t,e){return N(this,null,function*(){let n=$(t),r=yield Ih(n.localStore,e.query,!0),i=e.view.ba(r);return n.isPrimaryClient&&Xv(n,e.targetId,i.wa),i})}function r2(t,e){return N(this,null,function*(){let n=$(t);return MA(n.localStore,e).then(r=>lr(n,r))})}function i2(t,e,n,r){return N(this,null,function*(){let i=$(t),o=yield function(a,u){let l=$(a),d=$(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.Mn(f,u).next(g=>g?l.localDocuments.getDocuments(f,g):R.resolve(null)))}(i.localStore,e);o!==null?(n==="pending"?yield Ls(i.remoteStore):n==="acknowledged"||n==="rejected"?($w(i,e,r||null),Bw(i,e),function(a,u){$($(a).mutationQueue).On(u)}(i.localStore,e)):G(),yield lr(i,o)):O("SyncEngine","Cannot apply mutation batch with id: "+e)})}function o2(t,e){return N(this,null,function*(){let n=$(t);if(Gh(n),zw(n),e===!0&&n.Qa!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield pS(n,r.toArray());n.Qa=!0,yield qv(n.remoteStore,!0);for(let o of i)Hh(n.remoteStore,o)}else if(e===!1&&n.Qa!==!1){let r=[],i=Promise.resolve();n.Ma.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(xs(n,s),Ss(n.localStore,s,!0))),As(n.remoteStore,s)}),yield i,yield pS(n,r),function(s){let a=$(s);a.Na.forEach((u,l)=>{As(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new xe(q.comparator)}(n),n.Qa=!1,yield qv(n.remoteStore,!1)}})}function pS(t,e,n){return N(this,null,function*(){let r=$(t),i=[],o=[];for(let s of e){let a,u=r.Ma.get(s);if(u&&u.length!==0){a=yield Cs(r.localStore,Rt(u[0]));for(let l of u){let d=r.Fa.get(l),f=yield n2(r,d);f.snapshot&&o.push(f.snapshot)}}else{let l=yield xA(r.localStore,s);a=yield Cs(r.localStore,l),yield Uw(r,qA(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function qA(t){return qS(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function s2(t){return function(n){return $($(n).persistence).Qi()}($(t).localStore)}function a2(t,e,n,r){return N(this,null,function*(){let i=$(t);if(i.Qa)return void O("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield MA(i.localStore,HS(o[0])),a=Au.createSynthesizedRemoteEventForCurrentChange(e,n==="current",qe.EMPTY_BYTE_STRING);yield lr(i,s,a);break}case"rejected":yield Ss(i.localStore,e,!0),xs(i,e,r);break;default:G()}})}function u2(t,e,n){return N(this,null,function*(){let r=Gh(t);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){O("SyncEngine","Adding an already active target "+i);continue}let o=yield xA(r.localStore,i),s=yield Cs(r.localStore,o);yield Uw(r,qA(o),s.targetId,!1,s.resumeToken),Hh(r.remoteStore,s)}for(let i of n)r.Ma.has(i)&&(yield Ss(r.localStore,i,!1).then(()=>{As(r.remoteStore,i),xs(r,i)}).catch(ni))}})}function Gh(t){let e=$(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=BA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=t2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Qj.bind(null,e),e.Ca.d_=$j.bind(null,e.eventManager),e.Ca.$a=qj.bind(null,e.eventManager),e}function zw(t){let e=$(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Yj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Zj.bind(null,e),e}function c2(t,e,n){let r=$(t);(function(o,s,a){return N(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(y,_){let A=$(y),C=$e(_.createTime);return A.persistence.runTransaction("hasNewerBundle","readonly",P=>A.Gr.getBundleMetadata(P,_.id)).then(P=>!!P&&P.createTime.compareTo(C)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(jA(u));let l=new Qv(u,o.localStore,s.serializer),d=yield s.Ua();for(;d;){let g=yield l.la(d);g&&a._updateProgress(g),d=yield s.Ua()}let f=yield l.complete();return yield lr(o,f.Ia,void 0),yield function(y,_){let A=$(y);return A.persistence.runTransaction("Save bundle","readwrite",C=>A.Gr.saveBundleMetadata(C,_))}(o.localStore,u),a._completeWith(f.progress),Promise.resolve(f.Pa)}catch(u){return Xt("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Lu=class{constructor(){this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){this.serializer=Gu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return CA(this.persistence,new wh,e.initialUser,this.serializer)}createPersistence(e){return new yh(vh.Zr,this.serializer)}createSharedClientState(e){return new Dh}terminate(){return N(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Ph=class t extends Lu{constructor(e,n,r){super(),this.Wa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){yield Zf(t.prototype,this,"initialize").call(this,e),yield this.Wa.initialize(this,e),yield zw(this.Wa.syncEngine),yield Ls(this.Wa.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return CA(this.persistence,new wh,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new gv(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new Ny(n,this.persistence);return new My(e.asyncQueue,r)}createPersistence(e){let n=Pw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new xv(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,PA(),Hd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Dh}},ew=class t extends Ph{constructor(e,n){super(e,n,!1),this.Wa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return N(this,null,function*(){yield Zf(t.prototype,this,"initialize").call(this,e);let n=this.Wa.syncEngine;this.sharedClientState instanceof vu&&(this.sharedClientState.syncEngine={no:i2.bind(null,n),ro:a2.bind(null,n),io:u2.bind(null,n),Qi:s2.bind(null,n),eo:r2.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>N(this,null,function*(){yield o2(this.Wa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=PA();if(!vu.D(n))throw new k(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=Pw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new vu(n,e.asyncQueue,r,e.clientId,e.initialUser)}},Vu=class{initialize(e,n){return N(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>fS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=e2.bind(null,this.syncEngine),yield qv(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Gv}()}createDatastore(e){let n=Gu(e.databaseInfo.databaseId),r=function(o){return new Lv(o)}(e.databaseInfo);return function(o,s,a,u){return new Uv(o,s,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new $v(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>fS(this.syncEngine,n,0),function(){return Th.D()?new Th:new Ov}())}createSyncEngine(e,n){return function(i,o,s,a,u,l,d){let f=new Jv(i,o,s,a,u,l);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return N(this,null,function*(){var e,n;yield function(i){return N(this,null,function*(){let o=$(i);O("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Fs(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()})}};function gS(t,e=10240){let n=0;return{read(){return N(this,null,function*(){if(n<t.byteLength){let i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Ms=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):Ue("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var tw=class{constructor(e,n){this.ja=e,this.serializer=n,this.metadata=new Qe,this.buffer=new Uint8Array,this.Ha=function(){return new TextDecoder("utf-8")}(),this.Ja().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.ja.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}Ua(){return N(this,null,function*(){return yield this.getMetadata(),this.Ja()})}Ja(){return N(this,null,function*(){let e=yield this.Ya();if(e===null)return null;let n=this.Ha.decode(e),r=Number(n);isNaN(r)&&this.Za(`length string (${n}) is not valid number`);let i=yield this.Xa(r);return new Kv(JSON.parse(i),e.length+r)})}eu(){return this.buffer.findIndex(e=>e===123)}Ya(){return N(this,null,function*(){for(;this.eu()<0&&!(yield this.tu()););if(this.buffer.length===0)return null;let e=this.eu();e<0&&this.Za("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Xa(e){return N(this,null,function*(){for(;this.buffer.length<e;)(yield this.tu())&&this.Za("Reached the end of bundle when more is expected.");let n=this.Ha.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}Za(e){throw this.ja.cancel(),new Error(`Invalid bundle format: ${e}`)}tu(){return N(this,null,function*(){let e=yield this.ja.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var nw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new k(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(i,o){return N(this,null,function*(){let s=$(i),a={documents:o.map(f=>xu(s.serializer,f))},u=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,ge.emptyPath(),a,o.length),l=new Map;u.forEach(f=>{let g=pj(s.serializer,f);l.set(g.key.toString(),g)});let d=[];return o.forEach(f=>{let g=l.get(f.toString());Q(!!g),d.push(g)}),d})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ei(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=q.fromPath(r);this.mutations.push(new bu(i,this.precondition(i)))}),yield function(r,i){return N(this,null,function*(){let o=$(r),s={writes:i.map(a=>Mu(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,ge.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw G();n=X.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new k(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(X.min())?Ve.exists(!1):Ve.updateTime(n):Ve.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(X.min()))throw new k(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ve.updateTime(n)}return Ve.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var rw=class{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.nu=r.maxAttempts,this.t_=new Ou(this.asyncQueue,"transaction_retry")}ru(){this.nu-=1,this.iu()}iu(){this.t_.Go(()=>N(this,null,function*(){let e=new nw(this.datastore),n=this.su(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.ou(i)}))}).catch(r=>{this.ou(r)})}))}su(e){try{let n=this.updateFunction(e);return!$u(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ou(e){this.nu>0&&this._u(e)?(this.nu-=1,this.asyncQueue.enqueueAndForget(()=>(this.iu(),Promise.resolve()))):this.deferred.reject(e)}_u(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!iA(n)}return!1}};var iw=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ke.UNAUTHENTICATED,this.clientId=Kd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>N(this,null,function*(){O("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(O("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new k(x.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Qe;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=js(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Gd(t,e){return N(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),O("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>N(this,null,function*(){r.isEqual(i)||(yield SA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function ow(t,e){return N(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield Hw(t);O("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>lS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>lS(e.remoteStore,i)),t._onlineComponents=e})}function zA(t){return t.name==="FirebaseError"?t.code===x.FAILED_PRECONDITION||t.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function Hw(t){return N(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){O("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Gd(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!zA(n))throw n;Xt("Error using user provided cache. Falling back to memory cache: "+n),yield Gd(t,new Lu)}}else O("FirestoreClient","Using default OfflineComponentProvider"),yield Gd(t,new Lu);return t._offlineComponents})}function Wh(t){return N(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(O("FirestoreClient","Using user provided OnlineComponentProvider"),yield ow(t,t._uninitializedComponentsProvider._online)):(O("FirestoreClient","Using default OnlineComponentProvider"),yield ow(t,new Vu))),t._onlineComponents})}function HA(t){return Hw(t).then(e=>e.persistence)}function Gw(t){return Hw(t).then(e=>e.localStore)}function GA(t){return Wh(t).then(e=>e.remoteStore)}function Ww(t){return Wh(t).then(e=>e.syncEngine)}function l2(t){return Wh(t).then(e=>e.datastore)}function Ns(t){return N(this,null,function*(){let e=yield Wh(t),n=e.eventManager;return n.onListen=zj.bind(null,e.syncEngine),n.onUnlisten=Gj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Hj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Wj.bind(null,e.syncEngine),n})}function d2(t){return t.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield HA(t),n=yield GA(t);return e.setNetworkEnabled(!0),function(i){let o=$(i);return o.L_.delete(0),Wu(o)}(n)}))}function h2(t){return t.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield HA(t),n=yield GA(t);return e.setNetworkEnabled(!1),function(i){return N(this,null,function*(){let o=$(i);o.L_.add(0),yield Fs(o),o.q_.set("Offline")})}(n)}))}function f2(t,e){let n=new Qe;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield function(l,d){let f=$(l);return f.persistence.runTransaction("read document","readonly",g=>f.localDocuments.getDocument(g,d))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new k(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=js(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield Gw(t),e,n)})),n.promise}function WA(t,e,n={}){let r=new Qe;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let d=new Ms({next:g=>{s.enqueueAndForget(()=>Vw(o,f));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new k(x.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?l.reject(new k(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new Fu(Os(a.path),d,{includeMetadataChanges:!0,_a:!0});return Lw(o,f)}(yield Ns(t),t.asyncQueue,e,n,r)})),r.promise}function p2(t,e){let n=new Qe;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield Ih(i,o,!0),u=new Nh(o,a.Ts),l=u.ma(a.documents),d=u.applyChanges(l,!1);s.resolve(d.snapshot)}catch(a){let u=js(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield Gw(t),e,n)})),n.promise}function KA(t,e,n={}){let r=new Qe;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let d=new Ms({next:g=>{s.enqueueAndForget(()=>Vw(o,f)),g.fromCache&&u.source==="server"?l.reject(new k(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new Fu(a,d,{includeMetadataChanges:!0,_a:!0});return Lw(o,f)}(yield Ns(t),t.asyncQueue,e,n,r)})),r.promise}function g2(t,e){let n=new Ms(e);return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){$(i).Y_.add(o),o.next()}(yield Ns(t),n)})),()=>{n.za(),t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){$(i).Y_.delete(o)}(yield Ns(t),n)}))}}function m2(t,e,n,r){let i=function(s,a){let u;return u=typeof s=="string"?sA().encode(s):s,function(d,f){return new tw(d,f)}(function(d,f){if(d instanceof Uint8Array)return gS(d,f);if(d instanceof ArrayBuffer)return gS(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(n,Gu(e));t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){c2(yield Ww(t),i,r)}))}function y2(t,e){return t.asyncQueue.enqueue(()=>N(this,null,function*(){return function(r,i){let o=$(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield Gw(t),e)}))}function QA(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var mS=new Map;function Kw(t,e,n){if(!n)throw new k(x.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Qw(t,e,n,r){if(e===!0&&r===!0)throw new k(x.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function yS(t){if(!q.isDocumentKey(t))throw new k(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function vS(t){if(q.isDocumentKey(t))throw new k(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Kh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":G()}function me(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new k(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Kh(t);throw new k(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function YA(t,e){if(e<=0)throw new k(x.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var kh=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new k(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new k(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Qw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=QA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new k(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new k(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new k(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Zi=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kh({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new k(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new k(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Ey;switch(r.type){case"firstParty":return new by(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new k(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=mS.get(n);r&&(O("ComponentProvider","Removing Datastore"),mS.delete(n),r.terminate())}(this),Promise.resolve()}};function Yw(t,e,n,r={}){var i;let o=(t=me(t,Zi))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Xt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Ke.MOCK_USER;else{a=a_(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new k(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ke(l)}t._authCredentials=new _y(new Wd(a,u))}}var at=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Se=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Rn=class t extends at{constructor(e,n,r){super(e,n,Os(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Se(this.firestore,null,new q(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function Zw(t,e,...n){if(t=ke(t),Kw("collection","path",e),t instanceof Zi){let r=ge.fromString(e,...n);return vS(r),new Rn(t,null,r)}{if(!(t instanceof Se||t instanceof Rn))throw new k(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ge.fromString(e,...n));return vS(r),new Rn(t.firestore,null,r)}}function ZA(t,e){if(t=me(t,Zi),Kw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new k(x.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new at(t,null,function(r){return new hn(ge.emptyPath(),r)}(e))}function Ku(t,e,...n){if(t=ke(t),arguments.length===1&&(e=Kd.newId()),Kw("doc","path",e),t instanceof Zi){let r=ge.fromString(e,...n);return yS(r),new Se(t,null,new q(r))}{if(!(t instanceof Se||t instanceof Rn))throw new k(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ge.fromString(e,...n));return yS(r),new Se(t.firestore,t instanceof Rn?t.converter:null,new q(r))}}function Jw(t,e){return t=ke(t),e=ke(e),(t instanceof Se||t instanceof Rn)&&(e instanceof Se||e instanceof Rn)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Xw(t,e){return t=ke(t),e=ke(e),t instanceof at&&e instanceof at&&t.firestore===e.firestore&&zu(t._query,e._query)&&t.converter===e.converter}var sw=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new Ou(this,"async_queue_retry"),this.Eu=()=>{let n=Hd();n&&O("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};let e=Hd();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let n=Hd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let n=new Qe;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return N(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!ri(e))throw e;O("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Ue("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);let i=zv.createAndSchedule(this,e,n,r,o=>this.Vu(o));return this.lu.push(i),i}du(){this.hu&&G()}verifyOperationInProgress(){}mu(){return N(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let n=this.lu.indexOf(e);this.lu.splice(n,1)}};function aw(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var uw=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Qe,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var JA=-1,Pe=class extends Zi{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new sw}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||XA(this),this._firestoreClient.terminate()}};function O6(t,e){let n=typeof t=="object"?t:Da(),r=typeof t=="string"?t:e||"(default)",i=tp(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=s_("firestore");o&&Yw(i,...o)}return i}function tt(t){return t._firestoreClient||XA(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function XA(t){var e,n,r;let i=t._freezeSettings(),o=function(a,u,l,d){return new Py(a,u,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,QA(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new iw(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function eR(t,e){cR(t=me(t,Pe));let n=tt(t);if(n._uninitializedComponentsProvider)throw new k(x.FAILED_PRECONDITION,"SDK cache is already specified.");Xt("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new Vu;return nR(n,i,new Ph(i,r.cacheSizeBytes,e?.forceOwnership))}function tR(t){cR(t=me(t,Pe));let e=tt(t);if(e._uninitializedComponentsProvider)throw new k(x.FAILED_PRECONDITION,"SDK cache is already specified.");Xt("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new Vu;return nR(e,r,new ew(r,n.cacheSizeBytes))}function nR(t,e,n){let r=new Qe;return t.asyncQueue.enqueue(()=>N(this,null,function*(){try{yield Gd(t,n),yield ow(t,e),r.resolve()}catch(i){let o=i;if(!zA(o))throw o;Xt("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function rR(t){if(t._initialized&&!t._terminated)throw new k(x.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Qe;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield function(r){return N(this,null,function*(){if(!Wr.D())return Promise.resolve();let i=r+"main";yield Wr.delete(i)})}(Pw(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function iR(t){return function(n){let r=new Qe;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return Jj(yield Ww(n),r)})),r.promise}(tt(t=me(t,Pe)))}function oR(t){return d2(tt(t=me(t,Pe)))}function sR(t){return h2(tt(t=me(t,Pe)))}function aR(t,e){let n=tt(t=me(t,Pe)),r=new uw;return m2(n,t._databaseId,e,r),r}function uR(t,e){return y2(tt(t=me(t,Pe)),e).then(n=>n?new at(t,null,n.query):null)}function cR(t){if(t._initialized||t._terminated)throw new k(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Pn=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(qe.fromBase64String(e))}catch(n){throw new k(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var pn=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new k(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Be(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ur=class{constructor(e){this._methodName=e}};var Ji=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new k(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new k(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}};var ju=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var v2=/^__.*__$/,cw=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new fn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Xr(e,this.data,n,this.fieldTransforms)}},Oh=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new fn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function lR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G()}}var Fh=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.yu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Lh(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(lR(this.wu)&&v2.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},lw=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Gu(e)}Nu(e,n,r,i=!1){return new Fh({wu:e,methodName:n,Ou:r,path:Be.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function no(t){let e=t._freezeSettings(),n=Gu(t._databaseId);return new lw(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Qh(t,e,n,r,i,o={}){let s=t.Nu(o.merge||o.mergeFields?2:0,e,n,i);nI("Data must be an object, but it was:",s,r);let a=fR(r,s),u,l;if(o.merge)u=new Ut(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let g=gw(e,f,n);if(!s.contains(g))throw new k(x.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);gR(d,g)||d.push(g)}u=new Ut(d),l=s.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=s.fieldTransforms;return new cw(new gt(a),u,l)}var Uu=class t extends ur{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function dR(t,e,n){return new Fh({wu:3,Ou:e.settings.Ou,methodName:t._methodName,Du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var dw=class t extends ur{_toFieldTransform(e){return new Ki(e.path,new Zr)}isEqual(e){return e instanceof t}},hw=class t extends ur{constructor(e,n){super(e),this.Lu=n}_toFieldTransform(e){let n=dR(this,e,!0),r=this.Lu.map(o=>ro(o,n)),i=new sr(r);return new Ki(e.path,i)}isEqual(e){return e instanceof t&&ep(this.Lu,e.Lu)}},fw=class t extends ur{constructor(e,n){super(e),this.Lu=n}_toFieldTransform(e){let n=dR(this,e,!0),r=this.Lu.map(o=>ro(o,n)),i=new ar(r);return new Ki(e.path,i)}isEqual(e){return e instanceof t&&ep(this.Lu,e.Lu)}},pw=class t extends ur{constructor(e,n){super(e),this.Bu=n}_toFieldTransform(e){let n=new Jr(e.serializer,ZS(e.serializer,this.Bu));return new Ki(e.path,n)}isEqual(e){return e instanceof t&&this.Bu===e.Bu}};function eI(t,e,n,r){let i=t.Nu(1,e,n);nI("Data must be an object, but it was:",i,r);let o=[],s=gt.empty();to(r,(u,l)=>{let d=rI(e,u,n);l=ke(l);let f=i.Cu(d);if(l instanceof Uu)o.push(d);else{let g=ro(l,f);g!=null&&(o.push(d),s.set(d,g))}});let a=new Ut(o);return new Oh(s,a,i.fieldTransforms)}function tI(t,e,n,r,i,o){let s=t.Nu(1,e,n),a=[gw(e,r,n)],u=[i];if(o.length%2!=0)throw new k(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(gw(e,o[g])),u.push(o[g+1]);let l=[],d=gt.empty();for(let g=a.length-1;g>=0;--g)if(!gR(l,a[g])){let y=a[g],_=u[g];_=ke(_);let A=s.Cu(y);if(_ instanceof Uu)l.push(y);else{let C=ro(_,A);C!=null&&(l.push(y),d.set(y,C))}}let f=new Ut(l);return new Oh(d,f,s.fieldTransforms)}function hR(t,e,n,r=!1){return ro(n,t.Nu(r?4:3,e))}function ro(t,e){if(pR(t=ke(t)))return nI("Unsupported field value:",e,t),fR(t,e);if(t instanceof ur)return function(r,i){if(!lR(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=ro(a,i.Fu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ZS(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Oe.fromDate(r);return{timestampValue:Ds(i.serializer,o)}}if(r instanceof Oe){let o=new Oe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ds(i.serializer,o)}}if(r instanceof Ji)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pn)return{bytesValue:aA(i.serializer,r._byteString)};if(r instanceof Se){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Mu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:xw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ju)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Mu("VectorValues must only contain numeric values.");return Rw(a.serializer,u)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${Kh(r)}`)}(t,e)}function fR(t,e){let n={};return PS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):to(t,(r,i)=>{let o=ro(i,e.bu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function pR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Oe||t instanceof Ji||t instanceof Pn||t instanceof Se||t instanceof ur||t instanceof ju)}function nI(t,e,n){if(!pR(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Kh(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function gw(t,e,n){if((e=ke(e))instanceof pn)return e._internalPath;if(typeof e=="string")return rI(t,e);throw Lh("Field path arguments must be of type string or ",t,!1,void 0,n)}var w2=new RegExp("[~\\*/\\[\\]]");function rI(t,e,n){if(e.search(w2)>=0)throw Lh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new pn(...e.split("."))._internalPath}catch{throw Lh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Lh(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new k(x.INVALID_ARGUMENT,a+t+u)}function gR(t,e){return t.some(n=>n.isEqual(e))}var Xi=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Se(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new mw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Yh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},mw=class extends Xi{data(){return super.data()}};function Yh(t,e){return typeof e=="string"?rI(t,e):e instanceof pn?e._internalPath:e._delegate._internalPath}function mR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new k(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Bu=class{},eo=class extends Bu{};function dr(t,e,...n){let r=[];e instanceof Bu&&r.push(e),r=r.concat(n),function(o){let s=o.filter(u=>u instanceof yw).length,a=o.filter(u=>u instanceof Vh).length;if(s>1||s>0&&a>0)throw new k(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Vh=class t extends eo{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return CR(e._query,n),new at(e.firestore,e.converter,Gy(e._query,n))}_parse(e){let n=no(e.firestore);return function(o,s,a,u,l,d,f){let g;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new k(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){IS(f,d);let y=[];for(let _ of f)y.push(wS(u,o,_));g={arrayValue:{values:y}}}else g=wS(u,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||IS(f,d),g=hR(a,s,f,d==="in"||d==="not-in");return fe.create(l,d,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function yR(t,e,n){let r=e,i=Yh("where",t);return Vh._create(i,r,n)}var yw=class t extends Bu{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:_e.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)CR(s,u),s=Gy(s,u)}(e._query,n),new at(e.firestore,e.converter,Gy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var vw=class t extends eo{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,o,s){if(i.startAt!==null)throw new k(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new k(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Gi(o,s)}(e._query,this._field,this._direction);return new at(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new hn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function vR(t,e="asc"){let n=e,r=Yh("orderBy",t);return vw._create(r,n)}var jh=class t extends eo{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new at(e.firestore,e.converter,ih(e._query,this._limit,this._limitType))}};function wR(t){return YA("limit",t),jh._create("limit",t,"F")}function IR(t){return YA("limitToLast",t),jh._create("limitToLast",t,"L")}var Uh=class t extends eo{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=bR(e,this.type,this._docOrFields,this._inclusive);return new at(e.firestore,e.converter,function(i,o){return new hn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,n))}};function ER(...t){return Uh._create("startAt",t,!0)}function _R(...t){return Uh._create("startAfter",t,!1)}var Bh=class t extends eo{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=bR(e,this.type,this._docOrFields,this._inclusive);return new at(e.firestore,e.converter,function(i,o){return new hn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,n))}};function DR(...t){return Bh._create("endBefore",t,!1)}function TR(...t){return Bh._create("endAt",t,!0)}function bR(t,e,n,r){if(n[0]=ke(n[0]),n[0]instanceof Xi)return function(o,s,a,u,l){if(!u)throw new k(x.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of gs(o))if(f.field.isKeyField())d.push(Hi(s,u.key));else{let g=u.data.field(f.field);if(qh(g))throw new k(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let y=f.field.canonicalString();throw new k(x.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}d.push(g)}return new Mn(d,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=no(t.firestore);return function(s,a,u,l,d,f){let g=s.explicitOrderBy;if(d.length>g.length)throw new k(x.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let _=0;_<d.length;_++){let A=d[_];if(g[_].field.isKeyField()){if(typeof A!="string")throw new k(x.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof A}`);if(!Sw(s)&&A.indexOf("/")!==-1)throw new k(x.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${A}' contains a slash.`);let C=s.path.child(ge.fromString(A));if(!q.isDocumentKey(C))throw new k(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${C}' is not because it contains an odd number of segments.`);let P=new q(C);y.push(Hi(a,P))}else{let C=hR(u,l,A);y.push(C)}}return new Mn(y,f)}(t._query,t.firestore._databaseId,i,e,n,r)}}function wS(t,e,n){if(typeof(n=ke(n))=="string"){if(n==="")throw new k(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Sw(e)&&n.indexOf("/")!==-1)throw new k(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(ge.fromString(n));if(!q.isDocumentKey(r))throw new k(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Hi(t,new q(r))}if(n instanceof Se)return Hi(t,n._key);throw new k(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kh(n)}.`)}function IS(t,e){if(!Array.isArray(t)||t.length===0)throw new k(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function CR(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new k(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new k(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Ps=class{convertValue(e,n="none"){switch(zi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ne(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Kr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw G()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return to(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ne(s.doubleValue));return new ju(o)}convertGeoPoint(e){return new Ji(Ne(e.latitude),Ne(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=bw(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(_u(e));default:return null}}convertTimestamp(e){let n=or(e);return new Oe(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=ge.fromString(e);Q(vA(r));let i=new Qr(r.get(1),r.get(3)),o=new q(r.popFirst(5));return i.isEqual(n)||Ue(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function Zh(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var ww=class extends Ps{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pn(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Se(this.firestore,null,n)}};var ir=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},tn=class extends Xi{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Hr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Yh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Hr=class extends tn{data(e={}){return super.data(e)}},gn=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ir(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Hr(this._firestore,this._userDataWriter,r.key,r,new ir(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new k(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Hr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ir(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Hr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ir(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:I2(a.type),doc:u,oldIndex:l,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function I2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G()}}function iI(t,e){return t instanceof tn&&e instanceof tn?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof gn&&e instanceof gn&&t._firestore===e._firestore&&Xw(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function SR(t){t=me(t,Se);let e=me(t.firestore,Pe);return WA(tt(e),t._key).then(n=>uI(e,t,n))}var cr=class extends Ps{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pn(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Se(this.firestore,null,n)}};function AR(t){t=me(t,Se);let e=me(t.firestore,Pe),n=tt(e),r=new cr(e);return f2(n,t._key).then(i=>new tn(e,r,t._key,i,new ir(i!==null&&i.hasLocalMutations,!0),t.converter))}function RR(t){t=me(t,Se);let e=me(t.firestore,Pe);return WA(tt(e),t._key,{source:"server"}).then(n=>uI(e,t,n))}function xR(t){t=me(t,at);let e=me(t.firestore,Pe),n=tt(e),r=new cr(e);return mR(t._query),KA(n,t._query).then(i=>new gn(e,r,t,i))}function MR(t){t=me(t,at);let e=me(t.firestore,Pe),n=tt(e),r=new cr(e);return p2(n,t._query).then(i=>new gn(e,r,t,i))}function NR(t){t=me(t,at);let e=me(t.firestore,Pe),n=tt(e),r=new cr(e);return KA(n,t._query,{source:"server"}).then(i=>new gn(e,r,t,i))}function oI(t,e,n){t=me(t,Se);let r=me(t.firestore,Pe),i=Zh(t.converter,e,n);return Us(r,[Qh(no(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ve.none())])}function sI(t,e,n,...r){t=me(t,Se);let i=me(t.firestore,Pe),o=no(i),s;return s=typeof(e=ke(e))=="string"||e instanceof pn?tI(o,"updateDoc",t._key,e,n,r):eI(o,"updateDoc",t._key,e),Us(i,[s.toMutation(t._key,Ve.exists(!0))])}function PR(t){return Us(me(t.firestore,Pe),[new ei(t._key,Ve.none())])}function kR(t,e){let n=me(t.firestore,Pe),r=Ku(t),i=Zh(t.converter,e);return Us(n,[Qh(no(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ve.exists(!1))]).then(()=>r)}function aI(t,...e){var n,r,i;t=ke(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||aw(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(aw(e[s])){let f=e[s];e[s]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let u,l,d;if(t instanceof Se)l=me(t.firestore,Pe),d=Os(t._key.path),u={next:f=>{e[s]&&e[s](uI(l,t,f))},error:e[s+1],complete:e[s+2]};else{let f=me(t,at);l=me(f.firestore,Pe),d=f._query;let g=new cr(l);u={next:y=>{e[s]&&e[s](new gn(l,g,f,y))},error:e[s+1],complete:e[s+2]},mR(t._query)}return function(g,y,_,A){let C=new Ms(A),P=new Fu(y,C,_);return g.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return Lw(yield Ns(g),P)})),()=>{C.za(),g.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return Vw(yield Ns(g),P)}))}}(tt(l),d,a,u)}function OR(t,e){return g2(tt(t=me(t,Pe)),aw(e)?e:{next:e})}function Us(t,e){return function(r,i){let o=new Qe;return r.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return Kj(yield Ww(r),i,o)})),o.promise}(tt(t),e)}function uI(t,e,n){let r=n.docs.get(e._key),i=new cr(t);return new tn(t,i,e._key,r,new ir(n.hasPendingWrites,n.fromCache),e.converter)}var E2={maxAttempts:5};var $h=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=no(e)}set(e,n,r){this._verifyNotCommitted();let i=qr(e,this._firestore),o=Zh(i.converter,n,r),s=Qh(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Ve.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let o=qr(e,this._firestore),s;return s=typeof(n=ke(n))=="string"||n instanceof pn?tI(this._dataReader,"WriteBatch.update",o._key,n,r,i):eI(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,Ve.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=qr(e,this._firestore);return this._mutations=this._mutations.concat(new ei(n._key,Ve.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new k(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function qr(t,e){if((t=ke(t)).firestore!==e)throw new k(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Iw=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=no(n)}get(n){let r=qr(n,this._firestore),i=new ww(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return G();let s=o[0];if(s.isFoundDocument())return new Xi(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Xi(this._firestore,i,r._key,null,r.converter);throw G()})}set(n,r,i){let o=qr(n,this._firestore),s=Zh(o.converter,r,i),a=Qh(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){let s=qr(n,this._firestore),a;return a=typeof(r=ke(r))=="string"||r instanceof pn?tI(this._dataReader,"Transaction.update",s._key,r,i,o):eI(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){let r=qr(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=qr(e,this._firestore),r=new cr(this._firestore);return super.get(e).then(i=>new tn(this._firestore,r,n._key,i._document,new ir(!1,!1),n.converter))}};function FR(t,e,n){t=me(t,Pe);let r=Object.assign(Object.assign({},E2),n);return function(o){if(o.maxAttempts<1)throw new k(x.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new Qe;return o.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let l=yield l2(o);new rw(o.asyncQueue,l,a,s,u).ru()})),u.promise}(tt(t),i=>e(new Iw(t,i)),r)}function LR(){return new Uu("deleteField")}function VR(){return new dw("serverTimestamp")}function jR(...t){return new hw("arrayUnion",t)}function UR(...t){return new fw("arrayRemove",t)}function BR(t){return new pw("increment",t)}(function(e,n=!0){(function(i){ks=i})(l_),_a(new di("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Pe(new Dy(r.getProvider("auth-internal")),new Sy(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new k(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qr(l.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),qt(w0,"4.7.1",e),qt(w0,"4.7.1","esm2017")})();var _2="@firebase/firestore-compat",D2="0.3.36";function pI(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new k("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function $R(){if(typeof Uint8Array>"u")throw new k("unimplemented","Uint8Arrays are not available in this environment.")}function qR(){if(!kS())throw new k("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Jh=class t{constructor(e){this._delegate=e}static fromBase64String(e){return qR(),new t(Pn.fromBase64String(e))}static fromUint8Array(e){return $R(),new t(Pn.fromUint8Array(e))}toBase64(){return qR(),this._delegate.toBase64()}toUint8Array(){return $R(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function cI(t){return T2(t,["next","error","complete"])}function T2(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var lI=class{enableIndexedDbPersistence(e,n){return eR(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return tR(e._delegate)}clearIndexedDbPersistence(e){return rR(e._delegate)}},Xh=class{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Qr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Xt("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){Yw(this._delegate,e,n,r)}enableNetwork(){return oR(this._delegate)}disableNetwork(){return sR(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Qw("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return iR(this._delegate)}onSnapshotsInSync(e){return OR(this._delegate,e)}get app(){if(!this._appCompat)throw new k("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new qs(this,Zw(this._delegate,e))}catch(n){throw xt(n,"collection()","Firestore.collection()")}}doc(e){try{return new kn(this,Ku(this._delegate,e))}catch(n){throw xt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ao(this,ZA(this._delegate,e))}catch(n){throw xt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return FR(this._delegate,n=>e(new ef(this,n)))}batch(){return tt(this._delegate),new tf(new $h(this._delegate,e=>Us(this._delegate,e)))}loadBundle(e){return aR(this._delegate,e)}namedQuery(e){return uR(this._delegate,e).then(n=>n?new ao(this,n):null)}},Bs=class extends Ps{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jh(new Pn(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return kn.forKey(n,this.firestore,null)}};function b2(t){ES(t)}var ef=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Bs(e)}get(e){let n=io(e);return this._delegate.get(n).then(r=>new oo(this._firestore,new tn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){let i=io(e);return r?(pI("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=io(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=io(e);return this._delegate.delete(n),this}},tf=class{constructor(e){this._delegate=e}set(e,n,r){let i=io(e);return r?(pI("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=io(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=io(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},$s=class t{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){let r=new Hr(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new so(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let r=t.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new t(e,new Bs(e),n),i.set(n,o)),o}};$s.INSTANCES=new WeakMap;var kn=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Bs(e)}static forPath(e,n,r){if(e.length%2!==0)throw new k("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new Se(n._delegate,r,new q(e)))}static forKey(e,n,r){return new t(n,new Se(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new qs(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new qs(this.firestore,Zw(this._delegate,e))}catch(n){throw xt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ke(e),e instanceof Se?Jw(this._delegate,e):!1}set(e,n){n=pI("DocumentReference.set",n);try{return n?oI(this._delegate,e,n):oI(this._delegate,e)}catch(r){throw xt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?sI(this._delegate,e):sI(this._delegate,e,n,...r)}catch(i){throw xt(i,"updateDoc()","DocumentReference.update()")}}delete(){return PR(this._delegate)}onSnapshot(...e){let n=zR(e),r=HR(e,i=>new oo(this.firestore,new tn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return aI(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=AR(this._delegate):e?.source==="server"?n=RR(this._delegate):n=SR(this._delegate),n.then(r=>new oo(this.firestore,new tn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter($s.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function xt(t,e,n){return t.message=t.message.replace(e,n),t}function zR(t){for(let e of t)if(typeof e=="object"&&!cI(e))return e;return{}}function HR(t,e){var n,r;let i;return cI(t[0])?i=t[0]:cI(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var oo=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new kn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return iI(this._delegate,e._delegate)}},so=class extends oo{data(e){let n=this._delegate.data(e);return this._delegate._converter||_S(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},ao=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Bs(e)}where(e,n,r){try{return new t(this.firestore,dr(this._delegate,yR(e,n,r)))}catch(i){throw xt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,dr(this._delegate,vR(e,n)))}catch(r){throw xt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,dr(this._delegate,wR(e)))}catch(n){throw xt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,dr(this._delegate,IR(e)))}catch(n){throw xt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,dr(this._delegate,ER(...e)))}catch(n){throw xt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,dr(this._delegate,_R(...e)))}catch(n){throw xt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,dr(this._delegate,DR(...e)))}catch(n){throw xt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,dr(this._delegate,TR(...e)))}catch(n){throw xt(n,"endAt()","Query.endAt()")}}isEqual(e){return Xw(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=MR(this._delegate):e?.source==="server"?n=NR(this._delegate):n=xR(this._delegate),n.then(r=>new Qu(this.firestore,new gn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let n=zR(e),r=HR(e,i=>new Qu(this.firestore,new gn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return aI(this._delegate,n,r)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter($s.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},dI=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new so(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Qu=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new ao(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new so(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new dI(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new so(this._firestore,r))})}isEqual(e){return iI(this._delegate,e._delegate)}},qs=class t extends ao{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new kn(this.firestore,e):null}doc(e){try{return e===void 0?new kn(this.firestore,Ku(this._delegate)):new kn(this.firestore,Ku(this._delegate,e))}catch(n){throw xt(n,"doc()","CollectionReference.doc()")}}add(e){return kR(this._delegate,e).then(n=>new kn(this.firestore,n))}isEqual(e){return Jw(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter($s.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function io(t){return me(t,Se)}var hI=class t{constructor(...e){this._delegate=new pn(...e)}static documentId(){return new t(Be.keyField().canonicalString())}isEqual(e){return e=ke(e),e instanceof pn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var fI=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=VR();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=LR();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=jR(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=UR(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=BR(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var C2={Firestore:Xh,GeoPoint:Ji,Timestamp:Oe,Blob:Jh,Transaction:ef,WriteBatch:tf,DocumentReference:kn,DocumentSnapshot:oo,Query:ao,QueryDocumentSnapshot:so,QuerySnapshot:Qu,CollectionReference:qs,FieldPath:hI,FieldValue:fI,setLogLevel:b2,CACHE_SIZE_UNLIMITED:JA};function S2(t,e){t.INTERNAL.registerComponent(new di("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},C2)))}function A2(t){S2(t,(e,n)=>new Xh(e,n,new lI)),t.registerVersion(_2,D2)}A2(vt);function R2(t,e=Ra){return new ie(n=>{let r;return e!=null?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}function GR(t,e){return R2(t,e)}function x2(t,e){return GR(t,e).pipe(mi(void 0),Ma(),ee(n=>{let[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function yI(t,e){return GR(t,e).pipe(ee(n=>({payload:n,type:"query"})))}var nf=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let r=this.ref.collection(e),{ref:i,query:o}=ZR(r,n);return new of(i,o,this.afs)}snapshotChanges(){return x2(this.ref,this.afs.schedulers.outsideAngular).pipe(St)}valueChanges(e={}){return this.snapshotChanges().pipe(ee(({payload:n})=>e.idField?De(H({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return ve(this.ref.get(e)).pipe(St)}};function rf(t,e){return yI(t,e).pipe(mi(void 0),Ma(),ee(n=>{let[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let l=o.find(f=>f.doc.ref.isEqual(a.ref)),d=r?.payload.docs.find(f=>f.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function WR(t,e,n){return rf(t,n).pipe(gi((r,i)=>M2(r,i.map(o=>o.payload),e),[]),Dp(),ee(r=>r.map(i=>({type:i.type,payload:i}))))}function M2(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=N2(t,r))}),t}function gI(t,e,n,...r){let i=t.slice();return i.splice(e,n,...r),i}function N2(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return gI(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return gI(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return gI(t,e.oldIndex,1);break}return t}function KR(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var of=class{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=rf(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(ee(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(mi(void 0),Ma(),Je(([r,i])=>i.length>0||!r),ee(([,r])=>r),St)}auditTrail(e){return this.stateChanges(e).pipe(gi((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=KR(e);return WR(this.query,n,this.afs.schedulers.outsideAngular).pipe(St)}valueChanges(e={}){return yI(this.query,this.afs.schedulers.outsideAngular).pipe(ee(n=>n.payload.docs.map(r=>e.idField?De(H({},r.data()),{[e.idField]:r.id}):r.data())),St)}get(e){return ve(this.query.get(e)).pipe(St)}add(e){return this.ref.add(e)}doc(e){return new nf(this.ref.doc(e),this.afs)}},mI=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?rf(this.query,this.afs.schedulers.outsideAngular).pipe(St):rf(this.query,this.afs.schedulers.outsideAngular).pipe(ee(n=>n.filter(r=>e.indexOf(r.type)>-1)),Je(n=>n.length>0),St)}auditTrail(e){return this.stateChanges(e).pipe(gi((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=KR(e);return WR(this.query,n,this.afs.schedulers.outsideAngular).pipe(St)}valueChanges(e={}){return yI(this.query,this.afs.schedulers.outsideAngular).pipe(ee(r=>r.payload.docs.map(i=>e.idField?H({[e.idField]:i.id},i.data()):i.data())),St)}get(e){return ve(this.query.get(e)).pipe(St)}},QR=new z("angularfire2.enableFirestorePersistence"),YR=new z("angularfire2.firestore.persistenceSettings"),P2=new z("angularfire2.firestore.settings"),k2=new z("angularfire2.firestore.use-emulator");function ZR(t,e=n=>n){return{query:e(t),ref:t}}var vI=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,o,s,a,u,l,d,f,g,y,_,A,C,P,j){this.schedulers=u;let F=ou(n,a,r),B=d;f&&cy(F,a,g,_,A,C,y,P),[this.firestore,this.persistenceEnabled$]=kd(`${F.name}.firestore`,"AngularFirestore",F.name,()=>{let Z=a.runOutsideAngular(()=>F.firestore());if(o&&Z.settings(o),B&&Z.useEmulator(...B),i&&!kr(s)){let K=()=>{try{return ve(Z.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(E){return typeof console<"u"&&console.warn(E),Y(!1)}};return[Z,a.runOutsideAngular(K)]}else return[Z,Y(!1)]},[o,B,i])}collection(n,r){let i;typeof n=="string"?i=this.firestore.collection(n):i=n;let{ref:o,query:s}=ZR(i,r),a=this.schedulers.ngZone.run(()=>o);return new of(a,s,this)}collectionGroup(n,r){let i=r||(s=>s),o=this.firestore.collectionGroup(n);return new mI(i(o),this)}doc(n){let r;typeof n=="string"?r=this.firestore.doc(n):r=n;let i=this.schedulers.ngZone.run(()=>r);return new nf(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(L(ts),L(ns,8),L(QR,8),L(P2,8),L(nt),L(he),L(es),L(YR,8),L(k2,8),L(su,8),L(ry,8),L(iy,8),L(oy,8),L(sy,8),L(ay,8),L(uy,8),L(Oi,8))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),o5=(()=>{class t{constructor(){vt.registerVersion("angularfire",Tn.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:QR,useValue:!0},{provide:YR,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=bt({type:t});static \u0275inj=Tt({providers:[vI]})}return t})();var JR=class t{constructor(e,n){this.afAuth=e;this.firestore=n}accessToken=null;registrarUsuario(e,n){return this.afAuth.createUserWithEmailAndPassword(e,n)}getUsuarioActual(){return this.afAuth.authState}loguearUsuario(e,n){return this.afAuth.signInWithEmailAndPassword(e,n)}registrarIngreso(e){let n=new Date().toISOString();return this.firestore.collection("logs").add({email:e,fechaIngreso:n})}guardarUsuario(e,n){return this.firestore.collection("usuarios").add({email:e,avatar:n})}verificarUsuario(e){return this.firestore.collection("usuarios",n=>n.where("email","==",e)).get()}obtenerDatosUsuario(e){return this.firestore.collection("usuarios",n=>n.where("email","==",e)).valueChanges()}logout(){return this.accessToken=null,this.afAuth.signOut()}static \u0275fac=function(n){return new(n||t)(L(su),L(vI))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})};var se="primary",lc=Symbol("RouteTitle"),DI=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Qs(t){return new DI(t)}function F2(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function L2(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!On(t[n],e[n]))return!1;return!0}function On(t,e){let n=t?TI(t):void 0,r=e?TI(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!cx(t[i],e[i]))return!1;return!0}function TI(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function cx(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function lx(t){return t.length>0?t[t.length-1]:null}function si(t){return Ip(t)?t:Wa(t)?ve(Promise.resolve(t)):Y(t)}var V2={exact:hx,subset:fx},dx={exact:j2,subset:U2,ignored:()=>!0};function XR(t,e,n){return V2[n.paths](t.root,e.root,n.matrixParams)&&dx[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function j2(t,e){return On(t,e)}function hx(t,e,n){if(!co(t.segments,e.segments)||!uf(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!hx(t.children[r],e.children[r],n))return!1;return!0}function U2(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>cx(t[n],e[n]))}function fx(t,e,n){return px(t,e,e.segments,n)}function px(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!co(i,n)||e.hasChildren()||!uf(i,n,r))}else if(t.segments.length===n.length){if(!co(t.segments,n)||!uf(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!fx(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!co(t.segments,i)||!uf(t.segments,i,r)||!t.children[se]?!1:px(t.children[se],e,o,r)}}function uf(t,e,n){return e.every((r,i)=>dx[n](t[i].parameters,r.parameters))}var fr=class{constructor(e=new Ee([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Qs(this.queryParams),this._queryParamMap}toString(){return q2.serialize(this)}},Ee=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return cf(this)}},uo=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Qs(this.parameters),this._parameterMap}toString(){return mx(this)}};function B2(t,e){return co(t,e)&&t.every((n,r)=>On(n.parameters,e[r].parameters))}function co(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function $2(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===se&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==se&&(n=n.concat(e(i,r)))}),n}var dc=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>new Ys,providedIn:"root"});let t=e;return t})(),Ys=class{parse(e){let n=new CI(e);return new fr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Yu(e.root,!0)}`,r=G2(e.queryParams),i=typeof e.fragment=="string"?`#${z2(e.fragment)}`:"";return`${n}${r}${i}`}},q2=new Ys;function cf(t){return t.segments.map(e=>mx(e)).join("/")}function Yu(t,e){if(!t.hasChildren())return cf(t);if(e){let n=t.children[se]?Yu(t.children[se],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==se&&r.push(`${i}:${Yu(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=$2(t,(r,i)=>i===se?[Yu(t.children[se],!1)]:[`${i}:${Yu(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[se]!=null?`${cf(t)}/${n[0]}`:`${cf(t)}/(${n.join("//")})`}}function gx(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function sf(t){return gx(t).replace(/%3B/gi,";")}function z2(t){return encodeURI(t)}function bI(t){return gx(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function lf(t){return decodeURIComponent(t)}function ex(t){return lf(t.replace(/\+/g,"%20"))}function mx(t){return`${bI(t.path)}${H2(t.parameters)}`}function H2(t){return Object.entries(t).map(([e,n])=>`;${bI(e)}=${bI(n)}`).join("")}function G2(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${sf(n)}=${sf(i)}`).join("&"):`${sf(n)}=${sf(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var W2=/^[^\/()?;#]+/;function wI(t){let e=t.match(W2);return e?e[0]:""}var K2=/^[^\/()?;=#]+/;function Q2(t){let e=t.match(K2);return e?e[0]:""}var Y2=/^[^=?&#]+/;function Z2(t){let e=t.match(Y2);return e?e[0]:""}var J2=/^[^&#]+/;function X2(t){let e=t.match(J2);return e?e[0]:""}var CI=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ee([],{}):new Ee([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[se]=new Ee(e,n)),r}parseSegment(){let e=wI(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new J(4009,!1);return this.capture(e),new uo(lf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=Q2(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=wI(this.remaining);i&&(r=i,this.capture(r))}e[lf(n)]=lf(r)}parseQueryParam(e){let n=Z2(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=X2(this.remaining);s&&(r=s,this.capture(r))}let i=ex(n),o=ex(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=wI(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new J(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=se);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[se]:new Ee([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new J(4011,!1)}};function yx(t){return t.segments.length>0?new Ee([],{[se]:t}):t}function vx(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=vx(i);if(r===se&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new Ee(t.segments,e);return eU(n)}function eU(t){if(t.numberOfChildren===1&&t.children[se]){let e=t.children[se];return new Ee(t.segments.concat(e.segments),e.children)}return t}function nc(t){return t instanceof fr}function tU(t,e,n=null,r=null){let i=wx(t);return Ix(i,e,n,r)}function wx(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new Ee(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=yx(r);return e??i}function Ix(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return II(i,i,i,n,r);let o=nU(e);if(o.toRoot())return II(i,i,new Ee([],{}),n,r);let s=rU(o,i,t),a=s.processChildren?Xu(s.segmentGroup,s.index,o.commands):_x(s.segmentGroup,s.index,o.commands);return II(i,s.segmentGroup,a,n,r)}function df(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function rc(t){return typeof t=="object"&&t!=null&&t.outlets}function II(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let s;t===e?s=n:s=Ex(t,e,n);let a=yx(vx(s));return new fr(a,o,i)}function Ex(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=Ex(o,e,n)}),new Ee(t.segments,r)}var hf=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&df(r[0]))throw new J(4003,!1);let i=r.find(rc);if(i&&i!==lx(r))throw new J(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function nU(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new hf(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new hf(n,e,r)}var Gs=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function rU(t,e,n){if(t.isAbsolute)return new Gs(e,!0,0);if(!n)return new Gs(e,!1,NaN);if(n.parent===null)return new Gs(n,!0,0);let r=df(t.commands[0])?0:1,i=n.segments.length-1+r;return iU(n,i,t.numberOfDoubleDots)}function iU(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new J(4005,!1);i=r.segments.length}return new Gs(r,!1,i-o)}function oU(t){return rc(t[0])?t[0].outlets:{[se]:t}}function _x(t,e,n){if(t??=new Ee([],{}),t.segments.length===0&&t.hasChildren())return Xu(t,e,n);let r=sU(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new Ee(t.segments.slice(0,r.pathIndex),{});return o.children[se]=new Ee(t.segments.slice(r.pathIndex),t.children),Xu(o,0,i)}else return r.match&&i.length===0?new Ee(t.segments,{}):r.match&&!t.hasChildren()?SI(t,e,n):r.match?Xu(t,0,i):SI(t,e,n)}function Xu(t,e,n){if(n.length===0)return new Ee(t.segments,{});{let r=oU(n),i={};if(Object.keys(r).some(o=>o!==se)&&t.children[se]&&t.numberOfChildren===1&&t.children[se].segments.length===0){let o=Xu(t.children[se],e,n);return new Ee(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=_x(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ee(t.segments,i)}}function sU(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(rc(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!nx(u,l,s))return o;r+=2}else{if(!nx(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function SI(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(rc(o)){let u=aU(o.outlets);return new Ee(r,u)}if(i===0&&df(n[0])){let u=t.segments[e];r.push(new uo(u.path,tx(n[0]))),i++;continue}let s=rc(o)?o.outlets[se]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&df(a)?(r.push(new uo(s,tx(a))),i+=2):(r.push(new uo(s,{})),i++)}return new Ee(r,{})}function aU(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=SI(new Ee([],{}),0,r))}),e}function tx(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function nx(t,e,n){return t==n.path&&On(e,n.parameters)}var ec="imperative",rt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(rt||{}),nn=class{constructor(e,n){this.id=e,this.url=n}},Zs=class extends nn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=rt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},pr=class extends nn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=rt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},$t=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}($t||{}),ff=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(ff||{}),hr=class extends nn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=rt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},oi=class extends nn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=rt.NavigationSkipped}},ic=class extends nn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=rt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},pf=class extends nn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=rt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},AI=class extends nn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=rt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},RI=class extends nn{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=rt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},xI=class extends nn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=rt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},MI=class extends nn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=rt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},NI=class{constructor(e){this.route=e,this.type=rt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},PI=class{constructor(e){this.route=e,this.type=rt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},kI=class{constructor(e){this.snapshot=e,this.type=rt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},OI=class{constructor(e){this.snapshot=e,this.type=rt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},FI=class{constructor(e){this.snapshot=e,this.type=rt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},LI=class{constructor(e){this.snapshot=e,this.type=rt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gf=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=rt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},oc=class{},Js=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function uU(t,e){return t.providers&&!t._injector&&(t._injector=pd(t.providers,e,`Route: ${t.path}`)),t._injector??e}function mn(t){return t.outlet||se}function cU(t,e){let n=t.filter(r=>mn(r)===e);return n.push(...t.filter(r=>mn(r)!==e)),n}function hc(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var VI=class{get injector(){return hc(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new fc(this.rootInjector),this.attachRef=null}},fc=(()=>{let e=class e{constructor(r){this.rootInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new VI(this.rootInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(L(Dt))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),mf=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=jI(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=jI(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=UI(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return UI(e,this._root).map(n=>n.value)}};function jI(t,e){if(t===e.value)return e;for(let n of e.children){let r=jI(t,n);if(r)return r}return null}function UI(t,e){if(t===e.value)return[e];for(let n of e.children){let r=UI(t,n);if(r.length)return r.unshift(e),r}return[]}var Bt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Hs(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var yf=class extends mf{constructor(e,n){super(e),this.snapshot=n,QI(this,e)}toString(){return this.snapshot.toString()}};function Dx(t){let e=lU(t),n=new ot([new uo("",{})]),r=new ot({}),i=new ot({}),o=new ot({}),s=new ot(""),a=new Xs(n,r,o,s,i,se,t,e.root);return a.snapshot=e.root,new yf(new Bt(a,[]),e)}function lU(t){let e={},n={},r={},i="",o=new Ws([],e,r,i,n,se,t,null,{});return new wf("",new Bt(o,[]))}var Xs=class{constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ee(l=>l[lc]))??Y(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ee(e=>Qs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ee(e=>Qs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function vf(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:H(H({},e.params),t.params),data:H(H({},e.data),t.data),resolve:H(H(H(H({},t.data),e.data),i?.data),t._resolvedData)}:r={params:H({},t.params),data:H({},t.data),resolve:H(H({},t.data),t._resolvedData??{})},i&&bx(i)&&(r.resolve[lc]=i.title),r}var Ws=class{get title(){return this.data?.[lc]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Qs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Qs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},wf=class extends mf{constructor(e,n){super(n),this.url=e,QI(this,n)}toString(){return Tx(this._root)}};function QI(t,e){e.value._routerState=t,e.children.forEach(n=>QI(t,n))}function Tx(t){let e=t.children.length>0?` { ${t.children.map(Tx).join(", ")} } `:"";return`${t.value}${e}`}function EI(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,On(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),On(e.params,n.params)||t.paramsSubject.next(n.params),L2(e.url,n.url)||t.urlSubject.next(n.url),On(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function BI(t,e){let n=On(t.params,e.params)&&B2(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||BI(t.parent,e.parent))}function bx(t){return typeof t.title=="string"||t.title===null}var dU=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=se,this.activateEvents=new ht,this.deactivateEvents=new ht,this.attachEvents=new ht,this.detachEvents=new ht,this.parentContexts=V(fc),this.location=V(Pr),this.changeDetector=V(Ka),this.inputBinder=V(Tf,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new J(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new J(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new J(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new J(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,l=new $I(r,u,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Ho({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[id]});let t=e;return t})(),$I=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Xs?this.route:e===fc?this.childContexts:this.parent.get(e,n)}},Tf=new z(""),rx=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,o=xa([i.queryParams,i.params,i.data]).pipe(Me(([s,a,u],l)=>(u=H(H(H({},s),a),u),l===0?Y(u):Promise.resolve(u)))).subscribe(s=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=IC(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:u}of a.inputs)r.activatedComponentRef.setInput(u,s[u])});this.outletDataSubscriptions.set(r,o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})();function hU(t,e,n){let r=sc(t,e._root,n?n._root:void 0);return new yf(r,e)}function sc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=fU(t,e,n);return new Bt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>sc(t,a)),s}}let r=pU(e.value),i=e.children.map(o=>sc(t,o));return new Bt(r,i)}}function fU(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return sc(t,r,i);return sc(t,r)})}function pU(t){return new Xs(new ot(t.url),new ot(t.params),new ot(t.queryParams),new ot(t.fragment),new ot(t.data),t.outlet,t.component,t)}var ac=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},Cx="ngNavigationCancelingError";function If(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=nc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Sx(!1,$t.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function Sx(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[Cx]=!0,n.cancellationCode=e,n}function gU(t){return Ax(t)&&nc(t.url)}function Ax(t){return!!t&&t[Cx]}var mU=(t,e,n,r)=>ee(i=>(new qI(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),qI=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),EI(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Hs(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Hs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Hs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Hs(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new LI(o.value.snapshot))}),e.children.length&&this.forwardEvent(new OI(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(EI(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),EI(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Ef=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ks=class{constructor(e,n){this.component=e,this.route=n}};function yU(t,e,n){let r=t._root,i=e?e._root:null;return Zu(r,i,n,[r.value])}function vU(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ta(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!OD(t)?t:e.get(t):r}function Zu(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Hs(e);return t.children.forEach(s=>{wU(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>tc(a,n.getContext(s),i)),i}function wU(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=IU(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Ef(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Zu(t,e,a?a.children:null,r,i):Zu(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ks(a.outlet.component,s))}else s&&tc(e,a,i),i.canActivateChecks.push(new Ef(r)),o.component?Zu(t,null,a?a.children:null,r,i):Zu(t,null,n,r,i);return i}function IU(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!co(t.url,e.url);case"pathParamsOrQueryParamsChange":return!co(t.url,e.url)||!On(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!BI(t,e)||!On(t.queryParams,e.queryParams);case"paramsChange":default:return!BI(t,e)}}function tc(t,e,n){let r=Hs(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?tc(s,e.children.getContext(o),n):tc(s,null,n):tc(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Ks(e.outlet.component,i)):n.canDeactivateChecks.push(new Ks(null,i)):n.canDeactivateChecks.push(new Ks(null,i))}function pc(t){return typeof t=="function"}function EU(t){return typeof t=="boolean"}function _U(t){return t&&pc(t.canLoad)}function DU(t){return t&&pc(t.canActivate)}function TU(t){return t&&pc(t.canActivateChild)}function bU(t){return t&&pc(t.canDeactivate)}function CU(t){return t&&pc(t.canMatch)}function Rx(t){return t instanceof Bn||t?.name==="EmptyError"}var af=Symbol("INITIAL_VALUE");function ea(){return Me(t=>xa(t.map(e=>e.pipe(qn(1),mi(af)))).pipe(ee(e=>{for(let n of e)if(n!==!0){if(n===af)return af;if(n===!1||SU(n))return n}return!0}),Je(e=>e!==af),qn(1)))}function SU(t){return nc(t)||t instanceof ac}function AU(t,e){return ze(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?Y(De(H({},n),{guardsResult:!0})):RU(s,r,i,t).pipe(ze(a=>a&&EU(a)?xU(r,o,t,e):Y(a)),ee(a=>De(H({},n),{guardsResult:a})))})}function RU(t,e,n,r){return ve(t).pipe(ze(i=>OU(i.component,i.route,n,e,r)),Ht(i=>i!==!0,!0))}function xU(t,e,n,r){return ve(e).pipe($n(i=>Co(NU(i.route.parent,r),MU(i.route,r),kU(t,i.path,n),PU(t,i.route,n))),Ht(i=>i!==!0,!0))}function MU(t,e){return t!==null&&e&&e(new FI(t)),Y(!0)}function NU(t,e){return t!==null&&e&&e(new kI(t)),Y(!0)}function PU(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Y(!0);let i=r.map(o=>fl(()=>{let s=hc(e)??n,a=ta(o,s),u=DU(a)?a.canActivate(e,t):Yt(s,()=>a(e,t));return si(u).pipe(Ht())}));return Y(i).pipe(ea())}function kU(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>vU(s)).filter(s=>s!==null).map(s=>fl(()=>{let a=s.guards.map(u=>{let l=hc(s.node)??n,d=ta(u,l),f=TU(d)?d.canActivateChild(r,t):Yt(l,()=>d(r,t));return si(f).pipe(Ht())});return Y(a).pipe(ea())}));return Y(o).pipe(ea())}function OU(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Y(!0);let s=o.map(a=>{let u=hc(e)??i,l=ta(a,u),d=bU(l)?l.canDeactivate(t,e,n,r):Yt(u,()=>l(t,e,n,r));return si(d).pipe(Ht())});return Y(s).pipe(ea())}function FU(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return Y(!0);let o=i.map(s=>{let a=ta(s,t),u=_U(a)?a.canLoad(e,n):Yt(t,()=>a(e,n));return si(u)});return Y(o).pipe(ea(),xx(r))}function xx(t){return pp(He(e=>{if(typeof e!="boolean")throw If(t,e)}),ee(e=>e===!0))}function LU(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return Y(!0);let o=i.map(s=>{let a=ta(s,t),u=CU(a)?a.canMatch(e,n):Yt(t,()=>a(e,n));return si(u)});return Y(o).pipe(ea(),xx(r))}var uc=class{constructor(e){this.segmentGroup=e||null}},cc=class extends Error{constructor(e){super(),this.urlTree=e}};function zs(t){return bo(new uc(t))}function VU(t){return bo(new J(4e3,!1))}function jU(t){return bo(Sx(!1,$t.GuardRejected))}var zI=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Y(r);if(i.numberOfChildren>1||!i.children[se])return VU(`${e.redirectTo}`);i=i.children[se]}}applyRedirectCommands(e,n,r,i,o){if(typeof n!="string"){let a=n,{queryParams:u,fragment:l,routeConfig:d,url:f,outlet:g,params:y,data:_,title:A}=i,C=Yt(o,()=>a({params:y,data:_,queryParams:u,fragment:l,routeConfig:d,url:f,outlet:g,title:A}));if(C instanceof fr)throw new cc(C);n=C}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new cc(s);return s}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new fr(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Ee(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new J(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},HI={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function UU(t,e,n,r,i){let o=Mx(t,e,n);return o.matched?(r=uU(e,r),LU(r,e,n,i).pipe(ee(s=>s===!0?o:H({},HI)))):Y(o)}function Mx(t,e,n){if(e.path==="**")return BU(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?H({},HI):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||F2)(n,t,e);if(!i)return H({},HI);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?H(H({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function BU(t){return{matched:!0,parameters:t.length>0?lx(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function ix(t,e,n,r){return n.length>0&&zU(t,n,r)?{segmentGroup:new Ee(e,qU(r,new Ee(n,t.children))),slicedSegments:[]}:n.length===0&&HU(t,n,r)?{segmentGroup:new Ee(t.segments,$U(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ee(t.segments,t.children),slicedSegments:n}}function $U(t,e,n,r){let i={};for(let o of n)if(bf(t,e,o)&&!r[mn(o)]){let s=new Ee([],{});i[mn(o)]=s}return H(H({},r),i)}function qU(t,e){let n={};n[se]=e;for(let r of t)if(r.path===""&&mn(r)!==se){let i=new Ee([],{});n[mn(r)]=i}return n}function zU(t,e,n){return n.some(r=>bf(t,e,r)&&mn(r)!==se)}function HU(t,e,n){return n.some(r=>bf(t,e,r))}function bf(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function GU(t,e,n){return e.length===0&&!t.children[n]}var GI=class{};function WU(t,e,n,r,i,o,s="emptyOnly"){return new WI(t,e,n,r,i,s,o).recognize()}var KU=31,WI=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new zI(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new J(4002,`'${e.segmentGroup}'`)}recognize(){let e=ix(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ee(({children:n,rootSnapshot:r})=>{let i=new Bt(r,n),o=new wf("",i),s=tU(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Ws([],Object.freeze({}),Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),se,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,se,n).pipe(ee(r=>({children:r,rootSnapshot:n})),Ir(r=>{if(r instanceof cc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof uc?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(ee(s=>s instanceof Bt?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return ve(o).pipe($n(s=>{let a=r.children[s],u=cU(n,s);return this.processSegmentGroup(e,u,a,s,i)}),gi((s,a)=>(s.push(...a),s)),Er(null),Tp(),ze(s=>{if(s===null)return zs(r);let a=Nx(s);return QU(a),Y(a)}))}processSegment(e,n,r,i,o,s,a){return ve(n).pipe($n(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a).pipe(Ir(l=>{if(l instanceof uc)return Y(null);throw l}))),Ht(u=>!!u),Ir(u=>{if(Rx(u))return GU(r,i,o)?Y(new GI):zs(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,u){return mn(r)!==s&&(s===se||!bf(i,o,r))?zs(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):zs(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:d,positionalParamSegments:f,remainingSegments:g}=Mx(n,i,o);if(!u)return zs(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>KU&&(this.allowRedirects=!1));let y=new Ws(o,l,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,ox(i),mn(i),i.component??i._loadedComponent??null,i,sx(i)),_=vf(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(_.params),y.data=Object.freeze(_.data);let A=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,y,e);return this.applyRedirects.lineralizeSegments(i,A).pipe(ze(C=>this.processSegment(e,r,n,C.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=UU(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Me(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Me(({routes:l})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:g,remainingSegments:y}=u,_=new Ws(g,f,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,ox(r),mn(r),r.component??r._loadedComponent??null,r,sx(r)),A=vf(_,s,this.paramsInheritanceStrategy);_.params=Object.freeze(A.params),_.data=Object.freeze(A.data);let{segmentGroup:C,slicedSegments:P}=ix(n,g,y,l);if(P.length===0&&C.hasChildren())return this.processChildren(d,l,C,_).pipe(ee(F=>new Bt(_,F)));if(l.length===0&&P.length===0)return Y(new Bt(_,[]));let j=mn(r)===o;return this.processSegment(d,l,C,P,j?se:o,!0,_).pipe(ee(F=>new Bt(_,F instanceof Bt?[F]:[])))}))):zs(n)))}getChildConfig(e,n,r){return n.children?Y({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?Y({routes:n._loadedRoutes,injector:n._loadedInjector}):FU(e,n,r,this.urlSerializer).pipe(ze(i=>i?this.configLoader.loadChildren(e,n).pipe(He(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):jU(n))):Y({routes:[],injector:e})}};function QU(t){t.sort((e,n)=>e.value.outlet===se?-1:n.value.outlet===se?1:e.value.outlet.localeCompare(n.value.outlet))}function YU(t){let e=t.value.routeConfig;return e&&e.path===""}function Nx(t){let e=[],n=new Set;for(let r of t){if(!YU(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=Nx(r.children);e.push(new Bt(r.value,i))}return e.filter(r=>!n.has(r))}function ox(t){return t.data||{}}function sx(t){return t.resolve||{}}function ZU(t,e,n,r,i,o){return ze(s=>WU(t,e,n,r,s.extractedUrl,i,o).pipe(ee(({state:a,tree:u})=>De(H({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function JU(t,e){return ze(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Y(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of Px(u))s.add(l);let a=0;return ve(s).pipe($n(u=>o.has(u)?XU(u,r,t,e):(u.data=vf(u,u.parent,t).resolve,Y(void 0))),He(()=>a++),So(1),ze(u=>a===s.size?Y(n):It))})}function Px(t){let e=t.children.map(n=>Px(n)).flat();return[t,...e]}function XU(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!bx(i)&&(o[lc]=i.title),eB(o,t,e,r).pipe(ee(s=>(t._resolvedData=s,t.data=vf(t,t.parent,n).resolve,null)))}function eB(t,e,n,r){let i=TI(t);if(i.length===0)return Y({});let o={};return ve(i).pipe(ze(s=>tB(t[s],e,n,r).pipe(Ht(),He(a=>{if(a instanceof ac)throw If(new Ys,a);o[s]=a}))),So(1),_p(o),Ir(s=>Rx(s)?It:bo(s)))}function tB(t,e,n,r){let i=hc(e)??r,o=ta(t,i),s=o.resolve?o.resolve(e,n):Yt(i,()=>o(e,n));return si(s)}function _I(t){return Me(e=>{let n=t(e);return n?ve(n).pipe(ee(()=>e)):Y(e)})}var kx=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===se);return i}getResolvedTitleForRoute(r){return r.data[lc]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>V(nB),providedIn:"root"});let t=e;return t})(),nB=(()=>{let e=class e extends kx{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(L(XC))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),gc=new z("",{providedIn:"root",factory:()=>({})}),rB=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=KD({type:e,selectors:[["ng-component"]],standalone:!0,features:[aC],decls:1,vars:0,template:function(i,o){i&1&&ym(0,"router-outlet")},dependencies:[dU],encapsulation:2});let t=e;return t})();function YI(t){let e=t.children&&t.children.map(YI),n=e?De(H({},t),{children:e}):H({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==se&&(n.component=rB),n}var _f=new z(""),ZI=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=V(Ed)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Y(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=si(r.loadComponent()).pipe(ee(Ox),He(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),_r(()=>{this.componentLoaders.delete(r)})),o=new Eo(i,()=>new je).pipe(Io());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Y({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=iB(i,this.compiler,r,this.onLoadEndListener).pipe(_r(()=>{this.childrenLoaders.delete(i)})),a=new Eo(s,()=>new je).pipe(Io());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function iB(t,e,n,r){return si(t.loadChildren()).pipe(ee(Ox),ze(i=>i instanceof Ua||Array.isArray(i)?Y(i):ve(e.compileModuleAsync(i))),ee(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(_f,[],{optional:!0,self:!0}).flat()),{routes:s.map(YI),injector:o}}))}function oB(t){return t&&typeof t=="object"&&"default"in t}function Ox(t){return oB(t)?t.default:t}var JI=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>V(sB),providedIn:"root"});let t=e;return t})(),sB=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Fx=new z(""),Lx=new z("");function aB(t,e,n){let r=t.get(Lx),i=t.get(st);return t.get(he).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),uB(t))),{onViewTransitionCreated:u}=r;return u&&Yt(t,()=>u({transition:a,from:e,to:n})),s})}function uB(t){return new Promise(e=>{mm({read:()=>setTimeout(e)},{injector:t})})}var cB=new z(""),XI=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new je,this.transitionAbortSubject=new je,this.configLoader=V(ZI),this.environmentInjector=V(Dt),this.urlSerializer=V(dc),this.rootContexts=V(fc),this.location=V(Jo),this.inputBindingEnabled=V(Tf,{optional:!0})!==null,this.titleStrategy=V(kx),this.options=V(gc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=V(JI),this.createViewTransition=V(Fx,{optional:!0}),this.navigationErrorHandler=V(cB,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Y(void 0),this.rootComponentType=null;let r=o=>this.events.next(new NI(o)),i=o=>this.events.next(new PI(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(De(H(H({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new ot({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:ec,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Je(s=>s.id!==0),ee(s=>De(H({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Me(s=>{let a=!1,u=!1;return Y(s).pipe(Me(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",$t.SupersededByNewNavigation),It;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?De(H({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!d&&f!=="reload"){let g="";return this.events.next(new oi(l.id,this.urlSerializer.serialize(l.rawUrl),g,ff.IgnoredSameUrlNavigation)),l.resolve(!1),It}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Y(l).pipe(Me(g=>{let y=this.transitions?.getValue();return this.events.next(new Zs(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),y!==this.transitions?.getValue()?It:Promise.resolve(g)}),ZU(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),He(g=>{s.targetSnapshot=g.targetSnapshot,s.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=De(H({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let y=new pf(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(y)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:g,extractedUrl:y,source:_,restoredState:A,extras:C}=l,P=new Zs(g,this.urlSerializer.serialize(y),_,A);this.events.next(P);let j=Dx(this.rootComponentType).snapshot;return this.currentTransition=s=De(H({},l),{targetSnapshot:j,urlAfterRedirects:y,extras:De(H({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,Y(s)}else{let g="";return this.events.next(new oi(l.id,this.urlSerializer.serialize(l.extractedUrl),g,ff.IgnoredByUrlHandlingStrategy)),l.resolve(!1),It}}),He(l=>{let d=new AI(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),ee(l=>(this.currentTransition=s=De(H({},l),{guards:yU(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),AU(this.environmentInjector,l=>this.events.next(l)),He(l=>{if(s.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw If(this.urlSerializer,l.guardsResult);let d=new RI(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),Je(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",$t.GuardRejected),!1)),_I(l=>{if(l.guards.canActivateChecks.length)return Y(l).pipe(He(d=>{let f=new xI(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),Me(d=>{let f=!1;return Y(d).pipe(JU(this.paramsInheritanceStrategy,this.environmentInjector),He({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",$t.NoDataFromResolver)}}))}),He(d=>{let f=new MI(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),_I(l=>{let d=f=>{let g=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(f.routeConfig).pipe(He(y=>{f.component=y}),ee(()=>{})));for(let y of f.children)g.push(...d(y));return g};return xa(d(l.targetSnapshot.root)).pipe(Er(null),qn(1))}),_I(()=>this.afterPreactivation()),Me(()=>{let{currentSnapshot:l,targetSnapshot:d}=s,f=this.createViewTransition?.(this.environmentInjector,l.root,d.root);return f?ve(f).pipe(ee(()=>s)):Y(s)}),ee(l=>{let d=hU(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=De(H({},l),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,s}),He(()=>{this.events.next(new oc)}),mU(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),qn(1),He({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new pr(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Cp(this.transitionAbortSubject.pipe(He(l=>{throw l}))),_r(()=>{!a&&!u&&this.cancelNavigationTransition(s,"",$t.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ir(l=>{if(u=!0,Ax(l))this.events.next(new hr(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),gU(l)?this.events.next(new Js(l.url,l.navigationBehaviorOptions)):s.resolve(!1);else{let d=new ic(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0);try{let f=Yt(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(f instanceof ac){let{message:g,cancellationCode:y}=If(this.urlSerializer,f);this.events.next(new hr(s.id,this.urlSerializer.serialize(s.extractedUrl),g,y)),this.events.next(new Js(f.redirectTo,f.navigationBehaviorOptions))}else{this.events.next(d);let g=r.errorHandler(l);s.resolve(!!g)}}catch(f){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(f)}}return It}))}))}cancelNavigationTransition(r,i,o){let s=new hr(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function lB(t){return t!==ec}var dB=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>V(hB),providedIn:"root"});let t=e;return t})(),KI=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},hB=(()=>{let e=class e extends KI{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Xg(e)))(o||e)}})(),e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Vx=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>V(fB),providedIn:"root"});let t=e;return t})(),fB=(()=>{let e=class e extends Vx{constructor(){super(...arguments),this.location=V(Jo),this.urlSerializer=V(dc),this.options=V(gc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=V(JI),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new fr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Dx(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Zs)this.stateMemento=this.createStateMemento();else if(r instanceof oi)this.rawUrlTree=i.initialUrl;else if(r instanceof pf){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??o,i)}}else r instanceof oc?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):r instanceof hr&&(r.code===$t.GuardRejected||r.code===$t.NoDataFromResolver)?this.restoreHistory(i):r instanceof ic?this.restoreHistory(i,!0):r instanceof pr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=r instanceof fr?this.urlSerializer.serialize(r):r;if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=H(H({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=H(H({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Xg(e)))(o||e)}})(),e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ju=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Ju||{});function jx(t,e){t.events.pipe(Je(n=>n instanceof pr||n instanceof hr||n instanceof ic||n instanceof oi),ee(n=>n instanceof pr||n instanceof oi?Ju.COMPLETE:(n instanceof hr?n.code===$t.Redirect||n.code===$t.SupersededByNewNavigation:!1)?Ju.REDIRECTING:Ju.FAILED),Je(n=>n!==Ju.REDIRECTING),qn(1)).subscribe(()=>{e()})}function pB(t){throw t}var gB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},mB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},lo=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=V(md),this.stateManager=V(Vx),this.options=V(gc,{optional:!0})||{},this.pendingTasks=V(Zn),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=V(XI),this.urlSerializer=V(dc),this.location=V(Jo),this.urlHandlingStrategy=V(JI),this._events=new je,this.errorHandler=this.options.errorHandler||pB,this.navigated=!1,this.routeReuseStrategy=V(dB),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=V(_f,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!V(Tf,{optional:!0}),this.eventsSubscription=new Le,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof hr&&i.code!==$t.Redirect&&i.code!==$t.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof pr)this.navigated=!0;else if(i instanceof Js){let a=i.navigationBehaviorOptions,u=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),l=H({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||lB(o.source)},a);this.scheduleNavigation(u,ec,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}vB(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ec,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let l=H({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(YI),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:u,preserveFragment:l}=i,d=l?this.currentUrlTree.fragment:a,f=null;switch(u??this.options.defaultQueryParamsHandling){case"merge":f=H(H({},this.currentUrlTree.queryParams),s);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}f!==null&&(f=this.removeEmptyProps(f));let g;try{let y=o?o.snapshot:this.routerState.snapshot.root;g=wx(y)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),g=this.currentUrlTree.root}return Ix(g,r,f,d??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=nc(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,ec,null,i)}navigate(r,i={skipLocationChange:!1}){return yB(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=H({},gB):i===!1?o=H({},mB):o=i,nc(r))return XR(this.currentUrlTree,r,o);let s=this.parseUrl(r);return XR(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let u,l,d;a?(u=a.resolve,l=a.reject,d=a.promise):d=new Promise((g,y)=>{u=g,l=y});let f=this.pendingTasks.add();return jx(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:u,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function yB(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new J(4008,!1)}function vB(t){return!(t instanceof oc)&&!(t instanceof Js)}var Df=class{};var wB=(()=>{let e=class e{constructor(r,i,o,s,a){this.router=r,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Je(r=>r instanceof pr),$n(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let o=[];for(let s of i){s.providers&&!s._injector&&(s._injector=pd(s.providers,r,`Route: ${s.path}`));let a=s._injector??r,u=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(u,s.children??s._loadedRoutes))}return ve(o).pipe(wr())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;i.loadChildren&&i.canLoad===void 0?o=this.loader.loadChildren(r,i):o=Y(null);let s=o.pipe(ze(a=>a===null?Y(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return ve([s,a]).pipe(wr())}else return s})}};e.\u0275fac=function(i){return new(i||e)(L(lo),L(Ed),L(Dt),L(Df),L(ZI))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ux=new z(""),IB=(()=>{let e=class e{constructor(r,i,o,s,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Zs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof pr?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof oi&&r.code===ff.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof gf&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new gf(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){yb()},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})();function EB(t){return t.routerState.root}function mc(t,e){return{\u0275kind:t,\u0275providers:e}}function _B(){let t=V(Nt);return e=>{let n=t.get(Jn);if(e!==n.components[0])return;let r=t.get(lo),i=t.get(Bx);t.get(eE)===1&&r.initialNavigation(),t.get($x,null,le.Optional)?.setUpPreloading(),t.get(Ux,null,le.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Bx=new z("",{factory:()=>new je}),eE=new z("",{providedIn:"root",factory:()=>1});function DB(){return mc(2,[{provide:eE,useValue:0},{provide:wd,multi:!0,deps:[Nt],useFactory:e=>{let n=e.get(AC,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(lo),o=e.get(Bx);jx(i,()=>{r(!0)}),e.get(XI).afterPreactivation=()=>(r(!0),o.closed?Y(void 0):o),i.initialNavigation()}))}}])}function TB(){return mc(3,[{provide:wd,multi:!0,useFactory:()=>{let e=V(lo);return()=>{e.setUpLocationChangeListener()}}},{provide:eE,useValue:2}])}var $x=new z("");function bB(t){return mc(0,[{provide:$x,useExisting:wB},{provide:Df,useExisting:t}])}function CB(){return mc(8,[rx,{provide:Tf,useExisting:rx}])}function SB(t){let e=[{provide:Fx,useValue:aB},{provide:Lx,useValue:H({skipNextTransition:!!t?.skipInitialTransition},t)}];return mc(9,e)}var ax=new z("ROUTER_FORROOT_GUARD"),AB=[Jo,{provide:dc,useClass:Ys},lo,fc,{provide:Xs,useFactory:EB,deps:[lo]},ZI,[]],S5=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[AB,[],{provide:_f,multi:!0,useValue:r},{provide:ax,useFactory:NB,deps:[[lo,new Kn,new Vg]]},{provide:gc,useValue:i||{}},i?.useHash?xB():MB(),RB(),i?.preloadingStrategy?bB(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?PB(i):[],i?.bindToComponentInputs?CB().\u0275providers:[],i?.enableViewTransitions?SB().\u0275providers:[],kB()]}}static forChild(r){return{ngModule:e,providers:[{provide:_f,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(L(ax,8))},e.\u0275mod=bt({type:e}),e.\u0275inj=Tt({});let t=e;return t})();function RB(){return{provide:Ux,useFactory:()=>{let t=V(NC),e=V(he),n=V(gc),r=V(XI),i=V(dc);return n.scrollOffset&&t.setOffset(n.scrollOffset),new IB(i,r,t,e,n)}}}function xB(){return{provide:Pi,useClass:xC}}function MB(){return{provide:Pi,useClass:Pm}}function NB(t){return"guarded"}function PB(t){return[t.initialNavigation==="disabled"?TB().\u0275providers:[],t.initialNavigation==="enabledBlocking"?DB().\u0275providers:[]]}var ux=new z("");function kB(){return[{provide:ux,useFactory:_B},{provide:Id,multi:!0,useExisting:ux}]}export{ie as a,je as b,ot as c,ve as d,ee as e,QM as f,_r as g,J as h,PD as i,W as j,Tt as k,z as l,L as m,Kn as n,KD as o,bt as p,Ho as q,Go as r,id as s,AG as t,RG as u,Xg as v,Nt as w,ht as x,he as y,Nr as z,xG as A,MG as B,NG as C,Zt as D,fd as E,FG as F,i1 as G,m1 as H,R1 as I,Xb as J,x1 as K,tC as L,nC as M,ym as N,LG as O,rC as P,VG as Q,jG as R,UG as S,BG as T,K1 as U,Q1 as V,$G as W,qG as X,Z1 as Y,oC as Z,J1 as _,zG as $,X1 as aa,HG as ba,aC as ca,GG as da,WG as ea,KG as fa,Wa as ga,Ka as ha,wC as ia,QG as ja,xF as ka,Ni as la,I3 as ma,E3 as na,_3 as oa,MC as pa,KF as qa,tL as ra,F3 as sa,r8 as ta,i8 as ua,Zs as va,pr as wa,hr as xa,ic as ya,dU as za,lo as Aa,S5 as Ba,Tn as Ca,p8 as Da,jL as Ea,Oi as Fa,es as Ga,e0 as Ha,ts as Ia,o6 as Ja,ru as Ka,Qm as La,T8 as Ma,b8 as Na,I6 as Oa,Zw as Pa,O6 as Qa,dr as Ra,vR as Sa,kR as Ta,aI as Ua,o5 as Va,JR as Wa};
